(function(ae,Me){"object"==typeof exports&&"undefined"!=typeof module?Me():"function"==typeof define&&define.amd?define(Me):Me()})(0,function(){"use strict";function ae(Ze){var he=!0,Ee=!1,we=null,Ue={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function _e(Ce){return!!(Ce&&Ce!==document&&"HTML"!==Ce.nodeName&&"BODY"!==Ce.nodeName&&"classList"in Ce&&"contains"in Ce.classList)}function Ie(Ce){Ce.classList.contains("focus-visible")||(Ce.classList.add("focus-visible"),Ce.setAttribute("data-focus-visible-added",""))}function qe(Ce){he=!1}function st(){document.addEventListener("mousemove",Se),document.addEventListener("mousedown",Se),document.addEventListener("mouseup",Se),document.addEventListener("pointermove",Se),document.addEventListener("pointerdown",Se),document.addEventListener("pointerup",Se),document.addEventListener("touchmove",Se),document.addEventListener("touchstart",Se),document.addEventListener("touchend",Se)}function Se(Ce){Ce.target.nodeName&&"html"===Ce.target.nodeName.toLowerCase()||(he=!1,document.removeEventListener("mousemove",Se),document.removeEventListener("mousedown",Se),document.removeEventListener("mouseup",Se),document.removeEventListener("pointermove",Se),document.removeEventListener("pointerdown",Se),document.removeEventListener("pointerup",Se),document.removeEventListener("touchmove",Se),document.removeEventListener("touchstart",Se),document.removeEventListener("touchend",Se))}document.addEventListener("keydown",function(Ce){Ce.metaKey||Ce.altKey||Ce.ctrlKey||(_e(Ze.activeElement)&&Ie(Ze.activeElement),he=!0)},!0),document.addEventListener("mousedown",qe,!0),document.addEventListener("pointerdown",qe,!0),document.addEventListener("touchstart",qe,!0),document.addEventListener("visibilitychange",function(Ce){"hidden"===document.visibilityState&&(Ee&&(he=!0),st())},!0),st(),Ze.addEventListener("focus",function(Ce){var Ke,ue;_e(Ce.target)&&(he||"INPUT"===(ue=(Ke=Ce.target).tagName)&&Ue[Ke.type]&&!Ke.readOnly||"TEXTAREA"===ue&&!Ke.readOnly||Ke.isContentEditable)&&Ie(Ce.target)},!0),Ze.addEventListener("blur",function(Ce){var Ke;_e(Ce.target)&&(Ce.target.classList.contains("focus-visible")||Ce.target.hasAttribute("data-focus-visible-added"))&&(Ee=!0,window.clearTimeout(we),we=window.setTimeout(function(){Ee=!1},100),(Ke=Ce.target).hasAttribute("data-focus-visible-added")&&(Ke.classList.remove("focus-visible"),Ke.removeAttribute("data-focus-visible-added")))},!0),Ze.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&Ze.host?Ze.host.setAttribute("data-js-focus-visible",""):Ze.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var Me;window.applyFocusVisiblePolyfill=ae;try{Me=new CustomEvent("focus-visible-polyfill-ready")}catch(Ze){(Me=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(Me)}"undefined"!=typeof document&&ae(document)}),function(ae,Me){"object"==typeof exports&&"undefined"!=typeof module?Me(exports):"function"==typeof define&&define.amd?define(["exports"],Me):Me(ae.echarts={})}(this,function(ae){"use strict";var e,t,n,i,a,o,_n,Me=2311,Ze=function(){return Me++},he="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(t={},n=(e=navigator.userAgent).match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(e),n&&(t.firefox=!0,t.version=n[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1]),o&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:"undefined"!=typeof document}),Ee={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},we={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},Ue=Object.prototype.toString,_e=Array.prototype,Ie=_e.forEach,qe=_e.filter,st=_e.slice,Se=_e.map,Ce=_e.reduce,Ke={};function Mt(e,t){"createCanvas"===e&&(_n=null),Ke[e]=t}function ue(e){if(null==e||"object"!=typeof e)return e;var t=e,n=Ue.call(e);if("[object Array]"===n){if(!lt(e)){t=[];for(var i=0,a=e.length;i<a;i++)t[i]=ue(e[i])}}else if(we[n]){if(!lt(e)){var o=e.constructor;if(e.constructor.from)t=o.from(e);else for(t=new o(e.length),i=0,a=e.length;i<a;i++)t[i]=ue(e[i])}}else if(!Ee[n]&&!lt(e)&&!Te(e))for(var r in t={},e)e.hasOwnProperty(r)&&(t[r]=ue(e[r]));return t}function pe(e,t,n){if(!X(t)||!X(e))return n?ue(t):e;for(var i in t)if(t.hasOwnProperty(i)){var a=e[i],o=t[i];!X(o)||!X(a)||z(o)||z(a)||Te(o)||Te(a)||Oe(o)||Oe(a)||lt(o)||lt(a)?!n&&i in e||(e[i]=ue(t[i])):pe(a,o,n)}return e}function ln(e,t){for(var n=e[0],i=1,a=e.length;i<a;i++)n=pe(n,e[i],t);return n}function fe(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ie(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n?null!=t[i]:null==e[i])&&(e[i]=t[i]);return e}function Ut(){return Ke.createCanvas()}function ft(){return _n=_n||Ut().getContext("2d")}function E(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1}function H(e,t){var n=e.prototype;function i(){}for(var a in i.prototype=t.prototype,e.prototype=new i,n)n.hasOwnProperty(a)&&(e.prototype[a]=n[a]);(e.prototype.constructor=e).superClass=t}function j(e,t,n){ie(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function J(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function I(e,t,n){if(e&&t)if(e.forEach&&e.forEach===Ie)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function O(e,t,n){if(e&&t){if(e.map&&e.map===Se)return e.map(t,n);for(var i=[],a=0,o=e.length;a<o;a++)i.push(t.call(n,e[a],a,e));return i}}function oe(e,t,n,i){if(e&&t){if(e.reduce&&e.reduce===Ce)return e.reduce(t,n,i);for(var a=0,o=e.length;a<o;a++)n=t.call(i,n,e[a],a,e);return n}}function se(e,t,n){if(e&&t){if(e.filter&&e.filter===qe)return e.filter(t,n);for(var i=[],a=0,o=e.length;a<o;a++)t.call(n,e[a],a,e)&&i.push(e[a]);return i}}function ve(e,t,n){if(e&&t)for(var i=0,a=e.length;i<a;i++)if(t.call(n,e[i],i,e))return e[i]}function Z(e,t){var n=st.call(arguments,2);return function(){return e.apply(t,n.concat(st.call(arguments)))}}function V(e){var t=st.call(arguments,1);return function(){return e.apply(this,t.concat(st.call(arguments)))}}function z(e){return"[object Array]"===Ue.call(e)}function ee(e){return"function"==typeof e}function q(e){return"[object String]"===Ue.call(e)}function X(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function Oe(e){return!!Ee[Ue.call(e)]}function ge(e){return!!we[Ue.call(e)]}function Te(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function ke(e){return e!=e}function Ne(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function De(e,t){return null!=e?e:t}function Qe(e,t,n){return null!=e?e:null!=t?t:n}function mt(){return Function.call.apply(st,arguments)}function $(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function te(e,t){if(!e)throw new Error(t)}function me(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}Ke.createCanvas=function(){return document.createElement("canvas")};var it="__ec_primitive__";function pt(e){e[it]=!0}function lt(e){return e[it]}function ye(e){var t=z(e);this.data={};var n=this;function i(a,o){t?n.set(a,o):n.set(o,a)}e instanceof ye?e.each(i):e&&I(e,i)}function ne(e){return new ye(e)}function at(e,t){for(var n=new e.constructor(e.length+t.length),i=0;i<e.length;i++)n[i]=e[i];var a=e.length;for(i=0;i<t.length;i++)n[i+a]=t[i];return n}function We(){}ye.prototype={constructor:ye,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=Z(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var cl=(Object.freeze||Object)({$override:Mt,clone:ue,merge:pe,mergeAll:ln,extend:fe,defaults:ie,createCanvas:Ut,getContext:ft,indexOf:E,inherits:H,mixin:j,isArrayLike:J,each:I,map:O,reduce:oe,filter:se,find:ve,bind:Z,curry:V,isArray:z,isFunction:ee,isString:q,isObject:X,isBuiltInObject:Oe,isTypedArray:ge,isDom:Te,eqNaN:ke,retrieve:Ne,retrieve2:De,retrieve3:Qe,slice:mt,normalizeCssArray:$,assert:te,trim:me,setAsPrimitive:pt,isPrimitive:lt,createHashMap:ne,concatArray:at,noop:We}),dl="undefined"==typeof Float32Array?Array:Float32Array;function Fi(e,t){var n=new dl(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function kt(e,t){return e[0]=t[0],e[1]=t[1],e}function Nn(e){var t=new dl(2);return t[0]=e[0],t[1]=e[1],t}function $m(e,t,n){return e[0]=t,e[1]=n,e}function rc(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function wr(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e}function pi(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Sr(e){return Math.sqrt(sc(e))}function sc(e){return e[0]*e[0]+e[1]*e[1]}function fl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function xo(e,t){var n=Sr(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function Mr(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var gi=Mr;function Km(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Gi=Km;function Qm(e,t,n,i){return e[0]=t[0]+i*(n[0]-t[0]),e[1]=t[1]+i*(n[1]-t[1]),e}function Je(e,t,n){var i=t[0],a=t[1];return e[0]=n[0]*i+n[2]*a+n[4],e[1]=n[1]*i+n[3]*a+n[5],e}function mi(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function vi(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var uI=(Object.freeze||Object)({create:Fi,copy:kt,clone:Nn,set:$m,add:rc,scaleAndAdd:wr,sub:pi,len:Sr,length:Sr,lenSquare:sc,lengthSquare:sc,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:fl,normalize:xo,distance:Mr,dist:gi,distanceSquare:Km,distSquare:Gi,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:Qm,applyTransform:Je,min:mi,max:vi});function pl(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function _o(e,t){return{target:e,topTarget:t&&t.topTarget}}pl.prototype={constructor:pl,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(_o(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,i=e.offsetY,a=n-this._x,o=i-this._y;this._x=n,this._y=i,t.drift(a,o,e),this.dispatchToElement(_o(t,e),"drag",e.event);var r=this.findHover(n,i,t).target,s=this._dropTarget;t!==(this._dropTarget=r)&&(s&&r!==s&&this.dispatchToElement(_o(s,e),"dragleave",e.event),r&&r!==s&&this.dispatchToElement(_o(r,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(_o(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(_o(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Jm=Array.prototype.slice,It=function(e){this._$handlers={},this._$eventProcessor=e};function e0(e,t,n,i,a,o){var d,f,r=e._$handlers;if("function"==typeof n&&(a=i,i=n,n=null),!i||!t)return e;f=e._$eventProcessor,null!=(d=n)&&f&&f.normalizeQuery&&(d=f.normalizeQuery(d)),n=d,r[t]||(r[t]=[]);for(var s=0;s<r[t].length;s++)if(r[t][s].h===i)return e;var l={h:i,one:o,query:n,ctx:a||e,callAtLast:i.zrEventfulCallAtLast},u=r[t].length-1,h=r[t][u];return h&&h.callAtLast?r[t].splice(u,0,l):r[t].push(l),e}It.prototype={constructor:It,one:function(e,t,n,i){return e0(this,e,t,n,i,!0)},on:function(e,t,n,i){return e0(this,e,t,n,i,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var i=[],a=0,o=n[e].length;a<o;a++)n[e][a].h!==t&&i.push(n[e][a]);n[e]=i}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,a=i.length;3<a&&(i=Jm.call(i,1));for(var o=t.length,r=0;r<o;){var s=t[r];if(n&&n.filter&&null!=s.query&&!n.filter(e,s.query))r++;else{switch(a){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i)}s.one?(t.splice(r,1),o--):r++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var i=arguments,a=i.length;4<a&&(i=Jm.call(i,1,i.length-1));for(var o=i[i.length-1],r=t.length,s=0;s<r;){var l=t[s];if(n&&n.filter&&null!=l.query&&!n.filter(e,l.query))s++;else{switch(a){case 1:l.h.call(o);break;case 2:l.h.call(o,i[1]);break;case 3:l.h.call(o,i[1],i[2]);break;default:l.h.apply(o,i)}l.one?(t.splice(s,1),r--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var hI=Math.log(2);function lc(e,t,n,i,a,o){var r=i+"-"+a,s=e.length;if(o.hasOwnProperty(r))return o[r];if(1===t){var l=Math.round(Math.log((1<<s)-1&~a)/hI);return e[n][l]}for(var u=i|1<<n,h=n+1;i&1<<h;)h++;for(var c=0,d=0,f=0;d<s;d++){var p=1<<d;p&a||(c+=(f%2?-1:1)*e[n][d]*lc(e,t-1,h,u,a|p,o),f++)}return o[r]=c}function t0(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},a=lc(n,8,0,0,0,i);if(0!==a){for(var o=[],r=0;r<8;r++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((r+s)%2?-1:1)*lc(n,7,0===r?1:0,1<<r,1<<s,i)/a*t[r];return function(l,u,h){var c=u*o[6]+h*o[7]+1;l[0]=(u*o[0]+h*o[1]+o[2])/c,l[1]=(u*o[3]+h*o[4]+o[5])/c}}}var n0="___zrEVENTSAVED",uc=[];function hc(e,t,n,i,a){if(t.getBoundingClientRect&&he.domSupported&&!i0(t)){var o=t[n0]||(t[n0]={}),r=function(s,l,u){for(var h=u?"invTrans":"trans",c=l[h],d=l.srcCoords,f=!0,p=[],m=[],g=0;g<4;g++){var v=s[g].getBoundingClientRect(),x=2*g,y=v.left,b=v.top;p.push(y,b),f=f&&d&&y===d[x]&&b===d[1+x],m.push(s[g].offsetLeft,s[g].offsetTop)}return f&&c?c:(l.srcCoords=p,l[h]=u?t0(m,p):t0(p,m))}(function(s,l){var u=l.markers;if(u)return u;u=l.markers=[];for(var h=["left","right"],c=["top","bottom"],d=0;d<4;d++){var f=document.createElement("div"),m=d%2,g=(d>>1)%2;f.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",h[m]+":0",c[g]+":0",h[1-m]+":auto",c[1-g]+":auto",""].join("!important;"),s.appendChild(f),u.push(f)}return u}(t,o),o,a);if(r)return r(e,n,i),!0}return!1}function i0(e){return"CANVAS"===e.nodeName.toUpperCase()}var cc="undefined"!=typeof window&&!!window.addEventListener,cI=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dc=[];function fc(e,t,n,i){return n=n||{},i||!he.canvasSupported?a0(e,t,n):he.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):a0(e,t,n),n}function a0(e,t,n){if(he.domSupported&&e.getBoundingClientRect){var i=t.clientX,a=t.clientY;if(i0(e)){var o=e.getBoundingClientRect();return n.zrX=i-o.left,void(n.zrY=a-o.top)}if(hc(dc,e,i,a))return n.zrX=dc[0],void(n.zrY=dc[1])}n.zrX=n.zrY=0}function pc(e){return e||window.event}function Xn(e,t,n){if(null!=(t=pc(t)).zrX)return t;var i=t.type;if(i&&0<=i.indexOf("touch")){var a="touchend"!==i?t.targetTouches[0]:t.changedTouches[0];a&&fc(e,a,t,n)}else fc(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var o=t.button;return null==t.which&&void 0!==o&&cI.test(t.type)&&(t.which=1&o?1:2&o?3:4&o?2:0),t}function gc(e,t,n,i){cc?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}var Ia=cc?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function o0(e){return 2===e.which||3===e.which}function mc(){this._track=[]}function r0(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}mc.prototype={constructor:mc,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,r=i.length;o<r;o++){var s=i[o],l=fc(n,s,{});a.points.push([l.zrX,l.zrY]),a.touches.push(s)}this._track.push(a)}},_recognize:function(e){for(var t in vc)if(vc.hasOwnProperty(t)){var n=vc[t](this._track,e);if(n)return n}}};var vc={pinch:function(e,t){var s,n=e.length;if(n){var i=(e[n-1]||{}).points,a=(e[n-2]||{}).points||i;if(a&&1<a.length&&i&&1<i.length){var o=r0(i)/r0(a);isFinite(o)||(o=1),t.pinchScale=o;var r=[((s=i)[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2];return t.pinchX=r[0],t.pinchY=r[1],{type:"pinch",target:e[0].target,event:t}}}}};function dI(){Ia(this.event)}function l0(){}function bo(e,t,n,i){It.call(this),this.storage=e,this.painter=t,this.painterRoot=i,n=n||new l0,this.proxy=null,this._hovered={},pl.call(this),this.setHandlerProxy(n)}l0.prototype.dispose=function(){};var fI=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function pI(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var i,a=e;a;){if(a.clipPath&&!a.clipPath.contain(t,n))return!1;a.silent&&(i=!0),a=a.parent}return!i||"silent"}return!1}function u0(e,t,n){var i=e.painter;return t<0||t>i.getWidth()||n<0||n>i.getHeight()}bo.prototype={constructor:bo,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(I(fI,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,i=u0(this,t,n),a=this._hovered,o=a.target;o&&!o.__zr&&(o=(a=this.findHover(a.x,a.y)).target);var r=this._hovered=i?{x:t,y:n}:this.findHover(t,n),s=r.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(r,"mousemove",e),s&&s!==o&&this.dispatchToElement(r,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(n||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var s,l,i=(e=e||{}).target;if(!i||!i.silent){for(var a="on"+t,o={type:t,event:l=n,target:(s=e).target,topTarget:s.topTarget,cancelBubble:!1,offsetX:l.zrX,offsetY:l.zrY,gestureEvent:l.gestureEvent,pinchX:l.pinchX,pinchY:l.pinchY,pinchScale:l.pinchScale,wheelDelta:l.zrDelta,zrByTouch:l.zrByTouch,which:l.which,stop:dI};i&&(i[a]&&(o.cancelBubble=i[a].call(i,o)),i.trigger(t,o),i=i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(t,o),this.painter&&this.painter.eachOtherLayer(function(r){"function"==typeof r[a]&&r[a].call(r,o),r.trigger&&r.trigger(t,o)}))}},findHover:function(e,t,n){for(var i=this.storage.getDisplayList(),a={x:e,y:t},o=i.length-1;0<=o;o--){var r;if(i[o]!==n&&!i[o].ignore&&(r=pI(i[o],e,t))&&(a.topTarget||(a.topTarget=i[o]),"silent"!==r)){a.target=i[o];break}}return a},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new mc);var n=this._gestureMgr;"start"===t&&n.clear();var i=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),i){var a=i.type;e.gestureEvent=a,this.dispatchToElement({target:i.target},a,i.event)}}},I(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){bo.prototype[e]=function(t){var n,i,a=t.zrX,o=t.zrY,r=u0(this,a,o);if("mouseup"===e&&r||(i=(n=this.findHover(a,o)).target),"mousedown"===e)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mouseup"===e)this._upEl=i;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<gi(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(n,e,t)}}),j(bo,It),j(bo,pl);var gI="undefined"==typeof Float32Array?Array:Float32Array;function qt(){var e=new gI(6);return wo(e),e}function wo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Ir(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Wi(e,t,n){var a=t[1]*n[0]+t[3]*n[1],o=t[0]*n[2]+t[2]*n[3],r=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=a,e[2]=o,e[3]=r,e[4]=s,e[5]=l,e}function En(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function yi(e,t,n){var i=t[0],a=t[2],o=t[4],r=t[1],s=t[3],l=t[5],u=Math.sin(n),h=Math.cos(n);return e[0]=i*h+r*u,e[1]=-i*u+r*h,e[2]=a*h+s*u,e[3]=-a*u+h*s,e[4]=h*o+u*l,e[5]=h*l-u*o,e}function Tr(e,t,n){var i=n[0],a=n[1];return e[0]=t[0]*i,e[1]=t[1]*a,e[2]=t[2]*i,e[3]=t[3]*a,e[4]=t[4]*i,e[5]=t[5]*a,e}function gl(e,t){var n=t[0],i=t[2],a=t[4],o=t[1],r=t[3],s=t[5],l=n*r-o*i;return l?(e[0]=r*(l=1/l),e[1]=-o*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-r*a)*l,e[5]=(o*a-n*s)*l,e):null}function h0(e){var t=qt();return Ir(t,e),t}var mI=(Object.freeze||Object)({create:qt,identity:wo,copy:Ir,mul:Wi,translate:En,rotate:yi,scale:Tr,invert:gl,clone:h0}),yc=wo;function Ta(e){return 5e-5<e||e<-5e-5}var On=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},Rn=On.prototype;Rn.transform=null,Rn.needLocalTransform=function(){return Ta(this.rotation)||Ta(this.position[0])||Ta(this.position[1])||Ta(this.scale[0]-1)||Ta(this.scale[1]-1)};var Aa=[];Rn.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),i=this.transform;if(n||t){i=i||qt(),n?this.getLocalTransform(i):yc(i),t&&(n?Wi(i,e.transform,i):Ir(i,e.transform)),this.transform=i;var a=this.globalScaleRatio;if(null!=a&&1!==a){this.getGlobalScale(Aa);var o=Aa[0]<0?-1:1,r=Aa[1]<0?-1:1,s=((Aa[0]-o)*a+o)/Aa[0]||0,l=((Aa[1]-r)*a+r)/Aa[1]||0;i[0]*=s,i[1]*=s,i[2]*=l,i[3]*=l}this.invTransform=this.invTransform||qt(),gl(this.invTransform,i)}else i&&yc(i)},Rn.getLocalTransform=function(e){return On.getLocalTransform(this,e)},Rn.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},Rn.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var So=[],xc=qt();Rn.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],i=this.position,a=this.scale;Ta(t-1)&&(t=Math.sqrt(t)),Ta(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),i[0]=e[4],i[1]=e[5],a[0]=t,a[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},Rn.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(Wi(So,e.invTransform,t),t=So);var n=this.origin;n&&(n[0]||n[1])&&(xc[4]=n[0],xc[5]=n[1],Wi(So,t,xc),So[4]-=n[0],So[5]-=n[1],t=So),this.setLocalTransform(t)}},Rn.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},Rn.transformCoordToLocal=function(e,t){var n=[e,t],i=this.invTransform;return i&&Je(n,n,i),n},Rn.transformCoordToGlobal=function(e,t){var n=[e,t],i=this.transform;return i&&Je(n,n,i),n},On.getLocalTransform=function(e,t){yc(t=t||[]);var n=e.origin,i=e.scale||[1,1],a=e.rotation||0,o=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),Tr(t,t,i),a&&yi(t,t,a),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=o[0],t[5]+=o[1],t};var ml={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-ml.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*ml.bounceIn(2*e):.5*ml.bounceOut(2*e-1)+.5}};function _c(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function c0(){this.head=null,this.tail=null,this._len=0}_c.prototype={constructor:_c,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,a="string"==typeof i?ml[i]:i,o="function"==typeof a?a(n):n;return this.fire("frame",o),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Ar=c0.prototype;function bc(e){this._list=new c0,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}Ar.insert=function(e){var t=new d0(e);return this.insertEntry(t),t},Ar.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},Ar.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},Ar.len=function(){return this._len},Ar.clear=function(){this.head=this.tail=null,this._len=0};var d0=function(e){this.value=e},wc=bc.prototype;wc.put=function(e,t){var n=this._list,i=this._map,a=null;if(null==i[e]){var o=n.len(),r=this._lastRemovedEntry;if(o>=this._maxSize&&0<o){var s=n.head;n.remove(s),delete i[s.key],a=s.value,this._lastRemovedEntry=s}r?r.value=t:r=new d0(t),r.key=e,n.insertEntry(r),i[e]=r}return a},wc.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},wc.clear=function(){this._list.clear(),this._map={}};var f0={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function zn(e){return(e=Math.round(e))<0?0:255<e?255:e}function Cr(e){return e<0?0:1<e?1:e}function Sc(e){return e.length&&"%"===e.charAt(e.length-1)?zn(parseFloat(e)/100*255):zn(parseInt(e,10))}function Mo(e){return e.length&&"%"===e.charAt(e.length-1)?Cr(parseFloat(e)/100):Cr(parseFloat(e))}function Mc(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Hi(e,t,n){return e+(t-e)*n}function Bn(e,t,n,i,a){return e[0]=t,e[1]=n,e[2]=i,e[3]=a,e}function Ic(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var p0=new bc(20),vl=null;function Io(e,t){vl&&Ic(vl,t),vl=p0.put(e,vl||t.slice())}function un(e,t){if(e){t=t||[];var n=p0.get(e);if(n)return Ic(t,n);var i,a=(e+="").replace(/ /g,"").toLowerCase();if(a in f0)return Ic(t,f0[a]),Io(e,t),t;if("#"===a.charAt(0))return 4===a.length?0<=(i=parseInt(a.substr(1),16))&&i<=4095?(Bn(t,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),Io(e,t),t):void Bn(t,0,0,0,1):7===a.length?0<=(i=parseInt(a.substr(1),16))&&i<=16777215?(Bn(t,(16711680&i)>>16,(65280&i)>>8,255&i,1),Io(e,t),t):void Bn(t,0,0,0,1):void 0;var o=a.indexOf("("),r=a.indexOf(")");if(-1!==o&&r+1===a.length){var s=a.substr(0,o),l=a.substr(o+1,r-(o+1)).split(","),u=1;switch(s){case"rgba":if(4!==l.length)return void Bn(t,0,0,0,1);u=Mo(l.pop());case"rgb":return 3!==l.length?void Bn(t,0,0,0,1):(Bn(t,Sc(l[0]),Sc(l[1]),Sc(l[2]),u),Io(e,t),t);case"hsla":return 4!==l.length?void Bn(t,0,0,0,1):(l[3]=Mo(l[3]),Tc(l,t),Io(e,t),t);case"hsl":return 3!==l.length?void Bn(t,0,0,0,1):(Tc(l,t),Io(e,t),t);default:return}}Bn(t,0,0,0,1)}}function Tc(e,t){var n=(parseFloat(e[0])%360+360)%360/360,i=Mo(e[1]),a=Mo(e[2]),o=a<=.5?a*(i+1):a+i-a*i,r=2*a-o;return Bn(t=t||[],zn(255*Mc(r,o,n+1/3)),zn(255*Mc(r,o,n)),zn(255*Mc(r,o,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function g0(e,t){var n=un(e);if(n){for(var i=0;i<3;i++)n[i]=t<0?n[i]*(1-t)|0:(255-n[i])*t+n[i]|0,255<n[i]?n[i]=255:e[i]<0&&(n[i]=0);return xi(n,4===n.length?"rgba":"rgb")}}function Ac(e){var t=un(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Dr(e,t,n){if(t&&t.length&&0<=e&&e<=1){n=n||[];var i=e*(t.length-1),a=Math.floor(i),o=Math.ceil(i),r=t[a],s=t[o],l=i-a;return n[0]=zn(Hi(r[0],s[0],l)),n[1]=zn(Hi(r[1],s[1],l)),n[2]=zn(Hi(r[2],s[2],l)),n[3]=Cr(Hi(r[3],s[3],l)),n}}function m0(e,t,n){if(t&&t.length&&0<=e&&e<=1){var i=e*(t.length-1),a=Math.floor(i),o=Math.ceil(i),r=un(t[a]),s=un(t[o]),l=i-a,u=xi([zn(Hi(r[0],s[0],l)),zn(Hi(r[1],s[1],l)),zn(Hi(r[2],s[2],l)),Cr(Hi(r[3],s[3],l))],"rgba");return n?{color:u,leftIndex:a,rightIndex:o,value:i}:u}}function To(e,t,n,i){if(e=un(e))return e=function(a){if(a){var o,r,s=a[0]/255,l=a[1]/255,u=a[2]/255,h=Math.min(s,l,u),c=Math.max(s,l,u),d=c-h,f=(c+h)/2;if(0==d)r=o=0;else{r=f<.5?d/(c+h):d/(2-c-h);var p=((c-s)/6+d/2)/d,m=((c-l)/6+d/2)/d,g=((c-u)/6+d/2)/d;s===c?o=g-m:l===c?o=1/3+p-g:u===c&&(o=2/3+m-p),o<0&&(o+=1),1<o&&(o-=1)}var v=[360*o,r,f];return null!=a[3]&&v.push(a[3]),v}}(e),null!=t&&(e[0]=function(a){return(a=Math.round(a))<0?0:360<a?360:a}(t)),null!=n&&(e[1]=Mo(n)),null!=i&&(e[2]=Mo(i)),xi(Tc(e),"rgba")}function yl(e,t){if((e=un(e))&&null!=t)return e[3]=Cr(t),xi(e,"rgba")}function xi(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var xI=(Object.freeze||Object)({parse:un,lift:g0,toHex:Ac,fastLerp:Dr,fastMapToColor:Dr,lerp:m0,mapToColor:m0,modifyHSL:To,modifyAlpha:yl,stringify:xi}),Cc=Array.prototype.slice;function _I(e,t){return e[t]}function bI(e,t,n){e[t]=n}function Dc(e,t,n){return(t-e)*n+e}function v0(e,t,n){return.5<n?t:e}function y0(e,t,n,i,a){var o=e.length;if(1===a)for(var r=0;r<o;r++)i[r]=Dc(e[r],t[r],n);else{var s=o&&e[0].length;for(r=0;r<o;r++)for(var l=0;l<s;l++)i[r][l]=Dc(e[r][l],t[r][l],n)}}function x0(e,t,n){var i=e.length,a=t.length;if(i!==a)if(a<i)e.length=a;else for(var o=i;o<a;o++)e.push(1===n?t[o]:Cc.call(t[o]));var r=e[0]&&e[0].length;for(o=0;o<e.length;o++)if(1===n)isNaN(e[o])&&(e[o]=t[o]);else for(var s=0;s<r;s++)isNaN(e[o][s])&&(e[o][s]=t[o][s])}function wI(e,t,n){if(e===t)return!0;var i=e.length;if(i!==t.length)return!1;if(1===n){for(var a=0;a<i;a++)if(e[a]!==t[a])return!1}else{var o=e[0].length;for(a=0;a<i;a++)for(var r=0;r<o;r++)if(e[a][r]!==t[a][r])return!1}return!0}function _0(e,t,n,i,a,o,r,s,l){var u=e.length;if(1===l)for(var h=0;h<u;h++)s[h]=Lc(e[h],t[h],n[h],i[h],a,o,r);else{var c=e[0].length;for(h=0;h<u;h++)for(var d=0;d<c;d++)s[h][d]=Lc(e[h][d],t[h][d],n[h][d],i[h][d],a,o,r)}}function Lc(e,t,n,i,a,o,r){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*r+(-3*(t-n)-2*s-l)*o+s*a+t}function SI(e){if(J(e)){var t=e.length;if(J(e[0])){for(var n=[],i=0;i<t;i++)n.push(Cc.call(e[i]));return n}return Cc.call(e)}return e}function b0(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function MI(e,t,n,i,a,o){var R,k,r=e._getter,s=e._setter,l="spline"===t,u=i.length;if(u){var h,c=J(i[0].value),d=!1,f=!1,p=c?J((k=(R=i)[R.length-1].value)&&k[0])?2:1:0;i.sort(function(R,k){return R.time-k.time}),h=i[u-1].time;for(var m=[],g=[],v=i[0].value,x=!0,y=0;y<u;y++){m.push(i[y].time/h);var b=i[y].value;if(c&&wI(b,v,p)||!c&&b===v||(x=!1),"string"==typeof(v=b)){var _=un(b);_?(b=_,d=!0):f=!0}g.push(b)}if(o||!x){var w=g[u-1];for(y=0;y<u-1;y++)c?x0(g[y],w,p):!isNaN(g[y])||isNaN(w)||f||d||(g[y]=w);c&&x0(r(e._target,a),w,p);var S,M,T,A,C,D=0,L=0;if(d)var P=[0,0,0,0];var N=new _c({target:e._target,life:h,loop:e._loop,delay:e._delay,onframe:function(R,k){var B;if(k<0)B=0;else if(k<L){for(B=Math.min(D+1,u-1);0<=B&&!(m[B]<=k);B--);B=Math.min(B,u-2)}else{for(B=D;B<u&&!(m[B]>k);B++);B=Math.min(B-1,u-2)}L=k;var G=m[(D=B)+1]-m[B];if(0!=G)if(S=(k-m[B])/G,l)if(T=g[B],M=g[0===B?B:B-1],A=g[u-2<B?u-1:B+1],C=g[u-3<B?u-1:B+2],c)_0(M,T,A,C,S,S*S,S*S*S,r(R,a),p);else{if(d)W=_0(M,T,A,C,S,S*S,S*S*S,P,1),W=b0(P);else{if(f)return v0(T,A,S);W=Lc(M,T,A,C,S,S*S,S*S*S)}s(R,a,W)}else if(c)y0(g[B],g[B+1],S,r(R,a),p);else{var W;if(d)y0(g[B],g[B+1],S,P,1),W=b0(P);else{if(f)return v0(g[B],g[B+1],S);W=Dc(g[B],g[B+1],S)}s(R,a,W)}},ondestroy:n});return t&&"spline"!==t&&(N.easing=t),N}}}function Pc(e,t,n,i){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||_I,this._setter=i||bI,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}Pc.prototype={when:function(e,t){var n=this._tracks;for(var i in t)if(t.hasOwnProperty(i)){if(!n[i]){n[i]=[];var a=this._getter(this._target,i);if(null==a)continue;0!==e&&n[i].push({time:0,value:SI(a)})}n[i].push({time:e,value:t[i]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){function n(){--o||a._doneCallback()}var i,a=this,o=0;for(var r in this._tracks)if(this._tracks.hasOwnProperty(r)){var s=MI(this,e,n,this._tracks[r],r,t);s&&(this._clipList.push(s),o++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(u,h){l(u,h);for(var c=0;c<a._onframeList.length;c++)a._onframeList[c](u,h)}}return o||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,i=0;i<t.length;i++){var a=t[i];e&&a.onframe(this._target,1),n&&n.removeClip(a)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var w0=1;"undefined"!=typeof window&&(w0=Math.max(window.devicePixelRatio||1,1));var xl=w0;function _l(){this.animators=[]}function S0(e,t,n,i,a,o,r,s){q(i)?(o=a,a=i,i=0):ee(a)?(o=a,a="linear",i=0):ee(i)?(o=i,i=0):n=ee(n)?(o=n,500):n||500,e.stopAnimation(),function d(f,p,m,g,v,x,y){var b={},_=0;for(var w in g)g.hasOwnProperty(w)&&(null!=m[w]?X(g[w])&&!J(g[w])?d(f,p?p+"."+w:w,m[w],g[w],v,x,y):(y?(b[w]=m[w],M0(f,p,w,g[w])):b[w]=g[w],_++):null==g[w]||y||M0(f,p,w,g[w]));0<_&&f.animate(p,!1).when(null==v?500:v,b).delay(x||0)}(e,"",e,t,n,i,s);var l=e.animators.slice(),u=l.length;function h(){--u||o&&o()}u||o&&o();for(var c=0;c<l.length;c++)l[c].done(h).start(a,r)}function M0(e,t,n,i){if(t){var a={};a[t]={},a[t][n]=i,e.attr(a)}else e.attr(n,i)}_l.prototype={constructor:_l,animate:function(e,t){var n,i=!1,a=this,o=this.__zr;if(e){var r=e.split("."),s=a;i="shape"===r[0];for(var l=0,u=r.length;l<u;l++)s=s&&s[r[l]];s&&(n=s)}else n=a;if(n){var h=a.animators,c=new Pc(n,t);return c.during(function(d){a.dirty(i)}).done(function(){h.splice(E(h,c),1)}),h.push(c),o&&o.animation.addAnimator(c),c}},stopAnimation:function(e){for(var t=this.animators,n=t.length,i=0;i<n;i++)t[i].stop(e);return t.length=0,this},animateTo:function(e,t,n,i,a,o){S0(this,e,t,n,i,a,o)},animateFrom:function(e,t,n,i,a,o){S0(this,e,t,n,i,a,o,!0)}};var _i=function(e){On.call(this,e),It.call(this,e),_l.call(this,e),this.id=e.id||Ze()};_i.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];(n=n||(this[e]=[]))[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(X(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},j(_i,_l),j(_i,On),j(_i,It);var bi,wi,Si,Mi,bl=Je,wl=Math.min,Sl=Math.max;function Le(e,t,n,i){n<0&&(e+=n,n=-n),i<0&&(t+=i,i=-i),this.x=e,this.y=t,this.width=n,this.height=i}Le.prototype={constructor:Le,union:function(e){var t=wl(e.x,this.x),n=wl(e.y,this.y);this.width=Sl(e.x+e.width,this.x+this.width)-t,this.height=Sl(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(bi=[],wi=[],Si=[],Mi=[],function(e){if(e){bi[0]=Si[0]=this.x,bi[1]=Mi[1]=this.y,wi[0]=Mi[0]=this.x+this.width,wi[1]=Si[1]=this.y+this.height,bl(bi,bi,e),bl(wi,wi,e),bl(Si,Si,e),bl(Mi,Mi,e),this.x=wl(bi[0],wi[0],Si[0],Mi[0]),this.y=wl(bi[1],wi[1],Si[1],Mi[1]);var t=Sl(bi[0],wi[0],Si[0],Mi[0]),n=Sl(bi[1],wi[1],Si[1],Mi[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=e.width/this.width,n=e.height/this.height,i=qt();return En(i,i,[-this.x,-this.y]),Tr(i,i,[t,n]),En(i,i,[e.x,e.y]),i},intersect:function(e){if(!e)return!1;e instanceof Le||(e=Le.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},clone:function(){return new Le(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},Le.create=function(e){return new Le(e.x,e.y,e.width,e.height)};var re=function(e){for(var t in _i.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};function T0(e,t,n,i){var a=t+1;if(a===n)return 1;if(i(e[a++],e[t])<0){for(;a<n&&i(e[a],e[a-1])<0;)a++;!function(o,r,s){for(s--;r<s;){var l=o[r];o[r++]=o[s],o[s--]=l}}(e,t,a)}else for(;a<n&&0<=i(e[a],e[a-1]);)a++;return a-t}function A0(e,t,n,i,a){for(i===t&&i++;i<n;i++){for(var o,r=e[i],s=t,l=i;s<l;)a(r,e[o=s+l>>>1])<0?l=o:s=1+o;var u=i-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;0<u;)e[s+u]=e[s+u-1],u--}e[s]=r}}function kc(e,t,n,i,a,o){var r=0,s=0,l=1;if(0<o(e,t[n+a])){for(s=i-a;l<s&&0<o(e,t[n+a+l]);)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s),r+=a,l+=a}else{for(s=a+1;l<s&&o(e,t[n+a-l])<=0;)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=r;r=a-l,l=a-u}for(r++;r<l;){var h=r+(l-r>>>1);0<o(e,t[n+h])?r=h+1:l=h}return l}function Nc(e,t,n,i,a,o){var r=0,s=0,l=1;if(o(e,t[n+a])<0){for(s=a+1;l<s&&o(e,t[n+a-l])<0;)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s);var u=r;r=a-l,l=a-u}else{for(s=i-a;l<s&&0<=o(e,t[n+a+l]);)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s),r+=a,l+=a}for(r++;r<l;){var h=r+(l-r>>>1);o(e,t[n+h])<0?l=h:r=h+1}return l}function TI(e,t){var n,i,a=7,o=0,r=[];function s(l){var u=n[l],h=i[l],c=n[l+1],d=i[l+1];i[l]=h+d,l===o-3&&(n[l+1]=n[l+2],i[l+1]=i[l+2]),o--;var f=Nc(e[c],e,u,h,0,t);u+=f,0!=(h-=f)&&0!==(d=kc(e[u+h-1],e,c,d,d-1,t))&&(h<=d?function(p,m,g,v){var x=0;for(x=0;x<m;x++)r[x]=e[p+x];var y=0,b=g,_=p;if(e[_++]=e[b++],0!=--v){if(1===m){for(x=0;x<v;x++)e[_+x]=e[b+x];return e[_+v]=r[y]}for(var w,S,M,T=a;;){S=w=0,M=!1;do{if(t(e[b],r[y])<0){if(e[_++]=e[b++],S++,(w=0)==--v){M=!0;break}}else if(e[_++]=r[y++],w++,S=0,1==--m){M=!0;break}}while((w|S)<T);if(M)break;do{if(0!==(w=Nc(e[b],r,y,m,0,t))){for(x=0;x<w;x++)e[_+x]=r[y+x];if(_+=w,y+=w,(m-=w)<=1){M=!0;break}}if(e[_++]=e[b++],0==--v){M=!0;break}if(0!==(S=kc(r[y],e,b,v,0,t))){for(x=0;x<S;x++)e[_+x]=e[b+x];if(_+=S,b+=S,0==(v-=S)){M=!0;break}}if(e[_++]=r[y++],1==--m){M=!0;break}T--}while(7<=w||7<=S);if(M)break;T<0&&(T=0),T+=2}if((a=T)<1&&(a=1),1===m){for(x=0;x<v;x++)e[_+x]=e[b+x];e[_+v]=r[y]}else{if(0===m)throw new Error;for(x=0;x<m;x++)e[_+x]=r[y+x]}}else for(x=0;x<m;x++)e[_+x]=r[y+x]}(u,h,c,d):function(p,m,g,v){var x=0;for(x=0;x<v;x++)r[x]=e[g+x];var y=p+m-1,b=v-1,_=g+v-1,w=0,S=0;if(e[_--]=e[y--],0!=--m){if(1===v){for(S=1+(_-=m),w=1+(y-=m),x=m-1;0<=x;x--)e[S+x]=e[w+x];return e[_]=r[b]}for(var M=a;;){var T=0,A=0,C=!1;do{if(t(r[b],e[y])<0){if(e[_--]=e[y--],T++,(A=0)==--m){C=!0;break}}else if(e[_--]=r[b--],A++,T=0,1==--v){C=!0;break}}while((T|A)<M);if(C)break;do{if(0!=(T=m-Nc(r[b],e,p,m,m-1,t))){for(m-=T,S=1+(_-=T),w=1+(y-=T),x=T-1;0<=x;x--)e[S+x]=e[w+x];if(0===m){C=!0;break}}if(e[_--]=r[b--],1==--v){C=!0;break}if(0!=(A=v-kc(e[y],r,0,v,v-1,t))){for(v-=A,S=1+(_-=A),w=1+(b-=A),x=0;x<A;x++)e[S+x]=r[w+x];if(v<=1){C=!0;break}}if(e[_--]=e[y--],0==--m){C=!0;break}M--}while(7<=T||7<=A);if(C)break;M<0&&(M=0),M+=2}if((a=M)<1&&(a=1),1===v){for(S=1+(_-=m),w=1+(y-=m),x=m-1;0<=x;x--)e[S+x]=e[w+x];e[_]=r[b]}else{if(0===v)throw new Error;for(w=_-(v-1),x=0;x<v;x++)e[w+x]=r[x]}}else for(w=_-(v-1),x=0;x<v;x++)e[w+x]=r[x]}(u,h,c,d))}n=[],i=[],this.mergeRuns=function(){for(;1<o;){var l=o-2;if(1<=l&&i[l-1]<=i[l]+i[l+1]||2<=l&&i[l-2]<=i[l]+i[l-1])i[l-1]<i[l+1]&&l--;else if(i[l]>i[l+1])break;s(l)}},this.forceMergeRuns=function(){for(;1<o;){var l=o-2;0<l&&i[l-1]<i[l+1]&&l--,s(l)}},this.pushRun=function(l,u){n[o]=l,i[o]=u,o+=1}}function Ml(e,t,n,i){var a=(i=i||e.length)-(n=n||0);if(!(a<2)){var o=0;if(a<32)A0(e,n,i,n+(o=T0(e,n,i,t)),t);else{var r=new TI(e,t),s=function(u){for(var h=0;32<=u;)h|=1&u,u>>=1;return u+h}(a);do{if((o=T0(e,n,i,t))<s){var l=a;s<l&&(l=s),A0(e,n,n+l,n+o,t),o=l}r.pushRun(n,o),r.mergeRuns(),a-=o,n+=o}while(0!==a);r.forceMergeRuns()}}}function C0(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function Ec(){this._roots=[],this._displayList=[],this._displayListLen=0}re.prototype={constructor:re,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,i=n.indexOf(t);0<=i&&(n.splice(i,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof re&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,i=this._children,a=E(i,e);return a<0||(i.splice(a,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof re&&e.delChildrenFromStorage(n)),t&&t.refresh()),this},removeAll:function(){var e,t,n=this._children,i=this.__storage;for(t=0;t<n.length;t++)e=n[t],i&&(i.delFromStorage(e),e instanceof re&&e.delChildrenFromStorage(i)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,i=0;i<n.length;i++)e.call(t,n[i],i);return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var i=this._children[n];e.call(t,i),"group"===i.type&&i.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof re&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof re&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new Le(0,0,0,0),i=e||this._children,a=[],o=0;o<i.length;o++){var r=i[o];if(!r.ignore&&!r.invisible){var s=r.getBoundingRect(),l=r.getLocalTransform(a);l?(n.copy(s),n.applyTransform(l),(t=t||n.clone()).union(n)):(t=t||s.clone()).union(s)}}return t||n}},H(re,_i),Ec.prototype={constructor:Ec,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);n.length=this._displayListLen,he.canvasSupported&&Ml(n,C0)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var i=e.clipPath;if(i){t=t?t.slice():[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),a=(o=a).clipPath}if(e.isGroup){for(var r=e._children,s=0;s<r.length;s++){var l=r[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof re&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof re&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var i=e.length;t<i;t++)this.delRoot(e[t])}else{var a=E(this._roots,e);0<=a&&(this.delFromStorage(e),this._roots.splice(a,1),e instanceof re&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:C0};var AI={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Oc=function(e,t,n){return AI.hasOwnProperty(t)?n*e.dpr:n},Il=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],ji=function(e){this.extendFrom(e,!1)};function CI(e,t,n){var i=null==t.x?0:t.x,a=null==t.x2?1:t.x2,o=null==t.y?0:t.y,r=null==t.y2?0:t.y2;return t.global||(i=i*n.width+n.x,a=a*n.width+n.x,o=o*n.height+n.y,r=r*n.height+n.y),i=isNaN(i)?0:i,a=isNaN(a)?1:a,o=isNaN(o)?0:o,r=isNaN(r)?0:r,e.createLinearGradient(i,o,a,r)}function DI(e,t,n){var i=n.width,a=n.height,o=Math.min(i,a),r=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(r=r*i+n.x,s=s*a+n.y,l*=o),e.createRadialGradient(r,s,0,r,s,l)}for(var zc=ji.prototype={constructor:ji,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var i=this,a=n&&n.style,o=!a||1!==e.__attrCachedBy;e.__attrCachedBy=1;for(var r=0;r<Il.length;r++){var s=Il[r],l=s[0];!o&&i[l]===a[l]||(e[l]=Oc(e,l,i[l]||s[1]))}!o&&i.fill===a.fill||(e.fillStyle=i.fill),!o&&i.stroke===a.stroke||(e.strokeStyle=i.stroke),!o&&i.opacity===a.opacity||(e.globalAlpha=null==i.opacity?1:i.opacity),!o&&i.blend===a.blend||(e.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()&&(e.lineWidth=i.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var i=("radial"===t.type?DI:CI)(e,t,n),a=t.colorStops,o=0;o<a.length;o++)i.addColorStop(a[o].offset,a[o].color);return i}},Bc=0;Bc<Il.length;Bc++){var Vc=Il[Bc];Vc[0]in zc||(zc[Vc[0]]=Vc[1])}function Fc(e,t){this.image=e,this.repeat=t,this.type="pattern"}function LI(){return!1}function D0(e,t,n){var i=Ut(),a=t.getWidth(),o=t.getHeight(),r=i.style;return r&&(r.position="absolute",r.left=0,r.top=0,r.width=a+"px",r.height=o+"px",i.setAttribute("data-zr-dom-id",e)),i.width=a*n,i.height=o*n,i}function Pr(e,t,n){var i;n=n||xl,"string"==typeof e?i=D0(e,t,n):X(e)&&(e=(i=e).id),this.id=e;var a=(this.dom=i).style;a&&(i.onselectstart=LI,a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-touch-callout"]="none",a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a.padding=0,a.margin=0,a["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}ji.getGradient=zc.getGradient,Pr.prototype={constructor:Pr,__dirty:!0,__used:!(Fc.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=D0("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,i=this.dom,a=i.style,o=this.domBack;a&&(a.width=e+"px",a.height=t+"px"),i.width=e*n,i.height=t*n,o&&(o.width=e*n,o.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,i=this.dom,a=this.ctx,o=i.width,r=i.height,s=(t=t||this.clearColor,this.motionBlur&&!e),l=this.lastFrameAlpha,u=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/u,r/u)),a.clearRect(0,0,o,r),t&&"transparent"!==t&&(t.colorStops?(n=t.__canvasGradient||ji.getGradient(a,t,{x:0,y:0,width:o,height:r}),t.__canvasGradient=n):t.image&&(n=Fc.prototype.getCanvasPattern.call(t,a)),a.save(),a.fillStyle=n||t,a.fillRect(0,0,o,r),a.restore()),s){var h=this.domBack;a.save(),a.globalAlpha=l,a.drawImage(h,0,0,o,r),a.restore()}}};var Gc="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},Wc=new bc(50);function PI(e){if("string"!=typeof e)return e;var t=Wc.get(e);return t&&t.image}function L0(e,t,n,i,a){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var o=Wc.get(e),r={hostEl:n,cb:i,cbPayload:a};return o?Tl(t=o.image)||o.pending.push(r):((t=new Image).onload=t.onerror=kI,Wc.put(e,t.__cachedImgObj={image:t,pending:[r]}),t.src=t.__zrImageSrc=e),t}return t}function kI(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function Tl(e){return e&&e.width&&e.height}var Al={},Hc=0,Zc=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Cl="12px sans-serif",Uc={};function bn(e,t){var n=e+":"+(t=t||Cl);if(Al[n])return Al[n];for(var i,a,o=(e+"").split("\n"),r=0,s=0,l=o.length;s<l;s++)r=Math.max((i=o[s],a=t,Uc.measureText(i,a)).width,r);return 5e3<Hc&&(Hc=0,Al={}),Hc++,Al[n]=r}function Yn(e,t,n,i,a,o,r,s){return r?(c=i,x=(g=qc(e,{rich:r,truncate:s,font:t,textAlign:h=n,textPadding:a,textLineHeight:o})).outerHeight,new Le(kr(0,v=g.outerWidth,h),Ao(0,x,c),v,x)):function(l,u,h,c,d,f,p){var m=Yc(l,u,d,f,p),g=bn(l,u);d&&(g+=d[1]+d[3]);var v=m.outerHeight,b=new Le(kr(0,g,h),Ao(0,v,c),g,v);return b.lineHeight=m.lineHeight,b}(e,t,n,i,a,o,s);var h,c,g,v,x}function kr(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Ao(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function jc(e,t,n){var a=t.textDistance,o=n.x,r=n.y;a=a||0;var s=n.height,l=n.width,u=s/2,h="left",c="top";switch(t.textPosition){case"left":o-=a,r+=u,h="right",c="middle";break;case"right":o+=a+l,r+=u,c="middle";break;case"top":o+=l/2,r-=a,h="center",c="bottom";break;case"bottom":o+=l/2,r+=s+a,h="center";break;case"inside":o+=l/2,r+=u,h="center",c="middle";break;case"insideLeft":o+=a,r+=u,c="middle";break;case"insideRight":o+=l-a,r+=u,h="right",c="middle";break;case"insideTop":o+=l/2,r+=a,h="center";break;case"insideBottom":o+=l/2,r+=s-a,h="center",c="bottom";break;case"insideTopLeft":o+=a,r+=a;break;case"insideTopRight":o+=l-a,r+=a,h="right";break;case"insideBottomLeft":o+=a,r+=s-a,c="bottom";break;case"insideBottomRight":o+=l-a,r+=s-a,h="right",c="bottom"}return(e=e||{}).x=o,e.y=r,e.textAlign=h,e.textVerticalAlign=c,e}function Xc(e,t,n,i,a){if(!t)return"";var o=(e+"").split("\n");a=P0(t,n,i,a);for(var r=0,s=o.length;r<s;r++)o[r]=k0(o[r],a);return o.join("\n")}function P0(e,t,n,i){(i=fe({},i)).font=t,n=De(n,"..."),i.maxIterations=De(i.maxIterations,2);var a=i.minChar=De(i.minChar,0);i.cnCharWidth=bn("\u56fd",t);var o=i.ascCharWidth=bn("a",t);i.placeholder=De(i.placeholder,"");for(var r=e=Math.max(0,e-1),s=0;s<a&&o<=r;s++)r-=o;var l=bn(n,t);return r<l&&(n="",l=0),r=e-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=r,i.containerWidth=e,i}function k0(e,t){var n=t.containerWidth,i=t.font,a=t.contentWidth;if(!n)return"";var o=bn(e,i);if(o<=n)return e;for(var r=0;;r++){if(o<=a||r>=t.maxIterations){e+=t.ellipsis;break}var s=0===r?EI(e,a,t.ascCharWidth,t.cnCharWidth):0<o?Math.floor(e.length*a/o):0;o=bn(e=e.substr(0,s),i)}return""===e&&(e=t.placeholder),e}function EI(e,t,n,i){for(var a=0,o=0,r=e.length;o<r&&a<t;o++){var s=e.charCodeAt(o);a+=0<=s&&s<=127?n:i}return o}function N0(e){return bn("\u56fd",e)}function Yc(e,t,n,i,a){null!=e&&(e+="");var o=De(i,N0(t)),r=e?e.split("\n"):[],s=r.length*o,l=s,u=!0;if(n&&(l+=n[0]+n[2]),e&&a){u=!1;var h=a.outerHeight,c=a.outerWidth;if(null!=h&&h<l)e="",r=[];else if(null!=c)for(var d=P0(c-(n?n[1]+n[3]:0),t,a.ellipsis,{minChar:a.minChar,placeholder:a.placeholder}),f=0,p=r.length;f<p;f++)r[f]=k0(r[f],d)}return{lines:r,height:s,outerHeight:l,lineHeight:o,canCacheByTextString:u}}function qc(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var i,a=Zc.lastIndex=0;null!=(i=Zc.exec(e));){var o=i.index;a<o&&$c(n,e.substring(a,o)),$c(n,i[2],i[1]),a=Zc.lastIndex}a<e.length&&$c(n,e.substring(a,e.length));var r=n.lines,s=0,l=0,u=[],h=t.textPadding,c=t.truncate,d=c&&c.outerWidth,f=c&&c.outerHeight;h&&(null!=d&&(d-=h[1]+h[3]),null!=f&&(f-=h[0]+h[2]));for(var p=0;p<r.length;p++){for(var m=r[p],g=0,v=0,x=0;x<m.tokens.length;x++){var y=(L=m.tokens[x]).styleName&&t.rich[L.styleName]||{},b=L.textPadding=y.textPadding,_=L.font=y.font||t.font,w=L.textHeight=De(y.textHeight,N0(_));if(b&&(w+=b[0]+b[2]),L.height=w,L.lineHeight=Qe(y.textLineHeight,t.textLineHeight,w),L.textAlign=y&&y.textAlign||t.textAlign,L.textVerticalAlign=y&&y.textVerticalAlign||"middle",null!=f&&s+L.lineHeight>f)return{lines:[],width:0,height:0};L.textWidth=bn(L.text,_);var S=y.textWidth,M=null==S||"auto"===S;if("string"==typeof S&&"%"===S.charAt(S.length-1))L.percentWidth=S,u.push(L),S=0;else{if(M){S=L.textWidth;var T=y.textBackgroundColor,A=T&&T.image;A&&Tl(A=PI(A))&&(S=Math.max(S,A.width*w/A.height))}var C=b?b[1]+b[3]:0;S+=C;var D=null!=d?d-v:null;null!=D&&D<S&&(!M||D<C?(L.text="",L.textWidth=S=0):(L.text=Xc(L.text,D-C,_,c.ellipsis,{minChar:c.minChar}),L.textWidth=bn(L.text,_),S=L.textWidth+C))}v+=L.width=S,y&&(g=Math.max(g,L.lineHeight))}m.width=v,s+=m.lineHeight=g,l=Math.max(l,v)}for(n.outerWidth=n.width=De(t.textWidth,l),n.outerHeight=n.height=De(t.textHeight,s),h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]),p=0;p<u.length;p++){var L,P=(L=u[p]).percentWidth;L.width=parseInt(P,10)/100*l}return n}function $c(e,t,n){for(var i=""===t,a=t.split("\n"),o=e.lines,r=0;r<a.length;r++){var s=a[r],l={styleName:n,text:s,isLineHolder:!s&&!i};if(r)o.push({tokens:[l]});else{var u=(o[o.length-1]||(o[0]={tokens:[]})).tokens,h=u.length;1===h&&u[0].isLineHolder?u[0]=l:!s&&h&&!i||u.push(l)}}}function E0(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&me(t)||e.textFont||e.font}function O0(e,t){var n,i,a,o,r,s=t.x,l=t.y,u=t.width,h=t.height,c=t.r;u<0&&(s+=u,u=-u),h<0&&(l+=h,h=-h),"number"==typeof c?n=i=a=o=c:c instanceof Array?1===c.length?n=i=a=o=c[0]:2===c.length?(n=a=c[0],i=o=c[1]):3===c.length?(n=c[0],i=o=c[1],a=c[2]):(n=c[0],i=c[1],a=c[2],o=c[3]):n=i=a=o=0,u<n+i&&(n*=u/(r=n+i),i*=u/r),u<a+o&&(a*=u/(r=a+o),o*=u/r),h<i+a&&(i*=h/(r=i+a),a*=h/r),h<n+o&&(n*=h/(r=n+o),o*=h/r),e.moveTo(s+n,l),e.lineTo(s+u-i,l),0!==i&&e.arc(s+u-i,l+i,i,-Math.PI/2,0),e.lineTo(s+u,l+h-a),0!==a&&e.arc(s+u-a,l+h-a,a,0,Math.PI/2),e.lineTo(s+o,l+h),0!==o&&e.arc(s+o,l+h-o,o,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}Uc.measureText=function(e,t){var n=ft();return n.font=t||Cl,n.measureText(e)};var Kc=Cl,OI={left:1,right:1,center:1},RI={top:1,bottom:1,middle:1},R0=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],z0={},B0={};function Nr(e){return V0(e),I(e.rich,V0),e}function V0(e){if(e){e.font=E0(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||OI[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||RI[n]?n:"top",e.textPadding&&(e.textPadding=$(e.textPadding))}}function F0(e,t,n,i,a,o){i.rich?function(r,s,l,u,h,c){9!==c&&(s.__attrCachedBy=0);var d=r.__textCotentBlock;d&&!r.__dirtyText||(d=r.__textCotentBlock=qc(l,u)),function(f,p,m,g,v){var x=m.width,y=m.outerWidth,b=m.outerHeight,_=g.textPadding,w=td(B0,f,g,v),S=w.baseX,M=w.baseY,T=w.textAlign,A=w.textVerticalAlign;G0(p,g,v,S,M);var C=kr(S,y,T),D=Ao(M,b,A),L=C,P=D;_&&(L+=_[3],P+=_[0]);var N=L+x;Jc(g)&&ed(f,p,g,C,D,y,b);for(var R=0;R<m.lines.length;R++){for(var k,B=m.lines[R],G=B.tokens,W=G.length,F=B.lineHeight,Y=B.width,K=0,ce=L,U=N,le=W-1;K<W&&(!(k=G[K]).textAlign||"left"===k.textAlign);)Qc(f,p,k,g,F,P,ce,"left"),Y-=k.width,ce+=k.width,K++;for(;0<=le&&"right"===(k=G[le]).textAlign;)Qc(f,p,k,g,F,P,U,"right"),Y-=k.width,U-=k.width,le--;for(ce+=(x-(ce-L)-(N-U)-Y)/2;K<=le;)Qc(f,p,k=G[K],g,F,P,ce+k.width/2,"center"),ce+=k.width,K++;P+=F}}(r,s,d,u,h)}(e,t,n,i,a,o):function(r,s,l,u,h,c){var d,f=Jc(u),p=!1,m=2===s.__attrCachedBy;9!==c?(c&&(d=c.style,p=!f&&m&&d),s.__attrCachedBy=f?0:2):m&&(s.__attrCachedBy=0);var g=u.font||Kc;p&&g===(d.font||Kc)||(s.font=g);var v=r.__computedFont;r.__styleFont!==g&&(r.__styleFont=g,v=r.__computedFont=s.font);var x=u.textPadding,b=r.__textCotentBlock;b&&!r.__dirtyText||(b=r.__textCotentBlock=Yc(l,v,x,u.textLineHeight,u.truncate));var _=b.outerHeight,w=b.lines,S=b.lineHeight,M=td(B0,r,u,h),T=M.baseX,A=M.baseY,C=M.textAlign||"left",D=M.textVerticalAlign;G0(s,u,h,T,A);var L=Ao(A,_,D),P=T,N=L;if(f||x){var R=bn(l,v);x&&(R+=x[1]+x[3]);var k=kr(T,R,C);f&&ed(r,s,u,k,L,R,_),x&&(P=H0(T,C,x),N+=x[0])}s.textAlign=C,s.textBaseline="middle",s.globalAlpha=u.opacity||1;for(var B=0;B<R0.length;B++){var G=R0[B],W=G[0],F=G[1],Y=u[W];p&&Y===d[W]||(s[F]=Oc(s,F,Y||G[2]))}N+=S/2;var K=u.textStrokeWidth,U=!p||K!==(p?d.textStrokeWidth:null),le=!p||U||u.textStroke!==d.textStroke,de=nd(u.textStroke,K),xe=W0(u.textFill);if(de&&(U&&(s.lineWidth=K),le&&(s.strokeStyle=de)),xe&&(p&&u.textFill===d.textFill||(s.fillStyle=xe)),1===w.length)de&&s.strokeText(w[0],P,N),xe&&s.fillText(w[0],P,N);else for(B=0;B<w.length;B++)de&&s.strokeText(w[B],P,N),xe&&s.fillText(w[B],P,N),N+=S}(e,t,n,i,a,o)}function G0(e,t,n,i,a){if(n&&t.textRotation){var o=t.textOrigin;"center"===o?(i=n.width/2+n.x,a=n.height/2+n.y):o&&(i=o[0]+n.x,a=o[1]+n.y),e.translate(i,a),e.rotate(-t.textRotation),e.translate(-i,-a)}}function Qc(e,t,n,i,a,o,r,s){var l=i.rich[n.styleName]||{};l.text=n.text;var u=n.textVerticalAlign,h=o+a/2;"top"===u?h=o+n.height/2:"bottom"===u&&(h=o+a-n.height/2),!n.isLineHolder&&Jc(l)&&ed(e,t,l,"right"===s?r-n.width:"center"===s?r-n.width/2:r,h-n.height/2,n.width,n.height);var c=n.textPadding;c&&(r=H0(r,s,c),h-=n.height/2-c[2]-n.textHeight/2),Nt(t,"shadowBlur",Qe(l.textShadowBlur,i.textShadowBlur,0)),Nt(t,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),Nt(t,"shadowOffsetX",Qe(l.textShadowOffsetX,i.textShadowOffsetX,0)),Nt(t,"shadowOffsetY",Qe(l.textShadowOffsetY,i.textShadowOffsetY,0)),Nt(t,"textAlign",s),Nt(t,"textBaseline","middle"),Nt(t,"font",n.font||Kc);var d=nd(l.textStroke||i.textStroke,p),f=W0(l.textFill||i.textFill),p=De(l.textStrokeWidth,i.textStrokeWidth);d&&(Nt(t,"lineWidth",p),Nt(t,"strokeStyle",d),t.strokeText(n.text,r,h)),f&&(Nt(t,"fillStyle",f),t.fillText(n.text,r,h))}function Jc(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function ed(e,t,n,i,a,o,r){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,h=q(s);if(Nt(t,"shadowBlur",n.textBoxShadowBlur||0),Nt(t,"shadowColor",n.textBoxShadowColor||"transparent"),Nt(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),Nt(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),h||l&&u){t.beginPath();var c=n.textBorderRadius;c?O0(t,{x:i,y:a,width:o,height:r,r:c}):t.rect(i,a,o,r),t.closePath()}if(h)if(Nt(t,"fillStyle",s),null!=n.fillOpacity){var d=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=d}else t.fill();else if(X(s)){var f=s.image;(f=L0(f,null,e,zI,s))&&Tl(f)&&t.drawImage(f,i,a,o,r)}l&&u&&(Nt(t,"lineWidth",l),Nt(t,"strokeStyle",u),null!=n.strokeOpacity?(d=t.globalAlpha,t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=d):t.stroke())}function zI(e,t){t.image=e}function td(e,t,n,i){var a=n.x||0,o=n.y||0,r=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)a=i.x+id(l[0],i.width),o=i.y+id(l[1],i.height);else{var u=t&&t.calculateTextPosition?t.calculateTextPosition(z0,n,i):jc(z0,n,i);a=u.x,o=u.y,r=r||u.textAlign,s=s||u.textVerticalAlign}var h=n.textOffset;h&&(a+=h[0],o+=h[1])}return(e=e||{}).baseX=a,e.baseY=o,e.textAlign=r,e.textVerticalAlign=s,e}function Nt(e,t,n){return e[t]=Oc(e,t,n),e[t]}function nd(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function W0(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function id(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function H0(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function ad(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function Dl(){}var od=new Le;function $t(e){for(var t in _i.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new ji(e.style,this),this._rect=null,this.__clipPaths=null}function Lt(e){$t.call(this,e)}$t.prototype={constructor:$t,type:"displayable",__dirty:!0,invisible:!(Dl.prototype={constructor:Dl,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&Nr(n);var i=n.text;if(null!=i&&(i+=""),ad(i,n)){e.save();var a=this.transform;n.transformText?this.setTransform(e):a&&(od.copy(t),od.applyTransform(a),t=od),F0(this,e,i,n,t,9),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?_i.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new ji(e,this),this.dirty(!1),this},calculateTextPosition:null},H($t,_i),j($t,Dl),Lt.prototype={constructor:Lt,type:"image",brush:function(e,t){var n=this.style,i=n.image;n.bind(e,this,t);var a=this._image=L0(i,this._image,this,this.onload);if(a&&Tl(a)){var o=n.x||0,r=n.y||0,s=n.width,l=n.height,u=a.width/a.height;if(null==s&&null!=l?s=l*u:null==l&&null!=s?l=s/u:null==s&&null==l&&(s=a.width,l=a.height),this.setTransform(e),n.sWidth&&n.sHeight){var h=n.sx||0,c=n.sy||0;e.drawImage(a,h,c,n.sWidth,n.sHeight,o,r,s,l)}else if(n.sx&&n.sy){var d=s-(h=n.sx),f=l-(c=n.sy);e.drawImage(a,h,c,d,f,o,r,s,l)}else e.drawImage(a,o,r,s,l);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new Le(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},H(Lt,$t);var Ca=314159;function Ll(e){return parseInt(e,10)}var rd=new Le(0,0,0,0),sd=new Le(0,0,0,0);function ld(e,t,n){this.type="canvas";var i=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=fe({},n||{}),this.dpr=n.devicePixelRatio||xl,this._singleCanvas=i;var a=(this.root=e).style;a&&(a["-webkit-tap-highlight-color"]="transparent",a["-webkit-user-select"]=a["user-select"]=a["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var c,d,f,o=this._zlevelList=[],r=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=e.width,l=e.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,e.width=s*this.dpr,e.height=l*this.dpr,this._width=s,this._height=l;var u=new Pr(e,this,this.dpr);u.__builtin__=!0,u.initContext(),(r[Ca]=u).zlevel=Ca,o.push(Ca),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var h=this._domRoot=(c=this._width,d=this._height,(f=document.createElement("div")).style.cssText=["position:relative","width:"+c+"px","height:"+d+"px","padding:0","margin:0","border-width:0"].join(";")+";",f);e.appendChild(h)}this._hoverlayer=null,this._hoverElements=[]}function Pl(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,It.call(this)}ld.prototype={constructor:ld,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var i=0;i<n.length;i++){var o=this._layers[n[i]];!o.__builtin__&&o.refresh&&o.refresh(0===i?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(n.__from=e).__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var n=this._hoverElements,i=E(n,e.__hoverMir);0<=i&&n.splice(i,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var i=t[n].__from;i&&(i.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){Ml(e,this.storage.displayableSortFunc);var i={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var a=0;a<t;){var o=e[a],r=o.__from;r&&r.__zr?(a++,r.invisible||(o.transform=r.transform,o.invTransform=r.invTransform,o.__clipPaths=r.__clipPaths,this._doPaintEl(o,n,!0,i))):(e.splice(a,1),r.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var a=this;Gc(function(){a._paintList(e,t,n)})}}},_compositeManually:function(){var e=this.getLayer(Ca).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,n)})},_doPaintList:function(e,t){for(var n=[],i=0;i<this._zlevelList.length;i++)(s=this._layers[this._zlevelList[i]]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||t)&&n.push(s);for(var o=!0,r=0;r<n.length;r++){var s,l=(s=n[r]).ctx,u={};l.save();var h=t?s.__startIndex:s.__drawIndex,c=!t&&s.incremental&&Date.now,d=c&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(h===s.__startIndex){var p=e[h];p.incremental&&p.notClear&&!t||s.clear(!1,f)}-1===h&&(console.error("For some unknown reason. drawIndex is -1"),h=s.__startIndex);for(var m=h;m<s.__endIndex;m++){var g=e[m];if(this._doPaintEl(g,s,t,u),g.__dirty=g.__dirtyText=!1,c&&15<Date.now()-d)break}s.__drawIndex=m,s.__drawIndex<s.__endIndex&&(o=!1),u.prevElClipPaths&&l.restore(),l.restore()}return he.wxa&&I(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),o},_doPaintEl:function(e,t,n,i){var l,u,h,a=t.ctx,o=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!o||o[0]||o[3])&&(!e.culling||(u=this._width,h=this._height,rd.copy((l=e).getBoundingRect()),l.transform&&rd.applyTransform(l.transform),sd.width=u,sd.height=h,rd.intersect(sd)))){var r=e.__clipPaths,s=i.prevElClipPaths;s&&!function(l,u){if(l===u)return!1;if(!l||!u||l.length!==u.length)return!0;for(var h=0;h<l.length;h++)if(l[h]!==u[h])return!0;return!1}(r,s)||(s&&(a.restore(),i.prevElClipPaths=null,i.prevEl=null),r&&(a.save(),function(l,u){for(var h=0;h<l.length;h++){var c=l[h];c.setTransform(u),u.beginPath(),c.buildPath(u,c.shape),u.clip(),c.restoreTransform(u)}}(r,a),i.prevElClipPaths=r)),e.beforeBrush&&e.beforeBrush(a),e.brush(a,i.prevEl||null),(i.prevEl=e).afterBrush&&e.afterBrush(a)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Ca);var n=this._layers[e];return n||((n=new Pr("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?pe(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&pe(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var u,n=this._layers,i=this._zlevelList,a=i.length,o=null,r=-1,s=this._domRoot;if(n[e]);else if((u=t)&&(u.__builtin__||"function"==typeof u.resize&&"function"==typeof u.refresh)){if(0<a&&e>i[0]){for(r=0;r<a-1&&!(i[r]<e&&i[r+1]>e);r++);o=n[i[r]]}if(i.splice(r+1,0,e),!(n[e]=t).virtual)if(o){var l=o.dom;l.nextSibling?s.insertBefore(t.dom,l.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}},eachLayer:function(e,t){var n,i,a=this._zlevelList;for(i=0;i<a.length;i++)e.call(t,this._layers[n=a[i]],n)},eachBuiltinLayer:function(e,t){var n,i,a,o=this._zlevelList;for(a=0;a<o.length;a++)(n=this._layers[i=o[a]]).__builtin__&&e.call(t,n,i)},eachOtherLayer:function(e,t){var n,i,a,o=this._zlevelList;for(a=0;a<o.length;a++)(n=this._layers[i=o[a]]).__builtin__||e.call(t,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(u){a&&(a.__endIndex!==u&&(a.__dirty=!0),a.__endIndex=u)}if(this.eachBuiltinLayer(function(u,h){u.__dirty=u.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++)if((r=e[n]).zlevel!==e[n-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}var i,a=null,o=0;for(n=0;n<e.length;n++){var r,s,l=(r=e[n]).zlevel;i!==l&&(i=l,o=0),r.incremental?((s=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,o=1):s=this.getLayer(l+(0<o?.01:0),this._needsManuallyCompositing),s!==a&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.__drawIndex=s.incremental?-1:n,t(n),a=s),r.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}t(n),this.eachBuiltinLayer(function(u,h){!u.__used&&0<u.getElementCount()&&(u.__dirty=!0,u.__startIndex=u.__endIndex=u.__drawIndex=0),u.__dirty&&u.__drawIndex<0&&(u.__drawIndex=u.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?pe(n[e],t,!0):n[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];(a===e||a===e+.01)&&pe(this._layers[a],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],n.splice(E(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var a in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);I(this._progressiveLayers,function(o){o.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Ca).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[Ca].dom;var t=new Pr("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,i=t.dom.height,a=t.ctx;this.eachLayer(function(u){u.__builtin__?a.drawImage(u.dom,0,0,n,i):u.renderToCanvas&&(t.ctx.save(),u.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var o={},r=this.storage.getDisplayList(!0),s=0;s<r.length;s++)this._doPaintEl(r[s],t,!0,o);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[i]||Ll(s[n])||Ll(r.style[n]))-(Ll(s[a])||0)-(Ll(s[o])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),a=e.getBoundingRect(),o=e.style,r=o.shadowBlur*t,s=o.shadowOffsetX*t,l=o.shadowOffsetY*t,u=o.hasStroke()?o.lineWidth:0,h=Math.max(u/2,r-s),c=Math.max(u/2,s+r),d=Math.max(u/2,r-l),f=Math.max(u/2,l+r),p=a.width+h+c,m=a.height+d+f;n.width=p*t,n.height=m*t,i.scale(t,t),i.clearRect(0,0,p,m),i.dpr=t;var g={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[h-a.x,d-a.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(i);var v=new Lt({style:{x:0,y:0,image:n}});return null!=g.position&&(v.position=e.position=g.position),null!=g.rotation&&(v.rotation=e.rotation=g.rotation),null!=g.scale&&(v.scale=e.scale=g.scale),v}},Pl.prototype={constructor:Pl,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=E(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,i=n.length,a=[],o=[],r=0;r<i;r++){var s=n[r],l=s.step(e,t);l&&(a.push(l),o.push(s))}for(r=0;r<i;)n[r]._needsRemove?(n[r]=n[i-1],n.pop(),i--):r++;for(i=a.length,r=0;r<i;r++)o[r].fire(a[r]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,Gc(function t(){e._running&&(Gc(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new Pc(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},j(Pl,It);var Z0,U0,ud=he.domSupported,hd=(U0={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Z0=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:O(Z0,function(e){var t=e.replace("mouse","pointer");return U0.hasOwnProperty(t)?t:e})}),j0_mouse=["mousemove","mouseup"],j0_pointer=["pointermove","pointerup"];function X0(e){return"mousewheel"===e&&he.browser.firefox?"DOMMouseScroll":e}function cd(e){var t=e.pointerType;return"pen"===t||"touch"===t}function dd(e){e&&(e.zrByTouch=!0)}function Y0(e,t){for(var n=t,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return i}function q0(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var fd=q0.prototype;fd.stopPropagation=fd.stopImmediatePropagation=fd.preventDefault=We;var Vn={mousedown:function(e){e=Xn(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Xn(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||md(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=Xn(this.dom,e),md(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=Xn(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=Y0(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){dd(e=Xn(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Vn.mousemove.call(this,e),Vn.mousedown.call(this,e)},touchmove:function(e){dd(e=Xn(this.dom,e)),this.handler.processGesture(e,"change"),Vn.mousemove.call(this,e)},touchend:function(e){dd(e=Xn(this.dom,e)),this.handler.processGesture(e,"end"),Vn.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&Vn.click.call(this,e)},pointerdown:function(e){Vn.mousedown.call(this,e)},pointermove:function(e){cd(e)||Vn.mousemove.call(this,e)},pointerup:function(e){Vn.mouseup.call(this,e)},pointerout:function(e){cd(e)||Vn.mouseout.call(this,e)}};I(["click","mousewheel","dblclick","contextmenu"],function(e){Vn[e]=function(t){t=Xn(this.dom,t),this.trigger(e,t)}});var pd={pointermove:function(e){cd(e)||pd.mousemove.call(this,e)},pointerup:function(e){pd.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;md(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function kl(e,t,n,i){e.mounted[t]=n,e.listenerOpts[t]=i,gc(e.domTarget,X0(t),n,i)}function gd(e){var t,n,i,o=e.mounted;for(var r in o)o.hasOwnProperty(r)&&(t=e.domTarget,n=X0(r),i=o[r],cc?t.removeEventListener(n,i,e.listenerOpts[r]):t.detachEvent("on"+n,i));e.mounted={}}function md(e,t){if(e._mayPointerCapture=null,ud&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?function VI(e,t){function n(i){kl(t,i,function(a){a=pc(a),Y0(e,a.target)||(a=function(o,r){return Xn(o.dom,new q0(o,r),!0)}(e,a),t.domHandlers[i].call(e,a))},{capture:!0})}he.pointerEventsSupported?I(j0_pointer,n):he.touchEventsSupported||I(j0_mouse,n)}(e,n):gd(n)}}function $0(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function vd(e,t){It.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new $0(e,Vn),ud&&(this._globalHandlerScope=new $0(document,pd)),this._pointerCapturing=!1,this._mayPointerCapture=null,function BI(e,t){var n=t.domHandlers;he.pointerEventsSupported?I(hd.pointer,function(i){kl(t,i,function(a){n[i].call(e,a)})}):(he.touchEventsSupported&&I(hd.touch,function(i){kl(t,i,function(a){n[i].call(e,a),function(o){o.touching=!0,null!=o.touchTimer&&(clearTimeout(o.touchTimer),o.touchTimer=null),o.touchTimer=setTimeout(function(){o.touching=!1,o.touchTimer=null},700)}(t)})}),I(hd.mouse,function(i){kl(t,i,function(a){a=pc(a),t.touching||n[i].call(e,a)})}))}(this,this._localHandlerScope)}var K0=vd.prototype;K0.dispose=function(){gd(this._localHandlerScope),ud&&gd(this._globalHandlerScope)},K0.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},j(vd,It);var FI=!he.canvasSupported,Nl={canvas:ld},Da={};function yd(e,t){var n=new _d(Ze(),e,t);return Da[n.id]=n}function xd(e,t){Nl[e]=t}var _d=function(e,t,n){n=n||{},this.dom=t,this.id=e;var i=this,a=new Ec,o=n.renderer;if(FI){if(!Nl.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&Nl[o]||(o="canvas");var r=new Nl[o](t,a,n,e);this.storage=a,this.painter=r;var s=he.node||he.worker?null:new vd(r.getViewportRoot(),r.root);this.handler=new bo(a,r,s,r.root),this.animation=new Pl({stage:{update:Z(this.flush,this)}}),this.animation.start();var l=a.delFromStorage,u=a.addToStorage;a.delFromStorage=function(h){l.call(a,h),h&&h.removeSelfFromZr(i)},a.addToStorage=function(h){u.call(a,h),h.addSelfToZr(i)}};_d.prototype={constructor:_d,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete Da[e]}(this.id)}};var GI=(Object.freeze||Object)({version:"4.3.2",init:yd,dispose:function(e){if(e)e.dispose();else{for(var t in Da)Da.hasOwnProperty(t)&&Da[t].dispose();Da={}}return this},getInstance:function(e){return Da[e]},registerPainter:xd}),Co=I,Do=X,WI=z,Q0="series\0";function Et(e){return e instanceof Array?e:null==e?[]:[e]}function La(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,a=n.length;i<a;i++){var o=n[i];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var J0=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Er(e){return!Do(e)||WI(e)||e instanceof Date?e:e.value}function bd(e,t){t=(t||[]).slice();var n=O(e||[],function(i,a){return{exist:i}});return Co(t,function(i,a){if(Do(i)){for(var o=0;o<n.length;o++)if(!n[o].option&&null!=i.id&&n[o].exist.id===i.id+"")return n[o].option=i,void(t[a]=null);for(o=0;o<n.length;o++){var r=n[o].exist;if(!(n[o].option||null!=r.id&&null!=i.id||null==i.name||El(i)||El(r)||r.name!==i.name+""))return n[o].option=i,void(t[a]=null)}}}),Co(t,function(i,a){if(Do(i)){for(var o=0;o<n.length;o++)if(!n[o].option&&!El(n[o].exist)&&null==i.id){n[o].option=i;break}o>=n.length&&n.push({option:i})}}),n}function ev(e){var t=ne();Co(e,function(n,i){var a=n.exist;a&&t.set(a.id,n)}),Co(e,function(n,i){var a=n.option;te(!a||null==a.id||!t.get(a.id)||t.get(a.id)===n,"id duplicates: "+(a&&a.id)),a&&null!=a.id&&t.set(a.id,n),n.keyInfo||(n.keyInfo={})}),Co(e,function(n,i){var a=n.exist,o=n.option,r=n.keyInfo;if(Do(o)){if(r.name=null!=o.name?o.name+"":a?a.name:Q0+i,a)r.id=a.id;else if(null!=o.id)r.id=o.id+"";else for(var s=0;r.id="\0"+r.name+"\0"+s++,t.get(r.id););t.set(r.id,n)}})}function wd(e){var t=e.name;return!(!t||!t.indexOf(Q0))}function El(e){return Do(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function Ol(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?z(t.dataIndex)?O(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?z(t.name)?O(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name):void 0}function Kt(){var e="__\0ec_inner_"+HI+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var HI=0;function Rl(e,t,n){if(q(t)){var i={};i[t+"Index"]=0,t=i}var a=n&&n.defaultMainType;!a||Sd(t,a+"Index")||Sd(t,a+"Id")||Sd(t,a+"Name")||(t[a+"Index"]=0);var o={};return Co(t,function(r,s){if(r=t[s],"dataIndex"!==s&&"dataIndexInside"!==s){var l=s.match(/^(\w+)(Index|Id|Name)$/)||[],u=l[1],h=(l[2]||"").toLowerCase();if(!(!u||!h||null==r||"index"===h&&"none"===r||n&&n.includeMainTypes&&E(n.includeMainTypes,u)<0)){var c={mainType:u};"index"===h&&"all"===r||(c[h]=r);var d=e.queryComponents(c);o[u+"Models"]=d,o[u+"Model"]=d[0]}}else o[s]=r}),o}function Sd(e,t){return e&&e.hasOwnProperty(t)}function tv(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function nv(e){return"auto"===e?he.domSupported?"html":"richText":e||"html"}function Md(e,t){var n=ne(),i=[];return I(e,function(a){var o=t(a);(n.get(o)||(i.push(o),n.set(o,[]))).push(a)}),{keys:i,buckets:n}}var Pa="___EC__COMPONENT__CONTAINER___";function Xi(e){var t={main:"",sub:""};return e&&(e=e.split("."),t.main=e[0]||"",t.sub=e[1]||""),t}function Or(e){(e.$constructor=e).extend=function(t){function n(){t.$constructor?t.$constructor.apply(this,arguments):i.apply(this,arguments)}var i=this;return fe(n.prototype,t),n.extend=this.extend,n.superCall=jI,n.superApply=XI,H(n,this),n.superClass=i,n}}var UI=0;function zl(e){var t=["__\0is_clz",UI++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!(!n||!n[t])}}function jI(e,t){var n=mt(arguments,2);return this.superClass.prototype[t].apply(e,n)}function XI(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Bl(e,t){t=t||{};var n={};if(e.registerClass=function(a,o){return o&&(te(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r=o),'componentType "'+r+'" illegal'),(o=Xi(o)).sub?o.sub!==Pa&&((function(r){var s=n[r.main];return s&&s[Pa]||((s=n[r.main]={})[Pa]=!0),s}(o))[o.sub]=a):n[o.main]=a),a;var r},e.getClass=function(a,o,r){var s=n[a];if(s&&s[Pa]&&(s=o?s[o]:null),r&&!s)throw new Error(o?"Component "+a+"."+(o||"")+" not exists. Load it first.":a+".type should be specified.");return s},e.getClassesByMainType=function(a){a=Xi(a);var o=[],r=n[a.main];return r&&r[Pa]?I(r,function(s,l){l!==Pa&&o.push(s)}):o.push(r),o},e.hasClass=function(a){return a=Xi(a),!!n[a.main]},e.getAllClassMainTypes=function(){var a=[];return I(n,function(o,r){a.push(r)}),a},e.hasSubTypes=function(a){a=Xi(a);var o=n[a.main];return o&&o[Pa]},e.parseClassType=Xi,t.registerWhenExtend){var i=e.extend;i&&(e.extend=function(a){var o=i.call(this,a);return e.registerClass(o,a.type)})}return e}function Lo(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(n,i,a){for(var o={},r=0;r<e.length;r++){var s=e[r][1];if(!(i&&0<=E(i,s)||a&&E(a,s)<0)){var l=n.getShallow(s);null!=l&&(o[e[r][0]]=l)}}return o}}var YI=Lo([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),qI={getLineStyle:function(e){var t=YI(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),i=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[i,i]:[n,n])}},$I=Lo([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),KI={getAreaStyle:function(e,t){return $I(this,e,t)}},Vl=Math.pow,Yi=Math.sqrt,av=Yi(3),Gl=1/3,qn=Fi(),wn=Fi(),Po=Fi();function qi(e){return-1e-8<e&&e<1e-8}function ov(e){return 1e-8<e||e<-1e-8}function jt(e,t,n,i,a){var o=1-a;return o*o*(o*e+3*a*t)+a*a*(a*i+3*o*n)}function rv(e,t,n,i,a){var o=1-a;return 3*(((t-e)*o+2*(n-t)*a)*o+(i-n)*a*a)}function sv(e,t,n,i,a){var o=6*n-12*t+6*e,r=9*t+3*i-3*e-9*n,s=3*t-3*e,l=0;if(qi(r))ov(o)&&0<=(h=-s/o)&&h<=1&&(a[l++]=h);else{var u=o*o-4*r*s;if(qi(u))a[0]=-o/(2*r);else if(0<u){var h,c=Yi(u),d=(-o-c)/(2*r);0<=(h=(-o+c)/(2*r))&&h<=1&&(a[l++]=h),0<=d&&d<=1&&(a[l++]=d)}}return l}function lv(e,t,n,i,a,o){var r=(t-e)*a+e,s=(n-t)*a+t,l=(i-n)*a+n,u=(s-r)*a+r,h=(l-s)*a+s,c=(h-u)*a+u;o[0]=e,o[1]=r,o[2]=u,o[3]=c,o[4]=c,o[5]=h,o[6]=l,o[7]=i}function Bt(e,t,n,i){var a=1-i;return a*(a*e+2*i*t)+i*i*n}function Id(e,t,n,i){return 2*((1-i)*(t-e)+i*(n-t))}function uv(e,t,n){var i=e+n-2*t;return 0==i?.5:(e-t)/i}function Td(e,t,n,i,a){var o=(t-e)*i+e,r=(n-t)*i+t,s=(r-o)*i+o;a[0]=e,a[1]=o,a[2]=s,a[3]=s,a[4]=r,a[5]=n}var Qt=Math.min,Jt=Math.max,Ad=Math.sin,Cd=Math.cos,ka=2*Math.PI,Wl=Fi(),Hl=Fi(),Zl=Fi();function Rr(e,t,n){if(0!==e.length){var i,a=e[0],o=a[0],r=a[0],s=a[1],l=a[1];for(i=1;i<e.length;i++)o=Qt(o,(a=e[i])[0]),r=Jt(r,a[0]),s=Qt(s,a[1]),l=Jt(l,a[1]);t[0]=o,t[1]=s,n[0]=r,n[1]=l}}function hv(e,t,n,i,a,o){a[0]=Qt(e,n),a[1]=Qt(t,i),o[0]=Jt(e,n),o[1]=Jt(t,i)}var cv=[],dv=[];function QI(e,t,n,i,a,o,r,s,l,u){var h,c=sv,d=jt,f=c(e,n,a,r,cv);for(l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0,h=0;h<f;h++){var p=d(e,n,a,r,cv[h]);l[0]=Qt(p,l[0]),u[0]=Jt(p,u[0])}for(f=c(t,i,o,s,dv),h=0;h<f;h++){var m=d(t,i,o,s,dv[h]);l[1]=Qt(m,l[1]),u[1]=Jt(m,u[1])}l[0]=Qt(e,l[0]),u[0]=Jt(e,u[0]),l[0]=Qt(r,l[0]),u[0]=Jt(r,u[0]),l[1]=Qt(t,l[1]),u[1]=Jt(t,u[1]),l[1]=Qt(s,l[1]),u[1]=Jt(s,u[1])}function JI(e,t,n,i,a,o,r,s,l){var u=mi,h=vi,c=Math.abs(a-o);if(c%ka<1e-4&&1e-4<c)return s[0]=e-n,s[1]=t-i,l[0]=e+n,void(l[1]=t+i);if(Wl[0]=Cd(a)*n+e,Wl[1]=Ad(a)*i+t,Hl[0]=Cd(o)*n+e,Hl[1]=Ad(o)*i+t,u(s,Wl,Hl),h(l,Wl,Hl),(a%=ka)<0&&(a+=ka),(o%=ka)<0&&(o+=ka),o<a&&!r?o+=ka:a<o&&r&&(a+=ka),r){var d=o;o=a,a=d}for(var f=0;f<o;f+=Math.PI/2)a<f&&(Zl[0]=Cd(f)*n+e,Zl[1]=Ad(f)*i+t,u(s,Zl,s),h(l,Zl,l))}var gt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},$n=[],$i=[],Kn=[],Qn=[],fv=Math.min,pv=Math.max,zr=Math.cos,Br=Math.sin,Ul=Math.sqrt,ko=Math.abs,Dd="undefined"!=typeof Float32Array,en=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function Ki(e,t,n,i,a,o,r){if(0===a)return!1;var l,s=a;if(t+s<r&&i+s<r||r<t-s&&r<i-s||e+s<o&&n+s<o||o<e-s&&o<n-s)return!1;if(e===n)return Math.abs(o-e)<=s/2;var u=(l=(t-i)/(e-n))*o-r+(e*i-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}function e2(e,t,n,i,a,o,r,s,l,u,h){if(0===l)return!1;var c=l;return!(t+c<h&&i+c<h&&o+c<h&&s+c<h||h<t-c&&h<i-c&&h<o-c&&h<s-c||e+c<u&&n+c<u&&a+c<u&&r+c<u||u<e-c&&u<n-c&&u<a-c&&u<r-c)&&function(d,f,p,m,g,v,x,y,b,_,w){var S,M,T,A,C,D=.005,L=1/0;qn[0]=b,qn[1]=_;for(var P=0;P<1;P+=.05)wn[0]=jt(d,p,g,x,P),wn[1]=jt(f,m,v,y,P),(A=Gi(qn,wn))<L&&(S=P,L=A);L=1/0;for(var N=0;N<32&&!(D<1e-4);N++)T=S+D,wn[0]=jt(d,p,g,x,M=S-D),wn[1]=jt(f,m,v,y,M),A=Gi(wn,qn),0<=M&&A<L?(S=M,L=A):(Po[0]=jt(d,p,g,x,T),Po[1]=jt(f,m,v,y,T),C=Gi(Po,qn),T<=1&&C<L?(S=T,L=C):D*=.5);return Yi(L)}(e,t,n,i,a,o,r,s,u,h)<=c/2}function gv(e,t,n,i,a,o,r,s,l){if(0===r)return!1;var u=r;return!(t+u<l&&i+u<l&&o+u<l||l<t-u&&l<i-u&&l<o-u||e+u<s&&n+u<s&&a+u<s||s<e-u&&s<n-u&&s<a-u)&&function(h,c,d,f,p,m,g,v,x){var y,b=.005,_=1/0;qn[0]=g,qn[1]=v;for(var w=0;w<1;w+=.05)wn[0]=Bt(h,d,p,w),wn[1]=Bt(c,f,m,w),(A=Gi(qn,wn))<_&&(y=w,_=A);_=1/0;for(var S=0;S<32&&!(b<1e-4);S++){var M=y-b,T=y+b;wn[0]=Bt(h,d,p,M),wn[1]=Bt(c,f,m,M);var A=Gi(wn,qn);if(0<=M&&A<_)y=M,_=A;else{Po[0]=Bt(h,d,p,T),Po[1]=Bt(c,f,m,T);var C=Gi(Po,qn);T<=1&&C<_?(y=T,_=C):b*=.5}}return Yi(_)}(e,t,n,i,a,o,s,l)<=u/2}en.prototype={constructor:en,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){this._ux=ko((n=n||0)/xl/e)||0,this._uy=ko(n/xl/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(gt.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=ko(e-this._xi)>this._ux||ko(t-this._yi)>this._uy||this._len<5;return this.addData(gt.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,i,a,o){return this.addData(gt.C,e,t,n,i,a,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,i,a,o):this._ctx.bezierCurveTo(e,t,n,i,a,o)),this._xi=a,this._yi=o,this},quadraticCurveTo:function(e,t,n,i){return this.addData(gt.Q,e,t,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,i):this._ctx.quadraticCurveTo(e,t,n,i)),this._xi=n,this._yi=i,this},arc:function(e,t,n,i,a,o){return this.addData(gt.A,e,t,n,n,i,a-i,0,o?0:1),this._ctx&&this._ctx.arc(e,t,n,i,a,o),this._xi=zr(a)*n+e,this._yi=Br(a)*n+t,this},arcTo:function(e,t,n,i,a){return this._ctx&&this._ctx.arcTo(e,t,n,i,a),this},rect:function(e,t,n,i){return this._ctx&&this._ctx.rect(e,t,n,i),this.addData(gt.R,e,t,n,i),this},closePath:function(){this.addData(gt.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!Dd||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,i=this._len,a=0;a<t;a++)n+=e[a].len();for(Dd&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),a=0;a<t;a++)for(var o=e[a].data,r=0;r<o.length;r++)this.data[i++]=o[r];this._len=i},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,i,a=this._dashSum,o=this._dashOffset,r=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,h=e-l,c=t-u,d=Ul(h*h+c*c),f=l,p=u,m=r.length;for(o<0&&(o=a+o),f-=(o%=a)*(h/=d),p-=o*(c/=d);0<h&&f<=e||h<0&&e<=f||0===h&&(0<c&&p<=t||c<0&&t<=p);)f+=h*(n=r[i=this._dashIdx]),p+=c*n,this._dashIdx=(i+1)%m,0<h&&f<l||h<0&&l<f||0<c&&p<u||c<0&&u<p||s[i%2?"moveTo":"lineTo"](0<=h?fv(f,e):pv(f,e),0<=c?fv(p,t):pv(p,t));this._dashOffset=-Ul((h=f-e)*h+(c=p-t)*c)},_dashedBezierTo:function(e,t,n,i,a,o){var r,s,l,u,h,c=this._dashSum,d=this._dashOffset,f=this._lineDash,p=this._ctx,m=this._xi,g=this._yi,v=jt,x=0,y=this._dashIdx,b=f.length,_=0;for(d<0&&(d=c+d),d%=c,r=0;r<1;r+=.1)s=v(m,e,n,a,r+.1)-v(m,e,n,a,r),l=v(g,t,i,o,r+.1)-v(g,t,i,o,r),x+=Ul(s*s+l*l);for(;y<b&&!(d<(_+=f[y]));y++);for(r=(_-d)/x;r<=1;)u=v(m,e,n,a,r),h=v(g,t,i,o,r),y%2?p.moveTo(u,h):p.lineTo(u,h),r+=f[y]/x,y=(y+1)%b;y%2!=0&&p.lineTo(a,o),this._dashOffset=-Ul((s=a-u)*s+(l=o-h)*l)},_dashedQuadraticTo:function(e,t,n,i){var a=n,o=i;n=(n+2*e)/3,i=(i+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,n,i,a,o)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,Dd&&(this.data=new Float32Array(e)))},getBoundingRect:function(){$n[0]=$n[1]=Kn[0]=Kn[1]=Number.MAX_VALUE,$i[0]=$i[1]=Qn[0]=Qn[1]=-Number.MAX_VALUE;for(var e,t,n,i,a,o,r,s,l,u,h,c,d,f,p=this.data,m=0,g=0,v=0,x=0,y=0;y<p.length;){var b=p[y++];switch(1===y&&(v=m=p[y],x=g=p[y+1]),b){case gt.M:m=v=p[y++],g=x=p[y++],Kn[0]=v,Kn[1]=x,Qn[0]=v,Qn[1]=x;break;case gt.L:hv(m,g,p[y],p[y+1],Kn,Qn),m=p[y++],g=p[y++];break;case gt.C:QI(m,g,p[y++],p[y++],p[y++],p[y++],p[y],p[y+1],Kn,Qn),m=p[y++],g=p[y++];break;case gt.Q:t=g,n=p[y++],i=p[y++],o=p[y+1],r=Kn,s=Qn,u=l=void 0,u=Bt,h=Jt(Qt((l=uv)(e=m,n,a=p[y]),1),0),c=Jt(Qt(l(t,i,o),1),0),d=u(e,n,a,h),f=u(t,i,o,c),r[0]=Qt(e,a,d),r[1]=Qt(t,o,f),s[0]=Jt(e,a,d),s[1]=Jt(t,o,f),m=p[y++],g=p[y++];break;case gt.A:var _=p[y++],w=p[y++],S=p[y++],M=p[y++],T=p[y++],A=p[y++]+T;y+=1;var C=1-p[y++];1===y&&(v=zr(T)*S+_,x=Br(T)*M+w),JI(_,w,S,M,T,A,C,Kn,Qn),m=zr(A)*S+_,g=Br(A)*M+w;break;case gt.R:hv(v=m=p[y++],x=g=p[y++],v+p[y++],x+p[y++],Kn,Qn);break;case gt.Z:m=v,g=x}mi($n,$n,Kn),vi($i,$i,Qn)}return 0===y&&($n[0]=$n[1]=$i[0]=$i[1]=0),new Le($n[0],$n[1],$i[0]-$n[0],$i[1]-$n[1])},rebuildPath:function(e){for(var t,n,i,a,o,r,s=this.data,l=this._ux,u=this._uy,h=this._len,c=0;c<h;){var d=s[c++];switch(1===c&&(t=i=s[c],n=a=s[c+1]),d){case gt.M:t=i=s[c++],n=a=s[c++],e.moveTo(i,a);break;case gt.L:o=s[c++],r=s[c++],(ko(o-i)>l||ko(r-a)>u||c===h-1)&&(e.lineTo(o,r),i=o,a=r);break;case gt.C:e.bezierCurveTo(s[c++],s[c++],s[c++],s[c++],s[c++],s[c++]),i=s[c-2],a=s[c-1];break;case gt.Q:e.quadraticCurveTo(s[c++],s[c++],s[c++],s[c++]),i=s[c-2],a=s[c-1];break;case gt.A:var f=s[c++],p=s[c++],m=s[c++],g=s[c++],v=s[c++],x=s[c++],y=s[c++],b=s[c++],_=g<m?m:g,w=g<m?1:m/g,S=g<m?g/m:1,M=v+x;.001<Math.abs(m-g)?(e.translate(f,p),e.rotate(y),e.scale(w,S),e.arc(0,0,_,v,M,1-b),e.scale(1/w,1/S),e.rotate(-y),e.translate(-f,-p)):e.arc(f,p,_,v,M,1-b),1===c&&(t=zr(v)*m+f,n=Br(v)*g+p),i=zr(M)*m+f,a=Br(M)*g+p;break;case gt.R:t=i=s[c],n=a=s[c+1],e.rect(s[c++],s[c++],s[c++],s[c++]);break;case gt.Z:e.closePath(),i=t,a=n}}}},en.CMD=gt;var mv=2*Math.PI;function Qi(e){return(e%=mv)<0&&(e+=mv),e}var Vr=2*Math.PI;function t2(e,t,n,i,a,o,r,s,l){if(0===r)return!1;var u=r;s-=e,l-=t;var h=Math.sqrt(s*s+l*l);if(n<h-u||h+u<n)return!1;if(Math.abs(i-a)%Vr<1e-4)return!0;if(o){var c=i;i=Qi(a),a=Qi(c)}else i=Qi(i),a=Qi(a);a<i&&(a+=Vr);var d=Math.atan2(l,s);return d<0&&(d+=Vr),i<=d&&d<=a||i<=d+Vr&&d+Vr<=a}function Ii(e,t,n,i,a,o){if(t<o&&i<o||o<t&&o<i||i===t)return 0;var r=i<t?1:-1,s=(o-t)/(i-t);1!=s&&0!=s||(r=i<t?.5:-.5);var l=s*(n-e)+e;return l===a?1/0:a<l?r:0}var Ji=en.CMD,No=2*Math.PI,Xt=[-1,-1,-1],Sn=[-1,-1];function i2(e,t,n,i,a,o,r,s,l,u){if(t<u&&i<u&&o<u&&s<u||u<t&&u<i&&u<o&&u<s)return 0;var h,c=function(y,b,_,w,S,M){var T=w+3*(b-_)-y,A=3*(_-2*b+y),C=3*(b-y),D=y-S,L=A*A-3*T*C,P=A*C-9*T*D,N=C*C-3*A*D,R=0;if(qi(L)&&qi(P))qi(A)?M[0]=0:0<=(de=-C/A)&&de<=1&&(M[R++]=de);else{var k=P*P-4*L*N;if(qi(k)){var B=P/L,G=-B/2;0<=(de=-A/T+B)&&de<=1&&(M[R++]=de),0<=G&&G<=1&&(M[R++]=G)}else if(0<k){var W=Yi(k),F=L*A+1.5*T*(-P+W),Y=L*A+1.5*T*(-P-W);0<=(de=(-A-((F=F<0?-Vl(-F,Gl):Vl(F,Gl))+(Y=Y<0?-Vl(-Y,Gl):Vl(Y,Gl))))/(3*T))&&de<=1&&(M[R++]=de)}else{var K=(2*L*A-3*T*P)/(2*Yi(L*L*L)),ce=Math.acos(K)/3,U=Yi(L),le=Math.cos(ce),de=(-A-2*U*le)/(3*T),xe=(G=(-A+U*(le+av*Math.sin(ce)))/(3*T),(-A+U*(le-av*Math.sin(ce)))/(3*T));0<=de&&de<=1&&(M[R++]=de),0<=G&&G<=1&&(M[R++]=G),0<=xe&&xe<=1&&(M[R++]=xe)}}return R}(t,i,o,s,u,Xt);if(0===c)return 0;for(var d,f,p=0,m=-1,g=0;g<c;g++){var v=Xt[g],x=0===v||1===v?.5:1;jt(e,n,a,r,v)<l||(m<0&&(m=sv(t,i,o,s,Sn),Sn[1]<Sn[0]&&1<m&&(h=Sn[0],Sn[0]=Sn[1],Sn[1]=h),d=jt(t,i,o,s,Sn[0]),1<m&&(f=jt(t,i,o,s,Sn[1]))),p+=2===m?v<Sn[0]?d<t?x:-x:v<Sn[1]?f<d?x:-x:s<f?x:-x:v<Sn[0]?d<t?x:-x:s<d?x:-x)}return p}function a2(e,t,n,i,a,o,r,s){if(t<s&&i<s&&o<s||s<t&&s<i&&s<o)return 0;var l=function(p,m,g,v,x){var y=p-2*m+g,b=2*(m-p),_=p-v,w=0;if(qi(y))ov(b)&&0<=(M=-_/b)&&M<=1&&(x[w++]=M);else{var S=b*b-4*y*_;if(qi(S))0<=(M=-b/(2*y))&&M<=1&&(x[w++]=M);else if(0<S){var M,T=Yi(S),A=(-b-T)/(2*y);0<=(M=(-b+T)/(2*y))&&M<=1&&(x[w++]=M),0<=A&&A<=1&&(x[w++]=A)}}return w}(t,i,o,s,Xt);if(0===l)return 0;var u=uv(t,i,o);if(0<=u&&u<=1){for(var h=0,c=Bt(t,i,o,u),d=0;d<l;d++){var f=0===Xt[d]||1===Xt[d]?.5:1;Bt(e,n,a,Xt[d])<r||(h+=Xt[d]<u?c<t?f:-f:o<c?f:-f)}return h}return f=0===Xt[0]||1===Xt[0]?.5:1,Bt(e,n,a,Xt[0])<r?0:o<t?f:-f}function o2(e,t,n,i,a,o,r,s){if(n<(s-=t)||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Xt[0]=-l,Xt[1]=l;var u=Math.abs(i-a);if(u<1e-4)return 0;if(u%No<1e-4){a=No;var h=o?1:-1;return r>=Xt[i=0]+e&&r<=Xt[1]+e?h:0}o?(l=i,i=Qi(a),a=Qi(l)):(i=Qi(i),a=Qi(a)),a<i&&(a+=No);for(var c=0,d=0;d<2;d++){var f=Xt[d];if(r<f+e){var p=Math.atan2(s,f);h=o?1:-1,p<0&&(p=No+p),(i<=p&&p<=a||i<=p+No&&p+No<=a)&&(p>Math.PI/2&&p<1.5*Math.PI&&(h=-h),c+=h)}}return c}function vv(e,t,n,i,a){for(var o=0,r=0,s=0,l=0,u=0,h=0;h<e.length;){var c=e[h++];switch(c===Ji.M&&1<h&&(n||(o+=Ii(r,s,l,u,i,a))),1===h&&(l=r=e[h],u=s=e[h+1]),c){case Ji.M:r=l=e[h++],s=u=e[h++];break;case Ji.L:if(n){if(Ki(r,s,e[h],e[h+1],t,i,a))return!0}else o+=Ii(r,s,e[h],e[h+1],i,a)||0;r=e[h++],s=e[h++];break;case Ji.C:if(n){if(e2(r,s,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],t,i,a))return!0}else o+=i2(r,s,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],i,a)||0;r=e[h++],s=e[h++];break;case Ji.Q:if(n){if(gv(r,s,e[h++],e[h++],e[h],e[h+1],t,i,a))return!0}else o+=a2(r,s,e[h++],e[h++],e[h],e[h+1],i,a)||0;r=e[h++],s=e[h++];break;case Ji.A:var d=e[h++],f=e[h++],p=e[h++],m=e[h++],g=e[h++],v=e[h++];h+=1;var x=1-e[h++],y=Math.cos(g)*p+d,b=Math.sin(g)*m+f;1<h?o+=Ii(r,s,y,b,i,a):(l=y,u=b);var _=(i-d)*m/p+d;if(n){if(t2(d,f,m,g,g+v,x,t,_,a))return!0}else o+=o2(d,f,m,g,g+v,x,_,a);r=Math.cos(g+v)*p+d,s=Math.sin(g+v)*m+f;break;case Ji.R:if(l=r=e[h++],u=s=e[h++],y=l+e[h++],b=u+e[h++],n){if(Ki(l,u,y,u,t,i,a)||Ki(y,u,y,b,t,i,a)||Ki(y,b,l,b,t,i,a)||Ki(l,b,l,u,t,i,a))return!0}else o+=Ii(y,u,y,b,i,a),o+=Ii(l,b,l,u,i,a);break;case Ji.Z:if(n){if(Ki(r,s,l,u,t,i,a))return!0}else o+=Ii(r,s,l,u,i,a);r=l,s=u}}return n||Math.abs(s-u)<1e-4||(o+=Ii(r,s,l,u,i,a)||0),0!==o}var yv=Fc.prototype.getCanvasPattern,Ld=Math.abs,r2=new en(!0);function Re(e){$t.call(this,e),this.path=null}function xv(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}Re.prototype={constructor:Re,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,i=this.style,a=this.path||r2,o=i.hasStroke(),r=i.hasFill(),s=i.fill,l=i.stroke,u=r&&!!s.colorStops,h=o&&!!l.colorStops,c=r&&!!s.image,d=o&&!!l.image;i.bind(e,this,t),this.setTransform(e),this.__dirty&&(u&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(e,s,n)),h&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(e,l,n))),u?e.fillStyle=this._fillGradient:c&&(e.fillStyle=yv.call(s,e)),h?e.strokeStyle=this._strokeGradient:d&&(e.strokeStyle=yv.call(l,e));var f=i.lineDash,p=i.lineDashOffset,m=!!e.setLineDash,g=this.getGlobalScale();if(a.setScale(g[0],g[1],this.segmentIgnoreThreshold),this.__dirtyPath||f&&!m&&o?(a.beginPath(e),f&&!m&&(a.setLineDash(f),a.setLineDashOffset(p)),this.buildPath(a,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),r)if(null!=i.fillOpacity){var v=e.globalAlpha;e.globalAlpha=i.fillOpacity*i.opacity,a.fill(e),e.globalAlpha=v}else a.fill(e);f&&m&&(e.setLineDash(f),e.lineDashOffset=p),o&&(null!=i.strokeOpacity?(v=e.globalAlpha,e.globalAlpha=i.strokeOpacity*i.opacity,a.stroke(e),e.globalAlpha=v):a.stroke(e)),f&&m&&e.setLineDash([]),null!=i.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new en},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var i=this.path;i=i||(this.path=new en),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),e=i.getBoundingRect()}if(this._rect=e,t.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){a.copy(e);var o=t.lineWidth,r=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),1e-10<r&&(a.width+=o/r,a.height+=o/r,a.x-=o/r/2,a.y-=o/r/2)}return a}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),i=this.getBoundingRect(),a=this.style;if(i.contain(e=n[0],t=n[1])){var o=this.path.data;if(a.hasStroke()){var r=a.lineWidth,s=a.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(a.hasFill()||(r=Math.max(r,this.strokeContainThreshold)),vv(o,r/s,!0,e,t)))return!0}if(a.hasFill())return vv(o,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):$t.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(X(e))for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<Ld(e[0]-1)&&1e-10<Ld(e[3]-1)?Math.sqrt(Ld(e[0]*e[3]-e[2]*e[1])):1}},Re.extend=function(e){function t(i){Re.call(this,i),e.style&&this.style.extendFrom(e.style,!1);var a=e.shape;if(a){this.shape=this.shape||{};var o=this.shape;for(var r in a)!o.hasOwnProperty(r)&&a.hasOwnProperty(r)&&(o[r]=a[r])}e.init&&e.init.call(this,i)}for(var n in H(t,Re),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},H(Re,$t);var Eo=en.CMD,s2=[[],[],[]],_v=Math.sqrt,l2=Math.atan2,Pd=Math.sqrt,jl=Math.sin,Xl=Math.cos,Yl=Math.PI,kd=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(xv(e)*xv(t))},bv=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(kd(e,t))};function wv(e,t,n,i,a,o,r,s,l,u,h){var c=l*(Yl/180),d=Xl(c)*(e-n)/2+jl(c)*(t-i)/2,f=-1*jl(c)*(e-n)/2+Xl(c)*(t-i)/2,p=d*d/(r*r)+f*f/(s*s);1<p&&(r*=Pd(p),s*=Pd(p));var m=(a===o?-1:1)*Pd((r*r*(s*s)-r*r*(f*f)-s*s*(d*d))/(r*r*(f*f)+s*s*(d*d)))||0,g=m*r*f/s,v=m*-s*d/r,x=(e+n)/2+Xl(c)*g-jl(c)*v,y=(t+i)/2+jl(c)*g+Xl(c)*v,b=bv([1,0],[(d-g)/r,(f-v)/s]),_=[(d-g)/r,(f-v)/s],w=[(-1*d-g)/r,(-1*f-v)/s],S=bv(_,w);kd(_,w)<=-1&&(S=Yl),1<=kd(_,w)&&(S=0),0===o&&0<S&&(S-=2*Yl),1===o&&S<0&&(S+=2*Yl),h.addData(u,x,y,r,s,b,S,c,o)}var h2=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,c2=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Sv(e,t){var n=function(i){if(!i)return new en;for(var a,o=0,r=0,s=o,l=r,u=new en,h=en.CMD,c=i.match(h2),d=0;d<c.length;d++){for(var f,p=c[d],m=p.charAt(0),g=p.match(c2)||[],v=g.length,x=0;x<v;x++)g[x]=parseFloat(g[x]);for(var y=0;y<v;){var b,_,w,S,M,T,A,C=o,D=r;switch(m){case"l":o+=g[y++],r+=g[y++],u.addData(f=h.L,o,r);break;case"L":o=g[y++],r=g[y++],u.addData(f=h.L,o,r);break;case"m":o+=g[y++],r+=g[y++],u.addData(f=h.M,o,r),s=o,l=r,m="l";break;case"M":o=g[y++],r=g[y++],u.addData(f=h.M,o,r),s=o,l=r,m="L";break;case"h":o+=g[y++],u.addData(f=h.L,o,r);break;case"H":o=g[y++],u.addData(f=h.L,o,r);break;case"v":r+=g[y++],u.addData(f=h.L,o,r);break;case"V":r=g[y++],u.addData(f=h.L,o,r);break;case"C":u.addData(f=h.C,g[y++],g[y++],g[y++],g[y++],g[y++],g[y++]),o=g[y-2],r=g[y-1];break;case"c":u.addData(f=h.C,g[y++]+o,g[y++]+r,g[y++]+o,g[y++]+r,g[y++]+o,g[y++]+r),o+=g[y-2],r+=g[y-1];break;case"S":b=o,_=r;var L=u.len(),P=u.data;a===h.C&&(b+=o-P[L-4],_+=r-P[L-3]),C=g[y++],D=g[y++],o=g[y++],r=g[y++],u.addData(f=h.C,b,_,C,D,o,r);break;case"s":b=o,_=r,L=u.len(),P=u.data,a===h.C&&(b+=o-P[L-4],_+=r-P[L-3]),C=o+g[y++],D=r+g[y++],o+=g[y++],r+=g[y++],u.addData(f=h.C,b,_,C,D,o,r);break;case"Q":C=g[y++],D=g[y++],o=g[y++],r=g[y++],u.addData(f=h.Q,C,D,o,r);break;case"q":C=g[y++]+o,D=g[y++]+r,o+=g[y++],r+=g[y++],u.addData(f=h.Q,C,D,o,r);break;case"T":b=o,_=r,L=u.len(),P=u.data,a===h.Q&&(b+=o-P[L-4],_+=r-P[L-3]),o=g[y++],r=g[y++],u.addData(f=h.Q,b,_,o,r);break;case"t":b=o,_=r,L=u.len(),P=u.data,a===h.Q&&(b+=o-P[L-4],_+=r-P[L-3]),o+=g[y++],r+=g[y++],u.addData(f=h.Q,b,_,o,r);break;case"A":w=g[y++],S=g[y++],M=g[y++],T=g[y++],A=g[y++],wv(C=o,D=r,o=g[y++],r=g[y++],T,A,w,S,M,f=h.A,u);break;case"a":w=g[y++],S=g[y++],M=g[y++],T=g[y++],A=g[y++],wv(C=o,D=r,o+=g[y++],r+=g[y++],T,A,w,S,M,f=h.A,u)}}"z"!==m&&"Z"!==m||(u.addData(f=h.Z),o=s,r=l),a=f}return u.toStatic(),u}(e);return(t=t||{}).buildPath=function(i){if(i.setData)i.setData(n.data),(a=i.getContext())&&i.rebuildPath(a);else{var a=i;n.rebuildPath(a)}},t.applyTransform=function(i){(function(e,t){var n,i,a,o,r,s=e.data,l=Eo.M,u=Eo.C,h=Eo.L,c=Eo.R,d=Eo.A,f=Eo.Q;for(o=a=0;a<s.length;){switch(n=s[a++],o=a,i=0,n){case l:case h:i=1;break;case u:i=3;break;case f:i=2;break;case d:var p=t[4],m=t[5],g=_v(t[0]*t[0]+t[1]*t[1]),v=_v(t[2]*t[2]+t[3]*t[3]),x=l2(-t[1]/v,t[0]/g);s[a]*=g,s[a++]+=p,s[a]*=v,s[a++]+=m,s[a++]*=g,s[a++]*=v,s[a++]+=x,s[a++]+=x,o=a+=2;break;case c:y[0]=s[a++],y[1]=s[a++],Je(y,y,t),s[o++]=y[0],s[o++]=y[1],y[0]+=s[a++],y[1]+=s[a++],Je(y,y,t),s[o++]=y[0],s[o++]=y[1]}for(r=0;r<i;r++){var y;(y=s2[r])[0]=s[a++],y[1]=s[a++],Je(y,y,t),s[o++]=y[0],s[o++]=y[1]}}})(n,i),this.dirty(!0)},t}function Mv(e,t){return new Re(Sv(e,t))}var Pe=function(e){$t.call(this,e)};function Nd(e){return he.browser.ie&&11<=he.browser.version?function(){var t,n=this.__clipPaths,i=this.style;if(n)for(var a=0;a<n.length;a++){var o=n[a],r=o&&o.shape,s=o&&o.type;if(r&&("sector"===s&&r.startAngle===r.endAngle||"rect"===s&&(!r.width||!r.height))){for(var l=0;l<ea.length;l++)ea[l][2]=i[ea[l][0]],i[ea[l][0]]=ea[l][1];t=!0;break}}if(e.apply(this,arguments),t)for(l=0;l<ea.length;l++)i[ea[l][0]]=ea[l][2]}:e}Pe.prototype={constructor:Pe,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&Nr(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),ad(i,n)?(this.setTransform(e),F0(this,e,i,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=0},getBoundingRect:function(){var e=this.style;if(this.__dirty&&Nr(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=Yn(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,nd(e.textStroke,e.textStrokeWidth)){var i=e.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},H(Pe,$t);var Jn=Re.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),ea=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Fn=Re.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Nd(Re.prototype.brush),buildPath:function(e,t){var n=t.cx,i=t.cy,a=Math.max(t.r0||0,0),o=Math.max(t.r,0),r=t.startAngle,s=t.endAngle,l=t.clockwise,u=Math.cos(r),h=Math.sin(r);e.moveTo(u*a+n,h*a+i),e.lineTo(u*o+n,h*o+i),e.arc(n,i,o,r,s,!l),e.lineTo(Math.cos(s)*a+n,Math.sin(s)*a+i),0!==a&&e.arc(n,i,a,s,r,l),e.closePath()}}),ql=Re.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,i=t.cy,a=2*Math.PI;e.moveTo(n+t.r,i),e.arc(n,i,t.r,0,a,!1),e.moveTo(n+t.r0,i),e.arc(n,i,t.r0,0,a,!0)}});function Iv(e,t,n,i,a,o,r){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*r+(-3*(t-n)-2*s-l)*o+s*a+t}function Tv(e,t,n){var i=t.points,a=t.smooth;if(i&&2<=i.length){if(a&&"spline"!==a){var o=function(d,f,p,m){var g,v,x,y,b=[],_=[],w=[],S=[];if(m){x=[1/0,1/0],y=[-1/0,-1/0];for(var M=0,T=d.length;M<T;M++)mi(x,x,d[M]),vi(y,y,d[M]);mi(x,x,m[0]),vi(y,y,m[1])}for(M=0,T=d.length;M<T;M++){var A=d[M];if(p)g=d[M?M-1:T-1],v=d[(M+1)%T];else{if(0===M||M===T-1){b.push(Nn(d[M]));continue}g=d[M-1],v=d[M+1]}pi(_,v,g),fl(_,_,f);var C=Mr(A,g),D=Mr(A,v),L=C+D;0!==L&&(C/=L,D/=L),fl(w,_,-C),fl(S,_,D);var P=rc([],A,w),N=rc([],A,S);m&&(vi(P,P,x),mi(P,P,y),vi(N,N,x),mi(N,N,y)),b.push(P),b.push(N)}return p&&b.push(b.shift()),b}(i,a,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var r=i.length,s=0;s<(n?r:r-1);s++){var l=o[2*s],u=o[2*s+1],h=i[(s+1)%r];e.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{"spline"===a&&(i=function(d,f){for(var p=d.length,m=[],g=0,v=1;v<p;v++)g+=Mr(d[v-1],d[v]);var x=g/2;for(x=x<p?p:x,v=0;v<x;v++){var y,b,_,w=v/(x-1)*(f?p:p-1),S=Math.floor(w),M=w-S,T=d[S%p];_=f?(y=d[(S-1+p)%p],b=d[(S+1)%p],d[(S+2)%p]):(y=d[0===S?S:S-1],b=d[p-2<S?p-1:S+1],d[p-3<S?p-1:S+2]);var A=M*M,C=M*A;m.push([Iv(y[0],T[0],b[0],_[0],M,A,C),Iv(y[1],T[1],b[1],_[1],M,A,C)])}return m}(i,n)),e.moveTo(i[0][0],i[0][1]),s=1;for(var c=i.length;s<c;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}var tn=Re.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){Tv(e,t,!0)}}),Mn=Re.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){Tv(e,t,!1)}}),Oo=Math.round;function Av(e,t,n){if(t){var i=t.x1,a=t.x2,o=t.y1,r=t.y2;e.x1=i,e.x2=a,e.y1=o,e.y2=r;var s=n&&n.lineWidth;s&&(Oo(2*i)===Oo(2*a)&&(e.x1=e.x2=Na(i,s,!0)),Oo(2*o)===Oo(2*r)&&(e.y1=e.y2=Na(o,s,!0)))}}function Cv(e,t,n){if(t){var i=t.x,a=t.y,o=t.width,r=t.height;e.x=i,e.y=a,e.width=o,e.height=r;var s=n&&n.lineWidth;s&&(e.x=Na(i,s,!0),e.y=Na(a,s,!0),e.width=Math.max(Na(i+o,s,!1)-e.x,0===o?0:1),e.height=Math.max(Na(a+r,s,!1)-e.y,0===r?0:1))}}function Na(e,t,n){if(!t)return e;var i=Oo(2*e);return(i+Oo(t))%2==0?i/2:(i+(n?1:-1))/2}var Ea={},Fe=Re.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,i,a,o;this.subPixelOptimize?(Cv(Ea,t,this.style),n=Ea.x,i=Ea.y,a=Ea.width,o=Ea.height,Ea.r=t.r,t=Ea):(n=t.x,i=t.y,a=t.width,o=t.height),t.r?O0(e,t):e.rect(n,i,a,o),e.closePath()}}),Fr={},Ot=Re.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,i,a,o;o=this.subPixelOptimize?(Av(Fr,t,this.style),n=Fr.x1,i=Fr.y1,a=Fr.x2,Fr.y2):(n=t.x1,i=t.y1,a=t.x2,t.y2);var r=t.percent;0!==r&&(e.moveTo(n,i),r<1&&(a=n*(1-r)+a*r,o=i*(1-r)+o*r),e.lineTo(a,o))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),nn=[];function Dv(e,t,n){return null===e.cpx2||null===e.cpy2?[(n?rv:jt)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?rv:jt)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Id:Bt)(e.x1,e.cpx1,e.x2,t),(n?Id:Bt)(e.y1,e.cpy1,e.y2,t)]}function ei(e){this.colorStops=e||[]}var $l=Re.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,i=t.y1,a=t.x2,o=t.y2,r=t.cpx1,s=t.cpy1,l=t.cpx2,u=t.cpy2,h=t.percent;0!==h&&(e.moveTo(n,i),null==l||null==u?(h<1&&(Td(n,r,a,h,nn),r=nn[1],a=nn[2],Td(i,s,o,h,nn),s=nn[1],o=nn[2]),e.quadraticCurveTo(r,s,a,o)):(h<1&&(lv(n,r,l,a,h,nn),r=nn[1],l=nn[2],a=nn[3],lv(i,s,u,o,h,nn),s=nn[1],u=nn[2],o=nn[3]),e.bezierCurveTo(r,s,l,u,a,o)))},pointAt:function(e){return Dv(this.shape,e,!1)},tangentAt:function(e){var t=Dv(this.shape,e,!0);return xo(t,t)}}),Ed=Re.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,i=t.cy,a=Math.max(t.r,0),o=t.startAngle,r=t.endAngle,s=t.clockwise,l=Math.cos(o),u=Math.sin(o);e.moveTo(l*a+n,u*a+i),e.arc(n,i,a,o,r,!s)}}),Lv=Re.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],i=0;i<n.length;i++)n[i].buildPath(e,n[i].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Re.prototype.getBoundingRect.call(this)}});function Oa(e,t,n,i,a,o){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=o||!1,ei.call(this,a)}function Kl(e,t,n,i,a){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==n?.5:n,this.type="radial",this.global=a||!1,ei.call(this,i)}function hn(e){$t.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}ei.prototype={constructor:ei,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},Oa.prototype={constructor:Oa},H(Oa,ei),Kl.prototype={constructor:Kl},H(Kl,ei),hn.prototype.incremental=!0,hn.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},hn.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},hn.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},hn.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},hn.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},hn.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(e);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var i;(i=this._temporaryDisplayables[n]).beforeBrush&&i.beforeBrush(e),i.brush(e,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var d2=[];hn.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Le(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(d2)),e.union(i)}this._rect=e}return this._rect},hn.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(e,t))return!0;return!1},H(hn,$t);var Ql=Math.max,Jl=Math.min,eu={},Pv={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},kv="emphasis",Ev=1,Ov={},Od={};function In(e){return Re.extend(e)}function ti(e,t){Od[e]=t}function Rd(e){if(Od.hasOwnProperty(e))return Od[e]}function tu(e,t,n,i){var a=Mv(e,t);return n&&("center"===i&&(n=zv(n,a.getBoundingRect())),Bv(a,n)),a}function Rv(e,t,n){var i=new Lt({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(a){"center"===n&&i.setStyle(zv(t,{width:a.width,height:a.height}))}});return i}function zv(e,t){var n,i=t.width/t.height,a=e.height*i;return n=a<=e.width?e.height:(a=e.width)/i,{x:e.x+e.width/2-a/2,y:e.y+e.height/2-n/2,width:a,height:n}}var Tn=function(e,t){for(var n=[],i=e.length,a=0;a<i;a++){var o=e[a];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var r=new Re(t);return r.createPathProxy(),r.buildPath=function(s){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l)},r};function Bv(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var nu=Na;function Vv(e){return null!=e&&"none"!==e}var Fv=ne(),Gv=0;function zd(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,i=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=i?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var a=e,o=e.style;i&&(o=(a=n.addHover(e)).style),ou(o),i||function(r){if(r.__hoverStlDirty){r.__hoverStlDirty=!1;var s=r.__hoverStl;if(s){var l=r.__cachedNormalStl={};r.__cachedNormalZ2=r.z2;var u=r.style;for(var h in s)null!=s[h]&&(l[h]=u[h]);l.fill=u.fill,l.stroke=u.stroke}else r.__cachedNormalStl=r.__cachedNormalZ2=null}}(a),o.extendFrom(t),Wv(o,t,"fill"),Wv(o,t,"stroke"),Zr(o),i||(e.dirty(!1),e.z2+=1)}}}function Wv(e,t,n){!Vv(t[n])&&Vv(e[n])&&(e[n]=function(i){if("string"!=typeof i)return i;var a=Fv.get(i);return a||(a=g0(i,-.1),Gv<1e4&&(Fv.set(i,a),Gv++)),a}(e[n]))}function Bd(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,i=e.__cachedNormalStl;i&&(ou(n),e.setStyle(i),Zr(n));var a=e.__cachedNormalZ2;null!=a&&e.z2-a==1&&(e.z2=a)}}function Wr(e,t,n){var i,a="normal",o="normal";e.__highlighted&&(a=kv,i=!0),t(e,n),e.__highlighted&&(o=kv,i=!0),e.isGroup&&e.traverse(function(r){r.isGroup||t(r,n)}),i&&e.__highDownOnUpdate&&e.__highDownOnUpdate(a,o)}function Hr(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,Bd(e),zd(e))}function f2(e){Hv(this,e)||this.__highByOuter||Wr(this,zd)}function p2(e){Hv(this,e)||this.__highByOuter||Wr(this,Bd)}function g2(e){this.__highByOuter|=1<<(e||0),Wr(this,zd)}function m2(e){(this.__highByOuter&=~(1<<(e||0)))||Wr(this,Bd)}function Hv(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function tt(e,t){Ra(e,!0),Wr(e,Hr,t)}function Ra(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var i=n?"off":"on";e[i]("mouseover",f2)[i]("mouseout",p2),e[i]("emphasis",g2)[i]("normal",m2),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function iu(e){return!(!e||!e.__highDownDispatcher)}function Zv(e){var t=Ov[e];return null==t&&Ev<=32&&(t=Ov[e]=Ev++),t}function cn(e,t,n,i,a,o,r){var s,l=(a=a||eu).labelFetcher,u=a.labelDataIndex,h=a.labelDimIndex,c=a.labelProp,d=n.getShallow("show"),f=i.getShallow("show");(d||f)&&(l&&(s=l.getFormattedLabel(u,"normal",null,h,c)),null==s&&(s=ee(a.defaultText)?a.defaultText(u,a):a.defaultText));var p=d?s:null,m=f?De(l?l.getFormattedLabel(u,"emphasis",null,h,c):null,s):null;null==p&&null==m||(ut(e,n,o,a),ut(t,i,r,a,!0)),e.text=p,t.text=m}function Vd(e,t,n){var i=e.style;t&&(ou(i),e.setStyle(t),Zr(i)),i=e.__hoverStl,n&&i&&(ou(i),fe(i,n),Zr(i))}function ut(e,t,n,i,a){return Uv(e,t,i,a),n&&fe(e,n),e}function Uv(e,t,n,i){if((n=n||eu).isRectText){var a;n.getTextPosition?a=n.getTextPosition(t,i):"outside"===(a=t.getShallow("position")||(i?null:"inside"))&&(a="top"),e.textPosition=a,e.textOffset=t.getShallow("offset");var o=t.getShallow("rotate");null!=o&&(o*=Math.PI/180),e.textRotation=o,e.textDistance=De(t.getShallow("distance"),i?null:5)}var r,s=t.ecModel,l=s&&s.option.textStyle,u=function(d){for(var f;d&&d!==d.ecModel;){var p=(d.option||eu).rich;if(p)for(var m in f=f||{},p)p.hasOwnProperty(m)&&(f[m]=1);d=d.parentModel}return f}(t);if(u)for(var h in r={},u)if(u.hasOwnProperty(h)){var c=t.getModel(["rich",h]);jv(r[h]={},c,l,n,i)}return e.rich=r,jv(e,t,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function jv(e,t,n,i,a,o){n=!a&&n||eu,e.textFill=au(t.getShallow("color"),i)||n.color,e.textStroke=au(t.getShallow("textBorderColor"),i)||n.textBorderColor,e.textStrokeWidth=De(t.getShallow("textBorderWidth"),n.textBorderWidth),a||(o&&(e.insideRollbackOpt=i,Zr(e)),null==e.textFill&&(e.textFill=i.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),o&&i.disableBox||(e.textBackgroundColor=au(t.getShallow("backgroundColor"),i),e.textPadding=t.getShallow("padding"),e.textBorderColor=au(t.getShallow("borderColor"),i),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function au(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function Zr(e){var t,n=e.textPosition,i=e.insideRollbackOpt;if(i&&null==e.textFill){var a=i.autoColor,r=i.useInsideStyle,s=!1!==r&&(!0===r||i.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),l=!s&&null!=a;(s||l)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),s&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=a,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),l&&(e.textFill=a)}e.insideRollback=t}function ou(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function Fd(e,t){var n=t&&t.getModel("textStyle");return me([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Xv(e,t,n,i,a,o){if("function"==typeof a&&(o=a,a=null),i&&i.isAnimationEnabled()){var r=e?"Update":"",s=i.getShallow("animationDuration"+r),l=i.getShallow("animationEasing"+r),u=i.getShallow("animationDelay"+r);"function"==typeof u&&(u=u(a,i.getAnimationDelayParams?i.getAnimationDelayParams(t,a):null)),"function"==typeof s&&(s=s(a)),0<s?t.animateTo(n,s,u||0,l,o,!!o):(t.stopAnimation(),t.attr(n),o&&o())}else t.stopAnimation(),t.attr(n),o&&o()}function Ae(e,t,n,i,a){Xv(!0,e,t,n,i,a)}function Vt(e,t,n,i,a){Xv(!1,e,t,n,i,a)}function za(e,t){for(var n=wo([]);e&&e!==t;)Wi(n,e.getLocalTransform(),n),e=e.parent;return n}function ni(e,t,n){return t&&!J(t)&&(t=On.getLocalTransform(t)),n&&(t=gl([],t)),Je([],e,t)}function Gd(e,t,n){var i=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),a=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),o=["left"===e?-i:"right"===e?i:0,"top"===e?-a:"bottom"===e?a:0];return o=ni(o,t,n),Math.abs(o[0])>Math.abs(o[1])?0<o[0]?"right":"left":0<o[1]?"bottom":"top"}function ru(e,t,n,i){if(e&&t){var a,o=(a={},e.traverse(function(s){!s.isGroup&&s.anid&&(a[s.anid]=s)}),a);t.traverse(function(s){if(!s.isGroup&&s.anid){var l=o[s.anid];if(l){var u=r(s);s.attr(r(l)),Ae(s,u,n,s.dataIndex)}}})}function r(s){var l={position:Nn(s.position),rotation:s.rotation};return s.shape&&(l.shape=fe({},s.shape)),l}}function Yv(e,t){return O(e,function(n){var i=n[0];i=Ql(i,t.x),i=Jl(i,t.x+t.width);var a=n[1];return a=Ql(a,t.y),[i,a=Jl(a,t.y+t.height)]})}function Ro(e,t,n){var i=(t=fe({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),ie(i,n),new Lt(t)):tu(e.replace("path://",""),t,n,"center")}function Ur(e,t,n,i,a){for(var o=0,r=a[a.length-1];o<a.length;o++){var s=a[o];if(qv(e,t,n,i,s[0],s[1],r[0],r[1]))return!0;r=s}}function qv(e,t,n,i,a,o,r,s){var v,l=n-e,u=i-t,h=r-a,c=s-o,d=Wd(h,c,l,u);if((v=d)<=1e-6&&-1e-6<=v)return!1;var f=e-a,p=t-o,m=Wd(f,p,l,u)/d;if(m<0||1<m)return!1;var g=Wd(f,p,h,c)/d;return!(g<0||1<g)}function Wd(e,t,n,i){return e*i-n*t}ti("circle",Jn),ti("sector",Fn),ti("ring",ql),ti("polygon",tn),ti("polyline",Mn),ti("rect",Fe),ti("line",Ot),ti("bezierCurve",$l),ti("arc",Ed);var Ti=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:Pv,extendShape:In,extendPath:function(e,t){return function(n,i){return Re.extend(Sv(n,i))}(e,t)},registerShape:ti,getShapeClass:Rd,makePath:tu,makeImage:Rv,mergePath:Tn,resizePath:Bv,subPixelOptimizeLine:function(e){return Av(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return Cv(e.shape,e.shape,e.style),e},subPixelOptimize:nu,setElementHoverStyle:Hr,setHoverStyle:tt,setAsHighDownDispatcher:Ra,isHighDownDispatcher:iu,getHighlightDigit:Zv,setLabelStyle:cn,modifyLabelStyle:Vd,setTextStyle:ut,setText:function(e,t,n){var i,a={isRectText:!0};!1===n?i=!0:a.autoColor=n,Uv(e,t,a,i)},getFont:Fd,updateProps:Ae,initProps:Vt,getTransform:za,applyTransform:ni,transformDirection:Gd,groupTransition:ru,clipPointsByRect:Yv,clipRectByRect:function(e,t){var n=Ql(e.x,t.x),i=Jl(e.x+e.width,t.x+t.width),a=Ql(e.y,t.y),o=Jl(e.y+e.height,t.y+t.height);if(n<=i&&a<=o)return{x:n,y:a,width:i-n,height:o-a}},createIcon:Ro,linePolygonIntersect:Ur,lineLineIntersect:qv,Group:re,Image:Lt,Text:Pe,Circle:Jn,Sector:Fn,Ring:ql,Polygon:tn,Polyline:Mn,Rect:Fe,Line:Ot,BezierCurve:$l,Arc:Ed,IncrementalDisplayable:hn,CompoundPath:Lv,LinearGradient:Oa,RadialGradient:Kl,BoundingRect:Le}),v2=["textStyle","color"],y2={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(v2):null)},getFont:function(){return Fd({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return Yn(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},x2=Lo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),_2={getItemStyle:function(e,t){var n=x2(this,e,t),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},su=j,$v=Kt();function ze(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function Kv(e,t,n){for(var i=0;i<t.length&&(!t[i]||null!=(e=e&&"object"==typeof e?e[t[i]]:null));i++);return null==e&&n&&(e=n.get(t)),e}function Hd(e,t){var n=$v(e).getParent;return n?n.call(e,t):e.parentModel}ze.prototype={constructor:ze,init:null,mergeOption:function(e){pe(this.option,e,!0)},get:function(e,t){return null==e?this.option:Kv(this.option,this.parsePath(e),!t&&Hd(this,e))},getShallow:function(e,t){var n=this.option,i=null==n?n:n[e],a=!t&&Hd(this,e);return null==i&&a&&(i=a.getShallow(e)),i},getModel:function(e,t){var n;return new ze(null==e?this.option:Kv(this.option,e=this.parsePath(e)),t=t||(n=Hd(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(ue(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){$v(this).getParent=e},isAnimationEnabled:function(){if(!he.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Or(ze),zl(ze),su(ze,qI),su(ze,KI),su(ze,y2),su(ze,_2);var b2=0;function jr(e){return[e||"",b2++,Math.random().toFixed(5)].join("_")}function nt(e,t,n,i){var a=t[1]-t[0],o=n[1]-n[0];if(0==a)return 0==o?n[0]:(n[0]+n[1])/2;if(i)if(0<a){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/a*o+n[0]}function Q(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(n){return n.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function wt(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function Ba(e){return e.sort(function(t,n){return t-n}),e}function Jv(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function lu(e){var t=e.toString(),n=t.indexOf("e");if(0<n){var i=+t.slice(n+1);return i<0?-i:0}var a=t.indexOf(".");return a<0?0:t.length-1-a}function Zd(e,t){var n=Math.log,i=Math.LN10,a=Math.floor(n(e[1]-e[0])/i),o=Math.round(n(Math.abs(t[1]-t[0]))/i),r=Math.min(Math.max(-a+o,0),20);return isFinite(r)?r:20}function ey(e,t,n){if(!e[t])return 0;var i=oe(e,function(p,m){return p+(isNaN(m)?0:m)},0);if(0===i)return 0;for(var a=Math.pow(10,n),o=O(e,function(p){return(isNaN(p)?0:p)/i*a*100}),r=100*a,s=O(o,function(p){return Math.floor(p)}),l=oe(s,function(p,m){return p+m},0),u=O(o,function(p,m){return p-s[m]});l<r;){for(var h=Number.NEGATIVE_INFINITY,c=null,d=0,f=u.length;d<f;++d)u[d]>h&&(h=u[d],c=d);++s[c],u[c]=0,++l}return s[t]/a}var Ud=9007199254740991;function jd(e){var t=2*Math.PI;return(e%t+t)%t}function Xr(e){return-1e-4<e&&e<1e-4}var w2=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Yr(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=w2.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function ty(e){return Math.pow(10,Xd(e))}function Xd(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function Yd(e,t){var n=Xd(e),i=Math.pow(10,n),a=e/i;return e=(t?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*i,-20<=n?+e.toFixed(n<0?-n:0):e}function qd(e){e.sort(function(s,l){return function u(h,c,d){return h.interval[d]<c.interval[d]||h.interval[d]===c.interval[d]&&(h.close[d]-c.close[d]==(d?-1:1)||!d&&u(h,c,1))}(s,l,0)?-1:1});for(var t=-1/0,n=1,i=0;i<e.length;){for(var a=e[i].interval,o=e[i].close,r=0;r<2;r++)a[r]<=t&&(a[r]=t,o[r]=r?1:1-n),t=a[r],n=o[r];a[0]===a[1]&&o[0]*o[1]!=1?e.splice(i,1):i++}return e}function ny(e){return 0<=e-parseFloat(e)}var S2=(Object.freeze||Object)({linearMap:nt,parsePercent:Q,round:wt,asc:Ba,getPrecision:Jv,getPrecisionSafe:lu,getPixelPrecision:Zd,getPercentWithPrecision:ey,MAX_SAFE_INTEGER:Ud,remRadian:jd,isRadianAroundZero:Xr,parseDate:Yr,quantity:ty,quantityExponent:Xd,nice:Yd,quantile:function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),a=+e[i-1],o=n-i;return o?a+o*(e[i]-a):a},reformIntervals:qd,isNumeric:ny});function ta(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function iy(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Va=$,M2=/([&<>"'])/g,I2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ot(e){return null==e?"":(e+"").replace(M2,function(t,n){return I2[n]})}function $d(e,t){return"{"+e+(null==t?"":t)+"}"}var ay=["a","b","c","d","e","f","g"];function Kd(e,t,n){z(t)||(t=[t]);var i=t.length;if(!i)return"";for(var a=t[0].$vars||[],o=0;o<a.length;o++){var r=ay[o];e=e.replace($d(r),$d(r,0))}for(var s=0;s<i;s++)for(var l=0;l<a.length;l++){var u=t[s][a[l]];e=e.replace($d(ay[l],s),n?ot(u):u)}return e}function oy(e,t,n){return I(t,function(i,a){e=e.replace("{"+a+"}",n?ot(i):i)}),e}function uu(e,t){var n=(e=q(e)?{color:e,extraCssText:t}:e||{}).color,a=(t=e.extraCssText,e.renderMode||"html"),o=e.markerId||"X";return n?"html"===a?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ot(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+ot(n)+";"+(t||"")+'"></span>':{renderMode:a,content:"{marker"+o+"|}  ",style:{color:n}}:""}function zo(e,t){return"0000".substr(0,t-(e+="").length)+e}function Qd(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var i=Yr(t),a=n?"UTC":"",o=i["get"+a+"FullYear"](),r=i["get"+a+"Month"]()+1,s=i["get"+a+"Date"](),l=i["get"+a+"Hours"](),u=i["get"+a+"Minutes"](),h=i["get"+a+"Seconds"](),c=i["get"+a+"Milliseconds"]();return e.replace("MM",zo(r,2)).replace("M",r).replace("yyyy",o).replace("yy",o%100).replace("dd",zo(s,2)).replace("d",s).replace("hh",zo(l,2)).replace("h",l).replace("mm",zo(u,2)).replace("m",u).replace("ss",zo(h,2)).replace("s",h).replace("SSS",zo(c,3))}function hu(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)}var ry=Xc;function qr(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var T2=(Object.freeze||Object)({addCommas:ta,toCamelCase:iy,normalizeCssArray:Va,encodeHTML:ot,formatTpl:Kd,formatTplSimple:oy,getTooltipMarker:uu,formatTime:Qd,capitalFirst:hu,truncateText:ry,getTextBoundingRect:function(e){return Yn(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,i,a,o,r,s){return Yn(e,t,n,i,a,s,o,r)},windowOpen:qr}),cu=I,sy=["left","right","top","bottom","width","height"],Fa=[["width","left","right"],["height","top","bottom"]];function Jd(e,t,n,i,a){var o=0,r=0;null==i&&(i=1/0),null==a&&(a=1/0);var s=0;t.eachChild(function(l,u){var h,c,d=l.position,f=l.getBoundingRect(),p=t.childAt(u+1),m=p&&p.getBoundingRect();if("horizontal"===e){var g=f.width+(m?-m.x+f.x:0);s=i<(h=o+g)||l.newline?(o=0,h=g,r+=s+n,f.height):Math.max(s,f.height)}else{var v=f.height+(m?-m.y+f.y:0);s=a<(c=r+v)||l.newline?(o+=s+n,r=0,c=v,f.width):Math.max(s,f.width)}l.newline||(d[0]=o,d[1]=r,"horizontal"===e?o=h+n:r=c+n)})}var Ga=Jd;function vt(e,t,n){n=Va(n||0);var i=t.width,a=t.height,o=Q(e.left,i),r=Q(e.top,a),s=Q(e.right,i),l=Q(e.bottom,a),u=Q(e.width,i),h=Q(e.height,a),c=n[2]+n[0],d=n[1]+n[3],f=e.aspect;switch(isNaN(u)&&(u=i-s-d-o),isNaN(h)&&(h=a-l-c-r),null!=f&&(isNaN(u)&&isNaN(h)&&(i/a<f?u=.8*i:h=.8*a),isNaN(u)&&(u=f*h),isNaN(h)&&(h=u/f)),isNaN(o)&&(o=i-s-u-d),isNaN(r)&&(r=a-l-h-c),e.left||e.right){case"center":o=i/2-u/2-n[3];break;case"right":o=i-u-d}switch(e.top||e.bottom){case"middle":case"center":r=a/2-h/2-n[0];break;case"bottom":r=a-h-c}o=o||0,r=r||0,isNaN(u)&&(u=i-d-o-(s||0)),isNaN(h)&&(h=a-c-r-(l||0));var p=new Le(o+n[3],r+n[0],u,h);return p.margin=n,p}function du(e,t,n,i,a){var o=!a||!a.hv||a.hv[0],r=!a||!a.hv||a.hv[1],s=a&&a.boundingMode||"all";if(o||r){var l;if("raw"===s)l="group"===e.type?new Le(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(l=e.getBoundingRect(),e.needLocalTransform()){var u=e.getLocalTransform();(l=l.clone()).applyTransform(u)}t=vt(ie({width:l.width,height:l.height},t),n,i);var h=e.position,c=o?t.x-l.x:0,d=r?t.y-l.y:0;e.attr("position","raw"===s?[c,d]:[h[0]+c,h[1]+d])}}function na(e,t,n){X(n)||(n={});var i=n.ignoreSize;z(i)||(i=[i,i]);var a=r(Fa[0],0),o=r(Fa[1],1);function r(h,c){var d={},f=0,p={},m=0;if(cu(h,function(x){p[x]=e[x]}),cu(h,function(x){s(t,x)&&(d[x]=p[x]=t[x]),l(d,x)&&f++,l(p,x)&&m++}),i[c])return l(t,h[1])?p[h[2]]=null:l(t,h[2])&&(p[h[1]]=null),p;if(2!==m&&f){if(2<=f)return d;for(var g=0;g<h.length;g++){var v=h[g];if(!s(d,v)&&s(e,v)){d[v]=e[v];break}}return d}return p}function s(h,c){return h.hasOwnProperty(c)}function l(h,c){return null!=h[c]&&"auto"!==h[c]}function u(h,c,d){cu(h,function(f){c[f]=d[f]})}u(Fa[0],e,a),u(Fa[1],e,o)}function Bo(e){return ly({},e)}function ly(e,t){return t&&e&&cu(sy,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}V(Jd,"vertical"),V(Jd,"horizontal");var ef,fu,uy,A2=Kt(),Ge=ze.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,i){ze.call(this,e,t,n,i),this.uid=jr("ec_cpt_model")},init:function(e,t,n,i){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?Bo(e):{};pe(e,t.getTheme().get(this.mainType)),pe(e,this.getDefaultOption()),n&&na(e,i,n)},mergeOption:function(e,t){pe(this.option,e,!0);var n=this.layoutMode;n&&na(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=A2(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&t.push(i),n=n.superClass}for(var a={},o=t.length-1;0<=o;o--)a=pe(a,t[o],!0);e.defaultOption=a}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function hy(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}Bl(Ge,{registerWhenExtend:!0}),fu={},(ef=Ge).registerSubTypeDefaulter=function(e,t){e=Xi(e),fu[e.main]=t},ef.determineSubType=function(e,t){var n=t.type;if(!n){var i=Xi(e).main;ef.hasSubTypes(e)&&fu[i]&&(n=fu[i](t))}return n},uy=function(e){var t=[];return I(Ge.getClassesByMainType(e),function(n){t=t.concat(n.prototype.dependencies||[])}),t=O(t,function(n){return Xi(n).main}),"dataset"!==e&&E(t,"dataset")<=0&&t.unshift("dataset"),t},Ge.topologicalTravel=function(e,t,n,i){if(e.length){var a=(p={},m=[],I(f=t,function(g){var y,b,_,v=hy(p,g),x=(y=v.originalDeps=uy(g),b=f,_=[],I(y,function(w){0<=E(b,w)&&_.push(w)}),_);v.entryCount=x.length,0===v.entryCount&&m.push(g),I(x,function(y){E(v.predecessor,y)<0&&v.predecessor.push(y);var b=hy(p,y);E(b.successor,y)<0&&b.successor.push(g)})}),{graph:p,noEntryList:m}),o=a.graph,r=a.noEntryList,s={};for(I(e,function(f){s[f]=!0});r.length;){var l=r.pop(),u=o[l],h=!!s[l];h&&(n.call(i,l,u.originalDeps.slice()),delete s[l]),I(u.successor,h?d:c)}I(s,function(){throw new Error("Circle dependency may exists")})}var f,p,m;function c(f){o[f].entryCount--,0===o[f].entryCount&&r.push(f)}function d(f){s[f]=!0,c(f)}},j(Ge,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var cy="";"undefined"!=typeof navigator&&(cy=navigator.platform||"");var C2={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:cy.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},tf=Kt(),nf={clearColorPalette:function(){tf(this).colorIdx=0,tf(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var i=tf(t=t||this),a=i.colorIdx||0,o=i.colorNameMap=i.colorNameMap||{};if(o.hasOwnProperty(e))return o[e];var r=Et(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(h,c){for(var d=h.length,f=0;f<d;f++)if(h[f].length>c)return h[f];return h[d-1]}(s,n):r;if((l=l||r)&&l.length){var u=l[a];return e&&(o[e]=u),i.colorIdx=(a+1)%l.length,u}}},Wa="original",$r="arrayRows",Kr="objectRows",Qr="keyedColumns",dy="unknown",pu="typedArray";function Gn(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===Qr?{}:[]),this.sourceFormat=e.sourceFormat||dy,this.seriesLayoutBy=e.seriesLayoutBy||"column",this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&ne(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Gn.seriesDataToSource=function(e){return new Gn({data:e,sourceFormat:ge(e)?pu:Wa,fromDataset:!1})},zl(Gn);var Vo=Kt();function py(e){var t=e.option,n=t.data,i=ge(n)?pu:Wa,a=!1,o=t.seriesLayoutBy,r=t.sourceHeader,s=t.dimensions,l=rf(e);if(l){var u=l.option;n=u.source,i=Vo(l).sourceFormat,a=!0,o=o||u.seriesLayoutBy,null==r&&(r=u.sourceHeader),s=s||u.dimensions}var h=function(c,d,f,p,m){if(!c)return{dimensionsDefine:gy(m)};var g,v;if(d===$r)"auto"===p||null==p?my(function(y){null!=y&&"-"!==y&&(q(y)?null==v&&(v=1):v=0)},f,c,10):v=p?1:0,m||1!==v||(m=[],my(function(y,b){m[b]=null!=y?y:""},f,c)),g=m?m.length:"row"===f?c.length:c[0]?c[0].length:null;else if(d===Kr)m=m||function(y){for(var b,_=0;_<y.length&&!(b=y[_++]););if(b){var w=[];return I(b,function(S,M){w.push(M)}),w}}(c);else if(d===Qr)m||(m=[],I(c,function(y,b){m.push(b)}));else if(d===Wa){var x=Er(c[0]);g=z(x)&&x.length||1}return{startIndex:v,dimensionsDefine:gy(m),dimensionsDetectCount:g}}(n,i,o,r,s);Vo(e).source=new Gn({data:n,fromDataset:a,seriesLayoutBy:o,sourceFormat:i,dimensionsDefine:h.dimensionsDefine,startIndex:h.startIndex,dimensionsDetectCount:h.dimensionsDetectCount,encodeDefine:t.encode})}function gy(e){if(e){var t=ne();return O(e,function(n,i){if(null==(n=fe({},X(n)?n:{name:n})).name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var a=t.get(n.name);return a?n.name+="-"+a.count++:t.set(n.name,{count:1}),n})}}function my(e,t,n,i){if(null==i&&(i=1/0),"row"===t)for(var a=0;a<n.length&&a<i;a++)e(n[a]?n[a][0]:null,a);else{var o=n[0]||[];for(a=0;a<o.length&&a<i;a++)e(o[a],a)}}function vy(e,t,n){var i={},a=rf(t);if(!a||!e)return i;var o,r,s=[],l=[],h=Vo(t.ecModel).datasetMap,c=a.uid+"_"+n.seriesLayoutBy;I(e=e.slice(),function(m,g){X(m)||(e[g]={name:m}),"ordinal"===m.type&&null==o&&(r=p(e[o=g])),i[m.name]=[]});var d=h.get(c)||h.set(c,{categoryWayDim:r,valueWayDim:0});function f(m,g,v){for(var x=0;x<v;x++)m.push(g+x)}function p(m){var g=m.dimsDef;return g?g.length:1}return I(e,function(m,g){var v=m.name,x=p(m);if(null==o){var y=d.valueWayDim;f(i[v],y,x),f(l,y,x),d.valueWayDim+=x}else o===g?(f(i[v],0,x),f(s,0,x)):(f(i[v],y=d.categoryWayDim,x),f(l,y,x),d.categoryWayDim+=x)}),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function of(e,t,n){var i={};if(!rf(e))return i;var a,o=t.sourceFormat,r=t.dimensionsDefine;o!==Kr&&o!==Qr||I(r,function(u,h){"name"===(X(u)?u.name:u)&&(a=h)});var s=function(){for(var u={},h={},c=[],d=0,f=Math.min(5,n);d<f;d++){var p=yy(t.data,o,t.seriesLayoutBy,r,t.startIndex,d);c.push(p);var m=3===p;if(m&&null==u.v&&d!==a&&(u.v=d),null!=u.n&&u.n!==u.v&&(m||3!==c[u.n])||(u.n=d),g(u)&&3!==c[u.n])return u;m||(2===p&&null==h.v&&d!==a&&(h.v=d),null!=h.n&&h.n!==h.v||(h.n=d))}function g(v){return null!=v.v&&null!=v.n}return g(u)?u:g(h)?h:null}();if(s){i.value=s.v;var l=null!=a?a:s.n;i.itemName=[l],i.seriesName=[l]}return i}function rf(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function yy(e,t,n,i,a,o){var r,s,l;if(ge(e))return 3;if(i){var u=i[o];X(u)?(s=u.name,l=u.type):q(u)&&(s=u)}if(null!=l)return"ordinal"===l?1:3;if(t===$r)if("row"===n){for(var h=e[o],c=0;c<(h||[]).length&&c<5;c++)if(null!=(r=m(h[a+c])))return r}else for(c=0;c<e.length&&c<5;c++){var d=e[a+c];if(d&&null!=(r=m(d[o])))return r}else if(t===Kr){if(!s)return 3;for(c=0;c<e.length&&c<5;c++)if((f=e[c])&&null!=(r=m(f[s])))return r}else if(t===Qr){if(!s||!(h=e[s])||ge(h))return 3;for(c=0;c<h.length&&c<5;c++)if(null!=(r=m(h[c])))return r}else if(t===Wa)for(c=0;c<e.length&&c<5;c++){var f,p=Er(f=e[c]);if(!z(p))return 3;if(null!=(r=m(p[o])))return r}function m(g){var v=q(g);return null!=g&&isFinite(g)&&""!==g?v?2:3:v&&"-"!==g?1:void 0}return 3}var sf="\0_ec_inner",lf=ze.extend({init:function(e,t,n,i){n=n||{},this.option=null,this._theme=new ze(n),this._optionManager=i},setOption:function(e,t){te(!(sf in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var i=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(i)):function(r){var s,u;r=r,this.option={},this.option[sf]=1,this._componentsMap=ne({series:[]}),u=(s=r).color&&!s.colorLayer,I(this._theme.option,function(h,c){"colorLayer"===c&&u||Ge.hasClass(c)||("object"==typeof h?s[c]=s[c]?pe(s[c],h,!1):ue(h):null==s[c]&&(s[c]=h))}),pe(r,C2,!1),this.mergeOption(r)}.call(this,i),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var a=n.getTimelineOption(this);a&&(this.mergeOption(a),t=!0)}if(!e||"recreate"===e||"media"===e){var o=n.getMediaOption(this,this._api);o.length&&I(o,function(r){this.mergeOption(r,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,i=[];(function(a){Vo(a).datasetMap=ne()})(this),I(e,function(a,o){null!=a&&(Ge.hasClass(o)?o&&i.push(o):t[o]=null==t[o]?ue(a):pe(t[o],a,!0))}),Ge.topologicalTravel(i,Ge.getAllClassMainTypes(),function(a,o){var r=Et(e[a]),s=bd(n.get(a),r);ev(s),I(s,function(u,h){var f,p,c=u.option;X(c)&&(u.keyInfo.mainType=a,u.keyInfo.subType=(p=u.exist,(f=c).type?f.type:p?p.subType:Ge.determineSubType(a,f)))});var l=function(u,h){z(h)||(h=h?[h]:[]);var c={};return I(h,function(d){c[d]=(u.get(d)||[]).slice()}),c}(n,o);t[a]=[],n.set(a,[]),I(s,function(u,h){var c=u.exist,d=u.option;if(te(X(d)||c,"Empty component definition"),d){var f=Ge.getClass(a,u.keyInfo.subType,!0);if(c&&c.constructor===f)c.name=u.keyInfo.name,c.mergeOption(d,this),c.optionUpdated(d,!1);else{var p=fe({dependentModels:l,componentIndex:h},u.keyInfo);fe(c=new f(d,this,this,p),p),c.init(d,this,this,p),c.optionUpdated(null,!0)}}else c.mergeOption({},this),c.optionUpdated({},!1);n.get(a)[h]=c,t[a][h]=c.option},this),"series"===a&&uf(this,n.get("series"))},this),this._seriesIndicesMap=ne(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=ue(this.option);return I(e,function(t,n){if(Ge.hasClass(n)){for(var i=(t=Et(t)).length-1;0<=i;i--)El(t[i])&&t.splice(i,1);e[n]=t}}),delete e[sf],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,i=e.index,a=e.id,o=e.name,r=this._componentsMap.get(t);if(!r||!r.length)return[];if(null!=i)z(i)||(i=[i]),n=se(O(i,function(u){return r[u]}),function(u){return!!u});else if(null!=a){var s=z(a);n=se(r,function(u){return s&&0<=E(a,u.id)||!s&&u.id===a})}else if(null!=o){var l=z(o);n=se(r,function(u){return l&&0<=E(o,u.name)||!l&&u.name===o})}else n=r.slice();return xy(n,e)},findComponents:function(e){var t,n,i,a,o,s=e.mainType,l=(n=s+"Index",i=s+"Id",a=s+"Name",!(t=e.query)||null==t[n]&&null==t[i]&&null==t[a]?null:{mainType:s,index:t[n],id:t[i],name:t[a]});return o=xy(l?this.queryComponents(l):this._componentsMap.get(s),e),e.filter?se(o,e.filter):o},eachComponent:function(e,t,n){var i=this._componentsMap;"function"==typeof e?(n=t,t=e,i.each(function(a,o){I(a,function(r,s){t.call(n,o,r,s)})})):q(e)?I(i.get(e),t,n):X(e)&&I(this.findComponents(e),t,n)},getSeriesByName:function(e){return se(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return se(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){I(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];e.call(t,i,n)},this)},eachRawSeries:function(e,t){I(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){I(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];a.subType===e&&t.call(n,a,i)},this)},eachRawSeriesByType:function(e,t,n){return I(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){uf(this,se(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;uf(this,t.get("series"));var n=[];t.each(function(i,a){n.push(a)}),Ge.topologicalTravel(n,Ge.getAllClassMainTypes(),function(i,a){I(t.get(i),function(o){"series"===i&&function(r,s){if(s){var l=s.seiresIndex,u=s.seriesId,h=s.seriesName;return null!=l&&r.componentIndex!==l||null!=u&&r.id!==u||null!=h&&r.name!==h}}(o,e)||o.restoreData()})})}});function uf(e,t){e._seriesIndicesMap=ne(e._seriesIndices=O(t,function(n){return n.componentIndex})||[])}function xy(e,t){return t.hasOwnProperty("subType")?se(e,function(n){return n.subType===t.subType}):e}j(lf,nf);var D2=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function _y(e){I(D2,function(t){this[t]=Z(e[t],e)},this)}var hf={};function Gt(){this._coordinateSystems=[]}Gt.prototype={constructor:Gt,create:function(e,t){var n=[];I(hf,function(i,a){var o=i.create(e,t);n=n.concat(o||[])}),this._coordinateSystems=n},update:function(e,t){I(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},Gt.register=function(e,t){hf[e]=t},Gt.get=function(e){return hf[e]};var gu=I,Ha=ue,mu=O,by=pe,L2=/^(min|max)?(.+)$/;function cf(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function P2(e,t,n){var i={width:t,height:n,aspectratio:t/n},a=!0;return I(e,function(o,r){var h,c,d,s=r.match(L2);if(s&&s[1]&&s[2]){var l=s[1],u=s[2].toLowerCase();h=i[u],c=o,!("min"===(d=l)?c<=h:"max"===d?h<=c:h===c)&&(a=!1)}}),a}cf.prototype={constructor:cf,setOption:function(e,t){e&&I(Et(e.series),function(a){a&&a.data&&ge(a.data)&&pt(a.data)}),e=Ha(e);var n=this._optionBackup,i=function(a,o,r){var s,l,u=[],h=[],c=a.timeline;return a.baseOption&&(l=a.baseOption),(c||a.options)&&(l=l||{},u=(a.options||[]).slice()),a.media&&(l=l||{},gu(a.media,function(f){f&&f.option&&(f.query?h.push(f):s=s||f)})),(l=l||a).timeline||(l.timeline=c),gu([l].concat(u).concat(O(h,function(f){return f.option})),function(f){gu(o,function(p){p(f,r)})}),{baseOption:l,timelineOptions:u,mediaDefault:s,mediaList:h}}.call(this,e,t,!n);this._newBaseOption=i.baseOption,n?(function(a,o){gu(o=o||{},function(r,s){if(null!=r){var l=a[s];if(Ge.hasClass(s)){r=Et(r);var u=bd(l=Et(l),r);a[s]=mu(u,function(h){return h.option&&h.exist?by(h.exist,h.option,!0):h.exist||h.option})}else a[s]=by(l,r,!0)}})}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=mu(t.timelineOptions,Ha),this._mediaList=mu(t.mediaList,Ha),this._mediaDefault=Ha(t.mediaDefault),this._currentMediaIndices=[],Ha(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var i=e.getComponent("timeline");i&&(t=Ha(n[i.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var h,t=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],r=[];if(!i.length&&!a)return r;for(var s=0,l=i.length;s<l;s++)P2(i[s].query,t,n)&&o.push(s);return!o.length&&a&&(o=[-1]),o.length&&(h=this._currentMediaIndices,!(o.join(",")===h.join(",")))&&(r=mu(o,function(u){return Ha(-1===u?a.option:i[u].option)})),this._currentMediaIndices=o,r}};var Wn=I,Jr=X,wy=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function df(e){var t=e&&e.itemStyle;if(t)for(var n=0,i=wy.length;n<i;n++){var a=wy[n],o=t.normal,r=t.emphasis;o&&o[a]&&(e[a]=e[a]||{},e[a].normal?pe(e[a].normal,o[a]):e[a].normal=o[a],o[a]=null),r&&r[a]&&(e[a]=e[a]||{},e[a].emphasis?pe(e[a].emphasis,r[a]):e[a].emphasis=r[a],r[a]=null)}}function Wt(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,a=e[t].emphasis;i&&(n?(e[t].normal=e[t].emphasis=null,ie(e[t],i)):e[t]=i),a&&(e.emphasis=e.emphasis||{},e.emphasis[t]=a)}}function es(e){Wt(e,"itemStyle"),Wt(e,"lineStyle"),Wt(e,"areaStyle"),Wt(e,"label"),Wt(e,"labelLine"),Wt(e,"upperLabel"),Wt(e,"edgeLabel")}function yt(e,t){var n=Jr(e)&&e[t],i=Jr(n)&&n.textStyle;if(i)for(var a=0,o=J0.length;a<o;a++)i.hasOwnProperty(t=J0[a])&&(n[t]=i[t])}function An(e){e&&(es(e),yt(e,"label"),e.emphasis&&yt(e.emphasis,"label"))}function Ai(e){return z(e)?e:e?[e]:[]}function Sy(e){return(z(e)?e[0]:e)||{}}function My(e){I(N2,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var N2=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],E2=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Iy=function(e,t){(function k2(e,t){Wn(Ai(e.series),function(i){Jr(i)&&function(a){if(Jr(a)){df(a),es(a),yt(a,"label"),yt(a,"upperLabel"),yt(a,"edgeLabel"),a.emphasis&&(yt(a.emphasis,"label"),yt(a.emphasis,"upperLabel"),yt(a.emphasis,"edgeLabel")),(r=a.markPoint)&&(df(r),An(r)),(s=a.markLine)&&(df(s),An(s));var o=a.markArea;o&&An(o);var r,s,l=a.data;if("graph"===a.type){l=l||a.nodes;var u=a.links||a.edges;if(u&&!ge(u))for(var h=0;h<u.length;h++)An(u[h]);I(a.categories,function(f){es(f)})}if(l&&!ge(l))for(h=0;h<l.length;h++)An(l[h]);if((r=a.markPoint)&&r.data){var c=r.data;for(h=0;h<c.length;h++)An(c[h])}if((s=a.markLine)&&s.data){var d=s.data;for(h=0;h<d.length;h++)z(d[h])?(An(d[h][0]),An(d[h][1])):An(d[h])}"gauge"===a.type?(yt(a,"axisLabel"),yt(a,"title"),yt(a,"detail")):"treemap"===a.type?(Wt(a.breadcrumb,"itemStyle"),I(a.levels,function(f){es(f)})):"tree"===a.type&&es(a.leaves)}}(i)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Wn(n,function(i){Wn(Ai(e[i]),function(a){a&&(yt(a,"axisLabel"),yt(a.axisPointer,"label"))})}),Wn(Ai(e.parallel),function(i){var a=i&&i.parallelAxisDefault;yt(a,"axisLabel"),yt(a&&a.axisPointer,"label")}),Wn(Ai(e.calendar),function(i){Wt(i,"itemStyle"),yt(i,"dayLabel"),yt(i,"monthLabel"),yt(i,"yearLabel")}),Wn(Ai(e.radar),function(i){yt(i,"name")}),Wn(Ai(e.geo),function(i){Jr(i)&&(An(i),Wn(Ai(i.regions),function(a){An(a)}))}),Wn(Ai(e.timeline),function(i){An(i),Wt(i,"label"),Wt(i,"itemStyle"),Wt(i,"controlStyle",!0);var a=i.data;z(a)&&I(a,function(o){X(o)&&(Wt(o,"label"),Wt(o,"itemStyle"))})}),Wn(Ai(e.toolbox),function(i){Wt(i,"iconStyle"),Wn(i.feature,function(a){Wt(a,"iconStyle")})}),yt(Sy(e.axisPointer),"label"),yt(Sy(e.tooltip).axisPointer,"label")})(e,t),e.series=Et(e.series),I(e.series,function(n){if(X(n)){var i=n.type;if("line"===i)null!=n.clipOverflow&&(n.clip=n.clipOverflow);else if("pie"===i||"gauge"===i)null!=n.clockWise&&(n.clockwise=n.clockWise);else if("gauge"===i){var a=function(o,r){r=r.split(",");for(var s=o,l=0;l<r.length&&null!=(s=s&&s[r[l]]);l++);return s}(n,"pointer.color");null!=a&&function(o,r,s,l){r=r.split(",");for(var u,h=o,c=0;c<r.length-1;c++)null==h[u=r[c]]&&(h[u]={}),h=h[u];null!=h[r[c]]||(h[r[c]]=s)}(n,"itemStyle.color",a)}My(n)}}),e.dataRange&&(e.visualMap=e.dataRange),I(E2,function(n){var i=e[n];i&&(z(i)||(i=[i]),I(i,function(a){My(a)}))})};function O2(e){I(e,function(t,n){var i=[],a=[NaN,NaN],r=t.data,s=t.isStackedByIndex,l=r.map([t.stackResultDimension,t.stackedOverDimension],function(u,h,c){var d,f,p=r.get(t.stackedDimension,c);if(isNaN(p))return a;s?f=r.getRawIndex(c):d=r.get(t.stackedByDimension,c);for(var m=NaN,g=n-1;0<=g;g--){var v=e[g];if(s||(f=v.data.rawIndexOf(v.stackedByDimension,d)),0<=f){var x=v.data.getByRawIndex(v.stackResultDimension,f);if(0<=p&&0<x||p<=0&&x<0){p+=x,m=x;break}}}return i[0]=p,i[1]=m,i});r.hostModel.setData(l),t.data=l})}function Ty(e,t){Gn.isInstance(e)||(e=Gn.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,i=e.sourceFormat;i===pu&&(this._offset=0,this._dimSize=t,this._data=n),fe(this,R2[i===$r?i+"_"+e.seriesLayoutBy:i])}var ff=Ty.prototype;ff.pure=!1;var R2={arrayRows_column:{pure:ff.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:pf},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,i=0;i<n.length;i++){var a=n[i];t.push(a?a[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Ay,getItem:Cy,appendData:pf},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var a=this._data[n[i].name];t.push(a?a[e]:null)}return t},appendData:function(e){var t=this._data;I(e,function(n,i){for(var a=t[i]||(t[i]=[]),o=0;o<(n||[]).length;o++)a.push(n[o])})}},original:{count:Ay,getItem:Cy,appendData:pf},typedArray:{persistent:!(ff.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var n=this._dimSize*(e-=this._offset),i=0;i<this._dimSize;i++)t[i]=this._data[n+i];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function Ay(){return this._data.length}function Cy(e){return this._data[e]}function pf(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var z2={arrayRows:gf,objectRows:function(e,t,n,i){return null!=n?e[i]:e},keyedColumns:gf,original:function(e,t,n,i){var a=Er(e);return null!=n&&a instanceof Array?a[n]:a},typedArray:gf};function gf(e,t,n,i){return null!=n?e[n]:e}var Dy={arrayRows:Ly,objectRows:function(e,t,n,i){return mf(e[t],this._dimensionInfos[t])},keyedColumns:Ly,original:function(e,t,n,i){var a=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(o){return Do(o)&&!(o instanceof Array)}(e)&&(this.hasItemOption=!0),mf(a instanceof Array?a[i]:a,this._dimensionInfos[t])},typedArray:function(e,t,n,i){return e[i]}};function Ly(e,t,n,i){return mf(e[i],this._dimensionInfos[t])}function mf(e,t){var n=t&&t.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+Yr(e)),null==e||""===e?NaN:+e;var i=t&&t.ordinalMeta;return i?i.parseAndCollect(e):e}function Za(e,t,n){if(e){var i=e.getRawDataItem(t);if(null!=i){var a,o,r=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(n);return s&&(a=s.name,o=s.index),z2[r](i,t,o,a)}}}function Py(e,t,n){if(e){var i=e.getProvider().getSource().sourceFormat;if(i===Wa||i===Kr){var a=e.getRawDataItem(t);return i!==Wa||X(a)||(a=null),a?a[n]:void 0}}}var B2=/\{@(.+?)\}/g,vf={getDataParams:function(e,t){var n=this.getData(t),i=this.getRawValue(e,t),a=n.getRawIndex(e),o=n.getName(e),r=n.getRawDataItem(e),s=n.getItemVisual(e,"color"),l=n.getItemVisual(e,"borderColor"),u=this.ecModel.getComponent("tooltip"),h=nv(u&&u.get("renderMode")),c=this.mainType,d="series"===c,f=n.userOutput;return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:o,dataIndex:a,data:r,dataType:t,value:i,color:s,borderColor:l,dimensionNames:f?f.dimensionNames:null,encode:f?f.encode:null,marker:uu({color:s,renderMode:h}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,i,a){t=t||"normal";var o=this.getData(n),r=o.getItemModel(e),s=this.getDataParams(e,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=r.get("normal"===t?[a||"label","formatter"]:[t,a||"label","formatter"]);return"function"==typeof l?(s.status=t,s.dimensionIndex=i,l(s)):"string"==typeof l?Kd(l,s).replace(B2,function(u,h){var c=h.length;return"["===h.charAt(0)&&"]"===h.charAt(c-1)&&(h=+h.slice(1,c-1)),Za(o,e,h)}):void 0},getRawValue:function(e,t){return Za(this.getData(t),e)},formatTooltip:function(){}};function ts(e){return new ky(e)}function ky(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var ia=ky.prototype;ia.perform=function(e){var t,n=this._upstream,i=e&&e.skip;if(this._dirty&&n){var a=this.context;a.data=a.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(t=this._plan(this.context));var o,r=h(this._modBy),s=this._modDataCount||0,l=h(e&&e.modBy),u=e&&e.modDataCount||0;function h(v){return 1<=v||(v=1),v}r===l&&s===u||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,o=function(v,x){var y,b;v._dueIndex=v._outputDueEnd=v._dueEnd=0,v._settedOutputEnd=null,!x&&v._reset&&((y=v._reset(v.context))&&y.progress&&(b=y.forceFirstProgress,y=y.progress),z(y)&&!y.length&&(y=null)),v._progress=y,v._modBy=v._modDataCount=null;var _=v._downstream;return _&&_.dirty(),b}(this,i)),this._modBy=l,this._modDataCount=u;var c=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,f=Math.min(null!=c?this._dueIndex+c:1/0,this._dueEnd);if(!i&&(o||d<f)){var p=this._progress;if(z(p))for(var m=0;m<p.length;m++)Oy(this,p[m],d,f,l,u);else Oy(this,p,d,f,l,u)}this._dueIndex=f,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:f}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var yf,aa,vu,yu,xf,Ny,Ey=Ny={reset:function(e,t,n,i){aa=e,yf=t,vu=n,yu=i,xf=Math.ceil(yu/vu),Ny.next=1<vu&&0<yu?F2:V2}};function V2(){return aa<yf?aa++:null}function F2(){var e=aa%xf*vu+Math.ceil(aa/xf),t=yf<=aa?null:e<yu?e:aa;return aa++,t}function Oy(e,t,n,i,a,o){Ey.reset(n,i,a,o),e._callingProgress=t,e._callingProgress({start:n,end:i,count:i-n,next:Ey.next},e.context)}ia.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},ia.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},ia.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},ia.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},ia.getUpstream=function(){return this._upstream},ia.getDownstream=function(){return this._downstream},ia.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var ns=Kt(),ht=Ge.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,i){this.seriesIndex=this.componentIndex,this.dataTask=ts({count:G2,reset:W2}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),py(this);var a=this.getInitialData(e,n);zy(a,this),this.dataTask.context.data=a,ns(this).dataBeforeProcessed=a,Ry(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,i=n?Bo(e):{},a=this.subType;Ge.hasClass(a)&&(a+="Series"),pe(e,t.getTheme().get(this.subType)),pe(e,this.getDefaultOption()),La(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&na(e,i,n)},mergeOption:function(e,t){e=pe(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&na(this.option,e,n),py(this);var i=this.getInitialData(e,t);zy(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,ns(this).dataBeforeProcessed=i,Ry(this)},fillDataTextStyle:function(e){if(e&&!ge(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&La(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=_f(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return ns(this).data},setData:function(e){var t=_f(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}ns(this).data=e},getSource:function(){return function(e){return Vo(e).source}(this)},getRawData:function(){return ns(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,i){var a=this,o="html"===(i=i||"html")?"<br/>":"\n",r="richText"===i,s={},l=0,h=this.getData(),c=h.mapDimension("defaultedTooltip",!0),d=c.length,f=this.getRawValue(e),p=z(f),m=h.getItemVisual(e,"color");X(m)&&m.colorStops&&(m=(m.colorStops[0]||{}).color),m=m||"transparent";var g=(1<d||p&&!d?function(w){var S=oe(w,function(D,L,P){var N=h.getDimensionInfo(P);return D|(N&&!1!==N.tooltip&&null!=N.displayName)},0),M=[];function T(D,L){var P=h.getDimensionInfo(L);if(P&&!1!==P.otherDims.tooltip){var N=P.type,R="sub"+a.seriesIndex+"at"+l,k=uu({color:m,type:"subItem",renderMode:i,markerId:R}),G=(S?("string"==typeof k?k:k.content)+ot(P.displayName||"-")+": ":"")+ot("ordinal"===N?D+"":"time"===N?t?"":Qd("yyyy/MM/dd hh:mm:ss",D):ta(D));G&&M.push(G),r&&(s[R]=m,++l)}}c.length?I(c,function(D){T(Za(h,e,D),D)}):I(w,T);var A=S?r?"\n":"<br/>":"",C=A+M.join(A||", ");return{renderMode:i,content:C,style:s}}(f):function u(w){return{renderMode:i,content:ot(ta(w)),style:s}}(d?Za(h,e,c[0]):p?f[0]:f)).content,v=a.seriesIndex+"at"+l,x=uu({color:m,type:"item",renderMode:i,markerId:v});s[v]=m,++l;var y=h.getName(e),b=this.name;wd(this)||(b=""),b=b?ot(b)+(t?": ":o):"";var _="string"==typeof x?x:x.content;return{html:t?_+b+g:b+_+(y?ot(y)+": "+g:g),markers:s}},isAnimationEnabled:function(){if(he.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var i=this.ecModel;return nf.getColorFromPalette.call(this,e,t,n)||i.getColorFromPalette(e,t,n)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Ry(e){var t=e.name;wd(e)||(e.name=function(n){var i=n.getRawData(),a=i.mapDimension("seriesName",!0),o=[];return I(a,function(r){var s=i.getDimensionInfo(r);s.displayName&&o.push(s.displayName)}),o.join(" ")}(e)||t)}function G2(e){return e.model.getRawData().count()}function W2(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),H2}function H2(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function zy(e,t){I(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,V(Z2,t))})}function Z2(e){var t=_f(e);t&&t.setOutputEnd(this.count())}function _f(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var i=n.currentTask;if(i){var a=i.agentStubMap;a&&(i=a.get(e.uid))}return i}}j(ht,vf),j(ht,nf);var ii=function(){this.group=new re,this.uid=jr("viewComponent")},bf=ii.prototype={constructor:ii,init:function(e,t){},render:function(e,t,n,i){},dispose:function(){},filterForExposedEvent:null};function Fo(){var e=Kt();return function(t){var n=e(t),i=t.pipelineContext,a=n.large,o=n.progressiveRender,r=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(a^r||o^s)&&"reset"}}bf.updateView=bf.updateLayout=bf.updateVisual=function(e,t,n,i){},Or(ii),Bl(ii,{registerWhenExtend:!0});var By=Kt(),U2=Fo();function Pt(){this.group=new re,this.uid=jr("viewChart"),this.renderTask=ts({plan:j2,reset:X2}),this.renderTask.context={view:this}}var wf=Pt.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,i){},highlight:function(e,t,n,i){Vy(e.getData(),i,"emphasis")},downplay:function(e,t,n,i){Vy(e.getData(),i,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function Sf(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!iu(e)))for(var i=0,a=e.childCount();i<a;i++)Sf(e.childAt(i),t,n)}function Vy(e,t,n){var i=Ol(e,t),a=t&&null!=t.highlightKey?Zv(t.highlightKey):null;null!=i?I(Et(i),function(o){Sf(e.getItemGraphicEl(o),n,a)}):e.eachItemGraphicEl(function(o){Sf(o,n,a)})}function j2(e){return U2(e.model)}function X2(e){var t=e.model,n=e.ecModel,i=e.api,a=e.payload,o=t.pipelineContext.progressiveRender,r=e.view,s=a&&By(a).updateMethod,l=o?"incrementalPrepareRender":s&&r[s]?s:"render";return"render"!==l&&r[l](t,n,i,a),Y2[l]}wf.updateView=wf.updateLayout=wf.updateVisual=function(e,t,n,i){this.render(e,t,n,i)},Or(Pt),Bl(Pt,{registerWhenExtend:!0}),Pt.markUpdateMethod=function(e,t){By(e).updateMethod=t};var Y2={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},xu="\0__throttleOriginMethod",Fy="\0__throttleRate",Gy="\0__throttleType";function _u(e,t,n){var i,a,o,r,s,l=0,u=0,h=null;function c(){u=(new Date).getTime(),h=null,e.apply(o,r||[])}function d(){i=(new Date).getTime(),o=this,r=arguments;var f=s||t,p=s||n;s=null,a=i-(p?l:u)-f,clearTimeout(h),p?h=setTimeout(c,f):0<=a?c():h=setTimeout(c,-a),l=i}return t=t||0,d.clear=function(){h&&(clearTimeout(h),h=null)},d.debounceNextCall=function(f){s=f},d}function is(e,t,n,i){var a=e[t];if(a){var o=a[xu]||a;if(a[Fy]!==n||a[Gy]!==i){if(null==n||!i)return e[t]=o;(a=e[t]=_u(o,n,"debounce"===i))[xu]=o,a[Gy]=i,a[Fy]=n}return a}}function Wy(e,t){var n=e[t];n&&n[xu]&&(e[t]=n[xu])}var q2={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),i=(e.visualColorAccessPath||"itemStyle.color").split("."),a=e.get(i),o=!ee(a)||a instanceof ei?null:a;a&&!o||(a=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",a);var r=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),s=e.get(r);if(n.setVisual("borderColor",s),!t.isSeriesFiltered(e))return o&&n.each(function(l){n.setItemVisual(l,"color",o(e.getDataParams(l)))}),{dataEach:n.hasItemOption?function(l,u){var h=l.getItemModel(u),c=h.get(i,!0),d=h.get(r,!0);null!=c&&l.setItemVisual(u,"color",c),null!=d&&l.setItemVisual(u,"borderColor",d)}:null}}},Ci={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},bu=Math.PI;function wu(e,t,n,i){this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i),this._stageTaskMap=ne()}var Cn=wu.prototype;function Hy(e,t,n,i,a){var o;function r(s,l){return s.setDirty&&(!s.dirtyMap||s.dirtyMap.get(l.__pipeline.id))}a=a||{},I(t,function(s,l){if(!a.visualType||a.visualType===s.visualType){var u=e._stageTaskMap.get(s.uid),h=u.seriesTaskMap,c=u.overallTask;if(c){var d,f=c.agentStubMap;f.each(function(m){r(a,m)&&(m.dirty(),d=!0)}),d&&c.dirty(),Zy(c,i);var p=e.getPerformArgs(c,a.block);f.each(function(m){m.perform(p)}),o|=c.perform(p)}else h&&h.each(function(m,g){r(a,m)&&m.dirty();var v=e.getPerformArgs(m,a.block);v.skip=!s.performRawSeries&&n.isSeriesFiltered(m.context.model),Zy(m,i),o|=m.perform(v)})}}),e.unfinished|=o}Cn.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},Cn.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),i=n.context,a=!t&&n.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,o=i&&i.modDataCount;return{step:a,modBy:null!=o?Math.ceil(o/a):null,modDataCount:o}}},Cn.getPipeline=function(e){return this._pipelineMap.get(e)},Cn.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),i=e.getData().count(),a=n.progressiveEnabled&&t.incrementalPrepareRender&&i>=n.threshold,o=e.get("large")&&i>=e.get("largeThreshold"),r="mod"===e.get("progressiveChunkMode")?i:null;e.pipelineContext=n.context={progressiveRender:a,modDataCount:r,large:o}},Cn.restorePipelines=function(e){var t=this,n=t._pipelineMap=ne();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;n.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),Su(t,i,i.dataTask)})},Cn.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;I(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,[]);i.reset&&function(o,r,s,l,u){var h=s.seriesTaskMap||(s.seriesTaskMap=ne()),c=r.seriesType,d=r.getTargetSeries;function f(m){var g=m.uid,v=h.get(g)||h.set(g,ts({plan:tT,reset:nT,count:aT}));v.context={model:m,ecModel:l,api:u,useClearVisual:r.isVisual&&!r.isLayout,plan:r.plan,reset:r.reset,scheduler:o},Su(o,m,v)}r.createOnAllSeries?l.eachRawSeries(f):c?l.eachRawSeriesByType(c,f):d&&d(l,u).each(f);var p=o._pipelineMap;h.each(function(m,g){p.get(g)||(m.dispose(),h.removeKey(g))})}(this,i,a,t,n),i.overallReset&&function(o,r,s,l,u){var h=s.overallTask=s.overallTask||ts({reset:K2});h.context={ecModel:l,api:u,overallReset:r.overallReset,scheduler:o};var c=h.agentStubMap=h.agentStubMap||ne(),d=r.seriesType,f=r.getTargetSeries,p=!0,m=r.modifyOutputEnd;function g(x){var y=x.uid,b=c.get(y);b||(b=c.set(y,ts({reset:Q2,onDirty:eT})),h.dirty()),b.context={model:x,overallProgress:p,modifyOutputEnd:m},b.agent=h,b.__block=p,Su(o,x,b)}d?l.eachRawSeriesByType(d,g):f?f(l,u).each(g):(p=!1,I(l.getSeries(),g));var v=o._pipelineMap;c.each(function(x,y){v.get(y)||(x.dispose(),h.dirty(),c.removeKey(y))})}(this,i,a,t,n)},this)},Cn.prepareView=function(e,t,n,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=n,o.api=i,a.__block=!e.incrementalPrepareRender,Su(this,t,a)},Cn.performDataProcessorTasks=function(e,t){Hy(this,this._dataProcessorHandlers,e,t,{block:!0})},Cn.performVisualTasks=function(e,t,n){Hy(this,this._visualHandlers,e,t,n)},Cn.performSeriesTasks=function(e){var t;e.eachSeries(function(n){t|=n.dataTask.perform()}),this.unfinished|=t},Cn.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var Zy=Cn.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function K2(e){e.overallReset(e.ecModel,e.api,e.payload)}function Q2(e,t){return e.overallProgress&&J2}function J2(){this.agent.dirty(),this.getDownstream().dirty()}function eT(){this.agent&&this.agent.dirty()}function tT(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function nT(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Et(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?O(t,function(n,i){return Uy(i)}):iT}var iT=Uy(0);function Uy(e){return function(t,n){var i=n.data,a=n.resetDefines[e];if(a&&a.dataEach)for(var o=t.start;o<t.end;o++)a.dataEach(i,o);else a&&a.progress&&a.progress(t,i)}}function aT(e){return e.data.count()}function Su(e,t,n){var a=e._pipelineMap.get(t.uid);a.head||(a.head=n),a.tail&&a.tail.pipe(n),(a.tail=n).__idxInPipeline=a.count++,n.__pipeline=a}wu.wrapStageHandler=function(e,t){return ee(e)&&(e={overallReset:e,seriesType:function(n){Mu=null;try{n(as,jy)}catch(i){}return Mu}(e)}),e.uid=jr("stageHandler"),t&&(e.visualType=t),e};var Mu,as={},jy={};function Xy(e,t){for(var n in t.prototype)e[n]=We}function Iu(){return{axisLine:{lineStyle:{color:Rt}},axisTick:{lineStyle:{color:Rt}},axisLabel:{textStyle:{color:Rt}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:Rt}}}}Xy(as,lf),Xy(jy,_y),as.eachSeriesByType=as.eachRawSeriesByType=function(e){Mu=e},as.eachComponent=function(e){"series"===e.mainType&&e.subType&&(Mu=e.subType)};var Yy=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],oT={color:Yy,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Yy]},Rt="#eee",Mf=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],qy={color:Mf,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:Rt},crossStyle:{color:Rt},label:{color:"#000"}}},legend:{textStyle:{color:Rt}},textStyle:{color:Rt},title:{textStyle:{color:Rt}},toolbox:{iconStyle:{normal:{borderColor:Rt}}},dataZoom:{textStyle:{color:Rt}},visualMap:{textStyle:{color:Rt}},timeline:{lineStyle:{color:Rt},itemStyle:{normal:{color:Mf[1]}},label:{normal:{textStyle:{color:Rt}}},controlStyle:{normal:{color:Rt,borderColor:Rt}}},timeAxis:Iu(),logAxis:Iu(),valueAxis:Iu(),categoryAxis:Iu(),line:{symbol:"circle"},graph:{color:Mf},gauge:{title:{textStyle:{color:Rt}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};qy.categoryAxis.splitLine.show=!1,Ge.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=dy;if(ge(t))n=pu;else if(z(t)){0===t.length&&(n=$r);for(var i=0,a=t.length;i<a;i++){var o=t[i];if(null!=o){if(z(o)){n=$r;break}if(X(o)){n=Kr;break}}}}else if(X(t)){for(var r in t)if(t.hasOwnProperty(r)&&J(t[r])){n=Qr;break}}else if(null!=t)throw new Error("Invalid data");Vo(e).sourceFormat=n}(this)}}),ii.extend({type:"dataset"});var rT=Re.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=t.cx,i=t.cy,a=t.rx,o=t.ry,r=.5522848*a,s=.5522848*o;e.moveTo(n-a,i),e.bezierCurveTo(n-a,i-s,n-r,i-o,n,i-o),e.bezierCurveTo(n+r,i-o,n+a,i-s,n+a,i),e.bezierCurveTo(n+a,i+s,n+r,i+o,n,i+o),e.bezierCurveTo(n-r,i+o,n-a,i+s,n-a,i),e.closePath()}}),oa=/[\s,]+/;function $y(e){for(q(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function Tu(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}Tu.prototype.parse=function(e,t){t=t||{};var n=$y(e);if(!n)throw new Error("Illegal svg");var i=new re;this._root=i;var a=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||t.width),r=parseFloat(n.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(r)&&(r=null),dn(n,i,null,!0);for(var s,l,u=n.firstChild;u;)this._parseNode(u,i),u=u.nextSibling;if(a){var h=me(a).split(oa);4<=h.length&&(s={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(s&&null!=o&&null!=r&&(l=e1(s,o,r),!t.ignoreViewBox)){var c=i;(i=new re).add(c),c.scale=l.scale.slice(),c.position=l.position.slice()}return t.ignoreRootClip||null==o||null==r||i.setClipPath(new Fe({shape:{x:0,y:0,width:o,height:r}})),{root:i,width:o,height:r,viewBoxRect:s,viewBoxTransform:l}},Tu.prototype._parseNode=function(e,t){var n,i,a=e.nodeName.toLowerCase();if("defs"===a?this._isDefine=!0:"text"===a&&(this._isText=!0),this._isDefine){if(i=lT[a]){var o=i.call(this,e),r=e.getAttribute("id");r&&(this._defs[r]=o)}}else(i=sT[a])&&(n=i.call(this,e,t),t.add(n));for(var s=e.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===a?this._isDefine=!1:"text"===a&&(this._isText=!1)},Tu.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,i=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var a=new Pe({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Dn(t,a),dn(e,a,this._defs);var o=a.style.fontSize;o&&o<9&&(a.style.fontSize=9,a.scale=a.scale||[1,1],a.scale[0]*=o/9,a.scale[1]*=o/9);var r=a.getBoundingRect();return this._textX+=r.width,t.add(a),a};var sT={g:function(e,t){var n=new re;return Dn(t,n),dn(e,n,this._defs),n},rect:function(e,t){var n=new Fe;return Dn(t,n),dn(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new Jn;return Dn(t,n),dn(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new Ot;return Dn(t,n),dn(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new rT;return Dn(t,n),dn(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n=n&&Ky(n);var i=new tn({shape:{points:n||[]}});return Dn(t,i),dn(e,i,this._defs),i},polyline:function(e,t){var n=new Re;Dn(t,n),dn(e,n,this._defs);var i=e.getAttribute("points");return i=i&&Ky(i),new Mn({shape:{points:i||[]}})},image:function(e,t){var n=new Lt;return Dn(t,n),dn(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,i=e.getAttribute("y")||0,a=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var r=new re;return Dn(t,r),dn(e,r,this._defs),r},tspan:function(e,t){var n=e.getAttribute("x"),i=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0,r=new re;return Dn(t,r),dn(e,r,this._defs),this._textX+=a,this._textY+=o,r},path:function(e,t){var n=Mv(e.getAttribute("d")||"");return Dn(t,n),dn(e,n,this._defs),n}},lT={lineargradient:function(e){var o=new Oa(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(r,s){for(var l=r.firstChild;l;){if(1===l.nodeType){var u=l.getAttribute("offset");u=0<u.indexOf("%")?parseInt(u,10)/100:u?parseFloat(u):0;var h=l.getAttribute("stop-color")||"#000000";s.addColorStop(u,h)}l=l.nextSibling}}(e,o),o},radialgradient:function(e){}};function Dn(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),ie(t.__inheritedStyle,e.__inheritedStyle))}function Ky(e){for(var t=me(e).split(oa),n=[],i=0;i<t.length;i+=2){var a=parseFloat(t[i]),o=parseFloat(t[i+1]);n.push([a,o])}return n}var Go={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function dn(e,t,n,i){var a=t.__inheritedStyle||{},o="text"===t.type;if(1===e.nodeType&&(function(c,d){var f=c.getAttribute("transform");if(f){f=f.replace(/,/g," ");var p=null,m=[];f.replace(hT,function(y,b,_){m.push(b,_)});for(var g=m.length-1;0<g;g-=2){var v=m[g],x=m[g-1];switch(p=p||qt(),x){case"translate":v=me(v).split(oa),En(p,p,[parseFloat(v[0]),parseFloat(v[1]||0)]);break;case"scale":v=me(v).split(oa),Tr(p,p,[parseFloat(v[0]),parseFloat(v[1]||v[0])]);break;case"rotate":v=me(v).split(oa),yi(p,p,parseFloat(v[0]));break;case"skew":v=me(v).split(oa),console.warn("Skew transform is not supported yet");break;case"matrix":v=me(v).split(oa),p[0]=parseFloat(v[0]),p[1]=parseFloat(v[1]),p[2]=parseFloat(v[2]),p[3]=parseFloat(v[3]),p[4]=parseFloat(v[4]),p[5]=parseFloat(v[5])}}d.setLocalTransform(p)}}(e,t),fe(a,function(c){var d=c.getAttribute("style"),f={};if(!d)return f;var p,m={};for(Jy.lastIndex=0;null!=(p=Jy.exec(d));)m[p[1]]=p[2];for(var g in Go)Go.hasOwnProperty(g)&&null!=m[g]&&(f[Go[g]]=m[g]);return f}(e)),!i))for(var r in Go)if(Go.hasOwnProperty(r)){var s=e.getAttribute(r);null!=s&&(a[Go[r]]=s)}var l=o?"textFill":"fill",u=o?"textStroke":"stroke";t.style=t.style||new ji;var h=t.style;null!=a.fill&&h.set(l,Qy(a.fill,n)),null!=a.stroke&&h.set(u,Qy(a.stroke,n)),I(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){null!=a[c]&&h.set("lineWidth"===c&&o?"textStrokeWidth":c,parseFloat(a[c]))}),a.textBaseline&&"auto"!==a.textBaseline||(a.textBaseline="alphabetic"),"alphabetic"===a.textBaseline&&(a.textBaseline="bottom"),"start"===a.textAlign&&(a.textAlign="left"),"end"===a.textAlign&&(a.textAlign="right"),I(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(c){null!=a[c]&&h.set(c,a[c])}),a.lineDash&&(t.style.lineDash=me(a.lineDash).split(oa)),h[u]&&"none"!==h[u]&&(t[u]=!0),t.__inheritedStyle=a}var uT=/url\(\s*#(.*?)\)/;function Qy(e,t){var n=t&&e&&e.match(uT);return n?t[me(n[1])]:e}var hT=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,Jy=/([^\s:;]+)\s*:\s*([^:;]+)/g;function e1(e,t,n){var o=Math.min(t/e.width,n/e.height);return{scale:[o,o],position:[-(e.x+e.width/2)*o+t/2,-(e.y+e.height/2)*o+n/2]}}var t1=ne(),Au_retrieveMap=function(e){return t1.get(e)},cT={geoJSON:function(e){var t=e.source;e.geoJSON=q(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=$y(e.source)}},dT=te,Tt=I,fT=ee,os=X,If=Ge.parseClassType,ai={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},oi="__flagInMainProcess",ra="__optionUpdated",n1=/^[a-zA-Z0-9_]+$/;function Wo(e,t){return function(n,i,a){!t&&this._disposed||(n=n&&n.toLowerCase(),It.prototype[e].call(this,n,i,a))}}function rs(){It.call(this)}function ss(e,t,n){n=n||{},"string"==typeof t&&(t=d1[t]),this._dom=e;var i=this._zr=yd(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=_u(Z(i.flush,i),17),(t=ue(t))&&Iy(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new Gt;var r,s,a=this._api=(s=(r=this)._coordSysMgr,fe(new _y(r),{getCoordinateSystems:Z(s.getCoordinateSystems,s),getComponentByElement:function(l){for(;l;){var u=l.__ecComponentInfo;if(null!=u)return r._model.getComponent(u.mainType,u.index);l=l.parent}}}));function o(r,s){return r.__prio-s.__prio}Ml(ku,o),Ml(Lf,o),this._scheduler=new wu(this,a,Lf,ku),It.call(this,this._ecEventProcessor=new Df),this._messageCenter=new rs,this._initEvents(),this.resize=Z(this.resize,this),this._pendingActions=[],i.animation.on("frame",this._onframe,this),function(r,s){r.on("rendered",function(){s.trigger("rendered"),!r.animation.isFinished()||s[ra]||s._scheduler.unfinished||s._pendingActions.length||s.trigger("finished")})}(i,this),pt(this)}rs.prototype.on=Wo("on",!0),rs.prototype.off=Wo("off",!0),rs.prototype.one=Wo("one",!0),j(rs,It);var je=ss.prototype;function i1(e,t,n){if(!this._disposed){var i,a=this._model,o=this._coordSysMgr.getCoordinateSystems();t=Rl(a,t);for(var r=0;r<o.length;r++){var s=o[r];if(s[e]&&null!=(i=s[e](a,t,n)))return i}}}je._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[ra]){var t=this[ra].silent;this[oi]=!0,ls(this),sa.update.call(this),this[oi]=!1,this[ra]=!1,Cu.call(this,t),Du.call(this,t)}else if(e.unfinished){var n=1,i=this._model;e.unfinished=!1;do{var o=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),o1(this,i),e.performVisualTasks(i),Af(this,this._model,0,"remain"),n-=+new Date-o}while(0<n&&e.unfinished);e.unfinished||this._zr.flush()}}},je.getDom=function(){return this._dom},je.getZr=function(){return this._zr},je.setOption=function(e,t,n){if(!this._disposed){var i;if(os(t)&&(n=t.lazyUpdate,i=t.silent,t=t.notMerge),this[oi]=!0,!this._model||t){var a=new cf(this._api),o=this._theme,r=this._model=new lf;r.scheduler=this._scheduler,r.init(null,null,o,a)}this._model.setOption(e,h1),n?(this[ra]={silent:i},this[oi]=!1):(ls(this),sa.update.call(this),this._zr.flush(),this[ra]=!1,this[oi]=!1,Cu.call(this,i),Du.call(this,i))}},je.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},je.getModel=function(){return this._model},je.getOption=function(){return this._model&&this._model.getOption()},je.getWidth=function(){return this._zr.getWidth()},je.getHeight=function(){return this._zr.getHeight()},je.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},je.getRenderedCanvas=function(e){if(he.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},je.getSvgDataURL=function(){if(he.svgSupported){var e=this._zr;return I(e.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),e.painter.toDataURL()}},je.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,i=[],a=this;Tt(t,function(r){n.eachComponent({mainType:r},function(s){var l=a._componentsMap[s.__viewId];l.group.ignore||(i.push(l),l.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Tt(i,function(r){r.group.ignore=!1}),o}},je.getConnectedDataURL=function(e){if(!this._disposed&&he.canvasSupported){var t="svg"===e.type,n=this.group,i=Math.min,a=Math.max;if(Nu[n]){var o=1/0,r=1/0,s=-1/0,l=-1/0,u=[],h=e&&e.pixelRatio||1;I(Ua,function(g,v){if(g.group===n){var x=t?g.getZr().painter.getSvgDom().innerHTML:g.getRenderedCanvas(ue(e)),y=g.getDom().getBoundingClientRect();o=i(y.left,o),r=i(y.top,r),s=a(y.right,s),l=a(y.bottom,l),u.push({dom:x,left:y.left,top:y.top})}});var c=(s*=h)-(o*=h),d=(l*=h)-(r*=h),f=Ut(),p=yd(f,{renderer:t?"svg":"canvas"});if(p.resize({width:c,height:d}),t){var m="";return Tt(u,function(g){m+='<g transform="translate('+(g.left-o)+","+(g.top-r)+')">'+g.dom+"</g>"}),p.painter.getSvgRoot().innerHTML=m,e.connectedBackgroundColor&&p.painter.setBackgroundColor(e.connectedBackgroundColor),p.refreshImmediately(),p.painter.toDataURL()}return e.connectedBackgroundColor&&p.add(new Fe({shape:{x:0,y:0,width:c,height:d},style:{fill:e.connectedBackgroundColor}})),Tt(u,function(g){var v=new Lt({style:{x:g.left*h-o,y:g.top*h-r,image:g.dom}});p.add(v)}),p.refreshImmediately(),f.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},je.convertToPixel=V(i1,"convertToPixel"),je.convertFromPixel=V(i1,"convertFromPixel"),je.containPixel=function(e,t){var n;if(!this._disposed)return I(e=Rl(this._model,e),function(i,a){0<=a.indexOf("Models")&&I(i,function(o){var r=o.coordinateSystem;if(r&&r.containPoint)n|=!!r.containPoint(t);else if("seriesModels"===a){var s=this._chartsMap[o.__viewId];s&&s.containPoint&&(n|=s.containPoint(t,o))}},this)},this),!!n},je.getVisual=function(e,t){var n=(e=Rl(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),i=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=i?n.getItemVisual(i,t):n.getVisual(t)},je.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},je.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var sa={prepareAndUpdate:function(e){ls(this),sa.update.call(this,e)},update:function(e){var t=this._model,n=this._api,i=this._zr,a=this._coordSysMgr,o=this._scheduler;if(t){o.restoreData(t,e),o.performSeriesTasks(t),a.create(t,n),o.performDataProcessorTasks(t,e),o1(this,t),a.update(t,n),Tf(t),o.performVisualTasks(t,e),l1(this,t,n,e);var r=t.get("backgroundColor")||"transparent";if(he.canvasSupported)i.setBackgroundColor(r);else{var s=un(r);r=xi(s,"rgb"),0===s[3]&&(r="transparent")}Cf(t,n)}},updateTransform:function(e){var t=this._model,n=this,i=this._api;if(t){var a=[];t.eachComponent(function(r,s){var l=n.getViewOfComponentModel(s);if(l&&l.__alive)if(l.updateTransform){var u=l.updateTransform(s,t,i,e);u&&u.update&&a.push(l)}else a.push(l)});var o=ne();t.eachSeries(function(r){var s=n._chartsMap[r.__viewId];if(s.updateTransform){var l=s.updateTransform(r,t,i,e);l&&l.update&&o.set(r.uid,1)}else o.set(r.uid,1)}),Tf(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:o}),Af(n,t,0,e,o),Cf(t,this._api)}},updateView:function(e){var t=this._model;t&&(Pt.markUpdateMethod(e,"updateView"),Tf(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),l1(this,this._model,this._api,e),Cf(t,this._api))},updateVisual:function(e){sa.update.call(this,e)},updateLayout:function(e){sa.update.call(this,e)}};function ls(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),s1(e,"component",t,n),s1(e,"chart",t,n),n.plan()}function a1(e,t,n,i,a){var o=e._model;if(i){var r={};r[i+"Id"]=n[i+"Id"],r[i+"Index"]=n[i+"Index"],r[i+"Name"]=n[i+"Name"];var s={mainType:i,query:r};a&&(s.subType=a);var l=n.excludeSeriesId;null!=l&&(l=ne(Et(l))),o&&o.eachComponent(s,function(h){l&&null!=l.get(h.id)||u(e["series"===i?"_chartsMap":"_componentsMap"][h.__viewId])},e)}else Tt(e._componentsViews.concat(e._chartsViews),u);function u(h){h&&h.__alive&&h[t]&&h[t](h.__model,o,e._api,n)}}function o1(e,t){var n=e._chartsMap,i=e._scheduler;t.eachSeries(function(a){i.updateStreamModes(a,n[a.__viewId])})}function r1(e,t){var n=e.type,i=e.escapeConnect,a=Lu[n],o=a.actionInfo,r=(o.update||"update").split(":"),s=r.pop();r=null!=r[0]&&If(r[0]),this[oi]=!0;var l=[e],u=!1;e.batch&&(u=!0,l=O(e.batch,function(f){return(f=ie(fe({},f),e)).batch=null,f}));var h,c=[],d="highlight"===n||"downplay"===n;Tt(l,function(f){(h=(h=a.action(f,this._model,this._api))||fe({},f)).type=o.event||h.type,c.push(h),d?a1(this,s,f,"series"):r&&a1(this,s,f,r.main,r.sub)},this),"none"===s||d||r||(this[ra]?(ls(this),sa.update.call(this,e),this[ra]=!1):sa[s].call(this,e)),h=u?{type:o.event||n,escapeConnect:i,batch:c}:c[0],this[oi]=!1,t||this._messageCenter.trigger(h.type,h)}function Cu(e){for(var t=this._pendingActions;t.length;){var n=t.shift();r1.call(this,n,e)}}function Du(e){e||this.trigger("updated")}function s1(e,t,n,i){for(var a="component"===t,o=a?e._componentsViews:e._chartsViews,r=a?e._componentsMap:e._chartsMap,s=e._zr,l=e._api,u=0;u<o.length;u++)o[u].__alive=!1;function h(d){var f="_ec_"+d.id+"_"+d.type,p=r[f];if(!p){var m=If(d.type);(p=new(a?ii.getClass(m.main,m.sub):Pt.getClass(m.sub))).init(n,l),r[f]=p,o.push(p),s.add(p.group)}d.__viewId=p.__id=f,p.__alive=!0,p.__model=d,p.group.__ecComponentInfo={mainType:d.mainType,index:d.componentIndex},a||i.prepareView(p,d,n,l)}for(a?n.eachComponent(function(d,f){"series"!==d&&h(f)}):n.eachSeries(h),u=0;u<o.length;){var c=o[u];c.__alive?u++:(a||c.renderTask.dispose(),s.remove(c.group),c.dispose(n,l),o.splice(u,1),delete r[c.__id],c.__id=c.group.__ecComponentInfo=null)}}function Tf(e){e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()})}function l1(e,t,n,i){(function(a,o,r,s,l){Tt(a._componentsViews,function(u){var h=u.__model;u.render(h,o,r,s),u1(h,u)})})(e,t,n,i),Tt(e._chartsViews,function(a){a.__alive=!1}),Af(e,t,0,i),Tt(e._chartsViews,function(a){a.__alive||a.remove(t,n)})}function Af(e,t,n,i,a){var o,s,l,h,r=e._scheduler;t.eachSeries(function(s){var l=e._chartsMap[s.__viewId];l.__alive=!0;var c,d,u=l.renderTask;r.updatePayload(u,i),a&&a.get(s.uid)&&u.dirty(),o|=u.perform(r.getPerformArgs(u)),l.group.silent=!!s.get("silent"),u1(s,l),c=l,d=s.get("blendMode")||null,c.group.traverse(function(f){f.isGroup||f.style.blend!==d&&f.setStyle("blend",d),f.eachPendingDisplayable&&f.eachPendingDisplayable(function(p){p.setStyle("blend",d)})})}),r.unfinished|=o,l=t,h=0,(s=e)._zr.storage.traverse(function(c){h++}),h>l.get("hoverLayerThreshold")&&!he.node&&l.eachSeries(function(c){if(!c.preventUsingHoverLayer){var d=s._chartsMap[c.__viewId];d.__alive&&d.group.traverse(function(f){f.useHoverLayer=!0})}}),function(e,t){var d,n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var i=0;t.eachSeries(function(d,f){++i},this);var a,o=n.get("data.maxCount")||10,r=n.get("series.maxCount")||10,s=Math.min(i,r);if(!(i<1)){var l=((d=t.getModel("title").option)&&d.length&&(d=d[0]),d&&d.text);a=l?h(c("general.withTitle"),{title:l}):c("general.withoutTitle");var u=[];a+=h(c(1<i?"series.multiple.prefix":"series.single.prefix"),{seriesCount:i}),t.eachSeries(function(d,f){if(f<s){var p,m=d.get("name"),g="series."+(1<i?"multiple":"single")+".";p=h(p=c(m?g+"withName":g+"withoutName"),{seriesId:d.seriesIndex,seriesName:d.get("name"),seriesType:(w=d.subType,Ci.series.typeNames[w]||"\u81ea\u5b9a\u4e49\u56fe")});var v=d.getData();(window.data=v).count()>o?p+=h(c("data.partialData"),{displayCnt:o}):p+=c("data.allData");for(var x=[],y=0;y<v.count();y++)if(y<o){var b=v.getName(y),_=Za(v,y);x.push(h(c(b?"data.withName":"data.withoutName"),{name:b,value:_}))}p+=x.join(c("data.separator.middle"))+c("data.separator.end"),u.push(p)}var w}),a+=u.join(c("series.multiple.separator.middle"))+c("series.multiple.separator.end"),e.setAttribute("aria-label",a)}}function h(d,f){if("string"!=typeof d)return d;var p=d;return I(f,function(m,g){p=p.replace(new RegExp("\\{\\s*"+g+"\\s*\\}","g"),m)}),p}function c(d){var f=n.get(d);if(null!=f)return f;for(var p=d.split("."),m=Ci.aria,g=0;g<p.length;++g)m=m[p[g]];return m}}(e._zr.dom,t)}function Cf(e,t){Tt(c1,function(n){n(e,t)})}je.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),i=e&&e.silent;this[oi]=!0,n&&ls(this),sa.update.call(this),this[oi]=!1,Cu.call(this,i),Du.call(this,i)}}},je.showLoading=function(e,t){if(!this._disposed&&(os(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),Pf[e])){var n=Pf[e](this._api,t),i=this._zr;this._loadingFX=n,i.add(n)}},je.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},je.makeActionFromEvent=function(e){var t=fe({},e);return t.type=Pu[e.type],t},je.dispatchAction=function(e,t){this._disposed||(os(t)||(t={silent:!!t}),Lu[e.type]&&this._model&&(this[oi]?this._pendingActions.push(e):(r1.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&he.browser.weChat&&this._throttledZrFlush(),Cu.call(this,t.silent),Du.call(this,t.silent))))},je.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},je.on=Wo("on",!1),je.off=Wo("off",!1),je.one=Wo("one",!1);var pT=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function u1(e,t){var n=e.get("z"),i=e.get("zlevel");t.group.traverse(function(a){"group"!==a.type&&(null!=n&&(a.z=n),null!=i&&(a.zlevel=i))})}function Df(){}je._initEvents=function(){Tt(pT,function(e){function t(n){var i,a=this.getModel(),o=n.target;if("globalout"===e)i={};else if(o&&null!=o.dataIndex){var r=o.dataModel||a.getSeriesByIndex(o.seriesIndex);i=r&&r.getDataParams(o.dataIndex,o.dataType,o)||{}}else o&&o.eventData&&(i=fe({},o.eventData));if(i){var s=i.componentType,l=i.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",l=i.seriesIndex);var u=s&&null!=l&&a.getComponent(s,l),h=u&&this["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];i.event=n,i.type=e,this._ecEventProcessor.eventInfo={targetEl:o,packedEvent:i,model:u,view:h},this.trigger(e,i)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),Tt(Pu,function(e,t){this._messageCenter.on(t,function(n){this.trigger(t,n)},this)},this)},je.isDisposed=function(){return this._disposed},je.clear=function(){this._disposed||this.setOption({series:[]},!0)},je.dispose=function(){if(!this._disposed){this._disposed=!0,tv(this.getDom(),kf,"");var e=this._api,t=this._model;Tt(this._componentsViews,function(n){n.dispose(t,e)}),Tt(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),delete Ua[this.id]}},j(ss,It),Df.prototype={constructor:Df,normalizeQuery:function(e){var t={},n={},i={};if(q(e)){var a=If(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],r={name:1,dataIndex:1,dataType:1};I(e,function(s,l){for(var u=!1,h=0;h<o.length;h++){var c=o[h],d=l.lastIndexOf(c);if(0<d&&d===l.length-c.length){var f=l.slice(0,d);"data"!==f&&(t.mainType=f,t[c.toLowerCase()]=s,u=!0)}}r.hasOwnProperty(l)&&(n[l]=s,u=!0),u||(i[l]=s)})}return{cptQuery:t,dataQuery:n,otherQuery:i}},filter:function(e,t,n){var i=this.eventInfo;if(!i)return!0;var a=i.targetEl,o=i.packedEvent,r=i.model,s=i.view;if(!r||!s)return!0;var l=t.cptQuery,u=t.dataQuery;return h(l,r,"mainType")&&h(l,r,"subType")&&h(l,r,"index","componentIndex")&&h(l,r,"name")&&h(l,r,"id")&&h(u,o,"name")&&h(u,o,"dataIndex")&&h(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,a,o));function h(c,d,f,p){return null==c[f]||d[p||f]===c[f]}},afterTrigger:function(){this.eventInfo=null}};var Lu={},Pu={},Lf=[],h1=[],c1=[],ku=[],d1={},Pf={},Ua={},Nu={},gT=new Date-0,mT=new Date-0,kf="_echarts_instance_";function f1(e){Nu[e]=!1}var vT=f1;function Nf(e){return Ua[function(t,n){return t.getAttribute?t.getAttribute(n):t[n]}(e,kf)]}function Ef(e,t){d1[e]=t}function zt(e){h1.push(e)}function fn(e,t){Rf(Lf,e,t,1e3)}function Be(e,t,n){"function"==typeof t&&(n=t,t="");var i=os(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,dT(n1.test(i)&&n1.test(t)),Lu[i]||(Lu[i]={action:n,actionInfo:e}),Pu[t]=i}function Of(e,t){Gt.register(e,t)}function ct(e,t){Rf(ku,e,t,1e3,"layout")}function et(e,t){Rf(ku,e,t,3e3,"visual")}function Rf(e,t,n,i,a){(fT(t)||os(t))&&(n=t,t=i);var o=wu.wrapStageHandler(n,a);return o.__prio=t,o.__raw=n,e.push(o),o}function p1(e,t){Pf[e]=t}function pn(e){return Ge.extend(e)}function At(e){return ii.extend(e)}function Eu(e){return ht.extend(e)}function an(e){return Pt.extend(e)}function g1(e){return e}function Di(e,t,n,i,a){this._old=e,this._new=t,this._oldKeyGetter=n||g1,this._newKeyGetter=i||g1,this.context=a}function m1(e,t,n,i,a){for(var o=0;o<e.length;o++){var r="_ec_"+a[i](e[o],o),s=t[r];null==s?(n.push(r),t[r]=o):(s.length||(t[r]=s=[s]),s.push(o))}}et(2e3,q2),zt(Iy),fn(900,function(e){var t=ne();e.eachSeries(function(n){var i=n.get("stack");if(i){var a=t.get(i)||t.set(i,[]),o=n.getData(),r={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:n};if(!r.stackedDimension||!r.isStackedByIndex&&!r.stackedByDimension)return;a.length&&o.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(r)}}),t.each(O2)}),p1("default",function(e,t){ie(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new re,i=new Fe({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(i);var a=t.fontSize+" sans-serif",o=new Fe({style:{fill:"none",text:t.text,font:a,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(o),t.showSpinner){var r=new Ed({shape:{startAngle:-bu/2,endAngle:-bu/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});r.animateShape(!0).when(1e3,{endAngle:3*bu/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:3*bu/2}).delay(300).start("circularInOut"),n.add(r)}return n.resize=function(){var s=bn(t.text,a),l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-2*l-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner?0:s/2),h=e.getHeight()/2;t.showSpinner&&r.setShape({cx:u,cy:h}),o.setShape({x:u-l,y:h-l,width:2*l,height:2*l}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),Be({type:"highlight",event:"highlight",update:"highlight"},We),Be({type:"downplay",event:"downplay",update:"downplay"},We),Ef("light",oT),Ef("dark",qy),Di.prototype={constructor:Di,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},i=[],a=[];for(m1(e,{},i,"_oldKeyGetter",this),m1(t,n,a,"_newKeyGetter",this),o=0;o<e.length;o++)null!=(s=n[r=i[o]])?((u=s.length)?(1===u&&(n[r]=null),s=s.shift()):n[r]=null,this._update&&this._update(s,o)):this._remove&&this._remove(o);for(var o=0;o<a.length;o++){var r=a[o];if(n.hasOwnProperty(r)){var s;if(null==(s=n[r]))continue;if(s.length)for(var l=0,u=s.length;l<u;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var v1=ne(["tooltip","label","itemName","itemId","seriesName"]);function zf(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Ou(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function us(e){null!=e&&fe(this,e),this.otherDims={}}var Ru=X,hs="undefined",yT={float:typeof Float64Array==hs?Array:Float64Array,int:typeof Int32Array==hs?Array:Int32Array,ordinal:Array,number:Array,time:Array},xT=typeof Uint32Array==hs?Array:Uint32Array,_T=typeof Int32Array==hs?Array:Int32Array,bT=typeof Uint16Array==hs?Array:Uint16Array;function zu(e){return 65535<e._rawCount?xT:bT}var wT=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],ST=["_extent","_approximateExtent","_rawExtent"];function y1(e,t){I(wT.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,I(ST,function(n){e[n]=ue(t[n])}),e._calculationInfo=fe(t._calculationInfo)}var Ct=function(e,t){e=e||["x","y"];for(var n={},i=[],a={},o=0;o<e.length;o++){var r=e[o];q(r)?r=new us({name:r}):r instanceof us||(r=new us(r));var s=r.name;r.type=r.type||"float",r.coordDim||(r.coordDim=s,r.coordDimIndex=0),r.otherDims=r.otherDims||{},i.push(s),(n[s]=r).index=o,r.createInvertedIndices&&(a[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(l){var u={},h=u.encode={},c=ne(),d=[],f=[],p=u.userOutput={dimensionNames:l.dimensions.slice(),encode:{}};I(l.dimensions,function(y){var S,b=l.getDimensionInfo(y),_=b.coordDim;if(_){var w=b.coordDimIndex;zf(h,_)[w]=y,b.isExtraCoord||(c.set(_,1),!("ordinal"===(S=b.type)||"time"===S)&&(d[0]=y),zf(p.encode,_)[w]=b.index),b.defaultTooltip&&f.push(y)}v1.each(function(S,M){var T=zf(h,M),A=b.otherDims[M];null!=A&&!1!==A&&(T[A]=b.name)})});var m=[],g={};c.each(function(y,b){var _=h[b];g[b]=_[0],m=m.concat(_)}),u.dataDimsOnCoord=m,u.encodeFirstDimNotExtra=g;var v=h.label;v&&v.length&&(d=v.slice());var x=h.tooltip;return x&&x.length?f=x.slice():f.length||(f=d.slice()),h.defaultedLabel=d,h.defaultedTooltip=f,u}(this),this._invertedIndicesMap=a,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},be=Ct.prototype;function x1(e,t,n,i,a){var o=yT[t.type],r=i-1,s=t.name,l=e[s][r];if(l&&l.length<n){for(var u=new o(Math.min(a-r*n,n)),h=0;h<l.length;h++)u[h]=l[h];e[s][r]=u}for(var c=i*n;c<a;c+=n)e[s].push(new o(Math.min(a-c,n)))}function _1(e){var t=e._invertedIndicesMap;I(t,function(n,i){var a=e._dimensionInfos[i].ordinalMeta;if(a){n=t[i]=new _T(a.categories.length);for(var o=0;o<n.length;o++)n[o]=-1;for(o=0;o<e._count;o++)n[e.get(i,o)]=o}})}function b1(e,t,n){var i;if(null!=t){var a=e._chunkSize,o=Math.floor(n/a),s=e.dimensions[t],l=e._storage[s][o];if(l){i=l[n%a];var u=e._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(i=u.categories[i])}}return i}function cs(e){return e}function ds(e){return e<this._count&&0<=e?this._indices[e]:-1}function Bf(e,t){var n=e._idList[t];return null==n&&(n=b1(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n}function Vf(e){return z(e)||(e=[e]),e}function w1(e,t){var n=e.dimensions,i=new Ct(O(n,e.getDimensionInfo,e),e.hostModel);y1(i,e);for(var a=i._storage={},o=e._storage,r=0;r<n.length;r++){var s=n[r];o[s]&&(0<=E(t,s)?(a[s]=MT(o[s]),i._rawExtent[s]=[1/0,-1/0],i._extent[s]=null):a[s]=o[s])}return i}function MT(e){for(var t,n,i=new Array(e.length),a=0;a<e.length;a++)i[a]=(n=void 0,(n=(t=e[a]).constructor)===Array?t.slice():new n(t));return i}function IT(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function S1(e,t,n){Gn.isInstance(t)||(t=Gn.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var i=(n.dimsDef||[]).slice(),a=ne(),o=ne(),r=[],s=function(w,S,M,T){var A=Math.max(w.dimensionsDetectCount||1,S.length,M.length,T||0);return I(S,function(C){var D=C.dimsDef;D&&(A=Math.max(A,D.length))}),A}(t,e,i,n.dimCount),l=0;l<s;l++){var u=i[l]=fe({},X(i[l])?i[l]:{name:i[l]}),h=u.name,c=r[l]=new us;null!=h&&null==a.get(h)&&(c.name=c.displayName=h,a.set(h,l)),null!=u.type&&(c.type=u.type),null!=u.displayName&&(c.displayName=u.displayName)}var d=n.encodeDef;!d&&n.encodeDefaulter&&(d=n.encodeDefaulter(t,s)),(d=ne(d)).each(function(w,S){if(1===(w=Et(w).slice()).length&&!q(w[0])&&w[0]<0)d.set(S,!1);else{var M=d.set(S,[]);I(w,function(T,A){q(T)&&(T=a.get(T)),null!=T&&T<s&&(M[A]=T,p(r[T],S,A))})}});var f=0;function p(w,S,M){null!=v1.get(S)?w.otherDims[S]=M:(w.coordDim=S,w.coordDimIndex=M,o.set(S,!0))}I(e,function(w,S){var M,T,A;if(q(w))M=w,w={};else{M=w.name;var C=w.ordinalMeta;w.ordinalMeta=null,(w=ue(w)).ordinalMeta=C,T=w.dimsDef,A=w.otherDims,w.name=w.coordDim=w.coordDimIndex=w.dimsDef=w.otherDims=null}if(!1!==(D=d.get(M))){var D;if(!(D=Et(D)).length)for(var L=0;L<(T&&T.length||1);L++){for(;f<r.length&&null!=r[f].coordDim;)f++;f<r.length&&D.push(f++)}I(D,function(P,N){var R=r[P];if(p(ie(R,w),M,N),null==R.name&&T){var k=T[N];X(k)||(k={name:k}),R.name=R.displayName=k.name,R.defaultTooltip=k.defaultTooltip}A&&ie(R.otherDims,A)})}});var m=n.generateCoord,g=n.generateCoordCount,v=null!=g;g=m?g||1:0;for(var x,b=m||"value",_=0;_<s;_++)null==(c=r[_]=r[_]||new us).coordDim&&(c.coordDim=M1(b,o,v),c.coordDimIndex=0,(!m||g<=0)&&(c.isExtraCoord=!0),g--),null==c.name&&(c.name=M1(c.coordDim,a)),null==c.type&&(1===yy((x=t).data,x.sourceFormat,x.seriesLayoutBy,x.dimensionsDefine,x.startIndex,_)||c.isExtraCoord&&(null!=c.otherDims.itemName||null!=c.otherDims.seriesName))&&(c.type="ordinal");return r}function M1(e,t,n){if(n||null!=t.get(e)){for(var i=0;null!=t.get(e+i);)i++;e+=i}return t.set(e,!0),e}be.type="list",be.hasItemOption=!0,be.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},be.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},be.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},be.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var i=n.encode[e];return!0===t?(i||[]).slice():i&&i[t]},be.initData=function(e,t,n){(Gn.isInstance(e)||J(e))&&(e=new Ty(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=Dy[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Dy.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},be.getProvider=function(){return this._rawData},be.appendData=function(e){var t=this._rawData,n=this.count();t.appendData(e);var i=t.count();t.persistent||(i+=n),this._initDataFromProvider(n,i)},be.appendValues=function(e,t){for(var n=this._chunkSize,i=this._storage,a=this.dimensions,o=a.length,r=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t?t.length:0),u=this._chunkCount,h=0;h<o;h++)r[v=a[h]]||(r[v]=[1/0,-1/0]),i[v]||(i[v]=[]),x1(i,this._dimensionInfos[v],n,u,l),this._chunkCount=i[v].length;for(var c=new Array(o),d=s;d<l;d++){for(var f=d-s,p=Math.floor(d/n),m=d%n,g=0;g<o;g++){var v=a[g],x=this._dimValueGetterArrayRows(e[f]||c,v,f,g);i[v][p][m]=x;var y=r[v];x<y[0]&&(y[0]=x),x>y[1]&&(y[1]=x)}t&&(this._nameList[d]=t[f])}this._rawCount=this._count=l,this._extent={},_1(this)},be._initDataFromProvider=function(e,t){if(!(t<=e)){for(var n,i=this._chunkSize,a=this._rawData,o=this._storage,r=this.dimensions,s=r.length,l=this._dimensionInfos,u=this._nameList,h=this._idList,c=this._rawExtent,d=this._nameRepeatCount={},f=this._chunkCount,p=0;p<s;p++){c[_=r[p]]||(c[_]=[1/0,-1/0]);var m=l[_];0===m.otherDims.itemName&&(n=this._nameDimIdx=p),0===m.otherDims.itemId&&(this._idDimIdx=p),o[_]||(o[_]=[]),x1(o,m,i,f,t),this._chunkCount=o[_].length}for(var g=new Array(s),v=e;v<t;v++){g=a.getItem(v,g);for(var x=Math.floor(v/i),y=v%i,b=0;b<s;b++){var _,w=o[_=r[b]][x],S=this._dimValueGetter(g,_,v,b);w[y]=S;var M=c[_];S<M[0]&&(M[0]=S),S>M[1]&&(M[1]=S)}if(!a.pure){var T=u[v];if(g&&null==T)if(null!=g.name)u[v]=T=g.name;else if(null!=n){var A=r[n],C=o[A][x];if(C){T=C[y];var D=l[A].ordinalMeta;D&&D.categories.length&&(T=D.categories[T])}}var L=null==g?null:g.id;null==L&&null!=T&&(d[T]=d[T]||0,0<d[L=T]&&(L+="__ec__"+d[T]),d[T]++),null!=L&&(h[v]=L)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=t,this._extent={},_1(this)}},be.count=function(){return this._count},be.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){a=new t(n);for(var i=0;i<n;i++)a[i]=e[i]}else a=new t(e.buffer,0,n)}else{var a=new(t=zu(this))(this.count());for(i=0;i<a.length;i++)a[i]=i}return a},be.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var i=Math.floor(t/this._chunkSize);return n[e][i][t%this._chunkSize]},be.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var n=this._storage[e];return n?n[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},be._getFast=function(e,t){var n=Math.floor(t/this._chunkSize);return this._storage[e][n][t%this._chunkSize]},be.getValues=function(e,t){var n=[];z(e)||(t=e,e=this.dimensions);for(var i=0,a=e.length;i<a;i++)n.push(this.get(e[i],t));return n},be.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,i=t.length;n<i;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},be.getDataExtent=function(e){e=this.getDimension(e);var n=[1/0,-1/0];if(!this._storage[e])return n;var i,a=this.count();if(!this._indices)return this._rawExtent[e].slice();if(i=this._extent[e])return i.slice();for(var o=(i=n)[0],r=i[1],s=0;s<a;s++){var l=this._getFast(e,this.getRawIndex(s));l<o&&(o=l),r<l&&(r=l)}return this._extent[e]=[o,r]},be.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},be.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},be.getCalculationInfo=function(e){return this._calculationInfo[e]},be.setCalculationInfo=function(e,t){Ru(e)?fe(this._calculationInfo,e):this._calculationInfo[e]=t},be.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,i=this.count();n<i;n++){var a=this.get(e,n);isNaN(a)||(t+=a)}return t},be.getMedian=function(e){var t=[];this.each(e,function(a,o){isNaN(a)||t.push(a)});var n=[].concat(t).sort(function(a,o){return a-o}),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},be.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},be.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},be.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=1+o;else{if(!(t[o]>e))return o;a=o-1}}return-1},be.indicesOfNearest=function(e,t,n){var i=[];if(!this._storage[e])return i;null==n&&(n=1/0);for(var a=1/0,o=-1,r=0,s=0,l=this.count();s<l;s++){var u=t-this.get(e,s),h=Math.abs(u);h<=n&&((h<a||h===a&&0<=u&&o<0)&&(a=h,o=u,r=0),u===o&&(i[r++]=s))}return i.length=r,i},be.getRawIndex=cs,be.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++)t.push(this.get(this.dimensions[n],e));return t},be.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||b1(this,this._nameDimIdx,t)||""},be.getId=function(e){return Bf(this,this.getRawIndex(e))},be.each=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this;for(var a=(e=O(Vf(e),this.getDimension,this)).length,o=0;o<this.count();o++)switch(a){case 0:t.call(n,o);break;case 1:t.call(n,this.get(e[0],o),o);break;case 2:t.call(n,this.get(e[0],o),this.get(e[1],o),o);break;default:for(var r=0,s=[];r<a;r++)s[r]=this.get(e[r],o);s[r]=o,t.apply(n,s)}}},be.filterSelf=function(e,t,n,i){if(this._count){"function"==typeof e&&(i=n,n=t,t=e,e=[]),n=n||i||this,e=O(Vf(e),this.getDimension,this);for(var a=this.count(),o=new(zu(this))(a),r=[],s=e.length,l=0,u=e[0],h=0;h<a;h++){var c,d=this.getRawIndex(h);if(0===s)c=t.call(n,h);else if(1===s){var f=this._getFast(u,d);c=t.call(n,f,h)}else{for(var p=0;p<s;p++)r[p]=this._getFast(u,d);r[p]=h,c=t.apply(n,r)}c&&(o[l++]=d)}return l<a&&(this._indices=o),this._count=l,this._extent={},this.getRawIndex=this._indices?ds:cs,this}},be.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var i=t.length;if(i){var a=this.count(),o=new(zu(this))(a),r=0,s=t[0],l=e[s][0],u=e[s][1],h=!1;if(!this._indices){var c=0;if(1===i){for(var d=this._storage[t[0]],f=0;f<this._chunkCount;f++)for(var p=d[f],m=Math.min(this._count-f*this._chunkSize,this._chunkSize),g=0;g<m;g++)(l<=(_=p[g])&&_<=u||isNaN(_))&&(o[r++]=c),c++;h=!0}else if(2===i){d=this._storage[s];var v=this._storage[t[1]],x=e[t[1]][0],y=e[t[1]][1];for(f=0;f<this._chunkCount;f++){p=d[f];var b=v[f];for(m=Math.min(this._count-f*this._chunkSize,this._chunkSize),g=0;g<m;g++){var _=p[g],w=b[g];(l<=_&&_<=u||isNaN(_))&&(x<=w&&w<=y||isNaN(w))&&(o[r++]=c),c++}}h=!0}}if(!h)if(1===i)for(g=0;g<a;g++){var S=this.getRawIndex(g);(l<=(_=this._getFast(s,S))&&_<=u||isNaN(_))&&(o[r++]=S)}else for(g=0;g<a;g++){var M=!0;for(S=this.getRawIndex(g),f=0;f<i;f++){var T=t[f];((_=this._getFast(n,S))<e[T][0]||_>e[T][1])&&(M=!1)}M&&(o[r++]=this.getRawIndex(g))}return r<a&&(this._indices=o),this._count=r,this._extent={},this.getRawIndex=this._indices?ds:cs,this}}},be.mapArray=function(e,t,n,i){"function"==typeof e&&(i=n,n=t,t=e,e=[]);var a=[];return this.each(e,function(){a.push(t&&t.apply(this,arguments))},n=n||i||this),a},be.map=function(e,t,n,i){n=n||i||this;var a=w1(this,e=O(Vf(e),this.getDimension,this));a._indices=this._indices,a.getRawIndex=a._indices?ds:cs;for(var o=a._storage,r=[],s=this._chunkSize,l=e.length,u=this.count(),h=[],c=a._rawExtent,d=0;d<u;d++){for(var f=0;f<l;f++)h[f]=this.get(e[f],d);h[l]=d;var p=t&&t.apply(n,h);if(null!=p){"object"!=typeof p&&(r[0]=p,p=r);for(var m=this.getRawIndex(d),g=Math.floor(m/s),v=m%s,x=0;x<p.length;x++){var y=e[x],b=p[x],_=c[y],w=o[y];w&&(w[g][v]=b),b<_[0]&&(_[0]=b),b>_[1]&&(_[1]=b)}}}return a},be.downSample=function(e,t,n,i){for(var a=w1(this,[e]),o=a._storage,r=[],s=Math.floor(1/t),l=o[e],u=this.count(),h=this._chunkSize,c=a._rawExtent[e],d=new(zu(this))(u),f=0,p=0;p<u;p+=s){u-p<s&&(r.length=s=u-p);for(var m=0;m<s;m++){var g=this.getRawIndex(p+m),v=Math.floor(g/h);r[m]=l[v][g%h]}var y=n(r),b=this.getRawIndex(Math.min(p+i(r,y)||0,u-1)),_=b%h;(l[Math.floor(b/h)][_]=y)<c[0]&&(c[0]=y),y>c[1]&&(c[1]=y),d[f++]=b}return a._count=f,a._indices=d,a.getRawIndex=ds,a},be.getItemModel=function(e){var t=this.hostModel;return new ze(this.getRawDataItem(e),t,t&&t.ecModel)},be.diff=function(e){var t=this;return new Di(e?e.getIndices():[],this.getIndices(),function(n){return Bf(e,n)},function(n){return Bf(t,n)})},be.getVisual=function(e){var t=this._visual;return t&&t[e]},be.setVisual=function(e,t){if(Ru(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},be.setLayout=function(e,t){if(Ru(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},be.getLayout=function(e){return this._layout[e]},be.getItemLayout=function(e){return this._itemLayouts[e]},be.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?fe(this._itemLayouts[e]||{},t):t},be.clearItemLayouts=function(){this._itemLayouts.length=0},be.getItemVisual=function(e,t,n){var i=this._itemVisuals[e],a=i&&i[t];return null!=a||n?a:this.getVisual(t)},be.setItemVisual=function(e,t,n){var i=this._itemVisuals[e]||{},a=this.hasItemVisual;if(this._itemVisuals[e]=i,Ru(t))for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o],a[o]=!0);else i[t]=n,a[t]=!0},be.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},be.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(IT,t)),this._graphicEls[e]=t},be.getItemGraphicEl=function(e){return this._graphicEls[e]},be.eachItemGraphicEl=function(e,t){I(this._graphicEls,function(n,i){n&&e&&e.call(t,n,i)})},be.cloneShallow=function(e){if(!e){var t=O(this.dimensions,this.getDimensionInfo,this);e=new Ct(t,this.hostModel)}return e._storage=this._storage,y1(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?ds:cs,e},be.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=n.apply(this,arguments);return t.apply(this,[i].concat(mt(arguments)))})},be.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],be.CHANGABLE_METHODS=["filterSelf","selectRange"];var Ho=function(e,t){return S1((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function TT(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=ne(),this.categoryAxisMap=ne(),this.firstCategoryDimIndex=null}var AT={cartesian2d:function(e,t,n,i){var a=e.getReferringComponents("xAxis")[0],o=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],n.set("x",a),n.set("y",o),Zo(a)&&(i.set("x",a),t.firstCategoryDimIndex=0),Zo(o)&&(i.set("y",o),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,i){var a=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],n.set("single",a),Zo(a)&&(i.set("single",a),t.firstCategoryDimIndex=0)},polar:function(e,t,n,i){var a=e.getReferringComponents("polar")[0],o=a.findAxisModel("radiusAxis"),r=a.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",r),Zo(o)&&(i.set("radius",o),t.firstCategoryDimIndex=0),Zo(r)&&(i.set("angle",r),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,i){var a=e.ecModel,o=a.getComponent("parallel",e.get("parallelIndex")),r=t.coordSysDims=o.dimensions.slice();I(o.parallelAxisIndex,function(s,l){var u=a.getComponent("parallelAxis",s),h=r[l];n.set(h,u),Zo(u)&&null==t.firstCategoryDimIndex&&(i.set(h,u),t.firstCategoryDimIndex=l)})}};function Zo(e){return"category"===e.get("type")}function I1(e,t,n){var i,a,o,r,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,u=!(!e||!e.get("stack"));if(I(t,function(f,p){q(f)&&(t[p]=f={name:f}),u&&!f.isExtraCoord&&(s||i||!f.ordinalMeta||(i=f),a||"ordinal"===f.type||"time"===f.type||l&&l!==f.coordDim||(a=f))}),!a||s||i||(s=!0),a){o="__\0ecstackresult",r="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var h=a.coordDim,c=a.type,d=0;I(t,function(f){f.coordDim===h&&d++}),t.push({name:o,coordDim:h,coordDimIndex:d,type:c,isExtraCoord:!0,isCalculationCoord:!0}),d++,t.push({name:r,coordDim:r,coordDimIndex:d,type:c,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:a&&a.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:r,stackResultDimension:o}}function Li(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function fs(e,t){return Li(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Pi(e,t,n){n=n||{},Gn.isInstance(e)||(e=Gn.seriesDataToSource(e));var i,a=t.get("coordinateSystem"),o=Gt.get(a),r=function(f){var p=f.get("coordinateSystem"),m=new TT(p),g=AT[p];if(g)return g(f,m,m.axisMap,m.categoryAxisMap),m}(t);r&&(i=O(r.coordSysDims,function(f){var p={name:f},m=r.axisMap.get(f);if(m){var g=m.get("type");p.type=Ou(g)}return p})),i=i||o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"];var s,l,u=Ho(e,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?V(vy,i,t):null});r&&I(u,function(f,p){var g=r.categoryAxisMap.get(f.coordDim);g&&(null==s&&(s=p),f.ordinalMeta=g.getOrdinalMeta()),null!=f.otherDims.itemName&&(l=!0)}),l||null==s||(u[s].otherDims.itemName=0);var h=I1(t,u),c=new Ct(u,t);c.setCalculationInfo(h);var d=null!=s&&function(f){if(f.sourceFormat===Wa){var p=function(m){for(var g=0;g<m.length&&null==m[g];)g++;return m[g]}(f.data||[]);return null!=p&&!z(Er(p))}}(e)?function(f,p,m,g){return g===s?m:this.defaultDimValueGetter(f,p,m,g)}:null;return c.hasItemOption=!1,c.initData(e,null,d),c}function xt(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function ps(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}xt.prototype.parse=function(e){return e},xt.prototype.getSetting=function(e){return this._setting[e]},xt.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},xt.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},xt.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},xt.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},xt.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},xt.prototype.getExtent=function(){return this._extent.slice()},xt.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},xt.prototype.isBlank=function(){return this._isBlank},xt.prototype.setBlank=function(e){this._isBlank=e},xt.prototype.getLabel=null,Or(xt),Bl(xt,{registerWhenExtend:!0}),ps.createByAxisModel=function(e){var t=e.option,n=t.data,i=n&&O(n,CT);return new ps({categories:i,needCollect:!i,deduplication:!1!==t.dedplication})};var T1=ps.prototype;function A1(e){return e._map||(e._map=ne(e.categories))}function CT(e){return X(e)&&null!=e.value?e.value:e+""}T1.getOrdinal=function(e){return A1(this).get(e)},T1.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var i=A1(this);return null==(t=i.get(e))&&(n?(this.categories[t=this.categories.length]=e,i.set(e,t)):t=NaN),t};var Ff=xt.prototype,Gf=xt.extend({type:"ordinal",init:function(e,t){e&&!z(e)||(e=new ps({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),Ff.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return Ff.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(Ff.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:We,niceExtent:We});Gf.create=function(){return new Gf};var C1=wt;function D1(e){return lu(e)+2}function L1(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function P1(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),L1(e,0,t),L1(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var Uo=wt,ri=xt.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),ri.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=D1(e)},getTicks:function(e){var t=this._interval,n=this._extent,i=this._niceExtent,a=this._intervalPrecision,o=[];if(!t)return o;n[0]<i[0]&&o.push(e?Uo(i[0]-t,a):n[0]);for(var r=i[0];r<=i[1]&&(o.push(r),(r=Uo(r+t,a))!==o[o.length-1]);)if(1e4<o.length)return[];var s=o.length?o[o.length-1]:i[1];return n[1]>s&&o.push(e?Uo(s+t,a):n[1]),o},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],i=this.getExtent(),a=1;a<t.length;a++){for(var r=t[a-1],s=0,l=[],u=(t[a]-r)/e;s<e-1;){var h=wt(r+(s+1)*u);h>i[0]&&h<i[1]&&l.push(h),s++}n.push(l)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=lu(e)||0:"auto"===n&&(n=this._intervalPrecision),ta(e=Uo(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var i=this._extent,a=i[1]-i[0];if(isFinite(a)){a<0&&(a=-a,i.reverse());var o=function(r,s,l,u){var h={},d=h.interval=Yd((r[1]-r[0])/s,!0);null!=l&&d<l&&(d=h.interval=l),null!=u&&u<d&&(d=h.interval=u);var f=h.intervalPrecision=D1(d);return P1(h.niceTickExtent=[C1(Math.ceil(r[0]/d)*d,f),C1(Math.floor(r[1]/d)*d,f)],r),h}(i,e,t,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(t[0]=Uo(Math.floor(t[0]/a)*a)),e.fixMax||(t[1]=Uo(Math.ceil(t[1]/a)*a))}});ri.create=function(){return new ri};var Wf="__ec_stack_",Hf="undefined"!=typeof Float32Array?Float32Array:Array;function Zf(e){return e.get("stack")||Wf+e.seriesIndex}function Uf(e){return e.dim+e.index}function k1(e,t){var n=[];return t.eachSeriesByType(e,function(i){R1(i)&&!z1(i)&&n.push(i)}),n}function jf(e){var t=function(i){var a={};I(i,function(c){var d=c.coordinateSystem.getBaseAxis();if("time"===d.type||"value"===d.type)for(var f=c.getData(),p=d.dim+"_"+d.index,m=f.mapDimension(d.dim),g=0,v=f.count();g<v;++g){var x=f.get(m,g);a[p]?a[p].push(x):a[p]=[x]}});var o=[];for(var r in a)if(a.hasOwnProperty(r)){var s=a[r];if(s){s.sort(function(c,d){return c-d});for(var l=null,u=1;u<s.length;++u){var h=s[u]-s[u-1];0<h&&(l=null===l?h:Math.min(l,h))}o[r]=l}}return o}(e),n=[];return I(e,function(i){var a,o=i.coordinateSystem.getBaseAxis(),r=o.getExtent();if("category"===o.type)a=o.getBandWidth();else if("value"===o.type||"time"===o.type){var l=t[o.dim+"_"+o.index],u=Math.abs(r[1]-r[0]),h=o.scale.getExtent(),c=Math.abs(h[1]-h[0]);a=l?u/c*l:u}else{var d=i.getData();a=Math.abs(r[1]-r[0])/d.count()}var f=Q(i.get("barWidth"),a),p=Q(i.get("barMaxWidth"),a),m=Q(i.get("barMinWidth")||1,a),g=i.get("barGap"),v=i.get("barCategoryGap");n.push({bandWidth:a,barWidth:f,barMaxWidth:p,barMinWidth:m,barGap:g,barCategoryGap:v,axisKey:Uf(o),stackId:Zf(i)})}),N1(n)}function N1(e){var t={};I(e,function(i,a){var o=i.axisKey,r=i.bandWidth,s=t[o]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},l=s.stacks;t[o]=s;var u=i.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=i.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var c=i.barMaxWidth;c&&(l[u].maxWidth=c);var d=i.barMinWidth;d&&(l[u].minWidth=d);var f=i.barGap;null!=f&&(s.gap=f);var p=i.barCategoryGap;null!=p&&(s.categoryGap=p)});var n={};return I(t,function(i,a){n[a]={};var o=i.stacks,r=i.bandWidth,s=Q(i.categoryGap,r),l=Q(i.gap,1),u=i.remainedWidth,h=i.autoWidthCount,c=(u-s)/(h+(h-1)*l);c=Math.max(c,0),I(o,function(m){var g=m.maxWidth,v=m.minWidth;if(m.width)x=m.width,g&&(x=Math.min(x,g)),v&&(x=Math.max(x,v)),m.width=x,u-=x+l*x,h--;else{var x=c;g&&g<x&&(x=Math.min(g,u)),v&&x<v&&(x=v),x!==c&&(m.width=x,u-=x+l*x,h--)}}),c=(u-s)/(h+(h-1)*l),c=Math.max(c,0);var d,f=0;I(o,function(m,g){m.width||(m.width=c),f+=(d=m).width*(1+l)}),d&&(f-=d.width*l);var p=-f/2;I(o,function(m,g){n[a][g]=n[a][g]||{bandWidth:r,offset:p,width:m.width},p+=m.width*(1+l)})}),n}function E1(e,t,n){if(e&&t){var i=e[Uf(t)];return null!=i&&null!=n&&(i=i[Zf(n)]),i}}function O1(e,t){var n=k1(e,t),i=jf(n),a={};I(n,function(o){var r=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),u=Zf(o),h=i[Uf(l)][u],c=h.offset,d=h.width,f=s.getOtherAxis(l),p=o.get("barMinHeight")||0;a[u]=a[u]||[],r.setLayout({bandWidth:h.bandWidth,offset:c,size:d});for(var m=r.mapDimension(f.dim),g=r.mapDimension(l.dim),v=Li(r,m),x=f.isHorizontal(),y=B1(0,f),b=0,_=r.count();b<_;b++){var w,S,M,T,A,C=r.get(m,b),D=r.get(g,b),L=0<=C?"p":"n",P=y;v&&(a[u][D]||(a[u][D]={p:y,n:y}),P=a[u][D][L]),x?(w=P,S=(A=s.dataToPoint([C,D]))[1]+c,M=A[0]-y,T=d,Math.abs(M)<p&&(M=(M<0?-1:1)*p),isNaN(M)||v&&(a[u][D][L]+=M)):(w=(A=s.dataToPoint([D,C]))[0]+c,S=P,M=d,T=A[1]-y,Math.abs(T)<p&&(T=(T<=0?-1:1)*p),isNaN(T)||v&&(a[u][D][L]+=T)),r.setItemLayout(b,{x:w,y:S,width:M,height:T})}},this)}var DT={seriesType:"bar",plan:Fo(),reset:function(e){if(R1(e)&&z1(e)){var t=e.getData(),n=e.coordinateSystem,i=n.grid.getRect(),a=n.getBaseAxis(),o=n.getOtherAxis(a),r=t.mapDimension(o.dim),s=t.mapDimension(a.dim),l=o.isHorizontal(),u=l?0:1,h=E1(jf([e]),a,e).width;return.5<h||(h=.5),{progress:function(c,d){for(var f,p=c.count,m=new Hf(2*p),g=new Hf(2*p),v=new Hf(p),x=[],y=[],b=0,_=0;null!=(f=c.next());)y[u]=d.get(r,f),y[1-u]=d.get(s,f),x=n.dataToPoint(y,null,x),g[b]=l?i.x+i.width:x[0],m[b++]=x[0],g[b]=l?x[1]:i.y+i.height,m[b++]=x[1],v[_++]=f;d.setLayout({largePoints:m,largeDataIndices:v,largeBackgroundPoints:g,barWidth:h,valueAxisStart:B1(0,o),backgroundStart:l?i.x:i.y,valueAxisHorizontal:l})}}}}};function R1(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function z1(e){return e.pipelineContext&&e.pipelineContext.large}function B1(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var LT=ri.prototype,V1=Math.ceil,F1=Math.floor,St=864e5,Xf=ri.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return Qd(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=St,t[1]+=St),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-St}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var i=this._interval;e.fixMin||(t[0]=wt(F1(t[0]/i)*i)),e.fixMax||(t[1]=wt(V1(t[1]/i)*i))},niceTicks:function(e,t,n){var i=this._extent,a=i[1]-i[0],o=a/(e=e||10);null!=t&&o<t&&(o=t),null!=n&&n<o&&(o=n);var r=Yf.length,s=function(d,f,p,m){for(;p<m;){var g=p+m>>>1;d[g][1]<f?p=1+g:m=g}return p}(Yf,o,0,r),l=Yf[Math.min(s,r-1)],u=l[1];"year"===l[0]&&(u*=Yd(a/u/e,!0));var h=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,c=[Math.round(V1((i[0]-h)/u)*u+h),Math.round(F1((i[1]-h)/u)*u+h)];P1(c,i),this._stepLvl=l,this._interval=u,this._niceExtent=c},parse:function(e){return+Yr(e)}});I(["contain","normalize"],function(e){Xf.prototype[e]=function(t){return LT[e].call(this,this.parse(t))}});var Yf=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",St],["MM-dd\nyyyy",2*St],["MM-dd\nyyyy",3*St],["MM-dd\nyyyy",4*St],["MM-dd\nyyyy",5*St],["MM-dd\nyyyy",6*St],["week",7*St],["MM-dd\nyyyy",864e6],["week",14*St],["week",21*St],["month",31*St],["week",42*St],["month",62*St],["week",70*St],["quarter",95*St],["month",31*St*4],["month",13392e6],["half-year",16416e6],["month",31*St*8],["month",26784e6],["year",380*St]];Xf.create=function(e){return new Xf({useUTC:e.ecModel.get("useUTC")})};var Vu=xt.prototype,gs=ri.prototype,PT=lu,kT=wt,NT=Math.floor,ET=Math.ceil,Fu=Math.pow,si=Math.log,Gu=xt.extend({type:"log",base:10,$constructor:function(){xt.apply(this,arguments),this._originalScale=new ri},getTicks:function(e){var t=this._originalScale,n=this._extent,i=t.getExtent();return O(gs.getTicks.call(this,e),function(a){var o=wt(Fu(this.base,a));return o=a===n[0]&&t.__fixMin?Wu(o,i[0]):o,a===n[1]&&t.__fixMax?Wu(o,i[1]):o},this)},getMinorTicks:gs.getMinorTicks,getLabel:gs.getLabel,scale:function(e){return e=Vu.scale.call(this,e),Fu(this.base,e)},setExtent:function(e,t){var n=this.base;e=si(e)/si(n),t=si(t)/si(n),gs.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=Vu.getExtent.call(this);t[0]=Fu(e,t[0]),t[1]=Fu(e,t[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(t[0]=Wu(t[0],i[0])),n.__fixMax&&(t[1]=Wu(t[1],i[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=si(e[0])/si(t),e[1]=si(e[1])/si(t),Vu.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n==1/0||n<=0)){var i=ty(n);for(e/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&0<Math.abs(i);)i*=10;var a=[wt(ET(t[0]/i)*i),wt(NT(t[1]/i)*i)];this._interval=i,this._niceExtent=a}},niceExtent:function(e){gs.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function Wu(e,t){return kT(e,PT(t))}function W1(e,t){var n,i,a,o=e.type,r=t.getMin(),s=t.getMax(),l=e.getExtent();"ordinal"===o?n=t.getCategories().length:(z(i=t.get("boundaryGap"))||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=Q(i[0],1),i[1]=Q(i[1],1),a=l[1]-l[0]||Math.abs(l[0])),"dataMin"===r?r=l[0]:"function"==typeof r&&(r=r({min:l[0],max:l[1]})),"dataMax"===s?s=l[1]:"function"==typeof s&&(s=s({min:l[0],max:l[1]}));var u=null!=r,h=null!=s;null==r&&(r="ordinal"===o?n?0:NaN:l[0]-i[0]*a),null==s&&(s="ordinal"===o?n?n-1:NaN:l[1]+i[1]*a),null!=r&&isFinite(r)||(r=NaN),null!=s&&isFinite(s)||(s=NaN),e.setBlank(ke(r)||ke(s)||"ordinal"===o&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<r&&0<s&&!u&&(r=0),r<0&&s<0&&!h&&(s=0));var c=t.ecModel;if(c&&"time"===o){var d,f=k1("bar",c);if(I(f,function(g){d|=g.getBaseAxis()===t.axis}),d){var p=jf(f),m=function(g,v,x,y){var b=x.axis.getExtent(),_=b[1]-b[0],w=E1(y,x.axis);if(void 0===w)return{min:g,max:v};var S=1/0;I(w,function(D){S=Math.min(D.offset,S)});var M=-1/0;I(w,function(D){M=Math.max(D.offset+D.width,M)}),S=Math.abs(S),M=Math.abs(M);var T=S+M,A=v-g,C=A/(1-(S+M)/_)-A;return{min:g-=S/T*C,max:v+=M/T*C}}(r,s,t,p);r=m.min,s=m.max}}return{extent:[r,s],fixMin:u,fixMax:h}}function la(e,t){var n=W1(e,t),i=n.extent,a=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var o=e.type;e.setExtent(i[0],i[1]),e.niceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===o||"time"===o?t.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?t.get("maxInterval"):null});var r=t.get("interval");null!=r&&e.setInterval&&e.setInterval(r)}function jo(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Gf(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new ri;default:return(xt.getClass(t)||ri).create(e)}}function ms(e){var t,n=e.getLabelModel().get("formatter"),i="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(a){return a=e.scale.getLabel(a),t.replace("{value}",null!=a?a:"")}):"function"==typeof n?function(a,o){return null!=i&&(o=a-i),n(qf(e,a),o)}:function(a){return e.scale.getLabel(a)}}function qf(e,t){return"category"===e.type?e.scale.getLabel(t):t}function $f(e){var t=e.get("interval");return null==t?"auto":t}function H1(e){return"category"===e.type&&0===$f(e.getLabelModel())}I(["contain","normalize"],function(e){Gu.prototype[e]=function(t){return t=si(t)/si(this.base),Vu[e].call(this,t)}}),Gu.create=function(){return new Gu};var ja={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!ke(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!ke(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:We,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},OT=In({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,a=t.width/2,o=t.height/2;e.moveTo(n,i-o),e.lineTo(n+a,i+o),e.lineTo(n-a,i+o),e.closePath()}}),RT=In({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,i=t.cy,a=t.width/2,o=t.height/2;e.moveTo(n,i-o),e.lineTo(n+a,i),e.lineTo(n,i+o),e.lineTo(n-a,i),e.closePath()}}),zT=In({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,i=t.y,a=t.width/5*3,o=Math.max(a,t.height),r=a/2,s=r*r/(o-r),l=i-o+r+s,u=Math.asin(s/r),h=Math.cos(u)*r,c=Math.sin(u),d=Math.cos(u),f=.6*r,p=.7*r;e.moveTo(n-h,l+s),e.arc(n,l,r,Math.PI-u,2*Math.PI+u),e.bezierCurveTo(n+h-c*f,l+s+d*f,n,i-p,n,i),e.bezierCurveTo(n,i-p,n-h+c*f,l+s+d*f,n-h,l+s),e.closePath()}}),BT=In({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,a=t.x,o=t.y,r=t.width/3*2;e.moveTo(a,o),e.lineTo(a+r,o+n),e.lineTo(a,o+n/4*3),e.lineTo(a-r,o+n),e.lineTo(a,o),e.closePath()}}),VT={line:function(e,t,n,i,a){a.x1=e,a.y1=t+i/2,a.x2=e+n,a.y2=t+i/2},rect:function(e,t,n,i,a){a.x=e,a.y=t,a.width=n,a.height=i},roundRect:function(e,t,n,i,a){a.x=e,a.y=t,a.width=n,a.height=i,a.r=Math.min(n,i)/4},square:function(e,t,n,i,a){var o=Math.min(n,i);a.x=e,a.y=t,a.width=o,a.height=o},circle:function(e,t,n,i,a){a.cx=e+n/2,a.cy=t+i/2,a.r=Math.min(n,i)/2},diamond:function(e,t,n,i,a){a.cx=e+n/2,a.cy=t+i/2,a.width=n,a.height=i},pin:function(e,t,n,i,a){a.x=e+n/2,a.y=t+i/2,a.width=n,a.height=i},arrow:function(e,t,n,i,a){a.x=e+n/2,a.y=t+i/2,a.width=n,a.height=i},triangle:function(e,t,n,i,a){a.cx=e+n/2,a.cy=t+i/2,a.width=n,a.height=i}},Kf={};I({line:Ot,rect:Fe,roundRect:Fe,square:Fe,circle:Jn,diamond:RT,pin:zT,arrow:BT,triangle:OT},function(e,t){Kf[t]=new e});var FT=In({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var i=jc(e,t,n),a=this.shape;return a&&"pin"===a.symbolType&&"inside"===t.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(e,t,n){var i=t.symbolType;if("none"!==i){var a=Kf[i];a=a||Kf[i="rect"],VT[i](t.x,t.y,t.width,t.height,a.shape),a.buildPath(e,a.shape,n)}}});function GT(e,t){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function gn(e,t,n,i,a,o,r){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?Rv(e.slice(8),new Le(t,n,i,a),r?"center":"cover"):0===e.indexOf("path://")?tu(e.slice(7),{},new Le(t,n,i,a),r?"center":"cover"):new FT({shape:{symbolType:e,x:t,y:n,width:i,height:a}})).__isEmptyBrush=l,s.setColor=GT,s.setColor(o),s}var HT=(Object.freeze||Object)({createList:function(e){return Pi(e.getSource(),e)},getLayoutRect:vt,dataStack:{isDimensionStacked:Li,enableDataStack:I1,getStackedDimension:fs},createScale:function(e,t){var n=t;ze.isInstance(t)||j(n=new ze(t),ja);var i=jo(n);return i.setExtent(e[0],e[1]),la(i,n),i},mixinAxisModelCommonMethods:function(e){j(e,ja)},completeDimensions:S1,createDimensions:Ho,createSymbol:gn});function Z1(e,t){return Math.abs(e-t)<1e-8}function Xa(e,t,n){var i=0,a=e[0];if(!a)return!1;for(var o=1;o<e.length;o++){var r=e[o];i+=Ii(a[0],a[1],r[0],r[1],t,n),a=r}var s=e[0];return Z1(a[0],s[0])&&Z1(a[1],s[1])||(i+=Ii(a[0],a[1],s[0],s[1],t,n)),0!==i}function vs(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function U1(e,t,n){for(var i=[],a=t[0],o=t[1],r=0;r<e.length;r+=2){var s=e.charCodeAt(r)-64,l=e.charCodeAt(r+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),a=s+=a,o=l+=o,i.push([s/n,l/n])}return i}function Qf(e,t){return function(n){if(n.UTF8Encoding){var i=n.UTF8Scale;null==i&&(i=1024);for(var a=n.features,o=0;o<a.length;o++)for(var r=a[o].geometry,s=r.coordinates,l=r.encodeOffsets,u=0;u<s.length;u++){var h=s[u];if("Polygon"===r.type)s[u]=U1(h,l[u],i);else if("MultiPolygon"===r.type)for(var c=0;c<h.length;c++)h[c]=U1(h[c],l[u][c],i)}n.UTF8Encoding=!1}}(e),O(se(e.features,function(n){return n.geometry&&n.properties&&0<n.geometry.coordinates.length}),function(n){var i=n.properties,a=n.geometry,o=a.coordinates,r=[];"Polygon"===a.type&&r.push({type:"polygon",exterior:o[0],interiors:o.slice(1)}),"MultiPolygon"===a.type&&I(o,function(l){l[0]&&r.push({type:"polygon",exterior:l[0],interiors:l.slice(1)})});var s=new vs(i[t||"name"],r,i.cp);return s.properties=i,s})}vs.prototype={constructor:vs,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],i=[-t,-t],a=[],o=[],r=this.geometries,s=0;s<r.length;s++)"polygon"===r[s].type&&(Rr(r[s].exterior,a,o),mi(n,n,a),vi(i,i,o));return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new Le(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var i=0,a=n.length;i<a;i++)if("polygon"===n[i].type){var r=n[i].interiors;if(Xa(n[i].exterior,e[0],e[1])){for(var s=0;s<(r?r.length:0);s++)if(Xa(r[s]))continue e;return!0}}return!1},transformTo:function(e,t,n,i){var a=this.getBoundingRect(),o=a.width/a.height;n?i=i||n/o:n=o*i;for(var r=new Le(e,t,n,i),s=a.calculateTransform(r),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var h=l[u].exterior,c=l[u].interiors,d=0;d<h.length;d++)Je(h[d],h[d],s);for(var f=0;f<(c?c.length:0);f++)for(d=0;d<c[f].length;d++)Je(c[f][d],c[f][d],s)}(a=this._rect).copy(r),this.center=[a.x+a.width/2,a.y+a.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new vs(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var ys=Kt();function j1(e,t){var n,r,s,i=X1(e,"labels"),a=$f(t);return Y1(i,a)||q1(i,a,{labels:ee(a)?K1(e,a):$1(e,n="auto"===a?(r=e,s=ys(r).autoInterval,null!=s?s:ys(r).autoInterval=r.calculateCategoryInterval()):a),labelCategoryInterval:n})}function X1(e,t){return ys(e)[t]||(ys(e)[t]=[])}function Y1(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function q1(e,t,n){return e.push({key:t,value:n}),n}function $1(e,t,n){var i=ms(e),a=e.scale,o=a.getExtent(),r=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],h=a.count();0!==u&&1<l&&2<h/l&&(u=Math.round(Math.ceil(u/l)*l));var c=H1(e),d=r.get("showMinLabel")||c,f=r.get("showMaxLabel")||c;d&&u!==o[0]&&m(o[0]);for(var p=u;p<=o[1];p+=l)m(p);function m(g){s.push(n?g:{formattedLabel:i(g),rawLabel:a.getLabel(g),tickValue:g})}return f&&p-l!==o[1]&&m(o[1]),s}function K1(e,t,n){var i=e.scale,a=ms(e),o=[];return I(i.getTicks(),function(r){var s=i.getLabel(r);t(r,s)&&o.push(n?r:{formattedLabel:a(r),rawLabel:s,tickValue:r})}),o}var Q1=[0,1],_t=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function J1(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}_t.prototype={constructor:_t,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return n<=e&&e<=i},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return Zd(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&"ordinal"===i.type&&J1(n=n.slice(),i.count()),nt(e,Q1,n,t)},coordToData:function(e,t){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&J1(n=n.slice(),i.count());var a=nt(e,n,Q1,t);return this.scale.scale(a)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=O(function jT(e,t){return"category"===e.type?function(n,i){var a,o,r=X1(n,"ticks"),s=$f(i),l=Y1(r,s);if(l)return l;if(i.get("show")&&!n.scale.isBlank()||(a=[]),ee(s))a=K1(n,s,!0);else if("auto"===s){var u=j1(n,n.getLabelModel());o=u.labelCategoryInterval,a=O(u.labels,function(h){return h.tickValue})}else a=$1(n,o=s,!0);return q1(r,s,{ticks:a,tickCategoryInterval:o})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,function(i){return{coord:this.dataToCoord(i),tickValue:i}},this);return function(i,a,o,r){var s=a.length;if(i.onBand&&!o&&s){var l,h=i.getExtent();if(1===s)a[0].coord=h[0],l=a[1]={coord:h[0]};else{var d=(a[s-1].coord-a[0].coord)/(a[s-1].tickValue-a[0].tickValue);I(a,function(g){g.coord-=d/2});var f=i.scale.getExtent();a.push(l={coord:a[s-1].coord+d*(1+f[1]-a[s-1].tickValue)})}var p=h[0]>h[1];m(a[0].coord,h[0])&&(r?a[0].coord=h[0]:a.shift()),r&&m(h[0],a[0].coord)&&a.unshift({coord:h[0]}),m(h[1],l.coord)&&(r?l.coord=h[1]:a.pop()),r&&m(l.coord,h[1])&&a.push({coord:h[1]})}function m(g,v){return g=wt(g),v=wt(v),p?v<g:g<v}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),O(this.scale.getMinorTicks(e),function(t){return O(t,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this)},this)},getViewLabels:function(){return function UT(e){return"category"===e.type?function(t){var n=t.getLabelModel(),i=j1(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}(e):function(t){var n=t.scale.getTicks(),i=ms(t);return{labels:O(n,function(a,o){return{formattedLabel:i(a,o),rawLabel:t.scale.getLabel(a),tickValue:a}})}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var M,T,t=(T=(M=e).getLabelModel(),{axisRotate:M.getRotate?M.getRotate():M.isHorizontal&&!M.isHorizontal()?90:0,labelRotate:T.get("rotate")||0,font:T.getFont()}),n=ms(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,a=e.scale,o=a.getExtent(),r=a.count();if(o[1]-o[0]<1)return 0;var s=1;40<r&&(s=Math.max(1,Math.floor(r/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),h=Math.abs(u*Math.cos(i)),c=Math.abs(u*Math.sin(i)),d=0,f=0;l<=o[1];l+=s){var m,g=Yn(n(l),t.font,"center","top");m=1.3*g.height,d=Math.max(d,1.3*g.width,7),f=Math.max(f,m,7)}var v=d/h,x=f/c;isNaN(v)&&(v=1/0),isNaN(x)&&(x=1/0);var y=Math.max(0,Math.floor(Math.min(v,x))),b=ys(e.model),_=e.getExtent(),w=b.lastAutoInterval,S=b.lastTickCount;return null!=w&&null!=S&&Math.abs(w-y)<=1&&Math.abs(S-r)<=1&&y<w&&b.axisExtend0===_[0]&&b.axisExtend1===_[1]?y=w:(b.lastTickCount=r,b.lastAutoInterval=y,b.axisExtend0=_[0],b.axisExtend1=_[1]),y}(this)}};var XT=Qf,ex={};I(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){ex[e]=cl[e]});var tx={};function Hu(e,t){var n=e.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return Za(e,t,n[0]);if(i){for(var a=[],o=0;o<n.length;o++){var r=Za(e,t,n[o]);a.push(r)}return a.join(" ")}}function ua(e,t,n){re.call(this),this.updateData(e,t,n)}I(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){tx[e]=Ti[e]}),ht.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return Pi(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Hn=ua.prototype,YT=ua.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function Jf(e){return[e[0]/2,e[1]/2]}function qT(e,t){this.parent.drift(e,t)}Hn._createSymbol=function(e,t,n,i,a){this.removeAll();var o=gn(e,-1,-1,2,2,t.getItemVisual(n,"color"),a);o.attr({z2:100,culling:!0,scale:Jf(i)}),o.drift=qT,this._symbolType=e,this.add(o)},Hn.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},Hn.getSymbolPath=function(){return this.childAt(0)},Hn.getScale=function(){return this.childAt(0).scale},Hn.highlight=function(){this.childAt(0).trigger("emphasis")},Hn.downplay=function(){this.childAt(0).trigger("normal")},Hn.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},Hn.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},Hn.updateData=function(e,t,n){this.silent=!1;var i=e.getItemVisual(t,"symbol")||"circle",a=e.hostModel,o=YT(e,t),r=i!==this._symbolType;if(r){var s=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(i,e,t,o,s)}else(l=this.childAt(0)).silent=!1,Ae(l,{scale:Jf(o)},a,t);if(this._updateCommon(e,t,o,n),r){var l=this.childAt(0),u=n&&n.fadeIn,h={scale:l.scale.slice()};u&&(h.style={opacity:l.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),Vt(l,h,a,t)}this._seriesModel=a};var $T=["itemStyle"],KT=["emphasis","itemStyle"],QT=["label"],JT=["emphasis","label"];function eA(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,i=n[1]/n[0],a={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(a,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Xo(e){this.group=new re,this._symbolCtor=e||ua}Hn._updateCommon=function(e,t,n,i){var a=this.childAt(0),o=e.hostModel,r=e.getItemVisual(t,"color");"image"!==a.type?a.useStyle({strokeNoScale:!0}):a.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,u=i&&i.symbolOffset,h=i&&i.labelModel,c=i&&i.hoverLabelModel,d=i&&i.hoverAnimation,f=i&&i.cursorStyle;if(!i||e.hasItemOption){var p=i&&i.itemModel?i.itemModel:e.getItemModel(t);s=p.getModel($T).getItemStyle(["color"]),l=p.getModel(KT).getItemStyle(),u=p.getShallow("symbolOffset"),h=p.getModel(QT),c=p.getModel(JT),d=p.getShallow("hoverAnimation"),f=p.getShallow("cursor")}else l=fe({},l);var m=a.style,g=e.getItemVisual(t,"symbolRotate");a.attr("rotation",(g||0)*Math.PI/180||0),u&&a.attr("position",[Q(u[0],n[0]),Q(u[1],n[1])]),f&&a.attr("cursor",f),a.setColor(r,i&&i.symbolInnerColor),a.setStyle(s);var v=e.getItemVisual(t,"opacity");null!=v&&(m.opacity=v);var x=e.getItemVisual(t,"liftZ"),y=a.__z2Origin;null!=x?null==y&&(a.__z2Origin=a.z2,a.z2+=x):null!=y&&(a.z2=y,a.__z2Origin=null);var b=i&&i.useNameLabel;cn(m,l,h,c,{labelFetcher:o,labelDataIndex:t,defaultText:function(_,w){return b?e.getName(_):Hu(e,_)},isRectText:!0,autoColor:r}),a.__symbolOriginalScale=Jf(n),a.hoverStyle=l,a.highDownOnUpdate=d&&o.isAnimationEnabled()?eA:null,tt(a)},Hn.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,t&&t.keepLabel||(n.style.text=null),Ae(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},H(ua,re);var Yo=Xo.prototype;function ep(e,t,n,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function nx(e){return null==e||X(e)||(e={isIgnore:e}),e||{}}function ix(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function tp(e,t,n){var i,m,g,v,a=e.getBaseAxis(),o=e.getOtherAxis(a),r=(m=n,g=0,v=o.scale.getExtent(),"start"===m?g=v[0]:"end"===m?g=v[1]:0<v[0]?g=v[0]:v[1]<0&&(g=v[1]),g),s=a.dim,l=o.dim,u=t.mapDimension(l),h=t.mapDimension(s),c="x"===l||"radius"===l?1:0,d=O(e.dimensions,function(p){return t.mapDimension(p)}),f=t.getCalculationInfo("stackResultDimension");return(i|=Li(t,d[0]))&&(d[0]=f),(i|=Li(t,d[1]))&&(d[1]=f),{dataDimsForPoint:d,valueStart:r,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:u,baseDim:h,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function np(e,t,n,i){var a=NaN;e.stacked&&(a=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(a)&&(a=e.valueStart);var o=e.baseDataOffset,r=[];return r[o]=n.get(e.baseDim,i),r[1-o]=a,t.dataToPoint(r)}Yo.updateData=function(e,t){t=nx(t);var n=this.group,i=e.hostModel,a=this._data,o=this._symbolCtor,r=ix(e);a||n.removeAll(),e.diff(a).add(function(s){var l=e.getItemLayout(s);if(ep(e,l,s,t)){var u=new o(e,s,r);u.attr("position",l),e.setItemGraphicEl(s,u),n.add(u)}}).update(function(s,l){var u=a.getItemGraphicEl(l),h=e.getItemLayout(s);ep(e,h,s,t)?(u?(u.updateData(e,s,r),Ae(u,{position:h},i)):(u=new o(e,s)).attr("position",h),n.add(u),e.setItemGraphicEl(s,u)):n.remove(u)}).remove(function(s){var l=a.getItemGraphicEl(s);l&&l.fadeOut(function(){n.remove(l)})}).execute(),this._data=e},Yo.isPersistent=function(){return!0},Yo.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,n){var i=e.getItemLayout(n);t.attr("position",i)})},Yo.incrementalPrepareUpdate=function(e){this._seriesScope=ix(e),this._data=null,this.group.removeAll()},Yo.incrementalUpdate=function(e,t,n){function i(s){s.isGroup||(s.incremental=s.useHoverLayer=!0)}n=nx(n);for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(ep(t,o,a,n)){var r=new this._symbolCtor(t,a,this._seriesScope);r.traverse(i),r.attr("position",o),this.group.add(r),t.setItemGraphicEl(a,r)}}},Yo.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)})}):t.removeAll()};var ax=mi,ox=vi,rx=wr,Zu=kt,ip=[],Ln=[],Pn=[];function ki(e){return isNaN(e[0])||isNaN(e[1])}function ap(e,t,n,i,a,o,r,s,l,u){return"none"!==u&&u?function(h,c,d,f,p,m,g,v,x,y,b){for(var _=0,w=d,S=0;S<f;S++){var M=c[w];if(p<=w||w<0)break;if(ki(M)){if(b){w+=m;continue}break}if(w===d)h[0<m?"moveTo":"lineTo"](M[0],M[1]);else if(0<x){var T=c[_],A="y"===y?1:0,C=(M[A]-T[A])*x;Zu(Ln,T),Ln[A]=T[A]+C,Zu(Pn,M),Pn[A]=M[A]-C,h.bezierCurveTo(Ln[0],Ln[1],Pn[0],Pn[1],M[0],M[1])}else h.lineTo(M[0],M[1]);_=w,w+=m}return S}.apply(this,arguments):function(h,c,d,f,p,m,g,v,x,y,b){for(var _=0,w=d,S=0;S<f;S++){var M=c[w];if(p<=w||w<0)break;if(ki(M)){if(b){w+=m;continue}break}if(w===d)h[0<m?"moveTo":"lineTo"](M[0],M[1]),Zu(Ln,M);else if(0<x){var T=w+m,A=c[T];if(b)for(;A&&ki(c[T]);)A=c[T+=m];var C=.5,D=c[_];if(!(A=c[T])||ki(A))Zu(Pn,M);else{var L,P;if(ki(A)&&!b&&(A=M),pi(ip,A,D),"x"===y||"y"===y){var N="x"===y?0:1;L=Math.abs(M[N]-D[N]),P=Math.abs(M[N]-A[N])}else L=gi(M,D),P=gi(M,A);rx(Pn,M,ip,-x*(1-(C=P/(P+L))))}ax(Ln,Ln,v),ox(Ln,Ln,g),ax(Pn,Pn,v),ox(Pn,Pn,g),h.bezierCurveTo(Ln[0],Ln[1],Pn[0],Pn[1],M[0],M[1]),rx(Ln,M,ip,x*C)}else h.lineTo(M[0],M[1]);_=w,w+=m}return S}.apply(this,arguments)}function op(e,t){var n=[1/0,1/0],i=[-1/0,-1/0];if(t)for(var a=0;a<e.length;a++){var o=e[a];o[0]<n[0]&&(n[0]=o[0]),o[1]<n[1]&&(n[1]=o[1]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1])}return{min:t?n:i,max:t?i:n}}var tA=Re.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Nd(Re.prototype.brush),buildPath:function(e,t){var n=t.points,i=0,a=n.length,o=op(n,t.smoothConstraint);if(t.connectNulls){for(;0<a&&ki(n[a-1]);a--);for(;i<a&&ki(n[i]);i++);}for(;i<a;)i+=ap(e,n,i,a,a,1,o.min,o.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),sx=Re.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Nd(Re.prototype.brush),buildPath:function(e,t){var n=t.points,i=t.stackedOnPoints,a=0,o=n.length,r=t.smoothMonotone,s=op(n,t.smoothConstraint),l=op(i,t.smoothConstraint);if(t.connectNulls){for(;0<o&&ki(n[o-1]);o--);for(;a<o&&ki(n[a]);a++);}for(;a<o;){var u=ap(e,n,a,o,o,1,s.min,s.max,t.smooth,r,t.connectNulls);ap(e,i,a+u-1,u,o,-1,l.min,l.max,t.stackedOnSmooth,r,t.connectNulls),a+=u+1,e.closePath()}}});function lx(e,t,n){var i=e.getArea(),a=e.getBaseAxis().isHorizontal(),o=i.x,r=i.y,s=i.width,l=i.height,u=n.get("lineStyle.width")||2;o-=u/2,r-=u/2,s+=u,l+=u,o=Math.floor(o),s=Math.round(s);var h=new Fe({shape:{x:o,y:r,width:s,height:l}});return t&&(h.shape[a?"width":"height"]=0,Vt(h,{shape:{width:s,height:l}},n)),h}function ux(e,t,n){var i=e.getArea(),a=new Fn({shape:{cx:wt(e.cx,1),cy:wt(e.cy,1),r0:wt(i.r0,1),r:wt(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return t&&(a.shape.endAngle=i.startAngle,Vt(a,{shape:{endAngle:i.endAngle}},n)),a}function Uu(e,t,n){return e?"polar"===e.type?ux(e,t,n):"cartesian2d"===e.type?lx(e,t,n):null:null}function hx(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var i=e[n],a=t[n];if(i[0]!==a[0]||i[1]!==a[1])return}return!0}}function cx(e,t){var n=[],i=[],a=[],o=[];return Rr(e,n,i),Rr(t,a,o),Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function dx(e){return"number"==typeof e?e:e?.5:0}function ha(e,t,n){for(var i=t.getBaseAxis(),a="x"===i.dim||"radius"===i.dim?0:1,o=[],r=0;r<e.length-1;r++){var s=e[r+1],l=e[r];o.push(l);var u=[];switch(n){case"end":u[a]=s[a],u[1-a]=l[1-a],o.push(u);break;case"middle":var c=[];u[a]=c[a]=(l[a]+s[a])/2,u[1-a]=l[1-a],c[1-a]=s[1-a],o.push(u),o.push(c);break;default:u[a]=l[a],u[1-a]=s[1-a],o.push(u)}}return e[r]&&o.push(e[r]),o}function fx(e,t,n){if("cartesian2d"!==e.type)return ux(e,t,n);var i=e.getBaseAxis().isHorizontal(),a=lx(e,t,n);if(!n.get("clip",!0)){var o=a.shape,r=Math.max(o.width,o.height);i?(o.y-=r,o.height+=2*r):(o.x-=r,o.width+=2*r)}return a}function Ya(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(i,a,o){var r=i.getData(),s=i.get("symbol"),l=i.get("symbolSize"),u=i.get("symbolKeepAspect"),h=i.get("symbolRotate"),c=ee(s),d=ee(l),f=ee(h),p=c||d||f,m=!c&&s?s:t;if(r.setVisual({legendSymbol:n||m,symbol:m,symbolSize:d?null:l,symbolKeepAspect:u,symbolRotate:h}),!a.isSeriesFiltered(i))return{dataEach:r.hasItemOption||p?function(v,x){if(p){var y=i.getRawValue(x),b=i.getDataParams(x);c&&v.setItemVisual(x,"symbol",s(y,b)),d&&v.setItemVisual(x,"symbolSize",l(y,b)),f&&v.setItemVisual(x,"symbolRotate",h(y,b))}if(v.hasItemOption){var _=v.getItemModel(x),w=_.getShallow("symbol",!0),S=_.getShallow("symbolSize",!0),M=_.getShallow("symbolRotate",!0),T=_.getShallow("symbolKeepAspect",!0);null!=w&&v.setItemVisual(x,"symbol",w),null!=S&&v.setItemVisual(x,"symbolSize",S),null!=M&&v.setItemVisual(x,"symbolRotate",M),null!=T&&v.setItemVisual(x,"symbolKeepAspect",T)}}:null}}}}function xs(e){return{seriesType:e,plan:Fo(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,a=t.pipelineContext.large;if(i){var o=O(i.dimensions,function(l){return n.mapDimension(l)}).slice(0,2),r=o.length,s=n.getCalculationInfo("stackResultDimension");return Li(n,o[0])&&(o[0]=s),Li(n,o[1])&&(o[1]=s),r&&{progress:function(l,u){for(var c=a&&new Float32Array((l.end-l.start)*r),d=l.start,f=0,p=[],m=[];d<l.end;d++){var g;if(1===r){var v=u.get(o[0],d);g=!isNaN(v)&&i.dataToPoint(v,null,m)}else{v=p[0]=u.get(o[0],d);var x=p[1]=u.get(o[1],d);g=!isNaN(v)&&!isNaN(x)&&i.dataToPoint(p,null,m)}a?(c[f++]=g?g[0]:NaN,c[f++]=g?g[1]:NaN):u.setItemLayout(d,g&&g.slice()||[NaN,NaN])}a&&u.setLayout("symbolPoints",c)}}}}}}function iA(e,t){return Math.round(e.length/2)}Pt.extend({type:"line",init:function(){var e=new re,t=new Xo;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var i=e.coordinateSystem,a=this.group,o=e.getData(),r=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=o.mapArray(o.getItemLayout),u="polar"===i.type,h=this._coordSys,c=this._symbolDraw,d=this._polyline,f=this._polygon,p=this._lineGroup,m=e.get("animation"),g=!s.isEmpty(),v=s.get("origin"),x=function(D,L,P){if(!P.valueDim)return[];for(var N=[],R=0,k=L.count();R<k;R++)N.push(np(P,D,L,R));return N}(i,o,tp(i,o,v)),y=e.get("showSymbol"),b=y&&!u&&function nA(e,t,n){var i=e.get("showAllSymbol"),a="auto"===i;if(!i||a){var o=n.getAxesByScale("ordinal")[0];if(o&&(!a||!function(l,u){var h=l.getExtent(),c=Math.abs(h[1]-h[0])/l.scale.count();isNaN(c)&&(c=0);for(var d=u.count(),f=Math.max(1,Math.round(d/5)),p=0;p<d;p+=f)if(1.5*ua.getSymbolSize(u,p)[l.isHorizontal()?1:0]>c)return!1;return!0}(o,t))){var r=t.mapDimension(o.dim),s={};return I(o.getViewLabels(),function(l){s[l.tickValue]=1}),function(l){return!s.hasOwnProperty(t.get(r,l))}}}}(e,o,i),_=this._data;_&&_.eachItemGraphicEl(function(D,L){D.__temp&&(a.remove(D),_.setItemGraphicEl(L,null))}),y||c.remove(),a.add(p);var w,S=!u&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(w=i.getArea()).width?(w.x-=.1,w.y-=.1,w.width+=.2,w.height+=.2):w.r0&&(w.r0-=.5,w.r1+=.5)),this._clipShapeForSymbol=w,d&&h.type===i.type&&S===this._step?(g&&!f?f=this._newPolygon(l,x,i,m):f&&!g&&(p.remove(f),f=this._polygon=null),p.setClipPath(fx(i,!1,e)),y&&c.updateData(o,{isIgnore:b,clipShape:w}),o.eachItemGraphicEl(function(D){D.stopAnimation(!0)}),hx(this._stackedOnPoints,x)&&hx(this._points,l)||(m?this._updateAnimation(o,x,i,n,S,v):(S&&(l=ha(l,i,S),x=ha(x,i,S)),d.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:x})))):(y&&c.updateData(o,{isIgnore:b,clipShape:w}),S&&(l=ha(l,i,S),x=ha(x,i,S)),d=this._newPolyline(l,i,m),g&&(f=this._newPolygon(l,x,i,m)),p.setClipPath(fx(i,!0,e)));var M=function(D,L){var P=D.getVisual("visualMeta");if(P&&P.length&&D.count()&&"cartesian2d"===L.type){for(var N,R,k=P.length-1;0<=k;k--){var W=D.getDimensionInfo(D.dimensions[P[k].dimension]);if("x"===(N=W&&W.coordDim)||"y"===N){R=P[k];break}}if(R){var F=L.getAxis(N),Y=O(R.stops,function(He){return{coord:F.toGlobalCoord(F.dataToCoord(He.value)),color:He.color}}),K=Y.length,ce=R.outerColors.slice();K&&Y[0].coord>Y[K-1].coord&&(Y.reverse(),ce.reverse());var U=Y[0].coord-10,le=Y[K-1].coord+10,de=le-U;if(de<.001)return"transparent";I(Y,function(He){He.offset=(He.coord-U)/de}),Y.push({offset:K?Y[K-1].offset:.5,color:ce[1]||"transparent"}),Y.unshift({offset:K?Y[0].offset:.5,color:ce[0]||"transparent"});var xe=new Oa(0,0,0,0,Y,!0);return xe[N]=U,xe[N+"2"]=le,xe}}}(o,i)||o.getVisual("color");d.useStyle(ie(r.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"}));var T=e.get("smooth");if(T=dx(e.get("smooth")),d.setShape({smooth:T,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),f){var A=o.getCalculationInfo("stackedOnSeries"),C=0;f.useStyle(ie(s.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel"})),A&&(C=dx(A.get("smooth"))),f.setShape({smooth:T,stackedOnSmooth:C,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=o,this._coordSys=i,this._stackedOnPoints=x,this._points=l,this._step=S,this._valueOrigin=v},dispose:function(){},highlight:function(e,t,n,i){var a=e.getData(),o=Ol(a,i);if(!(o instanceof Array)&&null!=o&&0<=o){var r=a.getItemGraphicEl(o);if(!r){var s=a.getItemLayout(o);if(!s||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;(r=new ua(a,o)).position=s,r.setZ(e.get("zlevel"),e.get("z")),r.ignore=isNaN(s[0])||isNaN(s[1]),r.__temp=!0,a.setItemGraphicEl(o,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else Pt.prototype.highlight.call(this,e,t,n,i)},downplay:function(e,t,n,i){var a=e.getData(),o=Ol(a,i);if(null!=o&&0<=o){var r=a.getItemGraphicEl(o);r&&(r.__temp?(a.setItemGraphicEl(o,null),this.group.remove(r)):r.downplay())}else Pt.prototype.downplay.call(this,e,t,n,i)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new tA({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new sx({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(e,t,n,i,a,o){var r=this._polyline,s=this._polygon,l=e.hostModel,u=function(x,y,b,_,w,S,M,T){for(var A=function(Yt,Zt){var Vi=[];return Zt.diff(Yt).add(function(Ma){Vi.push({cmd:"+",idx:Ma})}).update(function(Ma,ul){Vi.push({cmd:"=",idx:ul,idx1:Ma})}).remove(function(Ma){Vi.push({cmd:"-",idx:Ma})}).execute(),Vi}(x,y),C=[],D=[],L=[],P=[],N=[],R=[],k=[],B=tp(w,y,M),G=tp(S,x,T),W=0;W<A.length;W++){var F=A[W],Y=!0;switch(F.cmd){case"=":var K=x.getItemLayout(F.idx),ce=y.getItemLayout(F.idx1);(isNaN(K[0])||isNaN(K[1]))&&(K=ce.slice()),C.push(K),D.push(ce),L.push(b[F.idx]),P.push(_[F.idx1]),k.push(y.getRawIndex(F.idx1));break;case"+":var U=F.idx;C.push(w.dataToPoint([y.get(B.dataDimsForPoint[0],U),y.get(B.dataDimsForPoint[1],U)])),D.push(y.getItemLayout(U).slice()),L.push(np(B,w,y,U)),P.push(_[U]),k.push(y.getRawIndex(U));break;case"-":var le=x.getRawIndex(U=F.idx);le!==U?(C.push(x.getItemLayout(U)),D.push(S.dataToPoint([x.get(G.dataDimsForPoint[0],U),x.get(G.dataDimsForPoint[1],U)])),L.push(b[U]),P.push(np(G,S,x,U)),k.push(le)):Y=!1}Y&&(N.push(F),R.push(R.length))}R.sort(function(Yt,Zt){return k[Yt]-k[Zt]});var de=[],xe=[],He=[],Ve=[],Ye=[];for(W=0;W<R.length;W++)de[W]=C[U=R[W]],xe[W]=D[U],He[W]=L[U],Ve[W]=P[U],Ye[W]=N[U];return{current:de,next:xe,stackedOnCurrent:He,stackedOnNext:Ve,status:Ye}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,o),h=u.current,c=u.stackedOnCurrent,d=u.next,f=u.stackedOnNext;if(a&&(h=ha(u.current,n,a),c=ha(u.stackedOnCurrent,n,a),d=ha(u.next,n,a),f=ha(u.stackedOnNext,n,a)),3e3<cx(h,d)||s&&3e3<cx(c,f))return r.setShape({points:d}),void(s&&s.setShape({points:d,stackedOnPoints:f}));r.shape.__points=u.current,r.shape.points=h,Ae(r,{shape:{points:d}},l),s&&(s.setShape({points:h,stackedOnPoints:c}),Ae(s,{shape:{points:d,stackedOnPoints:f}},l));for(var p=[],m=u.status,g=0;g<m.length;g++)if("="===m[g].cmd){var v=e.getItemGraphicEl(m[g].idx1);v&&p.push({el:v,ptIdx:g})}r.animators&&r.animators.length&&r.animators[0].during(function(){for(var x=0;x<p.length;x++)p[x].el.attr("position",r.shape.__points[p[x].ptIdx])})},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,a){i.__temp&&(t.remove(i),n.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var aA={average:function(e){for(var t=0,n=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function oA(e){return this._axes[e]}function ju(e){this._axes={},this._dimList=[],this.name=e||""}function _s(e){ju.call(this,e)}function Xu(e,t,n,i,a){_t.call(this,e,t,n),this.type=i||"value",this.position=a||"bottom"}ju.prototype={constructor:ju,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return O(this._dimList,oA,this)},getAxesByScale:function(e){return e=e.toLowerCase(),se(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,i=e instanceof Array?[]:{},a=0;a<n.length;a++){var o=n[a];i[o]=this._axes[o][t](e[o])}return i}},_s.prototype={constructor:_s,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var i=this.getAxis("x"),a=this.getAxis("y");return(n=n||[])[0]=i.toGlobalCoord(i.dataToCoord(e[0])),n[1]=a.toGlobalCoord(a.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,a=n.getExtent(),o=i.getExtent(),r=n.parse(e[0]),s=i.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(a[0],a[1]),r),Math.max(a[0],a[1])),t[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),i=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=i.coordToData(i.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),i=Math.min(t[0],t[1]);return new Le(n,i,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-i)}},H(_s,ju),Xu.prototype={constructor:Xu,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},H(Xu,_t);var px={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},ca={};function qo(e,t,n,i){I(rA,function(a){t.extend({type:e+"Axis."+a,mergeDefaultAndTheme:function(o,r){var s=this.layoutMode,l=s?Bo(o):{};pe(o,r.getTheme().get(a+"Axis")),pe(o,this.getDefaultOption()),o.type=n(e,o),s&&na(o,l,s)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=ps.createByAxisModel(this))},getCategories:function(o){var r=this.option;if("category"===r.type)return o?r.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:ln([{},ca[a+"Axis"],i],!0)})}),Ge.registerSubTypeDefaulter(e+"Axis",V(n,e))}ca.categoryAxis=pe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},px),ca.valueAxis=pe({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},px),ca.timeAxis=ie({scale:!0,min:"dataMin",max:"dataMax"},ca.valueAxis),ca.logAxis=ie({scale:!0,logBase:10},ca.valueAxis);var rA=["value","category","time","log"],$o=Ge.extend({type:"cartesian2dAxis",axis:null,init:function(){$o.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){$o.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){$o.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function gx(e,t){return t.type||(t.data?"category":"value")}pe($o.prototype,ja);var mx={offset:0};function rp(e,t){return e.getCoordSysModel()===t}function Ko(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}qo("x",$o,gx,mx),qo("y",$o,gx,mx),Ge.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Ht=Ko.prototype;function vx(e,t,n,i){n.getAxesOnZeroOf=function(){return a?[a]:[]};var a,o=e[t],r=n.model,s=r.get("axisLine.onZero"),l=r.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)yx(o[l])&&(a=o[l]);else for(var u in o)if(o.hasOwnProperty(u)&&yx(o[u])&&!i[h(o[u])]){a=o[u];break}a&&(i[h(a)]=!0)}function h(c){return c.dim+"_"+c.index}}function yx(e){return e&&"category"!==e.type&&"time"!==e.type&&function(t){var n=t.scale.getExtent(),i=n[0],a=n[1];return!(0<i&&0<a||i<0&&a<0)}(e)}Ht.type="grid",Ht.axisPointerEnabled=!0,Ht.getRect=function(){return this._rect},Ht.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),I(n.x,function(a){la(a.scale,a.model)}),I(n.y,function(a){la(a.scale,a.model)});var i={};I(n.x,function(a){vx(n,"y",a,i)}),I(n.y,function(a){vx(n,"x",a,i)}),this.resize(this.model,t)},Ht.resize=function(e,t,n){var i=vt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=i;var a=this._axesList;function o(){I(a,function(r){var h,c,d,f,s=r.isHorizontal(),l=s?[0,i.width]:[0,i.height],u=r.inverse?1:0;r.setExtent(l[u],l[1-u]),c=s?i.x:i.y,d=(h=r).getExtent(),f=d[0]+d[1],h.toGlobalCoord="x"===h.dim?function(p){return p+c}:function(p){return f-p+c},h.toLocalCoord="x"===h.dim?function(p){return p-c}:function(p){return f-p+c}})}o(),!n&&e.get("containLabel")&&(I(a,function(r){if(!r.model.get("axisLabel.inside")){var s=function(h){var d=h.scale;if(h.model.get("axisLabel.show")&&!d.isBlank()){var f,p,m="category"===h.type,g=d.getExtent();p=m?d.count():(f=d.getTicks()).length;var v,x,b,_,w,S,M,T,A=h.getLabelModel(),C=ms(h),D=1;40<p&&(D=Math.ceil(p/40));for(var L=0;L<p;L+=D){var P=C(f?f[L]:g[0]+L),R=(x=A.getTextRect(P),b=(A.get("rotate")||0)*Math.PI/180,S=(_=x.plain()).height,M=(w=_.width)*Math.abs(Math.cos(b))+Math.abs(S*Math.sin(b)),T=w*Math.abs(Math.sin(b))+Math.abs(S*Math.cos(b)),new Le(_.x,_.y,M,T));v?v.union(R):v=R}return v}}(r);if(s){var l=r.isHorizontal()?"height":"width",u=r.model.get("axisLabel.margin");i[l]-=s[l]+u,"top"===r.position?i.y+=s.height+u:"left"===r.position&&(i.x+=s.width+u)}}}),o())},Ht.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[t]}},Ht.getAxes=function(){return this._axesList.slice()},Ht.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];X(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},Ht.getCartesians=function(){return this._coordsList.slice()},Ht.convertToPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},Ht.convertFromPixel=function(e,t,n){var i=this._findConvertTarget(e,t);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},Ht._findConvertTarget=function(e,t){var n,i,a=t.seriesModel,o=t.xAxisModel||a&&a.getReferringComponents("xAxis")[0],r=t.yAxisModel||a&&a.getReferringComponents("yAxis")[0],s=t.gridModel;return a?E(this._coordsList,n=a.coordinateSystem)<0&&(n=null):o&&r?n=this.getCartesian(o.componentIndex,r.componentIndex):o?i=this.getAxis("x",o.componentIndex):r?i=this.getAxis("y",r.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},Ht.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},Ht._initCartesian=function(e,t,n){var i={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},o={x:0,y:0};if(t.eachComponent("xAxis",r("x"),this),t.eachComponent("yAxis",r("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function r(s){return function(l,u){if(rp(l,e)){var h=l.get("position");"x"===s?"top"!==h&&"bottom"!==h&&(h=i.bottom?"top":"bottom"):"left"!==h&&"right"!==h&&(h=i.left?"right":"left"),i[h]=!0;var c=new Xu(s,jo(l),[0,0],l.get("type"),h);c.onBand="category"===c.type&&l.get("boundaryGap"),c.inverse=l.get("inverse"),(l.axis=c).model=l,c.grid=this,c.index=u,this._axesList.push(c),a[s][u]=c,o[s]++}}}I((this._axesMap=a).x,function(s,l){I(a.y,function(u,h){var c="x"+l+"y"+h,d=new _s(c);d.grid=this,d.model=e,this._coordsMap[c]=d,this._coordsList.push(d),d.addAxis(s),d.addAxis(u)},this)},this)},Ht._updateScale=function(e,t){function n(i,a){I(i.mapDimension(a.dim,!0),function(o){a.scale.unionExtentFromData(i,fs(i,o))})}I(this._axesList,function(i){i.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(i){if(_x(i)){var a=xx(i),o=a[0],r=a[1];if(!rp(o,t)||!rp(r,t))return;var s=this.getCartesian(o.componentIndex,r.componentIndex),l=i.getData(),u=s.getAxis("x"),h=s.getAxis("y");"list"===l.type&&(n(l,u),n(l,h))}},this)},Ht.getTooltipAxes=function(e){var t=[],n=[];return I(this.getCartesians(),function(i){var a=null!=e&&"auto"!==e?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);E(t,a)<0&&t.push(a),E(n,o)<0&&n.push(o)}),{baseAxes:t,otherAxes:n}};var sA=["xAxis","yAxis"];function xx(e){return O(sA,function(t){return e.getReferringComponents(t)[0]})}function _x(e){return"cartesian2d"===e.get("coordinateSystem")}function rn(e,t){this.opt=t,this.axisModel=e,ie(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new re;var n=new re({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}Ko.create=function(e,t){var n=[];return e.eachComponent("grid",function(i,a){var o=new Ko(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if(_x(i)){var a=xx(i),o=a[0],r=a[1],s=o.getCoordSysModel().coordinateSystem;i.coordinateSystem=s.getCartesian(o.componentIndex,r.componentIndex)}}),n},Ko.dimensions=Ko.prototype.dimensions=_s.prototype.dimensions,Gt.register("cartesian2d",Ko);var da=Math.PI;rn.prototype={constructor:rn,hasBuilder:function(e){return!!bx[e]},add:function(e){bx[e].call(this)},getGroup:function(){return this.group}};var bx={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,a=[n[0],0],o=[n[1],0];i&&(Je(a,a,i),Je(o,o,i));var r=fe({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Ot({anid:"line",subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:r,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var s=t.get("axisLine.symbol"),l=t.get("axisLine.symbolSize"),u=t.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var h=l[0],c=l[1];I([{rotate:e.rotation+Math.PI/2,offset:u[0],r:0},{rotate:e.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((a[0]-o[0])*(a[0]-o[0])+(a[1]-o[1])*(a[1]-o[1]))}],function(d,f){if("none"!==s[f]&&null!=s[f]){var p=gn(s[f],-h/2,-c/2,h,c,r.stroke,!0),m=d.r+d.offset,g=[a[0]+m*Math.cos(e.rotation),a[1]-m*Math.sin(e.rotation)];p.attr({rotation:d.rotate,position:g,silent:!0,z2:11}),this.group.add(p)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(i,a,o){var r=a.axis,s=a.getModel("axisTick");if(s.get("show")&&!r.scale.isBlank()){for(var l=s.getModel("lineStyle"),u=o.tickDirection*s.get("length"),h=Cx(r.getTicksCoords(),i._transform,u,ie(l.getLineStyle(),{stroke:a.get("axisLine.lineStyle.color")}),"ticks"),c=0;c<h.length;c++)i.group.add(h[c]);return h}}(this,e,t);(function(i,a,o){if(!H1(i.axis)){var r=i.get("axisLabel.showMinLabel"),s=i.get("axisLabel.showMaxLabel"),l=(a=a||[])[0],u=a[1],h=a[a.length-1],c=a[a.length-2],d=(o=o||[])[0],f=o[1],p=o[o.length-1],m=o[o.length-2];!1===r?(kn(l),kn(d)):Tx(l,u)&&(r?(kn(u),kn(f)):(kn(l),kn(d))),!1===s?(kn(h),kn(p)):Tx(c,h)&&(s?(kn(c),kn(m)):(kn(h),kn(p)))}})(e,function(i,a,o){var r=a.axis;if(Ne(o.axisLabelShow,a.get("axisLabel.show"))&&!r.scale.isBlank()){var s=a.getModel("axisLabel"),l=s.get("margin"),u=r.getViewLabels(),h=(Ne(o.labelRotate,s.get("rotate"))||0)*da/180,c=Mx(o.rotation,h,o.labelDirection),d=a.getCategories&&a.getCategories(!0),f=[],p=Ix(a),m=a.get("triggerEvent");return I(u,function(g,v){var x=g.tickValue,y=g.formattedLabel,b=g.rawLabel,_=s;d&&d[x]&&d[x].textStyle&&(_=new ze(d[x].textStyle,s,a.ecModel));var w=_.getTextColor()||a.get("axisLine.lineStyle.color"),S=[r.dataToCoord(x),o.labelOffset+o.labelDirection*l],M=new Pe({anid:"label_"+x,position:S,rotation:c.rotation,silent:p,z2:10});ut(M.style,_,{text:y,textAlign:_.getShallow("align",!0)||c.textAlign,textVerticalAlign:_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||c.textVerticalAlign,textFill:"function"==typeof w?w("category"===r.type?b:"value"===r.type?x+"":x,v):w}),m&&(M.eventData=Sx(a),M.eventData.targetType="axisLabel",M.eventData.value=b),i._dumbGroup.add(M),M.updateTransform(),f.push(M),i.group.add(M),M.decomposeTransform()}),f}}(this,e,t),n),function(i,a,o){var r=a.axis,s=a.getModel("minorTick");if(s.get("show")&&!r.scale.isBlank()){var l=r.getMinorTicksCoords();if(l.length)for(var u=s.getModel("lineStyle"),h=o.tickDirection*s.get("length"),c=ie(u.getLineStyle(),ie(a.getModel("axisTick").getLineStyle(),{stroke:a.get("axisLine.lineStyle.color")})),d=0;d<l.length;d++)for(var f=Cx(l[d],i._transform,h,c,"minorticks_"+d),p=0;p<f.length;p++)i.group.add(f[p])}}(this,e,t)},axisName:function(){var S,T,C,D,L,P,e=this.opt,t=this.axisModel,n=Ne(e.axisName,t.get("name"));if(n){var i,a,o=t.get("nameLocation"),r=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=this.axisModel.axis.getExtent(),h=u[0]>u[1]?-1:1,c=["start"===o?u[0]-h*l:"end"===o?u[1]+h*l:(u[0]+u[1])/2,Ax(o)?e.labelOffset+r*l:0],d=t.get("nameRotate");null!=d&&(d=d*da/180),Ax(o)?i=Mx(e.rotation,null!=d?d:e.rotation,r):(S=o,T=u,D=jd((d||0)-e.rotation),L=T[0]>T[1],P="start"===S&&!L||"start"!==S&&L,i={rotation:D,textAlign:Xr(D-da/2)?(C=P?"bottom":"top","center"):Xr(D-1.5*da)?(C=P?"top":"bottom","center"):(C="middle",D<1.5*da&&da/2<D?P?"left":"right":P?"right":"left"),textVerticalAlign:C},null!=(a=e.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(i.rotation)),isFinite(a)||(a=null)));var f=s.getFont(),p=t.get("nameTruncate",!0)||{},m=p.ellipsis,g=Ne(e.nameTruncateMaxWidth,p.maxWidth,a),v=null!=m&&null!=g?ry(n,g,f,m,{minChar:2,placeholder:p.placeholder}):n,x=t.get("tooltip",!0),y=t.mainType,b={componentType:y,name:n,$vars:["name"]};b[y+"Index"]=t.componentIndex;var _=new Pe({anid:"name",__fullText:n,__truncatedText:v,position:c,rotation:i.rotation,silent:Ix(t),z2:1,tooltip:x&&x.show?fe({content:n,formatter:function(){return n},formatterParams:b},x):null});ut(_.style,s,{text:v,textFont:f,textFill:s.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:s.get("align")||i.textAlign,textVerticalAlign:s.get("verticalAlign")||i.textVerticalAlign}),t.get("triggerEvent")&&(_.eventData=Sx(t),_.eventData.targetType="axisName",_.eventData.name=n),this._dumbGroup.add(_),_.updateTransform(),this.group.add(_),_.decomposeTransform()}}},Sx=rn.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},Mx=rn.innerTextLayout=function(e,t,n){var i,a=jd(t-e);return{rotation:a,textAlign:Xr(a)?(i=0<n?"top":"bottom","center"):Xr(a-da)?(i=0<n?"bottom":"top","center"):(i="middle",0<a&&a<da?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:i}},Ix=rn.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function kn(e){e&&(e.ignore=!0)}function Tx(e,t){var n=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(n&&i){var a=wo([]);return yi(a,a,-e.rotation),n.applyTransform(Wi([],a,e.getLocalTransform())),i.applyTransform(Wi([],a,t.getLocalTransform())),n.intersect(i)}}function Ax(e){return"middle"===e||"center"===e}function Cx(e,t,n,i,a){for(var o=[],r=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;r[0]=u,s[r[1]=0]=u,s[1]=n,t&&(Je(r,r,t),Je(s,s,t));var h=new Ot({anid:a+"_"+e[l].tickValue,subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});o.push(h)}return o}var Qo=I,sp=V;function lp(e,t){return"all"===e||z(e)&&0<=E(e,t)||e===t}function up(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[bs(e)]}function hp(e){return!!e.get("handle.show")}function bs(e){return e.type+"||"+e.id}var mn=At({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,i){this.axisPointerClass&&function(a){var o=up(a);if(o){var r=o.axisPointerModel,s=o.axis.scale,l=r.option,u=r.get("status"),h=r.get("value");null!=h&&(h=s.parse(h));var c=hp(r);null==u&&(l.status=c?"show":"hide");var d=s.getExtent().slice();d[0]>d[1]&&d.reverse(),(null==h||h>d[1])&&(h=d[1]),h<d[0]&&(h=d[0]),l.value=h,c&&(l.status=o.axis.scale.isBlank()?"hide":"show")}}(e),mn.superApply(this,"render",arguments),Dx(this,e,0,n,0,!0)},updateAxisPointer:function(e,t,n,i,a){Dx(this,e,0,n,0,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),mn.superApply(this,"remove",arguments)},dispose:function(e,t){Lx(this,t),mn.superApply(this,"dispose",arguments)}});function Dx(e,t,n,i,a,o){var u,r=mn.getAxisPointerClass(e.axisPointerClass);if(r){var s=(u=up(t))&&u.axisPointerModel;s?(e._axisPointer||(e._axisPointer=new r)).render(t,s,i,o):Lx(e,i)}}function Lx(e,t,n){var i=e._axisPointer;i&&i.dispose(t,n),e._axisPointer=null}var Px=[];function cp(e,t,n){n=n||{};var i=e.coordinateSystem,a=t.axis,o={},r=a.getAxesOnZeroOf()[0],s=a.position,l=r?"onZero":s,u=a.dim,h=i.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p="x"===u?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(r){var m=r.toGlobalCoord(r.dataToCoord(0));p[d.onZero]=Math.max(Math.min(m,p[1]),p[0])}o.position=["y"===u?p[d[l]]:c[0],"x"===u?p[d[l]]:c[3]],o.rotation=Math.PI/2*("x"===u?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],o.labelOffset=r?p[d[s]]-p[d.onZero]:0,t.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),Ne(n.labelInside,t.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var g=t.get("axisLabel.rotate");return o.labelRotate="top"===l?-g:g,o.z2=1,o}function kx(e,t,n,i){var a=n.axis;if(!a.scale.isBlank()){var o=n.getModel("splitArea"),r=o.getModel("areaStyle"),s=r.get("color"),l=i.coordinateSystem.getRect(),u=a.getTicksCoords({tickModel:o,clamp:!0});if(u.length){var h=s.length,c=e.__splitAreaColors,d=ne(),f=0;if(c)for(var p=0;p<u.length;p++){var m=c.get(u[p].tickValue);if(null!=m){f=(m+(h-1)*p)%h;break}}var g=a.toGlobalCoord(u[0].coord),v=r.getAreaStyle();for(s=z(s)?s:[s],p=1;p<u.length;p++){var x,y,b,_,w=a.toGlobalCoord(u[p].coord);g=a.isHorizontal()?(y=l.y,_=l.height,(x=g)+(b=w-x)):(x=l.x,b=l.width,(y=g)+(_=w-y));var S=u[p-1].tickValue;null!=S&&d.set(S,f),t.add(new Fe({anid:null!=S?"area_"+S:null,shape:{x,y,width:b,height:_},style:ie({fill:s[f]},v),silent:!0})),f=(f+1)%h}e.__splitAreaColors=d}}}function Nx(e){e.__splitAreaColors=null}mn.registerAxisPointerClass=function(e,t){Px[e]=t},mn.getAxisPointerClass=function(e){return e&&Px[e]};var uA=["axisLine","axisTickLabel","axisName"],hA=["splitArea","splitLine","minorSplitLine"],dp=mn.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,i){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new re,this.group.add(this._axisGroup),e.get("show")){var o=e.getCoordSysModel(),r=cp(o,e),s=new rn(e,r);I(uA,s.add,s),this._axisGroup.add(s.getGroup()),I(hA,function(l){e.get(l+".show")&&this["_"+l](e,o)},this),ru(a,this._axisGroup,e),dp.superCall(this,"render",e,t,n,i)}},remove:function(){Nx(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var i=e.getModel("splitLine"),a=i.getModel("lineStyle"),o=a.get("color");o=z(o)?o:[o];for(var r=t.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,u=n.getTicksCoords({tickModel:i}),h=[],c=[],d=a.getLineStyle(),f=0;f<u.length;f++){var p=n.toGlobalCoord(u[f].coord);s?(h[0]=p,h[1]=r.y,c[0]=p,c[1]=r.y+r.height):(h[0]=r.x,h[1]=p,c[0]=r.x+r.width,c[1]=p);var m=l++%o.length;this._axisGroup.add(new Ot({anid:null!=u[f].tickValue?"line_"+u[f].tickValue:null,subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:ie({stroke:o[m]},d),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,i=e.getModel("minorSplitLine").getModel("lineStyle"),a=t.coordinateSystem.getRect(),o=n.isHorizontal(),r=n.getMinorTicksCoords();if(r.length)for(var s=[],l=[],u=i.getLineStyle(),h=0;h<r.length;h++)for(var c=0;c<r[h].length;c++){var d=n.toGlobalCoord(r[h][c].coord);o?(s[0]=d,s[1]=a.y,l[0]=d,l[1]=a.y+a.height):(s[0]=a.x,s[1]=d,l[0]=a.x+a.width,l[1]=d),this._axisGroup.add(new Ot({anid:"minor_line_"+r[h][c].tickValue,subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,silent:!0}))}},_splitArea:function(e,t){kx(this,this._axisGroup,e,t)}});dp.extend({type:"xAxis"}),dp.extend({type:"yAxis"}),At({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new Fe({shape:e.coordinateSystem.getRect(),style:ie({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),zt(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),et(Ya("line","circle","line")),ct(xs("line")),fn(ai.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,n){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem;if("cartesian2d"===o.type&&a){var r,s=o.getBaseAxis(),l=o.getOtherAxis(s),u=s.getExtent(),h=Math.abs(u[1]-u[0]),c=Math.round(i.count()/h);1<c&&("string"==typeof a?r=aA[a]:"function"==typeof a&&(r=a),r&&e.setData(i.downSample(i.mapDimension(l.dim),1/c,r,iA)))}}});var Ex=ht.extend({type:"series.__base_bar__",getInitialData:function(e,t){return Pi(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),i=this.getData(),a=i.getLayout("offset"),o=i.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=a+o/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Ox(e,t,n,i,a,o){cn(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:a,labelDataIndex:o,defaultText:Hu(a.getData(),o),isRectText:!0,autoColor:i}),Rx(e),Rx(t)}function Rx(e,t){"outside"===e.textPosition&&(e.textPosition=t)}Ex.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var cA=Lo([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),dA={getBarItemStyle:function(e){var t=cA(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},fA=In({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,i=t.cy,a=Math.max(t.r0||0,0),o=Math.max(t.r,0),r=.5*(o-a),s=a+r,l=t.startAngle,u=t.endAngle,h=t.clockwise,c=Math.cos(l),d=Math.sin(l),f=Math.cos(u),p=Math.sin(u);(h?u-l<2*Math.PI:l-u<2*Math.PI)&&(e.moveTo(c*a+n,d*a+i),e.arc(c*s+n,d*s+i,r,-Math.PI+l,l,!h)),e.arc(n,i,o,l,u,!h),e.moveTo(f*o+n,p*o+i),e.arc(f*s+n,p*s+i,r,u-2*Math.PI,u-Math.PI,!h),0!==a&&(e.arc(n,i,a,u,l,h),e.moveTo(c*a+n,p*a+i)),e.closePath()}}),pA=["itemStyle","barBorderWidth"],Yu=[0,0];fe(ze.prototype,dA),an({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var i=e.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n)),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var i,a=this.group,o=e.getData(),r=this._data,s=e.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var u=e.isAnimationEnabled()?e:null,h=e.get("clip",!0),c=function(_,w){var S=_.getArea&&_.getArea();if("cartesian2d"===_.type){var M=_.getBaseAxis();if("category"!==M.type||!M.onBand){var T=w.getLayout("bandWidth");M.isHorizontal()?(S.x-=T,S.width+=2*T):(S.y-=T,S.height+=2*T)}}return S}(s,o);function d(_){var M,w=qu[s.type](o,_),S=new("polar"===(M=s).type?Fn:Fe)({shape:Ux(i,w,M),silent:!0,z2:0});return S.useStyle(m.getBarItemStyle()),"cartesian2d"===s.type&&S.setShape("r",g),v[_]=S}a.removeClipPath();var f=e.get("roundCap",!0),p=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),g=m.get("barBorderRadius")||0,v=[],x=this._backgroundEls||[];o.diff(r).add(function(_){var w=o.getItemModel(_),S=qu[s.type](o,_,w);if(p&&d(_),o.hasValue(_)){if(h&&zx[s.type](c,S))return void a.remove(M);var M=Bx[s.type](_,S,i,u,!1,f);o.setItemGraphicEl(_,M),a.add(M),Gx(M,o,_,w,S,e,0,"polar"===s.type)}}).update(function(_,w){var S=o.getItemModel(_),M=qu[s.type](o,_,S);if(p){var T;0===x.length?T=d(w):((T=x[w]).useStyle(m.getBarItemStyle()),"cartesian2d"===s.type&&T.setShape("r",g),v[_]=T);var A=qu[s.type](o,_);Ae(T,{shape:Ux(i,A,s)},u,_)}var C=r.getItemGraphicEl(w);if(o.hasValue(_)){if(h&&zx[s.type](c,M))return void a.remove(C);C?Ae(C,{shape:M},u,_):C=Bx[s.type](_,M,i,u,!0,f),o.setItemGraphicEl(_,C),a.add(C),Gx(C,o,_,S,M,e,0,"polar"===s.type)}else a.remove(C)}).remove(function(_){var w=r.getItemGraphicEl(_);"cartesian2d"===s.type?w&&Vx(_,u,w):w&&Fx(_,u,w)}).execute();var y=this._backgroundGroup||(this._backgroundGroup=new re);y.removeAll();for(var b=0;b<v.length;++b)y.add(v[b]);a.add(y),this._backgroundEls=v,this._data=o},_renderLarge:function(e,t,n){this._clear(),Hx(e,this.group);var i=e.get("clip",!0)?Uu(e.coordinateSystem,!1,e):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),Hx(t,this.group,!0)},dispose:We,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){"sector"===i.type?Fx(i.dataIndex,e,i):Vx(i.dataIndex,e,i)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var fp=Math.max,pp=Math.min,zx={cartesian2d:function(e,t){var n=t.width<0?-1:1,i=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var a=fp(t.x,e.x),o=pp(t.x+t.width,e.x+e.width),r=fp(t.y,e.y),s=pp(t.y+t.height,e.y+e.height);t.x=a,t.y=r,t.width=o-a,t.height=s-r;var l=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),l},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var i=t.r;t.r=t.r0,t.r0=i}i=pp(t.r,e.r);var a=fp(t.r0,e.r0),o=(t.r=i)-(t.r0=a)<0;return n<0&&(i=t.r,t.r=t.r0,t.r0=i),o}},Bx={cartesian2d:function(e,t,n,i,a){var o=new Fe({shape:fe({},t),z2:1});if(o.name="item",i){var r=n?"height":"width",s={};o.shape[r]=0,s[r]=t[r],Ti[a?"updateProps":"initProps"](o,{shape:s},i,e)}return o},polar:function(e,t,n,i,a,o){var s=new(!n&&o?fA:Fn)({shape:ie({clockwise:t.startAngle<t.endAngle},t),z2:1});if(s.name="item",i){var l=n?"r":"endAngle",u={};s.shape[l]=n?0:t.startAngle,u[l]=t[l],Ti[a?"updateProps":"initProps"](s,{shape:u},i,e)}return s}};function Vx(e,t,n){n.style.text=null,Ae(n,{shape:{width:0}},t,e,function(){n.parent&&n.parent.remove(n)})}function Fx(e,t,n){n.style.text=null,Ae(n,{shape:{r:n.shape.r0}},t,e,function(){n.parent&&n.parent.remove(n)})}var qu={cartesian2d:function(e,t,n){var l,u,h,c,i=e.getItemLayout(t),a=n?(l=i,u=n.get(pA)||0,h=isNaN(l.width)?Number.MAX_VALUE:Math.abs(l.width),c=isNaN(l.height)?Number.MAX_VALUE:Math.abs(l.height),Math.min(u,h,c)):0,o=0<i.width?1:-1,r=0<i.height?1:-1;return{x:i.x+o*a/2,y:i.y+r*a/2,width:i.width-o*a,height:i.height-r*a}},polar:function(e,t,n){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function gp(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function Gx(e,t,n,i,a,o,r,s){var l=t.getItemVisual(n,"color"),u=t.getItemVisual(n,"opacity"),h=t.getVisual("borderColor"),c=i.getModel("itemStyle"),d=i.getModel("emphasis.itemStyle").getBarItemStyle();s||e.setShape("r",c.get("barBorderRadius")||0),e.useStyle(ie({stroke:gp(a)?"none":h,fill:gp(a)?"none":l,opacity:u},c.getBarItemStyle()));var f=i.getShallow("cursor");f&&e.attr("cursor",f),s||Ox(e.style,d,i,l,o,n),gp(a)&&(d.fill=d.stroke="none"),tt(e,d)}var Wx=Re.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,i=this.__startPoint,a=this.__baseDimIdx,o=0;o<n.length;o+=2)i[a]=n[o+a],e.moveTo(i[0],i[1]),e.lineTo(n[o],n[o+1])}});function Hx(e,t,n){var i=e.getData(),a=[],o=i.getLayout("valueAxisHorizontal")?1:0;a[1-o]=i.getLayout("valueAxisStart");var f,p,m,g,v,r=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var u=i.getLayout("largeBackgroundPoints"),h=[];h[1-o]=i.getLayout("backgroundStart");var c=new Wx({shape:{points:u},incremental:!!n,__startPoint:h,__baseDimIdx:o,__largeDataIndices:r,__barWidth:s,silent:!0,z2:0});f=c,m=i,g=(p=l).get("borderColor")||p.get("color"),v=p.getItemStyle(["color","borderColor"]),f.useStyle(v),f.style.fill=null,f.style.stroke=g,f.style.lineWidth=m.getLayout("barWidth"),t.add(c)}var d=new Wx({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:a,__baseDimIdx:o,__largeDataIndices:r,__barWidth:s});t.add(d),function(f,p,m){var g=m.getVisual("borderColor")||m.getVisual("color"),v=p.getModel("itemStyle").getItemStyle(["color","borderColor"]);f.useStyle(v),f.style.fill=null,f.style.stroke=g,f.style.lineWidth=m.getLayout("barWidth")}(d,e,i),d.seriesIndex=e.seriesIndex,e.get("silent")||(d.on("mousedown",Zx),d.on("mousemove",Zx))}var Zx=_u(function(e){var t=function(n,i,a){var o=n.__baseDimIdx,r=1-o,s=n.shape.points,l=n.__largeDataIndices,u=Math.abs(n.__barWidth/2),h=n.__startPoint[r];Yu[0]=i,Yu[1]=a;for(var c=Yu[o],d=Yu[1-o],f=c-u,p=c+u,m=0,g=s.length/2;m<g;m++){var v=2*m,x=s[v+o],y=s[v+r];if(f<=x&&x<=p&&(h<=y?h<=d&&d<=y:y<=d&&d<=h))return l[m]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null},30,!1);function Ux(e,t,n){var i,a="polar"===n.type;return i=a?n.getArea():n.grid.getRect(),a?{cx:i.cx,cy:i.cy,r0:e?i.r0:t.r0,r:e?i.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:i.x,y:e?i.y:t.y,width:e?t.width:i.width,height:e?i.height:t.height}}function Jo(e,t,n){t=z(t)&&{coordDimensions:t}||fe({},t);var i=e.getSource(),a=Ho(i,t),o=new Ct(a,e);return o.initData(i,n),o}ct(ai.VISUAL.LAYOUT,V(O1,"bar")),ct(ai.VISUAL.PROGRESSIVE_LAYOUT,DT),et({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var mp={updateSelectedMap:function(e){this._targetList=z(e)?e.slice():[],this._selectTargetMap=oe(e||[],function(t,n){return t.set(n.name,n),t},ne())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(i){i.selected=!1}),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function ws(e,t){this.getAllNames=function(){var n=t();return n.mapArray(n.getName)},this.containName=function(n){return 0<=t().indexOfName(n)},this.indexOfName=function(n){return e().indexOfName(n)},this.getItemVisual=function(n,i){return e().getItemVisual(n,i)}}var $u=Eu({type:"series.pie",init:function(e){$u.superApply(this,"init",arguments),this.legendVisualProvider=new ws(Z(this.getData,this),Z(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){$u.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return Jo(this,{coordDimensions:["value"],encodeDefaulter:V(of,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],i=0,a=e.count();i<a;i++)n.push({name:e.getName(i),value:e.get(t,i),selected:Py(e,i,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=$u.superCall(this,"getDataParams",e),i=[];return t.each(t.mapDimension("value"),function(a){i.push(a)}),n.percent=ey(i,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){La(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function gA(e,t,n,i){var a=t.getData(),r=a.getName(this.dataIndex),s=t.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:e,name:r,seriesId:t.id}),a.each(function(l){jx(a.getItemGraphicEl(l),a.getItemLayout(l),t.isSelected(a.getName(l)),s,n)})}function jx(e,t,n,i,a){var o=(t.startAngle+t.endAngle)/2,r=n?i:0,s=[Math.cos(o)*r,Math.sin(o)*r];a?e.animate().when(200,{position:s}).start("bounceOut"):e.attr("position",s)}function vp(e,t){re.call(this);var n=new Fn({z2:2}),i=new Mn,a=new Pe;this.add(n),this.add(i),this.add(a),this.updateData(e,t,!0)}j($u,mp);var Xx=vp.prototype;function Yx(e,t){I(t,function(n){n.update="updateView",Be(n,function(i,a){var o={};return a.eachComponent({mainType:"series",subType:e,query:i},function(r){r[n.method]&&r[n.method](i.name,i.dataIndex);var s=r.getData();s.each(function(l){var u=s.getName(l);o[u]=r.isSelected(u)||!1})}),{name:i.name,selected:o,seriesId:i.seriesId}})})}function Ku(e){return{getTargetSeries:function(t){var n={},i=ne();return t.eachSeriesByType(e,function(a){a.__paletteScope=n,i.set(a.uid,a)}),i},reset:function(t,n){var i=t.getRawData(),a={},o=t.getData();o.each(function(r){var s=o.getRawIndex(r);a[s]=r}),i.each(function(r){var s,l=a[r],u=null!=l&&o.getItemVisual(l,"color",!0),h=null!=l&&o.getItemVisual(l,"borderColor",!0);if(u&&h||(s=i.getItemModel(r)),!u){var c=s.get("itemStyle.color")||t.getColorFromPalette(i.getName(r)||r+"",t.__paletteScope,i.count());null!=l&&o.setItemVisual(l,"color",c)}if(!h){var d=s.get("itemStyle.borderColor");null!=l&&o.setItemVisual(l,"borderColor",d)}})}}}Xx.updateData=function(e,t,n){var i=this.childAt(0),a=this.childAt(1),o=this.childAt(2),r=e.hostModel,s=e.getItemModel(t),l=e.getItemLayout(t),u=fe({},l);u.label=null;var h=r.getShallow("animationTypeUpdate");n?(i.setShape(u),"scale"===r.getShallow("animationType")?(i.shape.r=l.r0,Vt(i,{shape:{r:l.r}},r,t)):(i.shape.endAngle=l.startAngle,Ae(i,{shape:{endAngle:l.endAngle}},r,t))):"expansion"===h?i.setShape(u):Ae(i,{shape:u},r,t);var c=e.getItemVisual(t,"color");i.useStyle(ie({lineJoin:"bevel",fill:c},s.getModel("itemStyle").getItemStyle())),i.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var d=s.getShallow("cursor");d&&i.attr("cursor",d),jx(this,e.getItemLayout(t),r.isSelected(e.getName(t)),r.get("selectedOffset"),r.get("animation")),this._updateLabel(e,t,!n&&"transition"===h),this.highDownOnUpdate=r.get("silent")?null:function(p,m){var g=r.isAnimationEnabled()&&s.get("hoverAnimation");"emphasis"===m?(a.ignore=a.hoverIgnore,o.ignore=o.hoverIgnore,g&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r+r.get("hoverOffset")}},300,"elasticOut"))):(a.ignore=a.normalIgnore,o.ignore=o.normalIgnore,g&&(i.stopAnimation(!0),i.animateTo({shape:{r:l.r}},300,"elasticOut")))},tt(this)},Xx._updateLabel=function(e,t,n){var i=this.childAt(1),a=this.childAt(2),o=e.hostModel,r=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");if(!s||isNaN(s.x)||isNaN(s.y))a.ignore=a.normalIgnore=a.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0;else{var u={points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]},h={x:s.x,y:s.y};n?(Ae(i,{shape:u},o,t),Ae(a,{style:h},o,t)):(i.attr({shape:u}),a.attr({style:h})),a.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var c=r.getModel("label"),d=r.getModel("emphasis.label"),f=r.getModel("labelLine"),p=r.getModel("emphasis.labelLine");l=e.getItemVisual(t,"color"),cn(a.style,a.hoverStyle={},c,d,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:s.text,autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),a.ignore=a.normalIgnore=!c.get("show"),a.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!f.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:l,opacity:e.getItemVisual(t,"opacity")}),i.setStyle(f.getModel("lineStyle").getLineStyle()),i.hoverStyle=p.getModel("lineStyle").getLineStyle();var m=f.get("smooth");m&&!0===m&&(m=.4),i.setShape({smooth:m})}},H(vp,re),Pt.extend({type:"pie",init:function(){var e=new re;this._sectorGroup=e},render:function(e,t,n,i){if(!i||i.from!==this.uid){var a=e.getData(),o=this._data,r=this.group,s=t.get("animation"),l=!o,u=e.get("animationType"),h=e.get("animationTypeUpdate"),c=V(gA,this.uid,e,s,n),d=e.get("selectedMode");if(a.diff(o).add(function(v){var x=new vp(a,v);l&&"scale"!==u&&x.eachChild(function(y){y.stopAnimation(!0)}),d&&x.on("click",c),a.setItemGraphicEl(v,x),r.add(x)}).update(function(v,x){var y=o.getItemGraphicEl(x);l||"transition"===h||y.eachChild(function(b){b.stopAnimation(!0)}),y.updateData(a,v),y.off("click"),d&&y.on("click",c),r.add(y),a.setItemGraphicEl(v,y)}).remove(function(v){var x=o.getItemGraphicEl(v);r.remove(x)}).execute(),s&&0<a.count()&&(l?"scale"!==u:"transition"!==h)){for(var f=a.getItemLayout(0),p=1;isNaN(f.startAngle)&&p<a.count();++p)f=a.getItemLayout(p);var m=Math.max(n.getWidth(),n.getHeight())/2,g=Z(r.removeClipPath,r);r.setClipPath(this._createClipPath(f.cx,f.cy,m,f.startAngle,f.clockwise,g,e,l))}else r.removeClipPath();this._data=a}},dispose:function(){},_createClipPath:function(e,t,n,i,a,o,r,s){var l=new Fn({shape:{cx:e,cy:t,r0:0,r:n,startAngle:i,endAngle:i,clockwise:a}});return(s?Vt:Ae)(l,{shape:{endAngle:i+(a?1:-1)*Math.PI*2}},r,o),l},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,a=e[1]-n.cy,o=Math.sqrt(i*i+a*a);return o<=n.r&&o>=n.r0}}});var mA=Math.PI/180;function qx(e,t,n,i,a,o,r,s,l,u){function h(b,_,w){for(var S=b;S<_&&!(e[S].y+w>l+r);S++)if(e[S].y+=w,b<S&&S+1<_&&e[S+1].y>e[S].y+e[S].height)return void c(S,w/2);c(_-1,w/2)}function c(b,_){for(var w=b;0<=w&&!(e[w].y-_<l)&&(e[w].y-=_,!(0<w&&e[w].y>e[w-1].y+e[w-1].height));w--);}function d(b,_,w,S,M,T){for(var A=_?Number.MAX_VALUE:0,C=0,D=b.length;C<D;C++)if("none"===b[C].labelAlignTo){var L=Math.abs(b[C].y-S),P=b[C].len,N=b[C].len2,R=L<M+P?Math.sqrt((M+P+N)*(M+P+N)-L*L):Math.abs(b[C].x-w);_&&A<=R&&(R=A-10),!_&&R<=A&&(R=A+10),b[C].x=w+R*T,A=R}}e.sort(function(b,_){return b.y-_.y});for(var f,p=0,m=e.length,g=[],v=[],x=0;x<m;x++)"outer"===e[x].position&&"labelLine"===e[x].labelAlignTo&&(e[x].linePoints[1][0]+=e[x].x-u,e[x].x=u),(f=e[x].y-p)<0&&h(x,m,-f),p=e[x].y+e[x].height;for(r-p<0&&c(m-1,p-r),x=0;x<m;x++)e[x].y>=n?v.push(e[x]):g.push(e[x]);d(g,!1,t,n,i,a),d(v,!0,t,n,i,a)}function $x(e){return"center"===e.position}var Qu=2*Math.PI,Kx=Math.PI/180;function Ss(e){return{seriesType:e,reset:function(t,n){var i=n.findComponents({mainType:"legend"});if(i&&i.length){var a=t.getData();a.filterSelf(function(o){for(var r=a.getName(o),s=0;s<i.length;s++)if(!i[s].isSelected(r))return!1;return!0})}}}}Yx("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),et(Ku("pie")),ct(V(function(e,t,n,i){t.eachSeriesByType(e,function(a){var R,o=a.getData(),r=o.mapDimension("value"),s=(R=n,vt(a.getBoxLayoutParams(),{width:R.getWidth(),height:R.getHeight()})),l=a.get("center"),u=a.get("radius");z(u)||(u=[0,u]),z(l)||(l=[l,l]);var h=Q(s.width,n.getWidth()),c=Q(s.height,n.getHeight()),d=Math.min(h,c),f=Q(l[0],h)+s.x,p=Q(l[1],c)+s.y,m=Q(u[0],d/2),g=Q(u[1],d/2),v=-a.get("startAngle")*Kx,x=a.get("minAngle")*Kx,y=0;o.each(r,function(N){isNaN(N)||y++});var b=o.getSum(r),_=Math.PI/(b||y)*2,w=a.get("clockwise"),S=a.get("roseType"),M=a.get("stillShowZeroSum"),T=o.getDataExtent(r);T[0]=0;var A=Qu,C=0,D=v,L=w?1:-1;if(o.each(r,function(N,R){var k;if(isNaN(N))o.setItemLayout(R,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:f,cy:p,r0:m,r:S?NaN:g,viewRect:s});else{(k="area"!==S?0===b&&M?_:N*_:Qu/y)<x?A-=k=x:C+=N;var B=D+L*k;o.setItemLayout(R,{angle:k,startAngle:D,endAngle:B,clockwise:w,cx:f,cy:p,r0:m,r:S?nt(N,T,[m,g]):g,viewRect:s}),D=B}}),A<Qu&&y)if(A<=.001){var P=Qu/y;o.each(r,function(N,R){if(!isNaN(N)){var k=o.getItemLayout(R);k.angle=P,k.startAngle=v+L*R*P,k.endAngle=v+L*(R+1)*P}})}else _=A/C,D=v,o.each(r,function(N,R){if(!isNaN(N)){var k=o.getItemLayout(R),B=k.angle===x?x:N*_;k.startAngle=D,k.endAngle=D+L*B,D+=L*B}});!function vA(e,t,n,i,a,o){var r,s,l=e.getData(),u=[],h=!1,c=(e.get("minShowLabelAngle")||0)*mA;l.each(function(d){var f=l.getItemLayout(d),p=l.getItemModel(d),m=p.getModel("label"),g=m.get("position")||p.get("emphasis.label.position"),v=m.get("distanceToLabelLine"),x=m.get("alignTo"),y=Q(m.get("margin"),n),b=m.get("bleedMargin"),_=m.getFont(),w=p.getModel("labelLine"),S=w.get("length");S=Q(S,n);var M=w.get("length2");if(M=Q(M,n),!(f.angle<c)){var T,A,C,D,L=(f.startAngle+f.endAngle)/2,P=Math.cos(L),N=Math.sin(L);r=f.cx,s=f.cy;var R,k=e.getFormattedLabel(d,"normal")||l.getName(d),B=Yn(k,_,D,"top"),G="inside"===g||"inner"===g;if("center"===g)T=f.cx,A=f.cy,D="center";else{var W=(G?(f.r+f.r0)/2*P:f.r*P)+r,F=(G?(f.r+f.r0)/2*N:f.r*N)+s;if(T=W+3*P,A=F+3*N,!G){var Y=W+P*(S+t-f.r),K=F+N*(S+t-f.r),ce=Y+(P<0?-1:1)*M;T="edge"===x?P<0?a+y:a+n-y:ce+(P<0?-v:v),C=[[W,F],[Y,K],[ce,A=K]]}D=G?"center":"edge"===x?0<P?"right":"left":0<P?"left":"right"}var U=m.get("rotate");R="number"==typeof U?U*(Math.PI/180):U?P<0?-L+Math.PI:-L:0,h=!!R,f.label={x:T,y:A,position:g,height:B.height,len:S,len2:M,linePoints:C,textAlign:D,verticalAlign:"middle",rotation:R,inside:G,labelDistance:v,labelAlignTo:x,labelMargin:y,bleedMargin:b,textRect:B,text:k,font:_},G||u.push(f.label)}}),!h&&e.get("avoidLabelOverlap")&&function(d,f,p,m,g,v,x,y){for(var b=[],_=[],w=Number.MAX_VALUE,S=-Number.MAX_VALUE,M=0;M<d.length;M++)$x(d[M])||(d[M].x<f?(w=Math.min(w,d[M].x),b.push(d[M])):(S=Math.max(S,d[M].x),_.push(d[M])));for(qx(_,f,p,m,1,0,v,0,y,S),qx(b,f,p,m,-1,0,v,0,y,w),M=0;M<d.length;M++){var T=d[M];if(!$x(T)){var A=T.linePoints;if(A){var C,D="edge"===T.labelAlignTo,L=T.textRect.width;(C=D?T.x<f?A[2][0]-T.labelDistance-x-T.labelMargin:x+g-T.labelMargin-A[2][0]-T.labelDistance:T.x<f?T.x-x-T.bleedMargin:x+g-T.x-T.bleedMargin)<T.textRect.width&&(T.text=Xc(T.text,C,T.font),"edge"===T.labelAlignTo&&(L=bn(T.text,T.font)));var P=A[1][0]-A[2][0];D?A[2][0]=T.x<f?x+T.labelMargin+L+T.labelDistance:x+g-T.labelMargin-L-T.labelDistance:(A[2][0]=T.x<f?T.x+T.labelDistance:T.x-T.labelDistance,A[1][0]=A[2][0]+P),A[1][1]=A[2][1]=T.y}}}}(u,r,s,t,n,i,a,o)}(a,g,s.width,s.height,s.x,s.y)})},"pie")),fn(Ss("pie")),ht.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return Pi(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var yp=In({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,i=t.size,a=this.symbolProxy,o=a.shape;if(!((e.getContext?e.getContext():e)&&i[0]<4))for(var r=0;r<n.length;){var s=n[r++],l=n[r++];isNaN(s)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(s,l)||(o.x=s-i[0]/2,o.y=l-i[1]/2,o.width=i[0],o.height=i[1],a.buildPath(e,o,!0))}},afterBrush:function(e){var t=this.shape,n=t.points,i=t.size;if(i[0]<4){this.setTransform(e);for(var a=0;a<n.length;){var o=n[a++],r=n[a++];isNaN(o)||isNaN(r)||this.softClipShape&&!this.softClipShape.contain(o,r)||e.fillRect(o-i[0]/2,r-i[1]/2,i[0],i[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,i=n.points,a=n.size,o=Math.max(a[0],4),r=Math.max(a[1],4),s=i.length/2-1;0<=s;s--){var l=2*s,u=i[l]-o/2,h=i[1+l]-r/2;if(u<=e&&h<=t&&e<=u+o&&t<=h+r)return s}return-1}});function Qx(){this.group=new re}var fa=Qx.prototype;function Jx(e,t,n){_t.call(this,e,t,n),this.type="value",this.angle=0,this.name=""}function li(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=O(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,r=new Jx(o,"log"===i.get("axisType")?new Gu:new ri);return r.name=i.get("name"),(r.model=i).axis=r,this.dimensions.push(o),r},this),this.resize(e,n)}fa.isPersistent=function(){return!this._incremental},fa.updateData=function(e,t){this.group.removeAll();var n=new yp({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},fa.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(n){null!=n.startIndex&&(t=new Float32Array(t.buffer,4*n.startIndex*2,2*(n.endIndex-n.startIndex))),n.setShape("points",t)})}},fa.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new hn({silent:!0})),this.group.add(this._incremental)):this._incremental=null},fa.incrementalUpdate=function(e,t,n){var i;this._incremental?(i=new yp,this._incremental.addDisplayable(i,!0)):((i=new yp({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(i,t,!!this._incremental,n)},fa._setCommon=function(e,t,n,i){var a=t.hostModel;i=i||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=i.clipShape||null,e.symbolProxy=gn(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var r=e.shape.size[0]<4;e.useStyle(a.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("color");s&&e.setColor(s),n||(e.seriesIndex=a.seriesIndex,e.on("mousemove",function(l){e.dataIndex=null;var u=e.findDataIndex(l.offsetX,l.offsetY);0<=u&&(e.dataIndex=u+(e.startIndex||0))}))},fa.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},fa._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},an({type:"scatter",render:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData();if(this.group.dirty(),!this._finished||1e4<i.count()||!this._symbolDraw.isPersistent())return{update:!0};var a=xs().reset(e);a.progress&&a.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,i=t.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new Qx:new Xo,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),et(Ya("scatter","circle")),ct(xs("scatter")),H(Jx,_t),li.prototype.getIndicatorAxes=function(){return this._indicatorAxes},li.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},li.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},li.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=Math.sqrt(t*t+n*n);t/=i,n/=i;for(var a,o=Math.atan2(-n,t),r=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],h=Math.abs(o-u.angle);h<r&&(a=u,s=l,r=h)}return[s,+(a&&a.coordToData(i))]},li.prototype.resize=function(e,t){var n=e.get("center"),i=t.getWidth(),a=t.getHeight(),o=Math.min(i,a)/2;this.cx=Q(n[0],i),this.cy=Q(n[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var r=e.get("radius");"string"!=typeof r&&"number"!=typeof r||(r=[0,r]),this.r0=Q(r[0],o),this.r=Q(r[1],o),I(this._indicatorAxes,function(s,l){s.setExtent(this.r0,this.r);var u=this.startAngle+l*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),s.angle=u},this)},li.prototype.update=function(e,t){var n=this._indicatorAxes,i=this._model;I(n,function(r){r.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(r,s){if("radar"===r.get("coordinateSystem")&&e.getComponent("radar",r.get("radarIndex"))===i){var l=r.getData();I(n,function(u){u.scale.unionExtentFromData(l,l.mapDimension(u.dim))})}},this);var a=i.get("splitNumber");function o(r){var s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),l=r/s;return 2===l?l=5:l*=2,l*s}I(n,function(r,s){var l=W1(r.scale,r.model).extent;la(r.scale,r.model);var u=r.model,h=r.scale,c=u.getMin(),d=u.getMax(),f=h.getInterval();if(null!=c&&null!=d)h.setExtent(+c,+d),h.setInterval((d-c)/a);else if(null!=c)for(;h.setExtent(+c,m=c+f*a),h.setInterval(f),f=o(f),m<l[1]&&isFinite(m)&&isFinite(l[1]););else if(null!=d)for(;h.setExtent(g=d-f*a,+d),h.setInterval(f),f=o(f),g>l[0]&&isFinite(g)&&isFinite(l[0]););else{var p=h.getTicks().length-1;a<p&&(f=o(f));var m,g=wt((m=Math.ceil(l[1]/f)*f)-f*a);h.setExtent(g,m),h.setInterval(f)}})},li.dimensions=[],li.create=function(e,t){var n=[];return e.eachComponent("radar",function(i){var a=new li(i,e,t);n.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){"radar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("radarIndex")||0])}),n},Gt.register("radar",li);var Ms=ca.valueAxis;function Ju(e,t){return ie({show:t},e)}pn({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),a=this.get("axisTick"),o=this.get("axisType"),r=this.get("axisLabel"),s=this.get("name"),l=this.get("name.show"),u=this.get("name.formatter"),h=this.get("nameGap"),c=this.get("triggerEvent"),d=O(this.get("indicator")||[],function(f){null!=f.max&&0<f.max&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var p=s;if(null!=f.color&&(p=ie({color:f.color},s)),f=pe(ue(f),{boundaryGap:e,splitNumber:t,scale:n,axisLine:i,axisTick:a,axisType:o,axisLabel:r,name:f.text,nameLocation:"end",nameGap:h,nameTextStyle:p,triggerEvent:c},!1),l||(f.name=""),"string"==typeof u){var m=f.name;f.name=u.replace("{value}",null!=m?m:"")}else"function"==typeof u&&(f.name=u(f.name,f));var g=fe(new ze(f,null,this.ecModel),ja);return g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this.getIndicatorModels=function(){return d}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:pe({lineStyle:{color:"#bbb"}},Ms.axisLine),axisLabel:Ju(Ms.axisLabel,!1),axisTick:Ju(Ms.axisTick,!1),axisType:"interval",splitLine:Ju(Ms.splitLine,!0),splitArea:Ju(Ms.splitArea,!0),indicator:[]}});var yA=["axisLine","axisTickLabel","axisName"];At({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;I(O(t.getIndicatorAxes(),function(n){return new rn(n.model,{position:[t.cx,t.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(n){I(yA,n.add,n),this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var i=e.get("shape"),a=e.getModel("splitLine"),o=e.getModel("splitArea"),r=a.getModel("lineStyle"),s=o.getModel("areaStyle"),l=a.get("show"),u=o.get("show"),h=r.get("color"),c=s.get("color");h=z(h)?h:[h],c=z(c)?c:[c];var d=[],f=[];if("circle"===i)for(var p=n[0].getTicksCoords(),m=t.cx,g=t.cy,v=0;v<p.length;v++)l&&d[T(d,h,v)].push(new Jn({shape:{cx:m,cy:g,r:p[v].coord}})),u&&v<p.length-1&&f[T(f,c,v)].push(new ql({shape:{cx:m,cy:g,r0:p[v].coord,r:p[v+1].coord}}));else{var x,y=O(n,function(A,C){var D=A.getTicksCoords();return x=null==x?D.length-1:Math.min(D.length-1,x),O(D,function(L){return t.coordToPoint(L.coord,C)})}),b=[];for(v=0;v<=x;v++){for(var _=[],w=0;w<n.length;w++)_.push(y[w][v]);_[0]&&_.push(_[0].slice()),l&&d[T(d,h,v)].push(new Mn({shape:{points:_}})),u&&b&&f[T(f,c,v-1)].push(new tn({shape:{points:_.concat(b)}})),b=_.slice().reverse()}}var S=r.getLineStyle(),M=s.getAreaStyle();I(f,function(A,C){this.group.add(Tn(A,{style:ie({stroke:"none",fill:c[C%c.length]},M),silent:!0}))},this),I(d,function(A,C){this.group.add(Tn(A,{style:ie({fill:"none",stroke:h[C%h.length]},S),silent:!0}))},this)}function T(A,C,D){var L=D%C.length;return A[L]=A[L]||[],L}}});var xA=ht.extend({type:"series.radar",dependencies:["radar"],init:function(e){xA.superApply(this,"init",arguments),this.legendVisualProvider=new ws(Z(this.getData,this),Z(this.getRawData,this))},getInitialData:function(e,t){return Jo(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,n,i){var a=this.getData(),o=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(e),s="html"===i?"<br/>":"\n";return ot(""===r?this.name:r)+s+O(o,function(l,u){var h=a.get(a.mapDimension(l.dim),e);return ot(l.name+" : "+h)}).join(s)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,i=t.getValues(O(n.dimensions,function(s){return t.mapDimension(s)}),e,!0),a=0,o=i.length;a<o;a++)if(!isNaN(i[a])){var r=n.getIndicatorAxes();return n.coordToPoint(r[a].dataToCoord(i[a]),a)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function e_(e){return!isNaN(e[0])&&!isNaN(e[1])}function t_(e){return[e.cx,e.cy]}an({type:"radar",render:function(e,t,n){var i=e.coordinateSystem,a=this.group,o=e.getData(),r=this._data;function s(h,c){var v,d=h.getItemVisual(c,"symbol")||"circle",f=h.getItemVisual(c,"color");if("none"!==d){var p=(z(v=h.getItemVisual(c,"symbolSize"))||(v=[+v,+v]),v),m=gn(d,-1,-1,2,2,f),g=h.getItemVisual(c,"symbolRotate")||0;return m.attr({style:{strokeNoScale:!0},z2:100,scale:[p[0]/2,p[1]/2],rotation:g*Math.PI/180||0}),m}}function l(h,c,d,f,p,m){d.removeAll();for(var g=0;g<c.length-1;g++){var v=s(f,p);v&&(h[v.__dimIdx=g]?(v.attr("position",h[g]),Ti[m?"initProps":"updateProps"](v,{position:c[g]},e,p)):v.attr("position",c[g]),d.add(v))}}function u(h){return O(h,function(c){return[i.cx,i.cy]})}o.diff(r).add(function(h){var c=o.getItemLayout(h);if(c){var d=new tn,f=new Mn,p={shape:{points:c}};d.shape.points=u(c),f.shape.points=u(c),Vt(d,p,e,h),Vt(f,p,e,h);var m=new re,g=new re;m.add(f),m.add(d),m.add(g),l(f.shape.points,c,g,o,h,!0),o.setItemGraphicEl(h,m)}}).update(function(h,c){var d=r.getItemGraphicEl(c),f=d.childAt(0),p=d.childAt(1),m=d.childAt(2),g={shape:{points:o.getItemLayout(h)}};g.shape.points&&(l(f.shape.points,g.shape.points,m,o,h,!1),Ae(f,g,e),Ae(p,g,e),o.setItemGraphicEl(h,d))}).remove(function(h){a.remove(r.getItemGraphicEl(h))}).execute(),o.eachItemGraphicEl(function(h,c){var d=o.getItemModel(c),f=h.childAt(0),p=h.childAt(1),m=h.childAt(2),g=o.getItemVisual(c,"color");a.add(h),f.useStyle(ie(d.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:g})),f.hoverStyle=d.getModel("emphasis.lineStyle").getLineStyle();var v=d.getModel("areaStyle"),x=d.getModel("emphasis.areaStyle"),y=v.isEmpty()&&v.parentModel.isEmpty(),b=x.isEmpty()&&x.parentModel.isEmpty();b=b&&y,p.ignore=y,p.useStyle(ie(v.getAreaStyle(),{fill:g,opacity:.7})),p.hoverStyle=x.getAreaStyle();var _=d.getModel("itemStyle").getItemStyle(["color"]),w=d.getModel("emphasis.itemStyle").getItemStyle(),S=d.getModel("label"),M=d.getModel("emphasis.label");m.eachChild(function(T){T.setStyle(_),T.hoverStyle=ue(w);var A=o.get(o.dimensions[T.__dimIdx],c);null!=A&&!isNaN(A)||(A=""),cn(T.style,T.hoverStyle,S,M,{labelFetcher:o.hostModel,labelDataIndex:c,labelDimIndex:T.__dimIdx,defaultText:A,autoColor:g,isRectText:!0})}),h.highDownOnUpdate=function(T,A){p.attr("ignore","emphasis"===A?b:y)},tt(h)}),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),et(Ku("radar")),et(Ya("radar","circle")),ct(function(e){e.eachSeriesByType("radar",function(t){var n=t.getData(),i=[],a=t.coordinateSystem;if(a){var o=a.getIndicatorAxes();I(o,function(r,s){n.each(n.mapDimension(o[s].dim),function(l,u){i[u]=i[u]||[];var h=a.dataToPoint(l,s);i[u][s]=e_(h)?h:t_(a)})}),n.each(function(r){var s=ve(i[r],function(l){return e_(l)})||t_(a);i[r].push(s.slice()),n.setItemLayout(r,i[r])})}})}),fn(Ss("radar")),zt(function(e){var t=e.polar;if(t){z(t)||(t=[t]);var n=[];I(t,function(i,a){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),e.radar=e.radar||[],z(e.radar)||(e.radar=[e.radar]),e.radar.push(i)):n.push(i)}),e.polar=n}I(e.series,function(i){i&&"radar"===i.type&&i.polarIndex&&(i.radarIndex=i.polarIndex)})});for(var xp=[126,25],qa=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],$a=0;$a<qa.length;$a++)for(var er=0;er<qa[$a].length;er++)qa[$a][er][0]/=10.5,qa[$a][er][1]/=-14,qa[$a][er][0]+=xp[0],qa[$a][er][1]+=xp[1];var _A={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},bA={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},wA=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],n_=Kt(),SA={load:function(e,t,n){var i=n_(t).parsed;if(i)return i;var a,s,o=t.specialAreas||{},r=t.geoJSON;try{a=r?Qf(r,n):[]}catch(s){throw new Error("Invalid geoJson format\n"+s.message)}return"china"===(s=e)&&a.push(new vs("\u5357\u6d77\u8bf8\u5c9b",O(qa,function(u){return{type:"polygon",exterior:u}}),xp)),I(a,function(s){var c,l=s.name;(function(h,c){if("china"===h){var d=_A[c.name];if(d){var f=c.center;f[0]+=d[0]/10.5,f[1]+=-d[1]/14}}})(e,s),function(h,c){if("world"===h){var d=bA[c.name];if(d){var f=c.center;f[0]=d[0],f[1]=d[1]}}}(e,s),c=s,"china"===e&&"\u53f0\u6e7e"===c.name&&c.geometries.push({type:"polygon",exterior:wA[0]});var u=o[l];u&&s.transformTo(u.left,u.top,u.width,u.height)}),n_(t).parsed={regions:a,boundingRect:function(s){for(var l,u=0;u<s.length;u++){var h=s[u].getBoundingRect();(l=l||h.clone()).union(h)}return l}(a)}}},tr=Kt();function i_(e,t){var n,i,h,a=e.svgXML;try{te(null!=(i=(n=a&&(h=a,(new Tu).parse(h,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(h){throw new Error("Invalid svg format\n"+h.message)}var o=n.width,r=n.height,s=n.viewBoxRect;if(t||(t=null==o||null==r?i.getBoundingRect():new Le(0,0,0,0),null!=o&&(t.width=o),null!=r&&(t.height=r)),s){var l=e1(s,t.width,t.height),u=i;(i=new re).add(u),u.scale=l.scale,u.position=l.position}return i.setClipPath(new Fe({shape:t.plain()})),{root:i,boundingRect:t}}var a_={geoJSON:SA,svg:{load:function(e,t){var n=tr(t).originRoot;if(n)return{root:n,boundingRect:tr(t).boundingRect};var i=i_(t);return tr(t).originRoot=i.root,tr(t).boundingRect=i.boundingRect,i},makeGraphic:function(e,t,n){var i=tr(t),a=i.rootMap||(i.rootMap=ne()),o=a.get(n);if(o)return o;var r=i.originRoot;return o=i.originRootHostKey?i_(t,i.boundingRect).root:(i.originRootHostKey=n,r),a.set(n,o)},removeGraphic:function(e,t,n){var i=tr(t),a=i.rootMap;a&&a.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}}},Is={load:function(e,t,n){var i,a=[],o=ne(),r=ne();return I(r_(e),function(s){var l=a_[s.type].load(e,s,n);I(l.regions,function(h){var c=h.name;t&&t.hasOwnProperty(c)&&(h=h.cloneShallow(c=t[c])),a.push(h),o.set(c,h),r.set(c,h.center)});var u=l.boundingRect;u&&(i?i.union(u):i=u.clone())}),{regions:a,regionsMap:o,nameCoordMap:r,boundingRect:i||new Le(0,0,0,0)}},makeGraphic:o_("makeGraphic"),removeGraphic:o_("removeGraphic")};function o_(e){return function(t,n){var i=r_(t),a=[];return I(i,function(o){var r=a_[o.type][e];r&&a.push(r(t,o,n))}),a}}function r_(e){return Au_retrieveMap(e)||[]}j(ht.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=Jo(this,{coordDimensions:["value"],encodeDefaulter:V(of,this)}),n=t.mapDimension("value"),i=ne(),a=[],o=[],r=0,s=t.count();r<s;r++){var l=t.getName(r);i.set(l,!0),a.push({name:l,value:t.get(n,r),selected:Py(t,r,"selected")})}return I(Is.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(u){var h=u.name;i.get(h)||(a.push({name:h}),o.push(h))}),this.updateSelectedMap(a),t.appendValues([],o),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,n,i){for(var a=this.getData(),o=ta(this.getRawValue(e)),r=a.getName(e),s=this.seriesGroup,l=[],u=0;u<s.length;u++){var h=s[u].originalData.indexOfName(r),c=a.mapDimension("value");isNaN(s[u].originalData.get(c,h))||l.push(ot(s[u].name))}var d="html"===i?"<br/>":"\n";return l.join(", ")+d+ot(r+" : "+o)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,i=n.getRegion(t);return i&&n.dataToPoint(i.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),mp);var s_="\0_ec_interaction_mutex";function l_(e,t){return!!_p(e)[t]}function _p(e){return e[s_]||(e[s_]={})}function nr(e){this._zr=e,this._opt={};var t=Z,n=t(MA,this),i=t(IA,this),a=t(TA,this),o=t(AA,this),r=t(CA,this);It.call(this),this.setPointerChecker=function(s){this.pointerChecker=s},this.enable=function(s,l){this.disable(),this._opt=ie(ue(l)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==s&&(s=!0),!0!==s&&"move"!==s&&"pan"!==s||(e.on("mousedown",n),e.on("mousemove",i),e.on("mouseup",a)),!0!==s&&"scale"!==s&&"zoom"!==s||(e.on("mousewheel",o),e.on("pinch",r))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",i),e.off("mouseup",a),e.off("mousewheel",o),e.off("pinch",r)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function MA(e){if(!(o0(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function IA(e){if(this._dragging&&eh("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!l_(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,i=this._x,a=this._y,o=t-i,r=n-a;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&Ia(e.event),u_(this,"pan","moveOnMouseMove",e,{dx:o,dy:r,oldX:i,oldY:a,newX:t,newY:n})}}function TA(e){o0(e)||(this._dragging=!1)}function AA(e){var t=eh("zoomOnMouseWheel",e,this._opt),n=eh("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,a=Math.abs(i),o=e.offsetX,r=e.offsetY;if(0!==i&&(t||n)){if(t){var s=3<a?1.4:1<a?1.2:1.1;bp(this,"zoom","zoomOnMouseWheel",e,{scale:0<i?s:1/s,originX:o,originY:r})}if(n){var l=Math.abs(i);bp(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<i?1:-1)*(3<l?.4:1<l?.15:.05),originX:o,originY:r})}}}function CA(e){l_(this._zr,"globalPan")||bp(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function bp(e,t,n,i,a){e.pointerChecker&&e.pointerChecker(i,a.originX,a.originY)&&(Ia(i.event),u_(e,t,n,i,a))}function u_(e,t,n,i,a){a.isAvailableBehavior=Z(eh,null,n,i),e.trigger(t,a)}function eh(e,t,n){var i=n[e];return!e||i&&(!q(i)||t.event[i+"Key"])}function wp(e,t,n){var i=e.target,a=i.position;a[0]+=t,a[1]+=n,i.dirty()}function Sp(e,t,n,i){var a=e.target,o=e.zoomLimit,r=a.position,s=a.scale,l=e.zoom=e.zoom||1;if(l*=t,o){var u=o.min||0;l=Math.max(Math.min(o.max||1/0,l),u)}var c=l/e.zoom;e.zoom=l,r[0]-=(n-r[0])*(c-1),r[1]-=(i-r[1])*(c-1),s[0]*=c,s[1]*=c,a.dirty()}Be({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),j(nr,It);var DA={axisPointer:1,tooltip:1,brush:1};function th(e,t,n){var i=t.getComponentByElement(e.topTarget),a=i&&i.coordinateSystem;return i&&i!==n&&!DA[i.mainType]&&a&&a.model!==n}function h_(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function c_(e,t){t.eachChild(function(n){I(n.__regions,function(i){n.trigger(e.isSelected(i.name)?"emphasis":"normal")})})}function nh(e,t){var n=new re;this.uid=jr("ec_map_draw"),this._controller=new nr(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,n.add(this._regionsGroup=new re),n.add(this._backgroundGroup=new re)}nh.prototype={constructor:nh,draw:function(e,t,n,i,a){var o="geo"===e.mainType,r=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(w){r||w.getHostGeoModel()!==e||(r=w.getData())});var s=e.coordinateSystem;this._updateBackground(s);var l,u=this._regionsGroup,h=this.group,c=s.getTransformInfo(),d=!u.childAt(0)||a;if(d)h.transform=c.roamTransform,h.decomposeTransform(),h.dirty();else{var f=new On;f.transform=c.roamTransform,f.decomposeTransform(),l=f.scale,Ae(h,{scale:f.scale,position:f.position},e)}var m=c.rawScale,g=c.rawPosition;u.removeAll();var w,S,M,T,A,v=["itemStyle"],x=["emphasis","itemStyle"],y=["label"],b=["emphasis","label"],_=ne();I(s.regions,function(w){var S=_.get(w.name)||_.set(w.name,new re),M=new Lv({segmentIgnoreThreshold:1,shape:{paths:[]}});S.add(M);var T,A=(U=e.getRegionModel(w.name)||e).getModel(v),C=U.getModel(x),D=h_(A),L=h_(C),P=U.getModel(y),N=U.getModel(b);if(r){T=r.indexOfName(w.name);var R=r.getItemVisual(T,"color",!0);R&&(D.fill=R)}function k(le){return[le[0]*m[0]+g[0],le[1]*m[1]+g[1]]}I(w.geometries,function(le){if("polygon"===le.type){for(var de=[],xe=0;xe<le.exterior.length;++xe)de.push(k(le.exterior[xe]));for(M.shape.paths.push(new tn({segmentIgnoreThreshold:1,shape:{points:de}})),xe=0;xe<(le.interiors?le.interiors.length:0);++xe){for(var He=le.interiors[xe],Ve=(de=[],0);Ve<He.length;++Ve)de.push(k(He[Ve]));M.shape.paths.push(new tn({segmentIgnoreThreshold:1,shape:{points:de}}))}}}),M.setStyle(D),M.style.strokeNoScale=!0,M.culling=!0;var B=P.get("show"),G=N.get("show"),W=r&&isNaN(r.get(r.mapDimension("value"),T)),F=r&&r.getItemLayout(T);if(o||W&&(B||G)||F&&F.showLabel){var Y,K=o?w.name:T;(!r||0<=T)&&(Y=e);var ce=new Pe({position:k(w.center.slice()),scale:[1/h.scale[0],1/h.scale[1]],z2:10,silent:!0});cn(ce.style,ce.hoverStyle={},P,N,{labelFetcher:Y,labelDataIndex:K,defaultText:w.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!d&&Ae(ce,{scale:[1/l[0],1/l[1]]},e),S.add(ce)}if(r)r.setItemGraphicEl(T,S);else{var U=e.getRegionModel(w.name);M.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:w.name,region:U&&U.option||{}}}(S.__regions||(S.__regions=[])).push(w),S.highDownSilentOnTouch=!!e.get("selectedMode"),tt(S,L),u.add(S)}),this._updateController(e,t,n),w=this,S=e,T=n,A=i,(M=u).off("click"),M.off("mousedown"),S.get("selectedMode")&&(M.on("mousedown",function(){w._mouseDownFlag=!0}),M.on("click",function(C){if(w._mouseDownFlag){w._mouseDownFlag=!1;for(var D=C.target;!D.__regions;)D=D.parent;if(D){var L={type:("geo"===S.mainType?"geo":"map")+"ToggleSelect",batch:O(D.__regions,function(P){return{name:P.name,from:A.uid}})};L[S.mainType+"Id"]=S.id,T.dispatchAction(L),c_(S,M)}}})),c_(e,u)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&Is.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&I(Is.makeGraphic(t,this.uid),function(n){this._backgroundGroup.add(n)},this),this._mapName=t},_updateController:function(e,t,n){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var r=e.mainType;function s(){var l={type:"geoRoam",componentType:r};return l[r+"Id"]=e.id,l}a.off("pan").on("pan",function(l){this._mouseDownFlag=!1,wp(o,l.dx,l.dy),n.dispatchAction(fe(s(),{dx:l.dx,dy:l.dy}))},this),a.off("zoom").on("zoom",function(l){if(this._mouseDownFlag=!1,Sp(o,l.scale,l.originX,l.originY),n.dispatchAction(fe(s(),{zoom:l.scale,originX:l.originX,originY:l.originY})),this._updateGroup){var u=this.group.scale;this._regionsGroup.traverse(function(h){"text"===h.type&&h.attr("scale",[1/u[0],1/u[1]])})}},this),a.setPointerChecker(function(l,u,h){return i.getViewRectAfterRoam().contain(u,h)&&!th(l,n,e)})}};var Mp="__seriesMapHighDown",d_="__seriesMapCallKey";function f_(e){var t=this[Mp];t&&t.recordVersion===this[d_]&&p_(t,e)}function p_(e,t){var n=e.circle,i=e.labelModel,a=e.hoverLabelModel,o=e.emphasisText,r=e.normalText;t?(n.style.extendFrom(ut({},a,{text:a.get("show")?o:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(ut(n.style,i,{text:i.get("show")?r:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function Ip(e,t,n){var i=e.getZoom(),a=e.getCenter(),o=t.zoom,r=e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(r[0]-=t.dx,r[1]-=t.dy,a=e.pointToData(r),e.setCenter(a)),null!=o){if(n){var s=n.min||0;o=Math.max(Math.min(i*o,n.max||1/0),s)/i}e.scale[0]*=o,e.scale[1]*=o;var u=e.position,c=(t.originY-u[1])*(o-1);u[0]-=(t.originX-u[0])*(o-1),u[1]-=c,e.updateTransform(),a=e.pointToData(r),e.setCenter(a),e.setZoom(o*i)}return{center:e.getCenter(),zoom:e.getZoom()}}an({type:"map",render:function(e,t,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(o=this._mapDraw)&&a.add(o.group);else if(e.needsDrawMap){var o=this._mapDraw||new nh(n,!0);a.add(o.group),o.draw(e,t,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var i=e.originalData,a=this.group;i.each(i.mapDimension("value"),function(o,r){if(!isNaN(o)){var s=i.getItemLayout(r);if(s&&s.point){var l=s.point,u=s.offset,h=new Jn({style:{fill:e.getData().getVisual("color")},shape:{cx:l[0]+9*u,cy:l[1],r:3},silent:!0,z2:8+(u?0:2)});if(!u){var c=e.mainSeries.getData(),d=i.getName(r),f=c.indexOfName(d),p=i.getItemModel(r),m=p.getModel("label"),g=p.getModel("emphasis.label"),v=c.getItemGraphicEl(f),x=De(e.getFormattedLabel(f,"normal"),d),y=De(e.getFormattedLabel(f,"emphasis"),x),b=v[Mp],_=Math.random();if(!b){b=v[Mp]={};var w=V(f_,!0),S=V(f_,!1);v.on("mouseover",w).on("mouseout",S).on("emphasis",w).on("normal",S)}fe(b,{recordVersion:v[d_]=_,circle:h,labelModel:m,hoverLabelModel:g,emphasisText:y,normalText:x}),p_(b,!1)}a.add(h)}}})}}),Be({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(i){var a=i.coordinateSystem;if("geo"===a.type){var o=Ip(a,e,i.get("scaleLimit"));i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom),"series"===n&&I(i.seriesGroup,function(r){r.setCenter(o.center),r.setZoom(o.zoom)})}})});var g_=Je;function Tp(){On.call(this)}function pa(e){this.name=e,On.call(this),this._roamTransformable=new Tp,this._rawTransformable=new Tp}function m_(e,t,n,i){var a=n.seriesModel,o=a?a.coordinateSystem:null;return o===this?o[e](i):null}function ir(e,t,n,i){pa.call(this,e),this.map=t;var a=Is.load(t,n);this._nameCoordMap=a.nameCoordMap,this._regionsMap=a.regionsMap,this._invertLongitute=null==i||i,this.regions=a.regions,this._rect=a.boundingRect}function v_(e,t,n,i){var a=n.geoModel,o=n.seriesModel,r=a?a.coordinateSystem:o?o.coordinateSystem||(o.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return r===this?r[e](i):null}function y_(e,t){var n=e.get("boundingCoords");if(null!=n){var i=n[0],a=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(a[0])||isNaN(a[1])||this.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1])}var o,r=this.getBoundingRect(),s=e.get("layoutCenter"),l=e.get("layoutSize"),u=t.getWidth(),h=t.getHeight(),c=r.width/r.height*this.aspectScale,d=!1;if(s&&l&&(s=[Q(s[0],u),Q(s[1],h)],l=Q(l,Math.min(u,h)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(d=!0)),d){var f={};1<c?(f.width=l,f.height=l/c):(f.height=l,f.width=l*c),f.y=s[1]-f.height/2,f.x=s[0]-f.width/2}else(o=e.getBoxLayoutParams()).aspect=c,f=vt(o,{width:u,height:h});this.setViewRect(f.x,f.y,f.width,f.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function x_(e,t){I(t.get("geoCoord"),function(n,i){e.addGeoCoord(i,n)})}j(Tp,On),pa.prototype={constructor:pa,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,i){return this._rect=new Le(e,t,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,i){this.transformTo(e,t,n,i),this._viewRect=new Le(e,t,n,i)},transformTo:function(e,t,n,i){var a=this.getBoundingRect(),o=this._rawTransformable;o.transform=a.calculateTransform(new Le(e,t,n,i)),o.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),a=this.getZoom();i=Je([],i,e),n=Je([],n,e),t.origin=i,t.position=[n[0]-i[0],n[1]-i[1]],t.scale=[a,a],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),Ir(this.transform||(this.transform=[]),t.transform||qt()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],gl(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?mt(e):qt(),rawScale:mt(t.scale),rawPosition:mt(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var i=t?this._rawTransform:this.transform;return n=n||[],i?g_(n,e,i):kt(n,e)},pointToData:function(e){var t=this.invTransform;return t?g_([],e,t):[e[0],e[1]]},convertToPixel:V(m_,"dataToPoint"),convertFromPixel:V(m_,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},j(pa,On),ir.prototype={constructor:ir,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,i){var a=this.getBoundingRect(),o=this._invertLongitute;a=a.clone(),o&&(a.y=-a.y-a.height);var r=this._rawTransformable;if(r.transform=a.calculateTransform(new Le(e,t,n,i)),r.decomposeTransform(),o){var s=r.scale;s[1]=-s[1]}r.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return pa.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:V(v_,"dataToPoint"),convertFromPixel:V(v_,"pointToData")},j(ir,pa);var __={dimensions:ir.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",function(a,o){var r=a.get("map"),s=a.get("aspectScale"),l=!0,u=Au_retrieveMap(r);u&&u[0]&&"svg"===u[0].type?(null==s&&(s=1),l=!1):null==s&&(s=.75);var h=new ir(r+o,r,a.get("nameMap"),l);h.aspectScale=s,h.zoomLimit=a.get("scaleLimit"),n.push(h),x_(h,a),(a.coordinateSystem=h).model=a,h.resize=y_,h.resize(a,t)}),e.eachSeries(function(a){if("geo"===a.get("coordinateSystem")){var o=a.get("geoIndex")||0;a.coordinateSystem=n[o]}});var i={};return e.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var o=a.getMapType();i[o]=i[o]||[],i[o].push(a)}}),I(i,function(a,o){var r=new ir(o,o,ln(O(a,function(s){return s.get("nameMap")})));r.zoomLimit=Ne.apply(null,O(a,function(s){return s.get("scaleLimit")})),n.push(r),r.resize=y_,r.aspectScale=a[0].get("aspectScale"),r.resize(a[0],t),I(a,function(s){x_(s.coordinateSystem=r,s)})}),n},getFilledRegions:function(e,t,n){for(var i=(e||[]).slice(),a=ne(),o=0;o<i.length;o++)a.set(i[o].name,i[o]);return I(Is.load(t,n).regions,function(r){var s=r.name;a.get(s)||i.push({name:s})}),i}};Of("geo",__),ct(function(e){var t={};e.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!t[i]){var a={};I(n.seriesGroup,function(r){var s=r.coordinateSystem,l=r.originalData;r.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,h){var c=l.getName(h),d=s.getRegion(c);if(d&&!isNaN(u)){var f=a[c]||0,p=s.dataToPoint(d.center);a[c]=f+1,l.setItemLayout(h,{point:p,offset:f})}})});var o=n.getData();o.each(function(r){var s=o.getName(r),l=o.getItemLayout(r)||{};l.showLabel=!a[s],o.setItemLayout(r,l)}),t[i]=!0}})}),et(function(e){e.eachSeriesByType("map",function(t){var n=t.get("color"),i=t.getModel("itemStyle"),a=i.get("areaColor"),o=i.get("color")||n[t.seriesIndex%n.length];t.getData().setVisual({areaColor:a,color:o})})}),fn(ai.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(n){var i=n.getHostGeoModel(),a=i?"o"+i.id:"i"+n.getMapType();(t[a]=t[a]||[]).push(n)}),I(t,function(n,i){for(var a=function(r,s){var l={};return I(r,function(u){u.each(u.mapDimension("value"),function(h,c){var d="ec-"+u.getName(c);l[d]=l[d]||[],isNaN(h)||l[d].push(h)})}),r[0].map(r[0].mapDimension("value"),function(u,h){for(var d="ec-"+r[0].getName(h),f=0,p=1/0,m=-1/0,g=l[d].length,v=0;v<g;v++)p=Math.min(p,l[d][v]),m=Math.max(m,l[d][v]),f+=l[d][v];return 0===g?NaN:"min"===s?p:"max"===s?m:"average"===s?f/g:f})}(O(n,function(r){return r.getData()}),n[0].get("mapValueCalculation")),o=0;o<n.length;o++)n[o].originalData=n[o].getData();for(o=0;o<n.length;o++)(n[o].seriesGroup=n)[o].needsDrawMap=0===o&&!n[o].getHostGeoModel(),n[o].setData(a.cloneShallow()),n[o].mainSeries=n[0]})}),zt(function(e){var t=[];I(e.series,function(n){n&&"map"===n.type&&(t.push(n),n.map=n.map||n.mapType,ie(n,n.mapLocation))})}),Yx("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var Ts=I,As="\0__link_datas",ih="\0__link_mainData";function b_(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,w_(t,n,e),Ts(n,function(i){Ts(t.TRANSFERABLE_METHODS,function(a){i.wrapMethod(a,V(LA,e))})}),t.wrapMethod("cloneShallow",V(kA,e)),Ts(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,V(PA,e))}),te(n[t.dataType]===t)}function LA(e,t){if(function(i){return i[ih]===i}(this)){var n=fe({},this[As]);w_(n[this.dataType]=t,n,e)}else Ap(t,this.dataType,this[ih],e);return t}function PA(e,t){return e.struct&&e.struct.update(this),t}function kA(e,t){return Ts(t[As],function(n,i){n!==t&&Ap(n.cloneShallow(),i,t,e)}),t}function NA(e){var t=this[ih];return null==e||null==t?t:t[As][e]}function w_(e,t,n){e[As]={},Ts(t,function(i,a){Ap(i,a,e,n)})}function Ap(e,t,n,i){(n[As][t]=e)[ih]=n,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=NA}function Cp(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function Ka(e){this._nodes=[],this.hostModel=e}function OA(e,t){var n=e.isExpand?e.children:[],i=e.parentNode.children,a=e.hierNode.i?i[e.hierNode.i-1]:null;if(n.length){!function(r){for(var s=r.children,l=s.length,u=0,h=0;0<=--l;){var c=s[l];c.hierNode.prelim+=u,c.hierNode.modifier+=u,u+=c.hierNode.shift+(h+=c.hierNode.change)}}(e);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;a?(e.hierNode.prelim=a.hierNode.prelim+t(e,a),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else a&&(e.hierNode.prelim=a.hierNode.prelim+t(e,a));e.parentNode.hierNode.defaultAncestor=function(r,s,l,u){if(s){for(var h=r,c=r,d=c.parentNode.children[0],f=s,p=h.hierNode.modifier,m=c.hierNode.modifier,g=d.hierNode.modifier,v=f.hierNode.modifier;f=Dp(f),c=Lp(c),f&&c;){h=Dp(h),d=Lp(d),h.hierNode.ancestor=r;var x=f.hierNode.prelim+v-c.hierNode.prelim-m+u(f,c);0<x&&(zA((y=f).hierNode.ancestor.parentNode===r.parentNode?y.hierNode.ancestor:l,r,x),m+=x,p+=x),v+=f.hierNode.modifier,m+=c.hierNode.modifier,p+=h.hierNode.modifier,g+=d.hierNode.modifier}f&&!Dp(h)&&(h.hierNode.thread=f,h.hierNode.modifier+=v-p),c&&!Lp(d)&&(d.hierNode.thread=c,d.hierNode.modifier+=m-g,l=r)}var y;return l}(e,a,e.parentNode.hierNode.defaultAncestor||i[0],t)}function RA(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function S_(e){return arguments.length?e:BA}function Cs(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function Dp(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Lp(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function zA(e,t,n){var i=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=i}function BA(e,t){return e.parentNode===t.parentNode?1:2}Cp.prototype={constructor:Cp,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),q(e=e||{})&&(e={order:e});var i,a=e.order||"preorder",o=this[e.attr||"children"];"preorder"===a&&(i=t.call(n,this));for(var r=0;!i&&r<o.length;r++)o[r].eachNode(e,t,n);"postorder"===a&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,i=n.length;t<i;t++){var a=n[t].getNodeById(e);if(a)return a}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,i=n.length;t<i;t++){var a=n[t].contains(e);if(a)return a}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},Ka.prototype={constructor:Ka,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,i=t.length;n<i;n++)t[n].dataIndex=-1;for(n=0,i=e.count();n<i;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},Ka.createTree=function(e,t,n){var i=new Ka(t),a=[],o=1;(function l(u,h){var c=u.value;o=Math.max(o,z(c)?c.length:1),a.push(u);var d=new Cp(u.name,i);h?function EA(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(d,h):i.root=d,i._nodes.push(d);var f=u.children;if(f)for(var p=0;p<f.length;p++)l(f[p],d)})(e),i.root.updateDepthAndHeight(0);var r=Ho(a,{coordDimensions:["value"],dimensionsCount:o}),s=new Ct(r,t);return s.initData(a),n&&n(s),b_({mainData:s,struct:i,structAttr:"tree"}),i.update(),i},ht.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new ze(e.leaves||{},this,this.ecModel),i=Ka.createTree(t,this,function(r){r.wrapMethod("getItemModel",function(s,l){var u=i.getNodeByDataIndex(l);return u.children.length&&u.isExpand||(s.parentModel=n),s})}),a=0;i.eachNode("preorder",function(r){r.depth>a&&(a=r.depth)});var o=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:a;return i.root.eachNode("preorder",function(r){var s=r.hostTree.data.getRawDataItem(r.dataIndex);r.isExpand=s&&null!=s.collapsed?!s.collapsed:r.depth<=o}),i.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],i=t.getNodeByDataIndex(e),a=i.getValue(),o=i.name;i&&i!==n;)o=i.parentNode.name+"."+o,i=i.parentNode;return ot(o+(isNaN(a)||null==a?"":" : "+a))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var VA=In({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,i=n.length,a=t.parentPoint,o=n[0],r=n[i-1];if(1===i)return e.moveTo(a[0],a[1]),void e.lineTo(o[0],o[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,h=Q(t.forkPosition,1),c=[];c[l]=a[l],c[u]=a[u]+(r[u]-a[u])*h,e.moveTo(a[0],a[1]),e.lineTo(c[0],c[1]),e.moveTo(o[0],o[1]),c[l]=o[l],e.lineTo(c[0],c[1]),c[l]=r[l],e.lineTo(c[0],c[1]),e.lineTo(r[0],r[1]);for(var d=1;d<i-1;d++){var f=n[d];e.moveTo(f[0],f[1]),c[l]=f[l],e.lineTo(c[0],c[1])}}});function M_(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function I_(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),n.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?n.itemStyle.fill:"#fff",n}function T_(e,t,n,i,a,o){var r=!n,s=e.tree.getNodeByDataIndex(t),l=s.getModel(),u=(o=I_(s,l,o),e.tree.root),h=s.parentNode===u?s:s.parentNode||s,c=e.getItemGraphicEl(h.dataIndex),d=h.getLayout(),f=c?{x:c.position[0],y:c.position[1],rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:d,p=s.getLayout();r?(n=new ua(e,t,o)).attr("position",[f.x,f.y]):n.updateData(e,t,o),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=p.rawX,n.__radialRawY=p.rawY,i.add(n),e.setItemGraphicEl(t,n),Ae(n,{position:[p.x,p.y]},a);var m=n.getSymbolPath();if("radial"===o.layout){var g,v,x=u.children[0],y=x.getLayout(),b=x.children.length;if(p.x===y.x&&!0===s.isExpand){var _={};_.x=(x.children[0].getLayout().x+x.children[b-1].getLayout().x)/2,_.y=(x.children[0].getLayout().y+x.children[b-1].getLayout().y)/2,(g=Math.atan2(_.y-y.y,_.x-y.x))<0&&(g=2*Math.PI+g),(v=_.x<y.x)&&(g-=Math.PI)}else(g=Math.atan2(p.y-y.y,p.x-y.x))<0&&(g=2*Math.PI+g),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(v=p.x<y.x)&&(g-=Math.PI):(v=p.x>y.x)||(g-=Math.PI);var w=v?"left":"right",S=o.labelModel.get("rotate"),M=S*(Math.PI/180);m.setStyle({textPosition:o.labelModel.get("position")||w,textRotation:null==S?-g:M,textOrigin:"center",verticalAlign:"middle"})}!function(T,A,C,D,L,P,N,R,k){var B=k.edgeShape,G=D.__edge;if("curve"===B)A.parentNode&&A.parentNode!==C&&Ae(G=G||(D.__edge=new $l({shape:Pp(k,L,L),style:ie({opacity:0,strokeNoScale:!0},k.lineStyle)})),{shape:Pp(k,P,N),style:ie({opacity:1},k.lineStyle)},T);else if("polyline"===B&&"orthogonal"===k.layout&&A!==C&&A.children&&0!==A.children.length&&!0===A.isExpand){for(var W=A.children,F=[],Y=0;Y<W.length;Y++){var K=W[Y].getLayout();F.push([K.x,K.y])}Ae(G=G||(D.__edge=new VA({shape:{parentPoint:[N.x,N.y],childPoints:[[N.x,N.y]],orient:k.orient,forkPosition:k.edgeForkPosition},style:ie({opacity:0,strokeNoScale:!0},k.lineStyle)})),{shape:{parentPoint:[N.x,N.y],childPoints:F},style:ie({opacity:1},k.lineStyle)},T)}R.add(G)}(a,s,u,n,f,d,p,i,o)}function A_(e,t,n,i,a,o){for(var r,c,s=e.tree.getNodeByDataIndex(t),l=e.tree.root,u=s.getModel(),h=(o=I_(s,u,o),s.parentNode===l?s:s.parentNode||s);null==(r=h.getLayout());)h=h.parentNode===l?h:h.parentNode||h;Ae(n,{position:[r.x+1,r.y+1]},a,function(){i.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var d=e.getItemGraphicEl(h.dataIndex).__edge,f=n.__edge||(!1===h.isExpand||1===h.children.length?d:void 0);c=o.edgeShape,f&&("curve"===c?Ae(f,{shape:Pp(o,r,r),style:{opacity:0}},a,function(){i.remove(f)}):"polyline"===c&&"orthogonal"===o.layout&&Ae(f,{shape:{parentPoint:[r.x,r.y],childPoints:[[r.x,r.y]]},style:{opacity:0}},a,function(){i.remove(f)}))}function Pp(e,t,n){var i,a,o,r,s,l,u,h,c=e.orient;if("radial"!==e.layout)return s=t.x,u=t.y,l=n.x,h=n.y,"LR"!==c&&"RL"!==c||(i=s+(l-s)*e.curvature,a=u,o=l+(s-l)*e.curvature,r=h),"TB"!==c&&"BT"!==c||(i=s,a=u+(h-u)*e.curvature,o=l,r=h+(u-h)*e.curvature),{x1:s,y1:u,x2:l,y2:h,cpx1:i,cpy1:a,cpx2:o,cpy2:r};l=n.rawX,h=n.rawY;var d=Cs(s=t.rawX,u=t.rawY),f=Cs(s,u+(h-u)*e.curvature),p=Cs(l,h+(u-h)*e.curvature),m=Cs(l,h);return{x1:d.x,y1:d.y,x2:m.x,y2:m.y,cpx1:f.x,cpy1:f.y,cpx2:p.x,cpy2:p.y}}function Ds(e,t){for(var n,i=[e];n=i.pop();)if(t(n),n.isExpand){var a=n.children;if(a.length)for(var o=a.length-1;0<=o;o--)i.push(a[o])}}function Ls(e,t,n){if(e&&0<=E(t,e.type)){var i=n.getData().tree.root,a=e.targetNode;if("string"==typeof a&&(a=i.getNodeById(a)),a&&i.contains(a))return{node:a};var o=e.targetNodeId;if(null!=o&&(a=i.getNodeById(o)))return{node:a}}}function C_(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function kp(e,t){return 0<=E(C_(e),t)}function Np(e,t){for(var n=[];e;){var i=e.dataIndex;n.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return n.reverse(),n}function Op(e){this.group=new re,e.add(this.group)}function FA(e,t,n,i,a,o){var r=[[a?e:e-5,t],[e+n,t],[e+n,t+i],[a?e:e-5,t+i]];return o||r.splice(2,0,[e+n+5,t+i/2]),a||r.push([e,t+i/2]),r}function D_(e){var t=Rp(e);return t.stroke=t.fill=t.lineWidth=null,t}an({type:"tree",init:function(e,t){this._mainGroup=new re,this._controller=new nr(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,i){var a=e.getData(),o=e.layoutInfo,r=this._mainGroup,s=e.get("layout");r.attr("position","radial"===s?[o.x+o.width/2,o.y+o.height/2]:[o.x,o.y]),this._updateViewCoordSys(e,o,s),this._updateController(e,t,n);var l=this._data,u={expandAndCollapse:e.get("expandAndCollapse"),layout:s,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};a.diff(l).add(function(h){M_(a,h)&&T_(a,h,null,r,e,u)}).update(function(h,c){var d=l.getItemGraphicEl(c);M_(a,h)?T_(a,h,d,r,e,u):d&&A_(l,c,d,r,e,u)}).remove(function(h){var c=l.getItemGraphicEl(h);c&&A_(l,h,c,r,e,u)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===u.expandAndCollapse&&a.eachItemGraphicEl(function(h,c){h.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:c})})}),this._data=a},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(l){var u=t.getItemLayout(l);!u||isNaN(u.x)||isNaN(u.y)||n.push([+u.x,+u.y])});var i=[],a=[];Rr(n,i,a);var o=this._min,r=this._max;a[0]-i[0]==0&&(i[0]=o?o[0]:i[0]-1,a[0]=r?r[0]:a[0]+1),a[1]-i[1]==0&&(i[1]=o?o[1]:i[1]-1,a[1]=r?r[1]:a[1]+1);var s=e.coordinateSystem=new pa;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1]),s.setCenter(e.get("center")),s.setZoom(e.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=a},_updateController:function(e,t,n){var i=this._controller,a=this._controllerHost,o=this.group;i.setPointerChecker(function(r,s,l){var u=o.getBoundingRect();return u.applyTransform(o.transform),u.contain(s,l)&&!th(r,n,e)}),i.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(r){wp(a,r.dx,r.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:r.dx,dy:r.dy})},this).on("zoom",function(r){Sp(a,r.scale,r.originX,r.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:r.scale,originX:r.originX,originY:r.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),i=[n,n];t.eachItemGraphicEl(function(a,o){a.attr("scale",i)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,i=t.scale,a=i&&i[0]||1;return((t.getZoom()-1)*n+1)/a},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Be({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=e.dataIndex,a=n.getData().tree.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),Be({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var i=Ip(n.coordinateSystem,e);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})}),et(Ya("tree","circle")),ct(function(e,t){e.eachSeriesByType("tree",function(n){!function(i,a){var S,o=(S=a,vt(i.getBoxLayoutParams(),{width:S.getWidth(),height:S.getHeight()}));i.layoutInfo=o;var r=i.get("layout"),s=0,l=0,u=null;u="radial"===r?(s=2*Math.PI,l=Math.min(o.height,o.width)/2,S_(function(w,S){return(w.parentNode===S.parentNode?1:2)/w.depth})):(s=o.width,l=o.height,S_());var h=i.getData().tree.root,c=h.children[0];if(c){(function(w){w.hierNode={defaultAncestor:null,ancestor:w,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var S,M,T=[w];S=T.pop();)if(M=S.children,S.isExpand&&M.length)for(var A=M.length-1;0<=A;A--){var C=M[A];C.hierNode={defaultAncestor:null,ancestor:C,prelim:0,modifier:0,change:0,shift:0,i:A,thread:null},T.push(C)}})(h),function(w,S,M){for(var T,A=[w],C=[];T=A.pop();)if(C.push(T),T.isExpand){var D=T.children;if(D.length)for(var L=0;L<D.length;L++)A.push(D[L])}for(;T=C.pop();)S(T,M)}(c,OA,u),h.hierNode.modifier=-c.hierNode.prelim,Ds(c,RA);var d=c,f=c,p=c;Ds(c,function(w){var S=w.getLayout().x;S<d.getLayout().x&&(d=w),S>f.getLayout().x&&(f=w),w.depth>p.depth&&(p=w)});var m=d===f?1:u(d,f)/2,g=m-d.getLayout().x,v=0,x=0,y=0,b=0;if("radial"===r)v=s/(f.getLayout().x+m+g),x=l/(p.depth-1||1),Ds(c,function(w){var S=Cs(y=(w.getLayout().x+g)*v,b=(w.depth-1)*x);w.setLayout({x:S.x,y:S.y,rawX:y,rawY:b},!0)});else{var _=i.getOrient();"RL"===_||"LR"===_?(x=l/(f.getLayout().x+m+g),v=s/(p.depth-1||1),Ds(c,function(w){b=(w.getLayout().x+g)*x,w.setLayout({x:y="LR"===_?(w.depth-1)*v:s-(w.depth-1)*v,y:b},!0)})):"TB"!==_&&"BT"!==_||(v=s/(f.getLayout().x+m+g),x=l/(p.depth-1||1),Ds(c,function(w){y=(w.getLayout().x+g)*v,w.setLayout({x:y,y:b="TB"===_?(w.depth-1)*x:l-(w.depth-1)*x},!0)}))}}}(n,t)})}),ht.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function s(l){var u=0;I(l.children,function(c){s(c);var d=c.value;z(d)&&(d=d[0]),u+=d});var h=l.value;z(h)&&(h=h[0]),null!=h&&!isNaN(h)||(h=u),h<0&&(h=0),z(l.value)?l.value[0]=h:l.value=h}(n);var i=e.levels||[],a=new ze({itemStyle:this.designatedVisualItemStyle={}},this,t),o=O((i=e.levels=function(s,l){var u,h=l.get("color");if(h)return I(s=s||[],function(c){var d=new ze(c),f=d.get("color");(d.get("itemStyle.color")||f&&"none"!==f)&&(u=!0)}),!u&&((s[0]||(s[0]={})).color=h.slice()),s}(i,t))||[],function(s){return new ze(s,a,t)},this),r=Ka.createTree(n,this,function(s){s.wrapMethod("getItemModel",function(l,u){var h=r.getNodeByDataIndex(u);return l.parentModel=o[h.depth]||a,l})});return r.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),i=z(n)?ta(n[0]):ta(n);return ot(t.getName(e)+": "+i)},getDataParams:function(e){var t=ht.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Np(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},fe(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=ne(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}}),Op.prototype={constructor:Op,render:function(e,t,n,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),a.get("show")&&n){var r=a.getModel("itemStyle"),s=r.getModel("textStyle"),l={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(e,l,r,s,i),du(o,l.pos,l.box)}},_prepare:function(e,t,n){for(var i=e;i;i=i.parentNode){var a=i.getModel().get("name"),o=n.getTextRect(a),r=Math.max(o.width+16,t.emptyItemWidth);t.totalWidth+=r+8,t.renderList.push({node:i,text:a,width:r})}},_renderContent:function(e,t,n,i,a){for(var o,r,s=0,l=t.emptyItemWidth,u=e.get("breadcrumb.height"),h=(_=void 0,void 0,void 0,M=void 0,T=void 0,A=void 0,C=void 0,S=(b=t.box).height,M=Q((y=t.pos).x,w=b.width),T=Q(y.y,S),A=Q(y.x2,w),C=Q(y.y2,S),(isNaN(M)||isNaN(parseFloat(y.x)))&&(M=0),(isNaN(A)||isNaN(parseFloat(y.x2)))&&(A=w),(isNaN(T)||isNaN(parseFloat(y.y)))&&(T=0),(isNaN(C)||isNaN(parseFloat(y.y2)))&&(C=S),_=Va(_||0),{width:Math.max(A-M-_[1]-_[3],0),height:Math.max(C-T-_[0]-_[2],0)}),c=t.totalWidth,d=t.renderList,f=d.length-1;0<=f;f--){var p=d[f],m=p.node,g=p.width,v=p.text;c>h.width&&(c-=g-l,g=l,v=null);var x=new tn({shape:{points:FA(s,0,g,u,f===d.length-1,0===f)},style:ie(n.getItemStyle(),{lineJoin:"bevel",text:v,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:V(a,m)});this.group.add(x),x.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(o=e).componentIndex,seriesIndex:o.componentIndex,seriesName:o.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(r=m)&&r.dataIndex,name:r&&r.name},treePathInfo:r&&Np(r,o)},s+=g+8}var y,b,_,w,S,M,T,A,C},remove:function(){this.group.removeAll()}};var ah=Z,L_=re,P_=Fe,ui=I,GA=["label"],WA=["emphasis","label"],HA=["upperLabel"],ZA=["emphasis","upperLabel"],Rp=Lo([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function jA(e,t,n,i,a,o,r,s,l,u){if(r){var h=r.getLayout(),c=e.getData();if(c.setItemGraphicEl(r.dataIndex,null),h&&h.isInView){var d=h.width,f=h.height,p=h.borderWidth,m=h.invisible,g=r.getRawIndex(),v=s&&s.getRawIndex(),x=r.viewChildren,y=h.upperHeight,b=x&&x.length,_=r.getModel("itemStyle"),w=r.getModel("emphasis.itemStyle"),S=P("nodeGroup",L_);if(S){if(l.add(S),S.attr("position",[h.x||0,h.y||0]),S.__tmNodeWidth=d,S.__tmNodeHeight=f,h.isAboveViewRoot)return S;var M=r.getModel(),T=P("background",P_,u,1);if(T&&function(N,R,k){if(R.dataIndex=r.dataIndex,R.seriesIndex=e.seriesIndex,R.setShape({x:0,y:0,width:d,height:f}),m)C(R);else{R.invisible=!1;var B=r.getVisual("borderColor",!0),G=w.get("borderColor"),W=D_(_);W.fill=B;var F=Rp(w);if(F.fill=G,k){var Y=d-2*p;D(W,F,B,Y,y,{x:p,y:0,width:Y,height:y})}else W.text=F.text=null;R.setStyle(W),Hr(R,F)}N.add(R)}(S,T,b&&h.upperLabelHeight),b)iu(S)&&Ra(S,!1),T&&(Ra(T,!0),c.setItemGraphicEl(r.dataIndex,T));else{var A=P("content",P_,u,2);A&&function(N,R){R.dataIndex=r.dataIndex,R.seriesIndex=e.seriesIndex;var k=Math.max(d-2*p,0),B=Math.max(f-2*p,0);if(R.culling=!0,R.setShape({x:p,y:p,width:k,height:B}),m)C(R);else{R.invisible=!1;var G=r.getVisual("color",!0),W=D_(_);W.fill=G;var F=Rp(w);D(W,F,G,k,B),R.setStyle(W),Hr(R,F)}N.add(R)}(S,A),T&&iu(T)&&Ra(T,!1),Ra(S,!0),c.setItemGraphicEl(r.dataIndex,S)}return S}}}function C(N){N.invisible||o.push(N)}function D(N,R,k,B,G,W){var F=M.get("name"),Y=M.getModel(W?HA:GA),K=M.getModel(W?ZA:WA),ce=Y.getShallow("show");cn(N,R,Y,K,{defaultText:ce?F:null,autoColor:k,isRectText:!0,labelFetcher:e,labelDataIndex:r.dataIndex,labelProp:W?"upperLabel":"label"}),L(N,W,h),L(R,W,h),W&&(N.textRect=ue(W)),N.truncate=ce&&Y.get("ellipsis")?{outerWidth:B,outerHeight:G,minChar:2}:null}function L(N,R,k){var B=N.text;if(!R&&k.isLeafRoot&&null!=B){var G=e.get("drillDownIcon",!0);N.text=G?G+" "+B:B}}function P(N,R,k,B){var Y,K,G=null!=v&&n[N][v],W=a[N];return G?(n[N][v]=null,Y=G,K=N,(W[g]={}).old="nodeGroup"===K?Y.position.slice():fe({},Y.shape)):m||((G=new R({z:function(F,Y){var K=10*F+Y;return(K-1)/K}(k,B)})).__tmDepth=k,function(F,Y,K){var ce=F[g]={},U=r.parentNode;if(U&&(!i||"drillDown"===i.direction)){var le=0,de=0,xe=a.background[U.getRawIndex()];!i&&xe&&xe.old&&(le=xe.old.width,de=xe.old.height),ce.old="nodeGroup"===K?[0,de]:{x:le,y:de,width:0,height:0}}ce.fadein="nodeGroup"!==K}(W,0,G.__tmStorageName=N)),t[N][g]=G}}an({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,n,i){if(!(E(t.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var a=Ls(i,["treemapZoomToNode","treemapRootToNode"],e),o=i&&i.type,r=e.layoutInfo,s=!this._oldTree,l=this._storage,u="treemapRootToNode"===o&&a&&l?{rootNodeGroup:l.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,h=this._giveContainerGroup(r),c=this._doRender(h,e,u);s||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?c.renderFinally():this._doAnimation(h,c,e,u),this._resetController(n),this._renderBreadcrumb(e,n,a)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new L_,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var i=t.getData().tree,a=this._oldTree,o={nodeGroup:[],background:[],content:[]},r={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],u=V(jA,t,r,s,n,o,l);!function f(p,m,g,v,x){function y(_){return _.getId()}function b(_,w){var S=null!=_?p[_]:null,M=null!=w?m[w]:null,T=u(S,M,g,x);T&&f(S&&S.viewChildren||[],M&&M.viewChildren||[],T,v,x+1)}v?ui(m=p,function(_,w){_.isRemoved()||b(w,w)}):new Di(m,p,y,y).add(b).update(b).remove(V(b,null)).execute()}(i.root?[i.root]:[],a&&a.root?[a.root]:[],e,i===a||!a,0);var h,c,d=(c={nodeGroup:[],background:[],content:[]},(h=s)&&ui(h,function(f,p){var m=c[p];ui(f,function(g){g&&(m.push(g),g.__tmWillDelete=1)})}),c);return this._oldTree=i,this._storage=r,{lastsForAnimation:o,willDeleteEls:d,renderFinally:function(){ui(d,function(f){ui(f,function(p){p.parent&&p.parent.remove(p)})}),ui(l,function(f){f.invisible=!0,f.dirty()})}}},_doAnimation:function(e,t,n,i){if(n.get("animation")){var a=n.get("animationDurationUpdate"),o=n.get("animationEasing"),r=(l=[],u={},{add:function(h,c,d,f,p){return q(f)&&(p=f,f=0),!u[h.id]&&(u[h.id]=1,l.push({el:h,target:c,time:d,delay:f,easing:p}),!0)},done:function(h){return s=h,this},start:function(){for(var h=l.length,c=0,d=l.length;c<d;c++){var f=l[c];f.el.animateTo(f.target,f.time,f.delay,f.easing,p)}return this;function p(){--h||(l.length=0,u={},s&&s())}}});ui(t.willDeleteEls,function(s,l){ui(s,function(u,h){if(!u.invisible){var c,d=u.parent;if(i&&"drillDown"===i.direction)c=d===i.rootNodeGroup?{shape:{x:0,y:0,width:d.__tmNodeWidth,height:d.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var f=0,p=0;d.__tmWillDelete||(f=d.__tmNodeWidth/2,p=d.__tmNodeHeight/2),c="nodeGroup"===l?{position:[f,p],style:{opacity:0}}:{shape:{x:f,y:p,width:0,height:0},style:{opacity:0}}}c&&r.add(u,c,a,o)}})}),ui(this._storage,function(s,l){ui(s,function(u,h){var c=t.lastsForAnimation[l][h],d={};c&&("nodeGroup"===l?c.old&&(d.position=u.position.slice(),u.attr("position",c.old)):(c.old&&(d.shape=fe({},u.shape),u.setShape(c.old)),c.fadein?(u.setStyle("opacity",0),d.style={opacity:1}):1!==u.style.opacity&&(d.style={opacity:1})),r.add(u,d,a,o))})},this),this._state="animating",r.done(ah(function(){this._state="ready",t.renderFinally()},this)).start()}var s,l,u},_resetController:function(e){var t=this._controller;t||((t=this._controller=new nr(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",ah(this._onPan,this)),t.on("zoom",ah(this._onZoom,this)));var n=new Le(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(i,a,o){return n.contain(a,o)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var a=i.getLayout();if(!a)return;var o=new Le(a.x,a.y,a.width,a.height),r=this.seriesModel.layoutInfo;t-=r.x,n-=r.y;var s=qt();En(s,s,[-t,-n]),Tr(s,s,[e.scale,e.scale]),En(s,s,[t,n]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},_initEvents:function(e){e.on("click",function(t){if("ready"===this._state){var n=this.seriesModel.get("nodeClick",!0);if(n){var i=this.findTarget(t.offsetX,t.offsetY);if(i){var a=i.node;if(a.getLayout().isLeafRoot)this._rootToNode(i);else if("zoomToNode"===n)this._zoomToNode(i);else if("link"===n){var o=a.hostTree.data.getItemModel(a.dataIndex),r=o.get("link",!0),s=o.get("target",!0)||"blank";r&&qr(r,s)}}}}},this)},_renderBreadcrumb:function(e,t,n){n=n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new Op(this.group))).render(e,t,n.node,ah(function(i){"animating"!==this._state&&(kp(e.getViewRoot(),i)?this._rootToNode({node:i}):this._zoomToNode({node:i}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var a=this._storage.background[i.getRawIndex()];if(a){var o=a.transformCoordToLocal(e,t),r=a.shape;if(!(r.x<=o[0]&&o[0]<=r.x+r.width&&r.y<=o[1]&&o[1]<=r.y+r.height))return!1;n={node:i,offsetX:o[0],offsetY:o[1]}}},this),n}});for(var XA=function(){},k_=["treemapZoomToNode","treemapRender","treemapMove"],zp=0;zp<k_.length;zp++)Be({type:k_[zp],update:"updateView"},XA);Be({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(n,i){var a=Ls(e,["treemapZoomToNode","treemapRootToNode"],n);if(a){var o=n.getViewRoot();o&&(e.direction=kp(o,a.node)?"rollUp":"drillDown"),n.resetViewRoot(a.node)}})});var Ps=I,N_=X,$e=function(e){var t=e.mappingMethod,n=e.type,i=this.option=ue(e);this.type=n,this.mappingMethod=t,this._normalizeData=YA[t];var a=ks[n];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._doMap=a._doMap[t],"piecewise"===t?(Bp(i),function(o){var r=o.pieceList;o.hasSpecialVisual=!1,I(r,function(s,l){s.originIndex=l,null!=s.visual&&(o.hasSpecialVisual=!0)})}(i)):"category"===t?i.categories?function(o){var r=o.categories,s=o.visual,l=o.categoryMap={};if(Ps(r,function(c,d){l[c]=d}),!z(s)){var u=[];X(s)?Ps(s,function(c,d){var f=l[d];u[null!=f?f:-1]=c}):u[-1]=s,s=O_(o,u)}for(var h=r.length-1;0<=h;h--)null==s[h]&&(delete l[r[h]],r.pop())}(i):Bp(i,!0):(te("linear"!==t||i.dataExtent),Bp(i))};$e.prototype={constructor:$e,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return Z(this._normalizeData,this)}};var ks=$e.visualHandlers={color:{applyVisual:sh("color"),getColorMapper:function(){var e=this.option;return Z("category"===e.mappingMethod?function(t,n){return n||(t=this._normalizeData(t)),lh.call(this,t)}:function(t,n,i){var a=!!i;return n||(t=this._normalizeData(t)),i=Dr(t,e.parsedVisual,i),a?i:xi(i,"rgba")},this)},_doMap:{linear:function(e){return xi(Dr(e,this.option.parsedVisual),"rgba")},category:lh,piecewise:function(e,t){var n=Fp.call(this,t);return null==n&&(n=xi(Dr(e,this.option.parsedVisual),"rgba")),n},fixed:Qa}},colorHue:rh(function(e,t){return To(e,t)}),colorSaturation:rh(function(e,t){return To(e,null,t)}),colorLightness:rh(function(e,t){return To(e,null,null,t)}),colorAlpha:rh(function(e,t){return yl(e,t)}),opacity:{applyVisual:sh("opacity"),_doMap:Vp([0,1])},liftZ:{applyVisual:sh("liftZ"),_doMap:{linear:Qa,category:Qa,piecewise:Qa,fixed:Qa}},symbol:{applyVisual:function(e,t,n){var i=this.mapValueToVisual(e);if(q(i))n("symbol",i);else if(N_(i))for(var a in i)i.hasOwnProperty(a)&&n(a,i[a])},_doMap:{linear:E_,category:lh,piecewise:function(e,t){var n=Fp.call(this,t);return null==n&&(n=E_.call(this,e)),n},fixed:Qa}},symbolSize:{applyVisual:sh("symbolSize"),_doMap:Vp([0,1])}};function Bp(e,t){var n=e.visual,i=[];X(n)?Ps(n,function(a){i.push(a)}):null!=n&&i.push(n),t||1!==i.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(i[1]=i[0]),O_(e,i)}function rh(e){return{applyVisual:function(t,n,i){t=this.mapValueToVisual(t),i("color",e(n("color"),t))},_doMap:Vp([0,1])}}function E_(e){var t=this.option.visual;return t[Math.round(nt(e,[0,1],[0,t.length-1],!0))]||{}}function sh(e){return function(t,n,i){i(e,this.mapValueToVisual(t))}}function lh(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Qa(){return this.option.visual[0]}function Vp(e){return{linear:function(t){return nt(t,e,this.option.visual,!0)},category:lh,piecewise:function(t,n){var i=Fp.call(this,n);return null==i&&(i=nt(t,e,this.option.visual,!0)),i},fixed:Qa}}function Fp(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var i=n[$e.findPieceIndex(e,n)];if(i&&i.visual)return i.visual[this.type]}}function O_(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=O(t,function(n){return un(n)})),t}var YA={linear:function(e){return nt(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=$e.findPieceIndex(e,t,!0);if(null!=n)return nt(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:We};function uh(e,t,n){return e?t<=n:t<n}$e.listVisualTypes=function(){var e=[];return I(ks,function(t,n){e.push(n)}),e},$e.addVisualHandler=function(e,t){ks[e]=t},$e.isValidType=function(e){return ks.hasOwnProperty(e)},$e.eachVisual=function(e,t,n){X(e)?I(e,t,n):t.call(n,e)},$e.mapVisual=function(e,t,n){var i,a=z(e)?[]:X(e)?{}:(i=!0,null);return $e.eachVisual(e,function(o,r){var s=t.call(n,o,r);i?a=s:a[r]=s}),a},$e.retrieveVisuals=function(e){var t,n={};return e&&Ps(ks,function(i,a){e.hasOwnProperty(a)&&(n[a]=e[a],t=!0)}),t?n:null},$e.prepareVisualTypes=function(e){if(N_(e)){var t=[];Ps(e,function(n,i){t.push(i)}),e=t}else{if(!z(e))return[];e=e.slice()}return e.sort(function(n,i){return"color"===i&&"color"!==n&&0===n.indexOf("color")?1:-1}),e},$e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},$e.findPieceIndex=function(e,t,n){for(var i,a=1/0,o=0,r=t.length;o<r;o++){var s=t[o].value;if(null!=s){if(s===e||"string"==typeof s&&s===e+"")return o;n&&c(s,o)}}for(o=0,r=t.length;o<r;o++){var l=t[o],u=l.interval,h=l.close;if(u){if(u[0]===-1/0){if(uh(h[1],e,u[1]))return o}else if(u[1]===1/0){if(uh(h[0],u[0],e))return o}else if(uh(h[0],u[0],e)&&uh(h[1],e,u[1]))return o;n&&c(u[0],o),n&&c(u[1],o)}}if(n)return e===1/0?t.length-1:e===-1/0?0:i;function c(d,f){var p=Math.abs(d-e);p<a&&(a=p,i=f)}};var qA=z,KA={seriesType:"treemap",reset:function(e,t,n,i){var a=e.getData().tree.root;a.isRemoved()||function o(r,s,l,u){var h=r.getModel(),c=r.getLayout();if(c&&!c.invisible&&c.isInView){var g,x,d=r.getModel("itemStyle"),f=function QA(e,t,n){var i=fe({},t),a=n.designatedVisualItemStyle;return I(["color","colorAlpha","colorSaturation"],function(o){a[o]=t[o];var r=e.get(o);(a[o]=null)!=r&&(i[o]=r)}),i}(d,s,u),p=d.get("borderColor"),m=d.get("borderColorSaturation");null!=m&&(p=null!=(x=g=R_(f))?To(x,null,null,m):null),r.setVisual("borderColor",p);var y=r.viewChildren;if(y&&y.length){var b=function JA(e,t,n,i,a,o){if(o&&o.length){var r=Wp(t,"color")||null!=a.color&&"none"!==a.color&&(Wp(t,"colorAlpha")||Wp(t,"colorSaturation"));if(r){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var h=t.get("colorMappingBy"),c={type:r.name,dataExtent:u,visual:r.range};"color"!==c.type||"index"!==h&&"id"!==h?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var d=new $e(c);return d.__drColorMappingBy=h,d}}}(0,h,c,0,f,y);I(y,function(_,w){if(_.depth>=l.length||_===l[_.depth]){var S=function eC(e,t,n,i,a,o){var r=fe({},t);if(a){var s=a.type,l="color"===s&&a.__drColorMappingBy,u="index"===l?i:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));r[s]=a.mapValueToVisual(u)}return r}(h,f,_,w,b,u);o(_,S,l,u)}})}else g=R_(f),r.setVisual("color",g)}}(a,{},e.getViewRoot().getAncestors(),e)}};function R_(e){var t=Gp(e,"color");if(t){var n=Gp(e,"colorAlpha"),i=Gp(e,"colorSaturation");return i&&(t=To(t,null,null,i)),n&&(t=yl(t,n)),t}}function Gp(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function Wp(e,t){var n=e.get(t);return qA(n)&&n.length?{name:t,range:n}:null}var Ns=Math.max,hh=Math.min,z_=Ne,Hp=I,B_=["itemStyle","borderWidth"],tC=["itemStyle","gapWidth"],nC=["upperLabel","show"],iC=["upperLabel","height"],aC={seriesType:"treemap",reset:function(e,t,n,i){var a=n.getWidth(),o=n.getHeight(),r=e.option,s=vt(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=r.size||[],u=Q(z_(s.width,l[0]),a),h=Q(z_(s.height,l[1]),o),c=i&&i.type,d=Ls(i,["treemapZoomToNode","treemapRootToNode"],e),f="treemapRender"===c||"treemapMove"===c?i.rootRect:null,p=e.getViewRoot(),m=C_(p);if("treemapMove"!==c){var g="treemapZoomToNode"===c?function(_,w,S,M,T){var A,C=(w||{}).node,D=[M,T];if(!C||C===S)return D;for(var L=M*T,P=L*_.option.zoomToNodeRatio;A=C.parentNode;){for(var N=0,R=A.children,k=0,B=R.length;k<B;k++)N+=R[k].getValue();var G=C.getValue();if(0===G)return D;P*=N/G;var W=A.getModel(),F=W.get(B_);P+=4*F*F+(3*F+Math.max(F,F_(W)))*Math.pow(P,.5),Ud<P&&(P=Ud),C=A}P<L&&(P=L);var K=Math.pow(P/L,.5);return[M*K,T*K]}(e,d,p,u,h):f?[f.width,f.height]:[u,h],v=r.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var x={squareRatio:r.squareRatio,sort:v,leafDepth:r.leafDepth};p.hostTree.clearLayouts();var y={x:0,y:0,width:g[0],height:g[1],area:g[0]*g[1]};p.setLayout(y),function _(w,S,M,T){var A,C;if(!w.isRemoved()){var D=w.getLayout();A=D.width,C=D.height;var L=(G=w.getModel()).get(B_),P=G.get(tC)/2,N=F_(G),R=Math.max(L,N),k=L-P,B=R-P,G=w.getModel();w.setLayout({borderWidth:L,upperHeight:R,upperLabelHeight:N},!0);var W=(A=Ns(A-2*k,0))*(C=Ns(C-k-B,0)),F=function oC(e,t,n,i,a,o){var r=e.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=o;if(a&&!l)return e.viewChildren=[];!function(f,p){p&&f.sort(function(m,g){var v="asc"===p?m.getValue()-g.getValue():g.getValue()-m.getValue();return 0==v?"asc"===p?m.dataIndex-g.dataIndex:g.dataIndex-m.dataIndex:v})}(r=se(r,function(f){return!f.isRemoved()}),s);var u=function(f,p,m){for(var g=0,v=0,x=p.length;v<x;v++)g+=p[v].getValue();var y=f.get("visualDimension");if(p&&p.length)if("value"===y&&m)b=[p[p.length-1].getValue(),p[0].getValue()],"asc"===m&&b.reverse();else{var b=[1/0,-1/0];Hp(p,function(_){var w=_.getValue(y);w<b[0]&&(b[0]=w),w>b[1]&&(b[1]=w)})}else b=[NaN,NaN];return{sum:g,dataExtent:b}}(t,r,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(f,p,m,g,v){if(!g)return m;for(var x=f.get("visibleMin"),y=v.length,b=y,_=y-1;0<=_;_--){var w=v["asc"===g?y-_-1:_].getValue();w/m*p<x&&(b=_,m-=w)}return v.splice("asc"===g?0:b,y-b),m}(t,n,u.sum,s,r),0===u.sum)return e.viewChildren=[];for(var h=0,c=r.length;h<c;h++){var d=r[h].getValue()/u.sum*n;r[h].setLayout({area:d})}return l&&(r.length&&e.setLayout({isLeafRoot:!0},!0),r.length=0),e.viewChildren=r,e.setLayout({dataExtent:u.dataExtent},!0),r}(w,G,W,S,M,T);if(F.length){var Y={x:k,y:B,width:A,height:C},K=hh(A,C),ce=1/0,U=[];U.area=0;for(var le=0,de=F.length;le<de;){var xe=F[le];U.push(xe),U.area+=xe.getLayout().area;var He=rC(U,K,S.squareRatio);ce=He<=ce?(le++,He):(U.area-=U.pop().getLayout().area,V_(U,K,Y,P,!1),K=hh(Y.width,Y.height),U.length=U.area=0,1/0)}if(U.length&&V_(U,K,Y,P,!0),!M){var Ve=G.get("childrenVisibleMin");null!=Ve&&W<Ve&&(M=!0)}for(le=0,de=F.length;le<de;le++)_(F[le],S,M,T+1)}}}(p,x,!1,0),y=p.getLayout(),Hp(m,function(_,w){var S=(m[w+1]||p).getValue();_.setLayout(fe({dataExtent:[S,S],borderWidth:0,upperHeight:0},y))})}var b=e.getData().tree.root;b.setLayout(function(_,w,S){if(w)return{x:w.x,y:w.y};var M={x:0,y:0};if(!S)return M;var T=S.node,A=T.getLayout();if(!A)return M;for(var C=[A.width/2,A.height/2],D=T;D;){var L=D.getLayout();C[0]+=L.x,C[1]+=L.y,D=D.parentNode}return{x:_.width/2-C[0],y:_.height/2-C[1]}}(s,f,d),!0),e.setLayoutInfo(s),function _(w,S,M,T,A){var C=w.getLayout(),D=M[A],L=D&&D===w;if(!(D&&!L||A===M.length&&w!==T)){w.setLayout({isInView:!0,invisible:!L&&!S.intersect(C),isAboveViewRoot:L},!0);var P=new Le(S.x-C.x,S.y-C.y,S.width,S.height);Hp(w.viewChildren||[],function(N){_(N,P,M,T,A+1)})}}(b,new Le(-s.x,-s.y,a,o),m,p,0)}};function rC(e,t,n){for(var i,a=0,o=1/0,r=0,s=e.length;r<s;r++)(i=e[r].getLayout().area)&&(i<o&&(o=i),a<i&&(a=i));var l=e.area*e.area,u=t*t*n;return l?Ns(u*a/l,l/(u*o)):1/0}function V_(e,t,n,i,a){var o=t===n.width?0:1,r=1-o,s=["x","y"],l=["width","height"],u=n[s[o]],h=t?e.area/t:0;(a||h>n[l[r]])&&(h=n[l[r]]);for(var c=0,d=e.length;c<d;c++){var f=e[c],p={},m=h?f.getLayout().area/h:0,g=p[l[r]]=Ns(h-2*i,0),v=n[s[o]]+n[l[o]]-u,x=c===d-1||v<m?v:m,y=p[l[o]]=Ns(x-2*i,0);p[s[r]]=n[s[r]]+hh(i,g/2),p[s[o]]=u+hh(i,y/2),u+=x,f.setLayout(p,!0)}n[s[r]]+=h,n[l[r]]-=h}function F_(e){return e.get(nC)?e.get(iC):0}function ar(e){return"_EC_"+e}function Es(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}et(KA),ct(aC);var vn=Es.prototype;function Zn(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==t?-1:t}function Os(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}function G_(e,t){return{getValue:function(n){var i=this[e][t];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[e][t].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function W_(e,t,n,i,a){for(var o=new Es(i),r=0;r<e.length;r++)o.addNode(Ne(e[r].id,e[r].name,r),r);var s=[],l=[],u=0;for(r=0;r<t.length;r++){var h=t[r],c=h.source,d=h.target;o.addEdge(c,d,u)&&(l.push(h),s.push(Ne(h.id,c+" > "+d)),u++)}var f,p=n.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=Pi(e,n);else{var m=Gt.get(p),g=m&&"view"!==m.type&&m.dimensions||[];E(g,"value")<0&&g.concat(["value"]);var v=Ho(e,{coordDimensions:g});(f=new Ct(v,n)).initData(e)}var x=new Ct(["value"],n);return x.initData(l,s),a&&a(f,x),b_({mainData:f,struct:o,structAttr:"graph",datas:{node:f,edge:x},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}vn.type="graph",vn.isDirected=function(){return this._directed},vn.addNode=function(e,t){var n=this._nodesMap;if(!n[ar(e=null==e?""+t:""+e)]){var i=new Zn(e,t);return(i.hostGraph=this).nodes.push(i),n[ar(e)]=i}},vn.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},vn.getNodeById=function(e){return this._nodesMap[ar(e)]},vn.addEdge=function(e,t,n){var i=this._nodesMap,a=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),Zn.isInstance(e)||(e=i[ar(e)]),Zn.isInstance(t)||(t=i[ar(t)]),e&&t){var o=e.id+"-"+t.id,r=new Os(e,t,n);return(r.hostGraph=this)._directed&&(e.outEdges.push(r),t.inEdges.push(r)),e.edges.push(r),e!==t&&t.edges.push(r),this.edges.push(r),a[o]=r}},vn.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},vn.getEdge=function(e,t){Zn.isInstance(e)&&(e=e.id),Zn.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},vn.eachNode=function(e,t){for(var n=this.nodes,i=n.length,a=0;a<i;a++)0<=n[a].dataIndex&&e.call(t,n[a],a)},vn.eachEdge=function(e,t){for(var n=this.edges,i=n.length,a=0;a<i;a++)0<=n[a].dataIndex&&0<=n[a].node1.dataIndex&&0<=n[a].node2.dataIndex&&e.call(t,n[a],a)},vn.breadthFirstTraverse=function(e,t,n,i){if(Zn.isInstance(t)||(t=this._nodesMap[ar(t)]),t){for(var a="out"===n?"outEdges":"in"===n?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var r=[t];r.length;){var s=r.shift(),l=s[a];for(o=0;o<l.length;o++){var u=l[o],h=u.node1===s?u.node2:u.node1;if(!h.__visited){if(e.call(i,h,s))return;r.push(h),h.__visited=!0}}}}},vn.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,i=this.edges,a=0,o=n.length;a<o;a++)n[a].dataIndex=-1;for(a=0,o=e.count();a<o;a++)n[e.getRawIndex(a)].dataIndex=a;for(t.filterSelf(function(r){var s=i[t.getRawIndex(r)];return 0<=s.node1.dataIndex&&0<=s.node2.dataIndex}),a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a},vn.clone=function(){for(var e=new Es(this._directed),t=this.nodes,n=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(i=0;i<n.length;i++){var a=n[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},Zn.prototype={constructor:Zn,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},Os.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},j(Zn,G_("hostGraph","data")),j(Os,G_("hostGraph","edgeData")),Es.Node=Zn,Es.Edge=Os,zl(Zn),zl(Os);var ch=function(e){return e.get("autoCurveness")||null},H_=function(e,t){var n=ch(e),i=20,a=[];if("number"==typeof n)i=n;else if(z(n))return void(e.__curvenessList=n);i<t&&(i=t);var o=i%2?i+2:i+3;a=[];for(var r=0;r<o;r++)a.push((r%2?r+1:r)/10*(r%2?-1:1));e.__curvenessList=a},Rs=function(e,t,n){var i=[e.id,e.dataIndex].join("."),a=[t.id,t.dataIndex].join(".");return[n.uid,i,a].join("--\x3e")},Z_=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},Up=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function jp(e,t,n,i){var a=ch(t),o=z(a);if(!a)return null;var r=function(e,t){var n=Rs(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!r)return null;for(var s=-1,l=0;l<r.length;l++)if(r[l]===n){s=l;break}var u=function(e,t){return Up(Rs(e.node1,e.node2,t),t)+Up(Rs(e.node2,e.node1,t),t)}(e,t);H_(t,u),e.lineStyle=e.lineStyle||{};var h=Rs(e.node1,e.node2,t),c=t.__curvenessList,d=o||u%2?0:1;if(r.isForward)return c[d+s];var f=Z_(h),p=Up(f,t),m=c[s+p+d];return i?o?a&&0===a[0]?(p+d)%2?m:-m:((p%2?0:1)+d)%2?m:-m:(p+d)%2?m:-m:c[s+p+d]}var zs=Eu({type:"series.graph",init:function(e){zs.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new ws(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){zs.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){zs.superApply(this,"mergeDefaultAndTheme",arguments),La(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var r,n=e.edges||e.links||[],i=e.data||e.nodes||[],a=this;if(i&&n){ch(r=this)&&(r.__curvenessList=[],r.__edgeMap={},H_(r));var o=W_(i,n,this,!0,function(r,s){r.wrapMethod("getItemModel",function(f){var p=a._categoriesModels[f.getShallow("category")];return p&&(p.parentModel=f.parentModel,f.parentModel=p),f});var l=a.getModel("edgeLabel"),u=new ze({label:l.option},l.parentModel,t),h=a.getModel("emphasis.edgeLabel"),c=new ze({emphasis:{label:h.option}},h.parentModel,t);function d(f){return(f=this.parsePath(f))&&"label"===f[0]?u:f&&"emphasis"===f[0]&&"label"===f[1]?c:this.parentModel}s.wrapMethod("getItemModel",function(f){return f.customizeGetParent(d),f})});return I(o.edges,function(r){!function(s,l,u,h){if(ch(u)){var c=Rs(s,l,u),d=u.__edgeMap,f=d[Z_(c)];d[c]&&!f?d[c].isForward=!0:f&&d[c]&&(f.isForward=!0,d[c].isForward=!1),d[c]=d[c]||[],d[c].push(h)}}(r.node1,r.node2,this,r.dataIndex)},this),o.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"!==n)return zs.superApply(this,"formatTooltip",arguments);var i=this.getData(),a=this.getDataParams(e,n),o=i.graph.getEdgeByIndex(e),r=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),l=ot(l.join(" > ")),a.value&&(l+=" : "+ot(a.value)),l},_updateCategoriesData:function(){var e=O(this.option.categories||[],function(n){return null!=n.value?n:fe({value:0},n)}),t=new Ct(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(n){return t.getItemModel(n,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return zs.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),U_=Ot.prototype,Xp=$l.prototype;function Yp(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var uC=In({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[Yp(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:U_.buildPath,_buildPathCurve:Xp.buildPath,pointAt:function(e){return this[Yp(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:U_.pointAt,_pointAtCurve:Xp.pointAt,tangentAt:function(e){var t=this.shape,n=Yp(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return xo(n,n)},_tangentAtCurve:Xp.tangentAt}),qp=["fromSymbol","toSymbol"];function j_(e){return"_"+e+"Type"}function X_(e,t,n){var i=t.getItemVisual(n,e);if(i&&"none"!==i){var a=t.getItemVisual(n,"color"),o=t.getItemVisual(n,e+"Size"),r=t.getItemVisual(n,e+"Rotate");z(o)||(o=[o,o]);var s=gn(i,-o[0]/2,-o[1]/2,o[0],o[1],a);return s.__specifiedRotation=null==r||isNaN(r)?void 0:+r*Math.PI/180||0,s.name=e,s}}function $p(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function Bs(e,t,n){re.call(this),this._createLine(e,t,n)}var ga=Bs.prototype;function dh(e){this._ctor=e||Bs,this.group=new re}ga.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var i=1,a=this.parent;a;)a.scale&&(i/=a.scale[0]),a=a.parent;var o=this.childOfName("line");if(this.__dirty||o.__dirty){var c,r=o.shape.percent,s=o.pointAt(0),l=o.pointAt(r),u=pi([],l,s);if(xo(u,u),e){if(e.attr("position",s),null==(c=e.__specifiedRotation)){var h=o.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(h[1],h[0]))}else e.attr("rotation",c);e.attr("scale",[i*r,i*r])}if(t&&(t.attr("position",l),null==(c=t.__specifiedRotation)?(h=o.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(h[1],h[0]))):t.attr("rotation",c),t.attr("scale",[i*r,i*r])),!n.ignore){var d,f,p,m;n.attr("position",l);var g=n.__labelDistance,v=g[0]*i,x=g[1]*i,y=r/2,b=[(h=o.tangentAt(y))[1],-h[0]],_=o.pointAt(y);0<b[1]&&(b[0]=-b[0],b[1]=-b[1]);var w,S=h[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var M=-Math.atan2(h[1],h[0]);l[0]<s[0]&&(M=Math.PI+M),n.attr("rotation",M)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-x,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=x,p="top";break;default:w=0,p="middle"}switch(n.__position){case"end":d=[u[0]*v+l[0],u[1]*x+l[1]],f=.8<u[0]?"left":u[0]<-.8?"right":"center",p=.8<u[1]?"top":u[1]<-.8?"bottom":"middle";break;case"start":d=[-u[0]*v+s[0],-u[1]*x+s[1]],f=.8<u[0]?"right":u[0]<-.8?"left":"center",p=.8<u[1]?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":d=[v*S+s[0],s[1]+w],f=h[0]<0?"right":"left",m=[-v*S,-w];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":d=[_[0],_[1]+w],f="center",m=[0,-w];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":d=[-v*S+l[0],l[1]+w],f=0<=h[0]?"right":"left",m=[v*S,-w]}n.attr({style:{textVerticalAlign:n.__verticalAlign||p,textAlign:n.__textAlign||f},position:d,scale:[i,i],origin:m})}}}},ga._createLine=function(e,t,n){var r,s,i=e.hostModel,a=(r=e.getItemLayout(t),$p((s=new uC({name:"line",subPixelOptimize:!0})).shape,r),s);a.shape.percent=0,Vt(a,{shape:{percent:1}},i,t),this.add(a);var o=new Pe({name:"label",lineLabelOriginalOpacity:1});this.add(o),I(qp,function(r){var s=X_(r,e,t);this.add(s),this[j_(r)]=e.getItemVisual(t,r)},this),this._updateCommonStl(e,t,n)},ga.updateData=function(e,t,n){var i=e.hostModel,a=this.childOfName("line"),o=e.getItemLayout(t),r={shape:{}};$p(r.shape,o),Ae(a,r,i,t),I(qp,function(s){var l=e.getItemVisual(t,s),u=j_(s);if(this[u]!==l){this.remove(this.childOfName(s));var h=X_(s,e,t);this.add(h)}this[u]=l},this),this._updateCommonStl(e,t,n)},ga._updateCommonStl=function(e,t,n){var i=e.hostModel,a=this.childOfName("line"),o=n&&n.lineStyle,r=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var u=e.getItemModel(t);o=u.getModel("lineStyle").getLineStyle(),r=u.getModel("emphasis.lineStyle").getLineStyle(),s=u.getModel("label"),l=u.getModel("emphasis.label")}var h=e.getItemVisual(t,"color"),c=Qe(e.getItemVisual(t,"opacity"),o.opacity,1);a.useStyle(ie({strokeNoScale:!0,fill:"none",stroke:h,opacity:c},o)),a.hoverStyle=r,I(qp,function(w){var S=this.childOfName(w);S&&(S.setColor(h),S.setStyle({opacity:c}))},this);var d,f,p=s.getShallow("show"),m=l.getShallow("show"),g=this.childOfName("label");if((p||m)&&(d=h||"#000",null==(f=i.getFormattedLabel(t,"normal",e.dataType)))){var v=i.getRawValue(t);f=null==v?e.getName(t):isFinite(v)?wt(v):v}var x=p?f:null,y=m?De(i.getFormattedLabel(t,"emphasis",e.dataType),f):null,b=g.style;if(null!=x||null!=y){ut(g.style,s,{text:x},{autoColor:d}),g.__textAlign=b.textAlign,g.__verticalAlign=b.textVerticalAlign,g.__position=s.get("position")||"middle";var _=s.get("distance");z(_)||(_=[_,_]),g.__labelDistance=_}g.hoverStyle=null!=y?{text:y,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},g.ignore=!p&&!m,tt(this)},ga.highlight=function(){this.trigger("emphasis")},ga.downplay=function(){this.trigger("normal")},ga.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},ga.setLinePoints=function(e){var t=this.childOfName("line");$p(t.shape,e),t.dirty()},H(Bs,re);var Ja=dh.prototype;function Y_(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function q_(e){return isNaN(e[0])||isNaN(e[1])}function Kp(e){return!q_(e[0])&&!q_(e[1])}function Vs(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,i=t.scale,a=i&&i[0]||1;return((t.getZoom()-1)*n+1)/a}function Fs(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}Ja.isPersistent=function(){return!0},Ja.updateData=function(e){var t=this,n=t.group,i=t._lineData;t._lineData=e,i||n.removeAll();var a=Y_(e);e.diff(i).add(function(o){!function(r,s,l,u){if(Kp(s.getItemLayout(l))){var h=new r._ctor(s,l,u);s.setItemGraphicEl(l,h),r.group.add(h)}}(t,e,o,a)}).update(function(o,r){!function(s,l,u,h,c,d){var f=l.getItemGraphicEl(h);if(!Kp(u.getItemLayout(c)))return s.group.remove(f);f?f.updateData(u,c,d):f=new s._ctor(u,c,d),u.setItemGraphicEl(c,f),s.group.add(f)}(t,i,e,r,o,a)}).remove(function(o){n.remove(i.getItemGraphicEl(o))}).execute()},Ja.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},Ja.incrementalPrepareUpdate=function(e){this._seriesScope=Y_(e),this._lineData=null,this.group.removeAll()},Ja.incrementalUpdate=function(e,t){function n(o){var r;o.isGroup||(r=o).animators&&0<r.animators.length||(o.incremental=o.useHoverLayer=!0)}for(var i=e.start;i<e.end;i++)if(Kp(t.getItemLayout(i))){var a=new this._ctor(t,i,this._seriesScope);a.traverse(n),this.group.add(a),t.setItemGraphicEl(i,a)}},Ja.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Ja._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var Qp=[],Jp=[],eg=[],or=Bt,tg=Gi,$_=Math.abs;function K_(e,t,n){for(var i,a=e[0],o=e[1],r=e[2],s=1/0,l=n*n,u=.1,h=.1;h<=.9;h+=.1)Qp[0]=or(a[0],o[0],r[0],h),Qp[1]=or(a[1],o[1],r[1],h),(f=$_(tg(Qp,t)-l))<s&&(s=f,i=h);for(var c=0;c<32;c++){var d=i+u;Jp[0]=or(a[0],o[0],r[0],i),Jp[1]=or(a[1],o[1],r[1],i),eg[0]=or(a[0],o[0],r[0],d),eg[1]=or(a[1],o[1],r[1],d);var f=tg(Jp,t)-l;if($_(f)<.01)break;var p=tg(eg,t)-l;u/=2,f<0?0<=p?i+=u:i-=u:0<=p?i-=u:i+=u}return i}function ng(e,t){var n=[],i=Td,a=[[],[],[]],o=[[],[]],r=[];t/=2,e.eachEdge(function(s,l){var u=s.getLayout(),h=s.getVisual("fromSymbol"),c=s.getVisual("toSymbol");u.__original||(u.__original=[Nn(u[0]),Nn(u[1])],u[2]&&u.__original.push(Nn(u[2])));var d=u.__original;if(null!=u[2]){if(kt(a[0],d[0]),kt(a[1],d[2]),kt(a[2],d[1]),h&&"none"!==h){var f=Fs(s.node1),p=K_(a,d[0],f*t);i(a[0][0],a[1][0],a[2][0],p,n),a[0][0]=n[3],a[1][0]=n[4],i(a[0][1],a[1][1],a[2][1],p,n),a[0][1]=n[3],a[1][1]=n[4]}c&&"none"!==c&&(f=Fs(s.node2),p=K_(a,d[1],f*t),i(a[0][0],a[1][0],a[2][0],p,n),a[1][0]=n[1],a[2][0]=n[2],i(a[0][1],a[1][1],a[2][1],p,n),a[1][1]=n[1],a[2][1]=n[2]),kt(u[0],a[0]),kt(u[1],a[2]),kt(u[2],a[1])}else kt(o[0],d[0]),kt(o[1],d[1]),pi(r,o[1],o[0]),xo(r,r),h&&"none"!==h&&(f=Fs(s.node1),wr(o[0],o[0],r,f*t)),c&&"none"!==c&&(f=Fs(s.node2),wr(o[1],o[1],r,-f*t)),kt(u[0],o[0]),kt(u[1],o[1])})}var rr="__focusNodeAdjacency",sr="__unfocusNodeAdjacency",eo=["itemStyle","opacity"],fh=["lineStyle","opacity"];function Q_(e,t){var n=e.getVisual("opacity");return null!=n?n:e.getModel().get(t)}function ph(e,t,n){var i=e.getGraphicEl(),a=Q_(e,t);null!=n&&(null==a&&(a=1),a*=n),i.downplay&&i.downplay(),i.traverse(function(o){if(!o.isGroup){var r=o.lineLabelOriginalOpacity;null!=r&&null==n||(r=a),o.setStyle("opacity",r)}})}function to(e,t){var n=Q_(e,t),i=e.getGraphicEl();i.traverse(function(a){a.isGroup||a.setStyle("opacity",n)}),i.highlight&&i.highlight()}function gh(e){return e instanceof Array||(e=[e,e]),e}function J_(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(i){var a=i.getModel();i.setLayout([+a.get("x"),+a.get("y")])}),eb(n,e)}}function eb(e,t){e.eachEdge(function(n,i){var a=Qe(n.getModel().get("lineStyle.curveness"),-jp(n,t,i,!0),0),o=Nn(n.node1.getLayout()),r=Nn(n.node2.getLayout()),s=[o,r];+a&&s.push([(o[0]+r[0])/2-(o[1]-r[1])*a,(o[1]+r[1])/2-(r[0]-o[0])*a]),n.setLayout(s)})}an({type:"graph",init:function(e,t){var n=new Xo,i=new dh,a=this.group;this._controller=new nr(t.getZr()),this._controllerHost={target:a},a.add(n.group),a.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(e,t,n){var i=this,a=e.coordinateSystem;this._model=e;var o=this._symbolDraw,r=this._lineDraw,s=this.group;if("view"===a.type){var l={position:a.position,scale:a.scale};this._firstRender?s.attr(l):Ae(s,l,e)}ng(e.getGraph(),Vs(e));var u=e.getData();o.updateData(u);var h=e.getEdgeData();r.updateData(h),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var c=e.forceLayout,d=e.get("force.layoutAnimation");c&&this._startForceLayoutIteration(c,d),u.eachItemGraphicEl(function(g,v){var x=u.getItemModel(v);g.off("drag").off("dragend");var y=x.get("draggable");y&&g.on("drag",function(){c&&(c.warmUp(),this._layouting||this._startForceLayoutIteration(c,d),c.setFixed(v),u.setItemLayout(v,g.position))},this).on("dragend",function(){c&&c.setUnfixed(v)},this),g.setDraggable(y&&c),g[rr]&&g.off("mouseover",g[rr]),g[sr]&&g.off("mouseout",g[sr]),x.get("focusNodeAdjacency")&&(g.on("mouseover",g[rr]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:g.dataIndex})}),g.on("mouseout",g[sr]=function(){i._dispatchUnfocus(n)}))},this),u.graph.eachEdge(function(g){var v=g.getGraphicEl();v[rr]&&v.off("mouseover",v[rr]),v[sr]&&v.off("mouseout",v[sr]),g.getModel().get("focusNodeAdjacency")&&(v.on("mouseover",v[rr]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:g.dataIndex})}),v.on("mouseout",v[sr]=function(){i._dispatchUnfocus(n)}))});var f="circular"===e.get("layout")&&e.get("circular.rotateLabel"),p=u.getLayout("cx"),m=u.getLayout("cy");u.eachItemGraphicEl(function(g,v){var x=u.getItemModel(v).get("label.rotate")||0,y=g.getSymbolPath();if(f){var b=u.getItemLayout(v),_=Math.atan2(b[1]-m,b[0]-p);_<0&&(_=2*Math.PI+_);var w=b[0]<p;w&&(_-=Math.PI);var S=w?"left":"right";Vd(y,{textRotation:-_,textPosition:S,textOrigin:"center"},{textPosition:S})}else Vd(y,{textRotation:x*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var a=e.getData().graph,r=i.edgeDataIndex,s=a.getNodeByIndex(i.dataIndex),l=a.getEdgeByIndex(r);(s||l)&&(a.eachNode(function(u){ph(u,eo,.1)}),a.eachEdge(function(u){ph(u,fh,.1)}),s&&(to(s,eo),I(s.edges,function(u){u.dataIndex<0||(to(u,fh),to(u.node1,eo),to(u.node2,eo))})),l&&(to(l,fh),to(l.node1,eo),to(l.node2,eo)))},unfocusNodeAdjacency:function(e,t,n,i){var a=e.getData().graph;a.eachNode(function(o){ph(o,eo)}),a.eachEdge(function(o){ph(o,fh)})},_startForceLayoutIteration:function(e,t){var n=this;!function i(){e.step(function(a){n.updateLayout(n._model),(n._layouting=!a)&&(t?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(e,t,n){var i=this._controller,a=this._controllerHost,o=this.group;i.setPointerChecker(function(r,s,l){var u=o.getBoundingRect();return u.applyTransform(o.transform),u.contain(s,l)&&!th(r,n,e)}),"view"===e.coordinateSystem.type?(i.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(r){wp(a,r.dx,r.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:r.dx,dy:r.dy})}).on("zoom",function(r){Sp(a,r.scale,r.originX,r.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:r.scale,originX:r.originX,originY:r.originY}),this._updateNodeAndLinkScale(),ng(e.getGraph(),Vs(e)),this._lineDraw.updateLayout()},this)):i.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=Vs(e),i=[n,n];t.eachItemGraphicEl(function(a,o){a.attr("scale",i)})},updateLayout:function(e){ng(e.getGraph(),Vs(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),Be({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),Be({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),Be({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(n){var i=Ip(n.coordinateSystem,e);n.setCenter&&n.setCenter(i.center),n.setZoom&&n.setZoom(i.zoom)})});var tb=Math.PI,ig=[];function nb(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),a=e.getData(),o=a.graph,r=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,u=a.count();a.setLayout({cx:r,cy:s}),u&&(hC[t](e,n,o,a,l,r,s,u),o.eachEdge(function(h,c){var d,f=Qe(h.getModel().get("lineStyle.curveness"),jp(h,e,c),0),p=Nn(h.node1.getLayout()),m=Nn(h.node2.getLayout());+f&&(d=[r*(f*=3)+(p[0]+m[0])/2*(1-f),s*f+(p[1]+m[1])/2*(1-f)]),h.setLayout([p,m,d])}))}}var hC={value:function(e,t,n,i,a,o,r,s){var l=0,u=i.getSum("value"),h=2*Math.PI/(u||s);n.eachNode(function(c){var d=c.getValue("value"),f=h*(u?d:1)/2;l+=f,c.setLayout([a*Math.cos(l)+o,a*Math.sin(l)+r]),l+=f})},symbolSize:function(e,t,n,i,a,o,r,s){var l=0;ig.length=s;var u=Vs(e);n.eachNode(function(d){var f=Fs(d);isNaN(f)&&(f=2),f<0&&(f=0),f*=u;var p=Math.asin(f/2/a);isNaN(p)&&(p=tb/2),ig[d.dataIndex]=p,l+=2*p});var h=(2*tb-l)/s/2,c=0;n.eachNode(function(d){var f=h+ig[d.dataIndex];c+=f,d.setLayout([a*Math.cos(c)+o,a*Math.sin(c)+r]),c+=f})}},lr=wr;fn(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),a=n.getGraph().data,o=i.mapArray(i.getName);a.filterSelf(function(r){var s=a.getItemModel(r).getShallow("category");if(null!=s){"number"==typeof s&&(s=o[s]);for(var l=0;l<t.length;l++)if(!t[l].isSelected(s))return!1}return!0})},this)}),et(Ya("graph","circle",null)),et(function(e){var t={};e.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),a=n.getData(),o={};i.each(function(r){var s=i.getName(r);o["ec-"+s]=r;var l=i.getItemModel(r),u=l.get("itemStyle.color")||n.getColorFromPalette(s,t);i.setItemVisual(r,"color",u);for(var h=["opacity","symbol","symbolSize","symbolKeepAspect"],c=0;c<h.length;c++){var d=l.getShallow(h[c],!0);null!=d&&i.setItemVisual(r,h[c],d)}}),i.count()&&a.each(function(r){var s=a.getItemModel(r).getShallow("category");if(null!=s){"string"==typeof s&&(s=o["ec-"+s]);for(var l=["color","opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++)null==a.getItemVisual(r,l[u],!0)&&a.setItemVisual(r,l[u],i.getItemVisual(s,l[u]))}})})}),et(function(e){e.eachSeriesByType("graph",function(t){var n=t.getGraph(),i=t.getEdgeData(),a=gh(t.get("edgeSymbol")),o=gh(t.get("edgeSymbolSize")),r="lineStyle.color".split("."),s="lineStyle.opacity".split(".");i.setVisual("fromSymbol",a&&a[0]),i.setVisual("toSymbol",a&&a[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("color",t.get(r)),i.setVisual("opacity",t.get(s)),i.each(function(l){var u=i.getItemModel(l),h=n.getEdgeByIndex(l),c=gh(u.getShallow("symbol",!0)),d=gh(u.getShallow("symbolSize",!0)),f=u.get(r),p=u.get(s);switch(f){case"source":f=h.node1.getVisual("color");break;case"target":f=h.node2.getVisual("color")}c[0]&&h.setVisual("fromSymbol",c[0]),c[1]&&h.setVisual("toSymbol",c[1]),d[0]&&h.setVisual("fromSymbolSize",d[0]),d[1]&&h.setVisual("toSymbolSize",d[1]),h.setVisual("color",f),h.setVisual("opacity",p)})})}),ct(function(e,t){e.eachSeriesByType("graph",function(n){var i=n.get("layout"),a=n.coordinateSystem;if(a&&"view"!==a.type){var o=n.getData(),r=[];I(a.dimensions,function(d){r=r.concat(o.mapDimension(d,!0))});for(var s=0;s<o.count();s++){for(var l=[],u=!1,h=0;h<r.length;h++){var c=o.get(r[h],s);isNaN(c)||(u=!0),l.push(c)}o.setItemLayout(s,u?a.dataToPoint(l):[NaN,NaN])}eb(o.graph,n)}else i&&"none"!==i||J_(n)})}),ct(ai.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&nb(t,"symbolSize")})}),ct(function(e){e.eachSeriesByType("graph",function(t){if(!(d=t.coordinateSystem)||"view"===d.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),a=i.data,o=i.edgeData,r=t.getModel("force"),s=r.get("initLayout");t.preservedPoints?a.each(function(x){var y=a.getId(x);a.setItemLayout(x,n[y]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&nb(t,"value"):J_(t);var l=a.getDataExtent("value"),u=o.getDataExtent("value"),h=r.get("repulsion"),c=r.get("edgeLength");z(h)||(h=[h,h]),z(c)||(c=[c,c]),c=[c[1],c[0]];var d,f=a.mapArray("value",function(x,y){var b=a.getItemLayout(y),_=nt(x,l,h);return isNaN(_)&&(_=(h[0]+h[1])/2),{w:_,rep:_,fixed:a.getItemModel(y).get("fixed"),p:!b||isNaN(b[0])||isNaN(b[1])?null:b}}),p=o.mapArray("value",function(x,y){var b=i.getEdgeByIndex(y),_=nt(x,u,c);isNaN(_)&&(_=(c[0]+c[1])/2);var w=b.getModel(),S=Qe(w.get("lineStyle.curveness"),-jp(b,t,y,!0),0);return{n1:f[b.node1.dataIndex],n2:f[b.node2.dataIndex],d:_,curveness:S,ignoreForceLayout:w.get("ignoreForceLayout")}}),m=(d=t.coordinateSystem).getBoundingRect(),g=function(x,y,b){for(var _=b.rect,w=_.width,S=_.height,M=[_.x+w/2,_.y+S/2],T=null==b.gravity?.1:b.gravity,A=0;A<x.length;A++){var C=x[A];C.p||(C.p=Fi(w*(Math.random()-.5)+M[0],S*(Math.random()-.5)+M[1])),C.pp=Nn(C.p),C.edges=null}var D=null==b.friction?.6:b.friction,L=D;return{warmUp:function(){L=.8*D},setFixed:function(P){x[P].fixed=!0},setUnfixed:function(P){x[P].fixed=!1},step:function(P){for(var N=[],R=x.length,k=0;k<y.length;k++){var B=y[k];if(!B.ignoreForceLayout){var G=B.n1;pi(N,(K=B.n2).p,G.p);var W=Sr(N)-B.d,F=K.w/(G.w+K.w);isNaN(F)&&(F=0),xo(N,N),G.fixed||lr(G.p,G.p,N,F*W*L),K.fixed||lr(K.p,K.p,N,-(1-F)*W*L)}}for(k=0;k<R;k++)(le=x[k]).fixed||(pi(N,M,le.p),lr(le.p,le.p,N,T*L));for(k=0;k<R;k++){G=x[k];for(var Y=k+1;Y<R;Y++){var K;pi(N,(K=x[Y]).p,G.p),0===(W=Sr(N))&&($m(N,Math.random()-.5,Math.random()-.5),W=1);var ce=(G.rep+K.rep)/W/W;G.fixed||lr(G.pp,G.pp,N,ce),K.fixed||lr(K.pp,K.pp,N,-ce)}}var U=[];for(k=0;k<R;k++){var le;(le=x[k]).fixed||(pi(U,le.p,le.pp),lr(le.p,le.p,U,L),kt(le.pp,le.p))}L*=.992,P&&P(x,y,L<.01)}}}(f,p,{rect:m,gravity:r.get("gravity"),friction:r.get("friction")}),v=g.step;g.step=function(x){for(var y=0,b=f.length;y<b;y++)f[y].fixed&&kt(f[y].p,i.getNodeByIndex(y).getLayout());v(function(_,w,S){for(var M=0,T=_.length;M<T;M++)_[M].fixed||i.getNodeByIndex(M).setLayout(_[M].p),n[a.getId(M)]=_[M].p;for(M=0,T=w.length;M<T;M++){var A=w[M],C=i.getEdgeByIndex(M),D=A.n1.p,L=A.n2.p,P=C.getLayout();(P=P?P.slice():[])[0]=P[0]||[],P[1]=P[1]||[],kt(P[0],D),kt(P[1],L),+A.curveness&&(P[2]=[(D[0]+L[0])/2-(D[1]-L[1])*A.curveness,(D[1]+L[1])/2-(L[0]-D[0])*A.curveness]),C.setLayout(P)}x&&x(S)})},t.forceLayout=g,t.preservedPoints=n,g.step()}else t.forceLayout=null})}),Of("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",function(i){var g,v,x,a=i.get("coordinateSystem");if(!a||"view"===a){var o=i.getData(),r=[],s=[];Rr(o.mapArray(function(m){var g=o.getItemModel(m);return[+g.get("x"),+g.get("y")]}),r,s),s[0]-r[0]==0&&(s[0]+=1,r[0]-=1),s[1]-r[1]==0&&(s[1]+=1,r[1]-=1);var l=(s[0]-r[0])/(s[1]-r[1]),u=(g=t,v=l,(x=i.getBoxLayoutParams()).aspect=v,vt(x,{width:g.getWidth(),height:g.getHeight()}));isNaN(l)&&(r=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var h=s[0]-r[0],c=s[1]-r[1],d=u.width,f=u.height,p=i.coordinateSystem=new pa;p.zoomLimit=i.get("scaleLimit"),p.setBoundingRect(r[0],r[1],h,c),p.setViewRect(u.x,u.y,d,f),p.setCenter(i.get("center")),p.setZoom(i.get("zoom")),n.push(p)}}),n}}),ht.extend({type:"series.gauge",getInitialData:function(e,t){return Jo(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var cC=Re.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,i=Math.sin,a=t.r,o=t.width,r=t.angle,s=t.x-n(r)*o*(a/3<=o?1:2),l=t.y-i(r)*o*(a/3<=o?1:2);r=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(r)*o,t.y+i(r)*o),e.lineTo(t.x+n(t.angle)*a,t.y+i(t.angle)*a),e.lineTo(t.x-n(r)*o,t.y-i(r)*o),e.lineTo(s,l)}});function ib(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var dC=2*Math.PI,ab=(Pt.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var i=e.get("axisLine.lineStyle.color"),a=function(o,r){var s=o.get("center"),l=r.getWidth(),u=r.getHeight(),h=Math.min(l,u);return{cx:Q(s[0],r.getWidth()),cy:Q(s[1],r.getHeight()),r:Q(o.get("radius"),h/2)}}(e,n);this._renderMain(e,t,n,i,a)},dispose:function(){},_renderMain:function(e,t,n,i,a){for(var o=this.group,r=e.getModel("axisLine"),s=r.getModel("lineStyle"),l=e.get("clockwise"),u=-e.get("startAngle")/180*Math.PI,h=((m=-e.get("endAngle")/180*Math.PI)-u)%dC,c=u,d=s.get("width"),f=r.get("show"),p=0;f&&p<i.length;p++){var m,g=Math.min(Math.max(i[p][0],0),1),v=new Fn({shape:{startAngle:c,endAngle:m=u+h*g,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-d,r:a.r},silent:!0});v.setStyle({fill:i[p][1]}),v.setStyle(s.getLineStyle(["color","borderWidth","borderColor"])),o.add(v),c=m}function x(b){if(b<=0)return i[0][1];for(var _=0;_<i.length;_++)if(i[_][0]>=b&&(0===_?0:i[_-1][0])<b)return i[_][1];return i[_-1][1]}if(!l){var y=u;u=m,m=y}this._renderTicks(e,t,n,x,a,u,m,l),this._renderPointer(e,t,n,x,a,u,m,l),this._renderTitle(e,t,n,x,a),this._renderDetail(e,t,n,x,a)},_renderTicks:function(e,t,n,i,a,o,r,s){for(var l=this.group,u=a.cx,h=a.cy,c=a.r,d=+e.get("min"),f=+e.get("max"),p=e.getModel("splitLine"),m=e.getModel("axisTick"),g=e.getModel("axisLabel"),v=e.get("splitNumber"),x=m.get("splitNumber"),y=Q(p.get("length"),c),b=Q(m.get("length"),c),_=o,w=(r-o)/v,S=w/x,M=p.getModel("lineStyle").getLineStyle(),T=m.getModel("lineStyle").getLineStyle(),A=0;A<=v;A++){var C=Math.cos(_),D=Math.sin(_);if(p.get("show")){var L=new Ot({shape:{x1:C*c+u,y1:D*c+h,x2:C*(c-y)+u,y2:D*(c-y)+h},style:M,silent:!0});"auto"===M.stroke&&L.setStyle({stroke:i(A/v)}),l.add(L)}if(g.get("show")){var P=ib(wt(A/v*(f-d)+d),g.get("formatter")),N=g.get("distance"),R=i(A/v);l.add(new Pe({style:ut({},g,{text:P,x:C*(c-y-N)+u,y:D*(c-y-N)+h,textVerticalAlign:D<-.4?"top":.4<D?"bottom":"middle",textAlign:C<-.4?"left":.4<C?"right":"center"},{autoColor:R}),silent:!0}))}if(m.get("show")&&A!==v){for(var k=0;k<=x;k++){C=Math.cos(_),D=Math.sin(_);var B=new Ot({shape:{x1:C*c+u,y1:D*c+h,x2:C*(c-b)+u,y2:D*(c-b)+h},silent:!0,style:T});"auto"===T.stroke&&B.setStyle({stroke:i((A+k/x)/v)}),l.add(B),_+=S}_-=S}else _+=w}},_renderPointer:function(e,t,n,i,a,o,r,s){var l=this.group,u=this._data;if(e.get("pointer.show")){var h=[+e.get("min"),+e.get("max")],c=[o,r],d=e.getData(),f=d.mapDimension("value");d.diff(u).add(function(p){var m=new cC({shape:{angle:o}});Vt(m,{shape:{angle:nt(d.get(f,p),h,c,!0)}},e),l.add(m),d.setItemGraphicEl(p,m)}).update(function(p,m){var g=u.getItemGraphicEl(m);Ae(g,{shape:{angle:nt(d.get(f,p),h,c,!0)}},e),l.add(g),d.setItemGraphicEl(p,g)}).remove(function(p){var m=u.getItemGraphicEl(p);l.remove(m)}).execute(),d.eachItemGraphicEl(function(p,m){var g=d.getItemModel(m),v=g.getModel("pointer");p.setShape({x:a.cx,y:a.cy,width:Q(v.get("width"),a.r),r:Q(v.get("length"),a.r)}),p.useStyle(g.getModel("itemStyle").getItemStyle()),"auto"===p.style.fill&&p.setStyle("fill",i(nt(d.get(f,m),h,[0,1],!0))),tt(p,g.getModel("emphasis.itemStyle").getItemStyle())}),this._data=d}else u&&u.eachItemGraphicEl(function(p){l.remove(p)})},_renderTitle:function(e,t,n,i,a){var o=e.getData(),r=o.mapDimension("value"),s=e.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),u=a.cx+Q(l[0],a.r),h=a.cy+Q(l[1],a.r),c=+e.get("min"),d=+e.get("max"),f=i(nt(e.getData().get(r,0),[c,d],[0,1],!0));this.group.add(new Pe({silent:!0,style:ut({},s,{x:u,y:h,text:o.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(e,t,n,i,a){var o=e.getModel("detail"),r=+e.get("min"),s=+e.get("max");if(o.get("show")){var l=o.get("offsetCenter"),u=a.cx+Q(l[0],a.r),h=a.cy+Q(l[1],a.r),c=Q(o.get("width"),a.r),d=Q(o.get("height"),a.r),f=e.getData(),p=f.get(f.mapDimension("value"),0),m=i(nt(p,[r,s],[0,1],!0));this.group.add(new Pe({silent:!0,style:ut({},o,{x:u,y:h,text:ib(p,o.get("formatter")),textWidth:isNaN(c)?null:c,textHeight:isNaN(d)?null:d,textAlign:"center",textVerticalAlign:"middle"},{autoColor:m,forceRich:!0})}))}}}),Eu({type:"series.funnel",init:function(e){ab.superApply(this,"init",arguments),this.legendVisualProvider=new ws(Z(this.getData,this),Z(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return Jo(this,{coordDimensions:["value"],encodeDefaulter:V(of,this)})},_defaultLabelLine:function(e){La(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=ab.superCall(this,"getDataParams",e),i=t.mapDimension("value"),a=t.getSum(i);return n.percent=a?+(t.get(i,e)/a*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function ag(e,t){re.call(this);var n=new tn,i=new Mn,a=new Pe;this.add(n),this.add(i),this.add(a),this.highDownOnUpdate=function(o,r){"emphasis"===r?(i.ignore=i.hoverIgnore,a.ignore=a.hoverIgnore):(i.ignore=i.normalIgnore,a.ignore=a.normalIgnore)},this.updateData(e,t,!0)}var ob=ag.prototype,fC=["itemStyle","opacity"];function mh(e,t,n,i,a){_t.call(this,e,t,n),this.type=i||"value",this.axisIndex=a}function no(e,t,n,i,a,o){e=e||0;var r=n[1]-n[0];if(null!=a&&(a=ur(a,[0,r])),null!=o&&(o=Math.max(o,null!=a?a:0)),"all"===i){var s=Math.abs(t[1]-t[0]);a=o=ur(s=ur(s,[0,r]),[a,o]),i=0}t[0]=ur(t[0],n),t[1]=ur(t[1],n);var l=og(t,i);t[i]+=e;var u=a||0,h=n.slice();l.sign<0?h[0]+=u:h[1]-=u,t[i]=ur(t[i],h);var c=og(t,i);return null!=a&&(c.sign!==l.sign||c.span<a)&&(t[1-i]=t[i]+l.sign*a),c=og(t,i),null!=o&&c.span>o&&(t[1-i]=t[i]+c.sign*o),t}function og(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:0<n?-1:n<0?1:t?-1:1}}function ur(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}ob.updateData=function(e,t,n){var i=this.childAt(0),a=e.hostModel,o=e.getItemModel(t),r=e.getItemLayout(t),s=e.getItemModel(t).get(fC);s=null==s?1:s,i.useStyle({}),n?(i.setShape({points:r.points}),i.setStyle({opacity:0}),Vt(i,{style:{opacity:s}},a,t)):Ae(i,{style:{opacity:s},shape:{points:r.points}},a,t);var l=o.getModel("itemStyle"),u=e.getItemVisual(t,"color");i.setStyle(ie({lineJoin:"round",fill:u},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),tt(this)},ob._updateLabel=function(e,t){var n=this.childAt(1),i=this.childAt(2),a=e.hostModel,o=e.getItemModel(t),r=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");Ae(n,{shape:{points:r.linePoints||r.linePoints}},a,t),Ae(i,{style:{x:r.x,y:r.y}},a,t),i.attr({rotation:r.rotation,origin:[r.x,r.y],z2:10});var l=o.getModel("label"),u=o.getModel("emphasis.label"),h=o.getModel("labelLine"),c=o.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color"),cn(i.style,i.hoverStyle={},l,u,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!r.inside},{textAlign:r.textAlign,textVerticalAlign:r.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!h.get("show"),n.hoverIgnore=!c.get("show"),n.setStyle({stroke:s}),n.setStyle(h.getModel("lineStyle").getLineStyle()),n.hoverStyle=c.getModel("lineStyle").getLineStyle()},H(ag,re),Pt.extend({type:"funnel",render:function(e,t,n){var i=e.getData(),a=this._data,o=this.group;i.diff(a).add(function(r){var s=new ag(i,r);i.setItemGraphicEl(r,s),o.add(s)}).update(function(r,s){var l=a.getItemGraphicEl(s);l.updateData(i,r),o.add(l),i.setItemGraphicEl(r,l)}).remove(function(r){var s=a.getItemGraphicEl(r);o.remove(s)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),et(Ku("funnel")),ct(function(e,t,n){e.eachSeriesByType("funnel",function(i){var N,a=i.getData(),o=a.mapDimension("value"),r=i.get("sort"),s=(N=t,vt(i.getBoxLayoutParams(),{width:N.getWidth(),height:N.getHeight()})),l=function(P,N){for(var R=P.mapDimension("value"),k=P.mapArray(R,function(Y){return Y}),B=[],G="ascending"===N,W=0,F=P.count();W<F;W++)B[W]=W;return"function"==typeof N?B.sort(N):"none"!==N&&B.sort(function(Y,K){return G?k[Y]-k[K]:k[K]-k[Y]}),B}(a,r),u=i.get("orient"),h=s.width,c=s.height,d=s.x,f=s.y,p="horizontal"===u?[Q(i.get("minSize"),c),Q(i.get("maxSize"),c)]:[Q(i.get("minSize"),h),Q(i.get("maxSize"),h)],m=a.getDataExtent(o),g=i.get("min"),v=i.get("max");function x(P,N){if("horizontal"===u){var R,k=nt(a.get(o,P)||0,[g,v],p,!0);switch(y){case"top":R=f;break;case"center":R=f+(c-k)/2;break;case"bottom":R=f+(c-k)}return[[N,R],[N,R+k]]}var B,G=nt(a.get(o,P)||0,[g,v],p,!0);switch(y){case"left":B=d;break;case"center":B=d+(h-G)/2;break;case"right":B=d+h-G}return[[B,N],[B+G,N]]}null==g&&(g=Math.min(m[0],0)),null==v&&(v=m[1]);var P,y=i.get("funnelAlign"),b=i.get("gap"),_=(("horizontal"===u?h:c)-b*(a.count()-1))/a.count();"ascending"===r&&(_=-_,b=-b,"horizontal"===u?d+=h:f+=c,l=l.reverse());for(var w=0;w<l.length;w++){var S=l[w],M=l[w+1],T=a.getItemModel(S);if("horizontal"===u){var A=T.get("itemStyle.width");null==A?A=_:(A=Q(A,h),"ascending"===r&&(A=-A));var C=x(S,d),D=x(M,d+A);d+=A+b,a.setItemLayout(S,{points:C.concat(D.slice().reverse())})}else{var L=T.get("itemStyle.height");null==L?L=_:(L=Q(L,c),"ascending"===r&&(L=-L)),C=x(S,"horizontal"===u?d:f),D=x(M,"horizontal"===u?d+A:f+L),f+=L+b,a.setItemLayout(S,{points:C.concat(D.slice().reverse())})}}(P=a).each(function(N){var R,k,B,G,W=P.getItemModel(N),F=W.getModel("label").get("position"),Y=W.get("orient"),K=W.getModel("labelLine"),ce=P.getItemLayout(N),U=ce.points,le="inner"===F||"inside"===F||"center"===F||"insideLeft"===F||"insideRight"===F;if(le)R="insideLeft"===F?(k=(U[0][0]+U[3][0])/2+5,B=(U[0][1]+U[3][1])/2,"left"):"insideRight"===F?(k=(U[1][0]+U[2][0])/2-5,B=(U[1][1]+U[2][1])/2,"right"):(k=(U[0][0]+U[1][0]+U[2][0]+U[3][0])/4,B=(U[0][1]+U[1][1]+U[2][1]+U[3][1])/4,"center"),G=[[k,B],[k,B]];else{var de,xe,He,Ve,Ye=K.get("length");R="left"===F?(xe=(U[3][1]+U[0][1])/2,k=(He=(de=(U[3][0]+U[0][0])/2)-Ye)-5,"right"):"right"===F?(xe=(U[1][1]+U[2][1])/2,k=(He=(de=(U[1][0]+U[2][0])/2)+Ye)+5,"left"):"top"===F?(de=(U[3][0]+U[0][0])/2,B=(Ve=(xe=(U[3][1]+U[0][1])/2)-Ye)-5,"center"):"bottom"===F?(de=(U[1][0]+U[2][0])/2,B=(Ve=(xe=(U[1][1]+U[2][1])/2)+Ye)+5,"center"):"rightTop"===F?(de="horizontal"===Y?U[3][0]:U[1][0],xe="horizontal"===Y?U[3][1]:U[1][1],"horizontal"===Y?(B=(Ve=xe-Ye)-5,"center"):(k=(He=de+Ye)+5,"top")):"rightBottom"===F?(de=U[2][0],xe=U[2][1],"horizontal"===Y?(B=(Ve=xe+Ye)+5,"center"):(k=(He=de+Ye)+5,"bottom")):"leftTop"===F?(de=U[0][0],xe="horizontal"===Y?U[0][1]:U[1][1],"horizontal"===Y?(B=(Ve=xe-Ye)-5,"center"):(k=(He=de-Ye)-5,"right")):"leftBottom"===F?(de="horizontal"===Y?U[1][0]:U[3][0],xe="horizontal"===Y?U[1][1]:U[2][1],"horizontal"===Y?(B=(Ve=xe+Ye)+5,"center"):(k=(He=de-Ye)-5,"right")):(de=(U[1][0]+U[2][0])/2,xe=(U[1][1]+U[2][1])/2,"horizontal"===Y?(B=(Ve=xe+Ye)+5,"center"):(k=(He=de+Ye)+5,"left")),"horizontal"===Y?k=He=de:B=Ve=xe,G=[[de,xe],[He,Ve]]}ce.label={linePoints:G,x:k,y:B,verticalAlign:"middle",textAlign:R,inside:le}})})}),fn(Ss("funnel")),mh.prototype={constructor:mh,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},H(mh,_t);var rg=I,rb=Math.min,sb=Math.max,lb=Math.floor,pC=Math.ceil,ub=wt,gC=Math.PI;function sg(e,t,n){this._axesMap=ne(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}function vh(e,t){return rb(sb(e,t[0]),t[1])}sg.prototype={type:"parallel",constructor:sg,_init:function(e,t,n){var a=e.parallelAxisIndex;rg(e.dimensions,function(o,r){var s=a[r],l=t.getComponent("parallelAxis",s),u=this._axesMap.set(o,new mh(o,jo(l),[0,0],l.get("type"),s));u.onBand="category"===u.type&&l.get("boundaryGap"),u.inverse=l.get("inverse"),(l.axis=u).model=l,u.coordinateSystem=l.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],r=e[a];return n<=o&&o<=n+t.axisLength&&i<=r&&r<=i+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var i=n.getData();rg(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),la(o.scale,o.model)},this)}},this)},resize:function(e,t){this._rect=vt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,i=["x","y"],a=["width","height"],o=t.get("layout"),r="horizontal"===o?0:1,s=n[a[r]],l=[0,s],u=this.dimensions.length,h=vh(t.get("axisExpandWidth"),l),c=vh(t.get("axisExpandCount")||0,[0,u]),d=t.get("axisExpandable")&&3<u&&c<u&&1<c&&0<h&&0<s,f=t.get("axisExpandWindow");f?(e=vh(f[1]-f[0],l),f[1]=f[0]+e):(e=vh(h*(c-1),l),(f=[h*(t.get("axisExpandCenter")||lb(u/2))-e/2])[1]=f[0]+e);var p=(s-e)/(u-c);p<3&&(p=0);var m=[lb(ub(f[0]/h,1))+1,pC(ub(f[1]/h,1))-1];return{layout:o,pixelDimIndex:r,layoutBase:n[i[r]],layoutLength:s,axisBase:n[i[1-r]],axisLength:n[a[1-r]],axisExpandable:d,axisExpandWidth:h,axisCollapseWidth:p,axisExpandWindow:f,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:p/h*f[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(o){var r=[0,i.axisLength],s=o.inverse?1:0;o.setExtent(r[s],r[1-s])}),rg(n,function(o,r){var s=(i.axisExpandable?function(f,p){var m,g,x=p.axisExpandWidth,b=p.axisCollapseWidth,_=p.winInnerIndices,w=b,S=!1;return f<_[0]?(m=f*b,g=b):f<=_[1]?(m=p.axisExpandWindow0Pos+f*x-p.axisExpandWindow[0],w=x,S=!0):(m=p.layoutLength-(p.axisCount-1-f)*b,g=b),{position:m,axisNameAvailableWidth:w,axisLabelShow:S,nameTruncateMaxWidth:g}}:function(f,p){var m=p.layoutLength/(p.axisCount-1);return{position:m*f,axisNameAvailableWidth:m,axisLabelShow:!0}})(r,i),l={horizontal:{x:s.position,y:i.axisLength},vertical:{x:0,y:s.position}},h=[l[a].x+e.x,l[a].y+e.y],c={horizontal:gC/2,vertical:0}[a],d=qt();yi(d,d,c),En(d,d,h),this._axesLayout[o]={position:h,rotation:c,transform:d,axisNameAvailableWidth:s.axisNameAvailableWidth,axisLabelShow:s.axisLabelShow,nameTruncateMaxWidth:s.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,i){null==n&&(n=0),null==i&&(i=e.count());var a=this._axesMap,o=this.dimensions,r=[],s=[];I(o,function(p){r.push(e.mapDimension(p)),s.push(a.get(p).model)});for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var h;if(l){h="active";for(var c=e.getValues(r,u),d=0,f=o.length;d<f;d++)if("inactive"===s[d].getActiveState(c[d])){h="inactive";break}}else h="normal";t(h,u)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,i=0,a=e.length;i<a;i++)"normal"!==t.get(e[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return ni([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return ue(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var r,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",u=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),c=null!=h[0];return u?(c&&u&&s<a*h[0]?(l="jump",r=s-a*h[2]):c&&u&&s>a*(1-h[0])?(l="jump",r=s-a*(1-h[2])):0<=(r=s-a*h[1])&&(r=s-a*(1-h[1]))<=0&&(r=0),(r*=t.axisExpandWidth/u)?no(r,i,o,"all"):l="none"):((i=[sb(0,o[1]*s/(a=i[1]-i[0])-a/2)])[1]=rb(o[1],i[0]+a),i[0]=i[1]-a),{axisExpandWindow:i,behavior:l}}},Gt.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",function(i,a){var o=new sg(i,e,t);o.name="parallel_"+a,o.resize(i,t),(i.coordinateSystem=o).model=i,n.push(o)}),e.eachSeries(function(i){if("parallel"===i.get("coordinateSystem")){var a=e.queryComponents({mainType:"parallel",index:i.get("parallelIndex"),id:i.get("parallelId")})[0];i.coordinateSystem=a.coordinateSystem}}),n}});var hb=Ge.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Lo([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=ue(e);if(t)for(var n=t.length-1;0<=n;n--)Ba(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var i=0,a=t.length;i<a;i++)if(t[i][0]<=e&&e<=t[i][1])return"active";return"inactive"}});pe(hb.prototype,ja),qo("parallel",hb,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Ge.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Ge.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&pe(this.option,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){I(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];I(se(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})}}),Be({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),Be("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})});var ma=V,hi=I,mC=O,Gs=Math.min,hr=Math.max,vC=Math.pow,bC={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},wC={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},db={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},SC=0;function cr(e){It.call(this),this._zr=e,this.group=new re,this._track=[],this._covers=[],this._uid="brushController_"+SC++,this._handlers={},hi(IC,function(t,n){this._handlers[n]=Z(t,this)},this)}function fb(e,t){var n=yh[t.brushType].createCover(e,t);return n.__brushOption=t,mb(n,t),e.group.add(n),n}function pb(e,t){var n=ug(t);return n.endCreating&&(n.endCreating(e,t),mb(t,t.__brushOption)),t}function gb(e,t){var n=t.__brushOption;ug(t).updateCoverShape(e,t,n.range,n)}function mb(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(i){i.z=n,i.z2=n})}function lg(e,t){ug(t).updateCommon(e,t),gb(e,t)}function ug(e){return yh[e.__brushOption.brushType]}function hg(e,t,n){var i,a=e._panels;if(!a)return!0;var o=e._transform;return hi(a,function(r){r.isTargetByCursor(t,n,o)&&(i=r)}),i}function vb(e,t){var n=e._panels;if(!n)return!0;var i=t.__brushOption.panelId;return null==i||n[i]}function cg(e){var t=e._covers,n=t.length;return hi(t,function(i){e.group.remove(i)},e),t.length=0,!!n}function io(e,t){var n=mC(e._covers,function(i){var a=i.__brushOption,o=ue(a.range);return{brushType:a.brushType,panelId:a.panelId,range:o}});e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function yb(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function xb(e,t,n,i){var a=new re;return a.add(new Fe({name:"main",style:fg(n),silent:!0,draggable:!0,cursor:"move",drift:ma(e,t,a,"nswe"),ondragend:ma(io,t,{isEnd:!0})})),hi(i,function(o){a.add(new Fe({name:o,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:ma(e,t,a,o),ondragend:ma(io,t,{isEnd:!0})}))}),a}function _b(e,t,n,i){var a=i.brushStyle.lineWidth||0,o=hr(a,6),r=n[0][0],s=n[1][0],l=r-a/2,u=s-a/2,h=n[0][1],c=n[1][1],d=h-o+a/2,f=c-o+a/2,p=h-r,m=c-s,g=p+a,v=m+a;Ni(e,t,"main",r,s,p,m),i.transformable&&(Ni(e,t,"w",l,u,o,v),Ni(e,t,"e",d,u,o,v),Ni(e,t,"n",l,u,g,o),Ni(e,t,"s",l,f,g,o),Ni(e,t,"nw",l,u,o,o),Ni(e,t,"ne",d,u,o,o),Ni(e,t,"sw",l,f,o,o),Ni(e,t,"se",d,f,o,o))}function dg(e,t){var n=t.__brushOption,i=n.transformable,a=t.childAt(0);a.useStyle(fg(n)),a.attr({silent:!i,cursor:i?"move":"default"}),hi(["w","e","n","s","se","sw","ne","nw"],function(o){var r=t.childOfName(o),s=function l(u,h){return 1<h.length?("e"!==(f=[l(u,(h=h.split(""))[0]),l(u,h[1])])[0]&&"w"!==f[0]||f.reverse(),f.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[f=Gd({w:"left",e:"right",n:"top",s:"bottom"}[h],za(u.group))];var f}(e,o);r&&r.attr({silent:!i,invisible:!i,cursor:i?wC[s]+"-resize":null})})}function Ni(e,t,n,i,a,o,r){var l,u,h,s=t.childOfName(n);s&&s.setShape((l=pg(e,t,[[i,a],[i+o,a+r]]),{x:u=Gs(l[0][0],l[1][0]),y:h=Gs(l[0][1],l[1][1]),width:hr(l[0][0],l[1][0])-u,height:hr(l[0][1],l[1][1])-h}))}function fg(e){return ie({strokeNoScale:!0},e.brushStyle)}function bb(e,t,n,i){var a=[Gs(e,n),Gs(t,i)],o=[hr(e,n),hr(t,i)];return[[a[0],o[0]],[a[1],o[1]]]}function wb(e,t,n,i,a,o,r,s){var l=i.__brushOption,u=e(l.range),h=Sb(n,o,r);hi(a.split(""),function(c){var d=bC[c];u[d[0]][d[1]]+=h[d[0]]}),l.range=t(bb(u[0][0],u[1][0],u[0][1],u[1][1])),lg(n,i),io(n,{isEnd:!1})}function MC(e,t,n,i,a){var o=t.__brushOption.range,r=Sb(e,n,i);hi(o,function(s){s[0]+=r[0],s[1]+=r[1]}),lg(e,t),io(e,{isEnd:!1})}function Sb(e,t,n){var i=e.group,a=i.transformCoordToLocal(t,n),o=i.transformCoordToLocal(0,0);return[a[0]-o[0],a[1]-o[1]]}function pg(e,t,n){var i=vb(e,t);return i&&!0!==i?i.clipPath(n,e._transform):ue(n)}function gg(e){var t=e.event;t.preventDefault&&t.preventDefault()}function mg(e,t,n){return e.childOfName("main").contain(t,n)}function Mb(e,t,n,i){var a,o=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(h){var c=h._track;if(!c.length)return!1;var d=c[c.length-1],f=c[0],p=d[0]-f[0],m=d[1]-f[1];return 6<vC(p*p+m*m,.5)}(e)||o){if(r&&!o){"single"===s.brushMode&&cg(e);var l=ue(s);l.brushType=Ib(l.brushType,r),l.panelId=!0===r?null:r.panelId,o=e._creatingCover=fb(e,l),e._covers.push(o)}if(o){var u=yh[Ib(e._brushType,r)];o.__brushOption.range=u.getCreatingRange(pg(e,o,e._track)),i&&(pb(e,o),u.updateCommon(e,o)),gb(e,o),a={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&hg(e,t,n)&&cg(e)&&(a={isEnd:i,removeOnClick:!0});return a}function Ib(e,t){return"auto"===e?t.defaultBrushType:e}cr.prototype={constructor:cr,enableBrush:function(e){return this._brushType&&function(t){var n=t._zr;(function(i,a,o){var r=_p(i);r[a]===o&&(r[a]=null)})(n,"globalPan",t._uid),function(i,a){hi(a,function(o,r){i.off(r,o)})}(n,t._handlers),t._brushType=t._brushOption=null}(this),e.brushType&&function(t,n){var i=t._zr;t._enableGlobalPan||function(a,o,r){_p(a).globalPan=r}(i,0,t._uid),function(a,o){hi(o,function(r,s){a.on(s,r)})}(i,t._handlers),t._brushType=n.brushType,t._brushOption=pe(ue(db),n,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};I(e,function(n){t[n.panelId]=ue(n)})}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){hi(this._covers,e,t)},updateCovers:function(e){e=O(e,function(l){return pe(ue(db),l,!0)});var n=this._covers,i=this._covers=[],a=this,o=this._creatingCover;return new Di(n,e,function(l,u){return r(l.__brushOption,u)},r).add(s).update(s).remove(function(l){n[l]!==o&&a.group.remove(n[l])}).execute(),this;function r(l,u){return(null!=l.id?l.id:"\0-brush-index-"+u)+"-"+l.brushType}function s(l,u){var h=e[l];if(null!=u&&n[u]===o)i[l]=n[u];else{var c=i[l]=null!=u?(n[u].__brushOption=h,n[u]):pb(a,fb(a,h));lg(a,c)}}},unmount:function(){return this.enableBrush(!1),cg(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},j(cr,It);var IC={mousedown:function(e){if(this._dragging)Tb(this,e);else if(!e.target||!e.target.draggable){gg(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=hg(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var i=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(o,r,s){if(o._brushType&&(g=o._zr,!((p=r)<0||p>g.getWidth()||undefined>g.getHeight()))){var l=o._zr,u=o._covers,h=hg(o,r,s);if(!o._dragging)for(var c=0;c<u.length;c++){var d=u[c].__brushOption;if(h&&(!0===h||d.panelId===h.panelId)&&yh[d.brushType].contain(u[c],s[0],s[1]))return}h&&l.setCursorStyle("crosshair")}var p,g}(this,e,i),this._dragging){gg(e);var a=Mb(this,e,i,!1);a&&io(this,a)}},mouseup:function(e){Tb(this,e)}};function Tb(e,t){if(e._dragging){gg(t);var a=e.group.transformCoordToLocal(t.offsetX,t.offsetY),o=Mb(e,t,a,!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&io(e,o)}}var yh={lineX:Ab(0),lineY:Ab(1),rect:{createCover:function(e,t){return xb(ma(wb,function(n){return n},function(n){return n}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=yb(e);return bb(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,i){_b(e,t,n,i)},updateCommon:dg,contain:mg},polygon:{createCover:function(e,t){var n=new re;return n.add(new Mn({name:"main",style:fg(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new tn({name:"main",draggable:!0,drift:ma(MC,e,t),ondragend:ma(io,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,i){t.childAt(0).setShape({points:pg(e,t,n)})},updateCommon:dg,contain:mg}};function Ab(e){return{createCover:function(t,n){return xb(ma(wb,function(i){var a=[i,[0,100]];return e&&a.reverse(),a},function(i){return i[e]}),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=yb(t);return[Gs(n[0][e],n[1][e]),hr(n[0][e],n[1][e])]},updateCoverShape:function(t,n,i,a){var o,r=vb(t,n);if(!0!==r&&r.getLinearBrushOtherExtent)o=r.getLinearBrushOtherExtent(e,t._transform);else{var s=t._zr;o=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,o];e&&l.reverse(),_b(t,n,l,a)},updateCommon:dg,contain:mg}}function Cb(e){return e=vg(e),function(t,n){return Yv(t,e)}}function Db(e,t){return e=vg(e),function(n){var i=null!=t?t:n,o=i?e.x:e.y;return[o,o+((i?e.width:e.height)||0)]}}function Lb(e,t,n){return e=vg(e),function(i,a,o){return e.contain(a[0],a[1])&&!th(i,t,n)}}function vg(e){return Le.create(e)}var TC=["axisLine","axisTickLabel","axisName"],AC=At({type:"parallelAxis",init:function(e,t){AC.superApply(this,"init",arguments),(this._brushController=new cr(t.getZr())).on("brush",Z(this._onBrush,this))},render:function(e,t,n,i){if(f=e,!(m=i)||"axisAreaSelect"!==m.type||t.findComponents({mainType:"parallelAxis",query:m})[0]!==f){this.axisModel=e,this.api=n,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new re,this.group.add(this._axisGroup),e.get("show")){var o=function(f,p){return p.getComponent("parallel",f.get("parallelIndex"))}(e,t),r=o.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,h=fe({strokeContainThreshold:l},r.getAxisLayout(e.axis.dim)),c=new rn(e,h);I(TC,c.add,c),this._axisGroup.add(c.getGroup()),this._refreshBrushController(h,s,e,o,l,n),ru(a,this._axisGroup,i&&!1===i.animation?null:e)}}var f,m},_refreshBrushController:function(e,t,n,i,a,o){var h,c,r=n.axis.getExtent(),s=r[1]-r[0],l=Math.min(30,.1*Math.abs(s)),u=Le.create({x:r[0],y:-a/2,width:s,height:a});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:Cb(u),isTargetByCursor:Lb(u,o,i),getLinearBrushOtherExtent:Db(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((c=(h=n).axis,O(h.activeIntervals,function(d){return{brushType:"lineX",panelId:"pl",range:[c.dataToCoord(d[0],!0),c.dataToCoord(d[1],!0)]}})))},_onBrush:function(e,t){var n=this.axisModel,i=n.axis,a=O(e,function(o){return[i.coordToData(o.range[0],!0),i.coordToData(o.range[1],!0)]});!n.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:a})},dispose:function(){this._brushController.dispose()}});At({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},I(CC,function(i,a){n.getZr().on(a,this._handlers[a]=Z(i,this))},this)),is(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){I(this._handlers,function(n,i){t.getZr().off(i,n)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(fe({type:"parallelAxisExpand"},e))}});var CC={mousedown:function(e){yg(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(yg(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&yg(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};function yg(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}function Pb(e,t,n,i){for(var a,o=[],r=0;r<n.length;r++){var s=n[r],l=e.get(e.mapDimension(s),t);a=l,("category"===i.getAxis(s).type?null==a:null==a||isNaN(a))||o.push(i.dataToPoint(l,s))}return o}function kb(e,t,n,i,a){var o=Pb(e,n,i,a),r=new Mn({shape:{points:o},silent:!0,z2:10});return t.add(r),e.setItemGraphicEl(n,r),r}function Nb(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function xg(e,t,n,i){var a=i.lineStyle;t.hasItemOption&&(a=t.getItemModel(n).getModel("lineStyle").getLineStyle()),e.useStyle(a);var o=e.style;o.fill=null,o.stroke=t.getItemVisual(n,"color"),o.opacity=t.getItemVisual(n,"opacity"),i.smooth&&(e.shape.smooth=i.smooth)}zt(function(e){(function(t){if(!t.parallel){var n=!1;I(t.series,function(i){i&&"parallel"===i.type&&(n=!0)}),n&&(t.parallel=[{}])}})(e),function(t){I(Et(t.parallelAxis),function(n){if(X(n)){var i=n.parallelIndex||0,a=Et(t.parallel)[i];a&&a.parallelAxisDefault&&pe(n,a.parallelAxisDefault,!1)}})}(e)}),ht.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(i,a){if(!i.encodeDefine){var o=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(o){var r=i.encodeDefine=ne();I(o.dimensions,function(s){var l=+s.replace("dim","");r.set(s,l)})}}}(n,this),Pi(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),i=[];return t.eachActiveState(n,function(a,o){e===a&&i.push(n.getRawIndex(o))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Pt.extend({type:"parallel",init:function(){this._dataGroup=new re,this.group.add(this._dataGroup)},render:function(e,t,n,i){var c,d,p,m,g,v,a=this._dataGroup,o=e.getData(),r=this._data,s=e.coordinateSystem,l=s.dimensions,u=Nb(e);if(o.diff(r).add(function(c){xg(kb(o,a,c,l,s),o,c,u)}).update(function(c,d){var f=r.getItemGraphicEl(d),p=Pb(o,c,l,s);o.setItemGraphicEl(c,f),Ae(f,{shape:{points:p}},i&&!1===i.animation?null:e,c),xg(f,o,c,u)}).remove(function(c){var d=r.getItemGraphicEl(c);a.remove(d)}).execute(),!this._initialized){this._initialized=!0;var h=(d=e,p=(c=s).model,m=c.getRect(),g=new Fe({shape:{x:m.x,y:m.y,width:m.width,height:m.height}}),v="horizontal"===p.get("layout")?"width":"height",g.setShape(v,0),Vt(g,{shape:{width:m.width,height:m.height}},d,function(){setTimeout(function(){a.removeClipPath()})}),g);a.setClipPath(h)}this._data=o},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var i=t.getData(),a=t.coordinateSystem,o=a.dimensions,r=Nb(t),s=e.start;s<e.end;s++){var l=kb(i,this._dataGroup,s,o,a);l.incremental=!0,xg(l,i,s,r)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var DC=["lineStyle","normal","opacity"];et({seriesType:"parallel",reset:function(e,t,n){var i=e.getModel("itemStyle"),a=e.getModel("lineStyle"),o=t.get("color"),r=a.get("color")||i.get("color")||o[e.seriesIndex%o.length],s=e.get("inactiveOpacity"),l=e.get("activeOpacity"),u=e.getModel("lineStyle").getLineStyle(),h=e.coordinateSystem,c=e.getData(),d={normal:u.opacity,active:l,inactive:s};return c.setVisual("color",r),{progress:function(f,p){h.eachActiveState(p,function(m,g){var v=d[m];if("normal"===m&&p.hasItemOption){var x=p.getItemModel(g).get(DC,!0);null!=x&&(v=x)}p.setItemVisual(g,"opacity",v)},f.start,f.end)}}}});var Eb=ht.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,i=e.data||e.nodes,a=e.levels,o=this.levelModels={},r=0;r<a.length;r++)null!=a[r].depth&&0<=a[r].depth&&(o[a[r].depth]=new ze(a[r],this,t));if(i&&n)return W_(i,n,this,!0,function(s,l){s.wrapMethod("getItemModel",function(u,h){return u.customizeGetParent(function(c){var d=this.parentModel,f=d.getData().getItemLayout(h).depth;return d.levelModels[f]||this.parentModel}),u}),l.wrapMethod("getItemModel",function(u,h){return u.customizeGetParent(function(c){var d=this.parentModel,f=d.getGraph().getEdgeByIndex(h).node1.getLayout().depth;return d.levelModels[f]||this.parentModel}),u})}).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var i=this.getDataParams(e,n),a=i.data,o=a.source+" -- "+a.target;return i.value&&(o+=" : "+i.value),ot(o)}if("node"!==n)return Eb.superCall(this,"formatTooltip",e,t);var r=this.getGraph().getNodeByIndex(e).getLayout().value,s=this.getDataParams(e,n).data.name;return r&&(o=s+" : "+r),ot(o)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=Eb.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var i=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=i}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),Ob=["itemStyle","opacity"],ao=["emphasis","itemStyle","opacity"],Rb=["lineStyle","opacity"],xh=["emphasis","lineStyle","opacity"];function zb(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function _h(e,t,n){var i=e.getGraphicEl(),a=zb(e,t);null!=n&&(null==a&&(a=1),a*=n),i.downplay&&i.downplay(),i.traverse(function(o){"group"!==o.type&&o.setStyle("opacity",a)})}function Un(e,t){var n=zb(e,t),i=e.getGraphicEl();i.traverse(function(a){"group"!==a.type&&a.setStyle("opacity",n)}),i.highlight&&i.highlight()}var LC=In({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function Bb(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function _g(e,t,n,i,a){var o="vertical"===a?"x":"y";I(e,function(r){var s,l,u;r.sort(function(p,m){return p.getLayout()[o]-m.getLayout()[o]});for(var h=0,c=r.length,d="vertical"===a?"dx":"dy",f=0;f<c;f++)0<(u=h-(l=r[f]).getLayout()[o])&&(s=l.getLayout()[o]+u,l.setLayout("vertical"===a?{x:s}:{y:s},!0)),h=l.getLayout()[o]+l.getLayout()[d]+t;if(0<(u=h-t-("vertical"===a?i:n)))for(s=l.getLayout()[o]-u,l.setLayout("vertical"===a?{x:s}:{y:s},!0),h=s,f=c-2;0<=f;--f)0<(u=(l=r[f]).getLayout()[o]+l.getLayout()[d]+t-h)&&(s=l.getLayout()[o]-u,l.setLayout("vertical"===a?{x:s}:{y:s},!0)),h=l.getLayout()[o]})}function PC(e,t,n){I(e.slice().reverse(),function(i){I(i,function(a){if(a.outEdges.length){var o=ya(a.outEdges,kC,n)/ya(a.outEdges,bh,n);if(isNaN(o)){var r=a.outEdges.length;o=r?ya(a.outEdges,NC,n)/r:0}if("vertical"===n){var s=a.getLayout().x+(o-va(a,n))*t;a.setLayout({x:s},!0)}else{var l=a.getLayout().y+(o-va(a,n))*t;a.setLayout({y:l},!0)}}})})}function kC(e,t){return va(e.node2,t)*e.getValue()}function NC(e,t){return va(e.node2,t)}function EC(e,t){return va(e.node1,t)*e.getValue()}function OC(e,t){return va(e.node1,t)}function va(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function bh(e){return e.getValue()}function ya(e,t,n){for(var i=0,a=e.length,o=-1;++o<a;){var r=+t.call(e,e[o],n);isNaN(r)||(i+=r)}return i}function RC(e,t,n){I(e,function(i){I(i,function(a){if(a.inEdges.length){var o=ya(a.inEdges,EC,n)/ya(a.inEdges,bh,n);if(isNaN(o)){var r=a.inEdges.length;o=r?ya(a.inEdges,OC,n)/r:0}if("vertical"===n){var s=a.getLayout().x+(o-va(a,n))*t;a.setLayout({x:s},!0)}else{var l=a.getLayout().y+(o-va(a,n))*t;a.setLayout({y:l},!0)}}})})}an({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var d,f,m,i=this,a=e.getGraph(),o=this.group,r=e.layoutInfo,s=r.width,l=r.height,u=e.getData(),h=e.getData("edge"),c=e.get("orient");this._model=e,o.removeAll(),o.attr("position",[r.x,r.y]),a.eachEdge(function(d){var f=new LC;f.dataIndex=d.dataIndex,f.seriesIndex=e.seriesIndex,f.dataType="edge";var p,m,g,v,x,y,b,_,w=d.getModel("lineStyle"),S=w.get("curveness"),M=d.node1.getLayout(),T=d.node1.getModel(),A=T.get("localX"),C=T.get("localY"),D=d.node2.getLayout(),L=d.node2.getModel(),P=L.get("localX"),N=L.get("localY"),R=d.getLayout();switch(f.shape.extent=Math.max(1,R.dy),_="vertical"===(f.shape.orient=c)?(x=p=(null!=A?A*s:M.x)+R.sy,y=(m=(null!=C?C*l:M.y)+M.dy)*(1-S)+(v=null!=N?N*l:D.y)*S,b=g=(null!=P?P*s:D.x)+R.ty,m*S+v*(1-S)):(x=(p=(null!=A?A*s:M.x)+M.dx)*(1-S)+(g=null!=P?P*s:D.x)*S,y=m=(null!=C?C*l:M.y)+R.sy,b=p*S+g*(1-S),v=(null!=N?N*l:D.y)+R.ty),f.setShape({x1:p,y1:m,x2:g,y2:v,cpx1:x,cpy1:y,cpx2:b,cpy2:_}),f.setStyle(w.getItemStyle()),f.style.fill){case"source":f.style.fill=d.node1.getVisual("color");break;case"target":f.style.fill=d.node2.getVisual("color")}tt(f,d.getModel("emphasis.lineStyle").getItemStyle()),o.add(f),h.setItemGraphicEl(d.dataIndex,f)}),a.eachNode(function(d){var f=d.getLayout(),p=d.getModel(),m=p.get("localX"),g=p.get("localY"),v=p.getModel("label"),x=p.getModel("emphasis.label"),y=new Fe({shape:{x:null!=m?m*s:f.x,y:null!=g?g*l:f.y,width:f.dx,height:f.dy},style:p.getModel("itemStyle").getItemStyle()}),b=d.getModel("emphasis.itemStyle").getItemStyle();cn(y.style,b,v,x,{labelFetcher:e,labelDataIndex:d.dataIndex,defaultText:d.id,isRectText:!0}),y.setStyle("fill",d.getVisual("color")),tt(y,b),o.add(y),u.setItemGraphicEl(d.dataIndex,y),y.dataType="node"}),u.eachItemGraphicEl(function(d,f){var p=u.getItemModel(f);p.get("draggable")&&(d.drift=function(m,g){i._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=g,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(f),localX:this.shape.x/s,localY:this.shape.y/l})},d.ondragend=function(){i._focusAdjacencyDisabled=!1},d.draggable=!0,d.cursor="move"),d.highlight=function(){this.trigger("emphasis")},d.downplay=function(){this.trigger("normal")},d.focusNodeAdjHandler&&d.off("mouseover",d.focusNodeAdjHandler),d.unfocusNodeAdjHandler&&d.off("mouseout",d.unfocusNodeAdjHandler),p.get("focusNodeAdjacency")&&(d.on("mouseover",d.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:d.dataIndex}))}),d.on("mouseout",d.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),h.eachItemGraphicEl(function(d,f){var p=h.getItemModel(f);d.focusNodeAdjHandler&&d.off("mouseover",d.focusNodeAdjHandler),d.unfocusNodeAdjHandler&&d.off("mouseout",d.unfocusNodeAdjHandler),p.get("focusNodeAdjacency")&&(d.on("mouseover",d.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:d.dataIndex}))}),d.on("mouseout",d.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),!this._data&&e.get("animation")&&o.setClipPath((d=o.getBoundingRect(),f=e,Vt(m=new Fe({shape:{x:d.x-10,y:d.y-10,width:0,height:d.height+20}}),{shape:{width:d.width+20}},f,function(){o.removeClipPath()}),m)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,i){var a=e.getData(),o=a.graph,r=i.dataIndex,s=a.getItemModel(r),l=i.edgeDataIndex;if(null!=r||null!=l){var u=o.getNodeByIndex(r),h=o.getEdgeByIndex(l);if(o.eachNode(function(d){_h(d,Ob,.1)}),o.eachEdge(function(d){_h(d,Rb,.1)}),u){Un(u,ao);var c=s.get("focusNodeAdjacency");"outEdges"===c?I(u.outEdges,function(d){d.dataIndex<0||(Un(d,xh),Un(d.node2,ao))}):"inEdges"===c?I(u.inEdges,function(d){d.dataIndex<0||(Un(d,xh),Un(d.node1,ao))}):"allEdges"===c&&I(u.edges,function(d){d.dataIndex<0||(Un(d,xh),d.node1!==u&&Un(d.node1,ao),d.node2!==u&&Un(d.node2,ao))})}h&&(Un(h,xh),Un(h.node1,ao),Un(h.node2,ao))}},unfocusNodeAdjacency:function(e,t,n,i){var a=e.getGraph();a.eachNode(function(o){_h(o,Ob)}),a.eachEdge(function(o){_h(o,Rb)})}}),Be({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),ct(function(e,t,n){e.eachSeriesByType("sankey",function(i){var f,a=i.get("nodeWidth"),o=i.get("nodeGap"),r=(f=t,vt(i.getBoxLayoutParams(),{width:f.getWidth(),height:f.getHeight()})),s=(i.layoutInfo=r).width,l=r.height,u=i.getGraph(),h=u.nodes,c=u.edges;I(h,function(f){var p=ya(f.outEdges,bh),m=ya(f.inEdges,bh),g=f.getValue()||0,v=Math.max(p,m,g);f.setLayout({value:v},!0)}),function(d,f,p,m,g,v,x,y,b){var _,S;(function(_,w,S,M,T,A,C){for(var D=[],L=[],P=[],N=[],R=0,k=0;k<w.length;k++)D[k]=1;for(k=0;k<_.length;k++)L[k]=_[k].inEdges.length,0===L[k]&&P.push(_[k]);for(var B=-1;P.length;){for(var G=0;G<P.length;G++){var W=P[G],F=W.hostGraph.data.getRawDataItem(W.dataIndex),Y=null!=F.depth&&0<=F.depth;Y&&F.depth>B&&(B=F.depth),W.setLayout({depth:Y?F.depth:R},!0),W.setLayout("vertical"===A?{dy:S}:{dx:S},!0);for(var K=0;K<W.outEdges.length;K++){var ce=W.outEdges[K];D[w.indexOf(ce)]=0;var le=ce.node2;0==--L[_.indexOf(le)]&&N.indexOf(le)<0&&N.push(le)}}++R,P=N,N=[]}for(k=0;k<D.length;k++)if(1===D[k])throw new Error("Sankey is a DAG, the original data has cycle!");var Ve,Ye,xe=R-1<B?B:R-1;C&&"left"!==C&&function(He,Ve,Ye,Yt){if("right"===Ve){for(var Zt=[],Vi=He,Ma=0;Vi.length;){for(var ul=0;ul<Vi.length;ul++){var Xm=Vi[ul];Xm.setLayout({skNodeHeight:Ma},!0);for(var Ym=0;Ym<Xm.inEdges.length;Ym++){var rI=Xm.inEdges[Ym];Zt.indexOf(rI.node1)<0&&Zt.push(rI.node1)}}Vi=Zt,Zt=[],++Ma}I(He,function(hl){Bb(hl)||hl.setLayout({depth:Math.max(0,Yt-hl.getLayout().skNodeHeight)},!0)})}else"justify"===Ve&&(FL=Yt,I(He,function(qm){Bb(qm)||qm.outEdges.length||qm.setLayout({depth:FL},!0)}));var FL}(_,C,0,xe),Ve="vertical"===A?(T-S)/xe:(M-S)/xe,Ye=A,I(_,function(Yt){var Zt=Yt.getLayout().depth*Ve;Yt.setLayout("vertical"===Ye?{y:Zt}:{x:Zt},!0)})})(d,f,p,g,v,y,b),function(_,w,S,M,T,A,C){var R,k,B,D=(R=[],k="vertical"===C?"y":"x",(B=Md(_,function(G){return G.getLayout()[k]})).keys.sort(function(G,W){return G-W}),I(B.keys,function(G){R.push(B.buckets.get(G))}),R);(function(P,N,R,k,B,G){var W=1/0;I(P,function(F){var Y=F.length,K=0;I(F,function(U){K+=U.getLayout().value});var ce="vertical"===G?(k-(Y-1)*B)/K:(R-(Y-1)*B)/K;ce<W&&(W=ce)}),I(P,function(F){I(F,function(Y,K){var ce=Y.getLayout().value*W;"vertical"===G?(Y.setLayout({x:K},!0),Y.setLayout({dx:ce},!0)):(Y.setLayout({y:K},!0),Y.setLayout({dy:ce},!0))})}),I(N,function(F){var Y=+F.getValue()*W;F.setLayout({dy:Y},!0)})})(D,w,S,M,T,C),_g(D,T,S,M,C);for(var L=1;0<A;A--)PC(D,L*=.99,C),_g(D,T,S,M,C),RC(D,L,C),_g(D,T,S,M,C)}(d,f,v,g,m,x,y),S="vertical"===y?"x":"y",I(_=d,function(M){M.outEdges.sort(function(T,A){return T.node2.getLayout()[S]-A.node2.getLayout()[S]}),M.inEdges.sort(function(T,A){return T.node1.getLayout()[S]-A.node1.getLayout()[S]})}),I(_,function(M){var T=0,A=0;I(M.outEdges,function(C){C.setLayout({sy:T},!0),T+=C.getLayout().dy}),I(M.inEdges,function(C){C.setLayout({ty:A},!0),A+=C.getLayout().dy})})}(h,c,a,o,s,l,0!==se(h,function(d){return 0===d.getLayout().value}).length?0:i.get("layoutIterations"),i.get("orient"),i.get("nodeAlign"))})}),et(function(e,t){e.eachSeriesByType("sankey",function(n){var i=n.getGraph().nodes;if(i.length){var a=1/0,o=-1/0;I(i,function(r){var s=r.getLayout().value;s<a&&(a=s),o<s&&(o=s)}),I(i,function(r){var s=new $e({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:n.get("color")}).mapValueToVisual(r.getLayout().value),l=r.getModel().get("itemStyle.color");r.setVisual("color",null!=l?l:s)})}})});var Vb={_baseAxisDim:null,getInitialData:function(e,t){var n,i,a=t.getComponent("xAxis",this.get("xAxisIndex")),o=t.getComponent("yAxis",this.get("yAxisIndex")),r=a.get("type"),s=o.get("type");"category"===r?(e.layout="horizontal",n=a.getOrdinalMeta(),i=!0):"category"===s?(e.layout="vertical",n=o.getOrdinalMeta(),i=!0):e.layout=e.layout||"horizontal";var l=["x","y"],u="horizontal"===e.layout?0:1,h=this._baseAxisDim=l[u],c=l[1-u],d=[a,o],f=d[u].get("type"),p=d[1-u].get("type"),m=e.data;if(m&&i){var g=[];I(m,function(y,b){var _;y.value&&z(y.value)?(_=y.value.slice(),y.value.unshift(b)):z(y)?(_=y.slice(),y.unshift(b)):_=y,g.push(_)}),e.data=g}var v=this.defaultValueDimensions,x=[{name:h,type:Ou(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:Ou(p),dimsDef:v.slice()}];return Jo(this,{coordDimensions:x,dimensionsCount:v.length+1,encodeDefaulter:V(vy,x,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};j(ht.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),Vb,!0);var zC=["itemStyle"],BC=["emphasis","itemStyle"],VC=(Pt.extend({type:"boxplot",render:function(e,t,n){var i=e.getData(),a=this.group,o=this._data;this._data||a.removeAll();var r="horizontal"===e.get("layout")?1:0;i.diff(o).add(function(s){if(i.hasValue(s)){var l=Fb(i.getItemLayout(s),i,s,r,!0);i.setItemGraphicEl(s,l),a.add(l)}}).update(function(s,l){var u=o.getItemGraphicEl(l);if(i.hasValue(s)){var h=i.getItemLayout(s);u?Gb(h,u,i,s):u=Fb(h,i,s,r),a.add(u),i.setItemGraphicEl(s,u)}else a.remove(u)}).remove(function(s){var l=o.getItemGraphicEl(s);l&&a.remove(l)}).execute(),this._data=i},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&t.remove(i)})},dispose:We}),Re.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,i=0;for(e.moveTo(n[i][0],n[i][1]),i++;i<4;i++)e.lineTo(n[i][0],n[i][1]);for(e.closePath();i<n.length;i++)e.moveTo(n[i][0],n[i][1]),i++,e.lineTo(n[i][0],n[i][1])}}));function Fb(e,t,n,i,a){var s,l,u,o=e.ends,r=new VC({shape:{points:a?(s=o,l=i,u=e,O(s,function(h){return(h=h.slice())[l]=u.initBaseline,h})):o}});return Gb(e,r,t,n,a),r}function Gb(e,t,n,i,a){(0,Ti[a?"initProps":"updateProps"])(t,{shape:{points:e.ends}},n.hostModel,i);var r=n.getItemModel(i),s=r.getModel(zC),l=n.getItemVisual(i,"color"),u=s.getItemStyle(["borderColor"]);u.stroke=l,u.strokeNoScale=!0,t.useStyle(u),t.z2=100,tt(t,r.getModel(BC).getItemStyle())}var Wb=["itemStyle","borderColor"],Ws=I;et(function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",function(i){var a=n[i.seriesIndex%n.length],o=i.getData();o.setVisual({legendSymbol:"roundRect",color:i.get(Wb)||a}),e.isSeriesFiltered(i)||o.each(function(r){var s=o.getItemModel(r);o.setItemVisual(r,{color:s.get(Wb,!0)})})})}),ct(function(e){var t=function(n){var i=[],a=[];return n.eachSeriesByType("boxplot",function(o){var r=o.getBaseAxis(),s=E(a,r);s<0&&(a[s=a.length]=r,i[s]={axis:r,seriesModels:[]}),i[s].seriesModels.push(o)}),i}(e);Ws(t,function(n){var i=n.seriesModels;i.length&&(function(a){var o,r,s=a.axis,l=a.seriesModels,u=l.length,h=a.boxWidthList=[],c=a.boxOffsetList=[],d=[];if("category"===s.type)r=s.getBandWidth();else{var f=0;Ws(l,function(x){f=Math.max(f,x.getData().count())}),o=s.getExtent(),Math.abs(o[1]-o[0])}Ws(l,function(x){var y=x.get("boxWidth");z(y)||(y=[y,y]),d.push([Q(y[0],r)||0,Q(y[1],r)||0])});var p=.8*r-2,m=p/u*.3,g=(p-m*(u-1))/u,v=g/2-p/2;Ws(l,function(x,y){c.push(v),v+=m+g,h.push(Math.min(Math.max(g,d[y][0]),d[y][1]))})}(n),Ws(i,function(a,o){!function(r,s,l){var u=r.coordinateSystem,h=r.getData(),c=l/2,d="horizontal"===r.get("layout")?0:1,f=1-d,p=["x","y"],m=h.mapDimension(p[d]),g=h.mapDimension(p[f],!0);if(!(null==m||g.length<5))for(var v=0;v<h.count();v++){var x=h.get(m,v),y=T(x,g[2],v),b=T(x,g[0],v),_=T(x,g[1],v),w=T(x,g[3],v),S=T(x,g[4],v),M=[];A(M,_,0),A(M,w,1),M.push(b,_,S,w),C(M,b),C(M,S),C(M,y),h.setItemLayout(v,{initBaseline:y[f],ends:M})}function T(D,L,P){var N,R=h.get(L,P),k=[];return k[d]=D,k[f]=R,isNaN(D)||isNaN(R)?N=[NaN,NaN]:(N=u.dataToPoint(k))[d]+=s,N}function A(D,L,P){var N=L.slice(),R=L.slice();N[d]+=c,R[d]-=c,P?D.push(N,R):D.push(R,N)}function C(D,L){var P=L.slice(),N=L.slice();P[d]-=c,N[d]+=c,D.push(P,N)}}(a,n.boxOffsetList[o],n.boxWidthList[o])}))})}),j(ht.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var i=t.getItemLayout(e);return i&&n.rect(i.brushRect)}}),Vb,!0);var Hb=["itemStyle"],FC=["emphasis","itemStyle"],Zb=["color","color0","borderColor","borderColor0"],GC=(Pt.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,i){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,i=this.group,a=t.getLayout("isSimpleBox"),o=e.get("clip",!0),r=e.coordinateSystem,s=r.getArea&&r.getArea();this._data||i.removeAll(),t.diff(n).add(function(l){if(t.hasValue(l)){var u,h=t.getItemLayout(l);if(o&&Ub(s,h))return;Vt(u=bg(h,0,!0),{shape:{points:h.ends}},e,l),wg(u,t,l,a),i.add(u),t.setItemGraphicEl(l,u)}}).update(function(l,u){var h=n.getItemGraphicEl(u);if(t.hasValue(l)){var c=t.getItemLayout(l);o&&Ub(s,c)?i.remove(h):(h?Ae(h,{shape:{points:c.ends}},e,l):h=bg(c),wg(h,t,l,a),i.add(h),t.setItemGraphicEl(l,h))}else i.remove(h)}).remove(function(l){var u=n.getItemGraphicEl(l);u&&i.remove(u)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),Xb(e,this.group);var t=e.get("clip",!0)?Uu(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,i=t.getData(),a=i.getLayout("isSimpleBox");null!=(n=e.next());){var o;wg(o=bg(i.getItemLayout(n)),i,n,a),o.incremental=!0,this.group.add(o)}},_incrementalRenderLarge:function(e,t){Xb(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:We}),Re.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function bg(e,t,n){var i=e.ends;return new GC({shape:{points:n?function(a,o){return O(a,function(r){return(r=r.slice())[1]=o.initBaseline,r})}(i,e):i},z2:100})}function Ub(e,t){for(var n=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){n=!1;break}return n}function wg(e,t,n,i){var a=t.getItemModel(n),o=a.getModel(Hb),r=t.getItemVisual(n,"color"),s=t.getItemVisual(n,"borderColor")||r,l=o.getItemStyle(Zb);e.useStyle(l),e.style.strokeNoScale=!0,e.style.fill=r,e.style.stroke=s,e.__simpleBox=i,tt(e,a.getModel(FC).getItemStyle())}var jb=Re.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,i=0;i<n.length;)if(this.__sign===n[i++]){var a=n[i++];e.moveTo(a,n[i++]),e.lineTo(a,n[i++])}else i+=3}});function Xb(e,t,n){var i=e.getData(),a=i.getLayout("largePoints"),o=new jb({shape:{points:a},__sign:1});t.add(o);var r=new jb({shape:{points:a},__sign:-1});t.add(r),Yb(1,o,e,i),Yb(-1,r,e,i),n&&(o.incremental=!0,r.incremental=!0)}function Yb(e,t,n,i){var a=0<e?"P":"N",o=i.getVisual("borderColor"+a)||i.getVisual("color"+a),r=n.getModel(Hb).getItemStyle(Zb);t.useStyle(r),t.style.fill=null,t.style.stroke=o}var WC=["itemStyle","borderColor"],HC=["itemStyle","borderColor0"],ZC=["itemStyle","color"],UC=["itemStyle","color0"],jC={seriesType:"candlestick",plan:Fo(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:i(1,e),borderColorN:i(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(a,o){for(var r;null!=(r=a.next());){var s=o.getItemModel(r),l=o.getItemLayout(r).sign;o.setItemVisual(r,{color:n(l,s),borderColor:i(l,s)})}}};function n(a,o){return o.get(0<a?ZC:UC)}function i(a,o){return o.get(0<a?WC:HC)}}},XC="undefined"!=typeof Float32Array?Float32Array:Array,YC={seriesType:"candlestick",plan:Fo(),reset:function(e){var c,d,f,p,m,g,v,x,t=e.coordinateSystem,n=e.getData(),i=(d=n,m="category"===(p=(c=e).getBaseAxis()).type?p.getBandWidth():(f=p.getExtent(),Math.abs(f[1]-f[0])/d.count()),g=Q(De(c.get("barMaxWidth"),m),m),v=Q(De(c.get("barMinWidth"),1),m),null!=(x=c.get("barWidth"))?Q(x,m):Math.max(Math.min(m/2,g),v)),a=["x","y"],o=n.mapDimension(a[0]),r=n.mapDimension(a[1],!0),s=r[0],l=r[1],u=r[2],h=r[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==o||r.length<4))return{progress:e.pipelineContext.large?function(c,d){for(var f,p,m=new XC(4*c.count),g=0,v=[],x=[];null!=(p=c.next());){var y=d.get(o,p),b=d.get(s,p),_=d.get(l,p),w=d.get(u,p),S=d.get(h,p);isNaN(y)||isNaN(w)||isNaN(S)?(m[g++]=NaN,g+=3):(m[g++]=qb(d,p,b,_,l),v[0]=y,v[1]=w,f=t.dataToPoint(v,null,x),m[g++]=f?f[0]:NaN,m[g++]=f?f[1]:NaN,v[1]=S,f=t.dataToPoint(v,null,x),m[g++]=f?f[1]:NaN)}d.setLayout("largePoints",m)}:function(c,d){for(var f;null!=(f=c.next());){var p=d.get(o,f),m=d.get(s,f),g=d.get(l,f),v=d.get(u,f),x=d.get(h,f),y=Math.min(m,g),b=Math.max(m,g),_=A(y,p),w=A(b,p),S=A(v,p),M=A(x,p),T=[];C(T,w,0),C(T,_,1),T.push(L(M),L(w),L(S),L(_)),d.setItemLayout(f,{sign:qb(d,f,m,g,l),initBaseline:g<m?w[1]:_[1],ends:T,brushRect:(P=v,N=x,R=p,k=void 0,B=void 0,k=A(P,R),B=A(N,R),k[0]-=i/2,B[0]-=i/2,{x:k[0],y:k[1],width:i,height:B[1]-k[1]})})}var P,N,R,k,B;function A(P,N){var R=[];return R[0]=N,R[1]=P,isNaN(N)||isNaN(P)?[NaN,NaN]:t.dataToPoint(R)}function C(P,N,R){var k=N.slice(),B=N.slice();k[0]=nu(k[0]+i/2,1,!1),B[0]=nu(B[0]-i/2,1,!0),R?P.push(k,B):P.push(B,k)}function L(P){return P[0]=nu(P[0],1),P}}}}};function qb(e,t,n,i,a){return i<n?-1:n<i?1:0<t?e.get(a,t-1)<=i?1:-1:1}function $b(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}function Sg(e,t){re.call(this);var n=new ua(e,t),i=new re;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}zt(function(e){e&&z(e.series)&&I(e.series,function(t){X(t)&&"k"===t.type&&(t.type="candlestick")})}),et(jC),ct(YC),ht.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return Pi(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var oo=Sg.prototype;oo.stopEffectAnimation=function(){this.childAt(1).removeAll()},oo.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,i=this.childAt(1),a=0;a<3;a++){var o=gn(t,-1,-1,2,2,n);o.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var r=-a/3*e.period+e.effectOffset;o.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(r).start(),o.animateStyle(!0).when(e.period,{opacity:0}).delay(r).start(),i.add(o)}$b(i,e)},oo.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],a=0;a<i.length;a++){var o=i[a];if(t[o]!==e[o])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}$b(n,e)},oo.highlight=function(){this.trigger("emphasis")},oo.downplay=function(){this.trigger("normal")},oo.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var m,i=this.childAt(1),a=e.getItemModel(t),o=e.getItemVisual(t,"symbol"),r=(z(m=e.getItemVisual(t,"symbolSize"))||(m=[+m,+m]),m),s=e.getItemVisual(t,"color");i.attr("scale",r),i.traverse(function(m){m.attr({fill:s})});var l=a.getShallow("symbolOffset");if(l){var u=i.position;u[0]=Q(l[0],r[0]),u[1]=Q(l[1],r[1])}var h=e.getItemVisual(t,"symbolRotate");i.rotation=(h||0)*Math.PI/180||0;var c={};if(c.showEffectOn=n.get("showEffectOn"),c.rippleScale=a.get("rippleEffect.scale"),c.brushType=a.get("rippleEffect.brushType"),c.period=1e3*a.get("rippleEffect.period"),c.effectOffset=t/e.count(),c.z=a.getShallow("z")||0,c.zlevel=a.getShallow("zlevel")||0,c.symbolType=o,c.color=s,c.rippleEffectColor=a.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===c.showEffectOn)this._effectCfg?this.updateEffectAnimation(c):this.startEffectAnimation(c),this._effectCfg=c;else{this._effectCfg=null,this.stopEffectAnimation();var d=this.childAt(0),f=function(){d.highlight(),"render"!==c.showEffectOn&&this.startEffectAnimation(c)},p=function(){d.downplay(),"render"!==c.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",p,this).on("emphasis",f,this).on("normal",p,this)}this._effectCfg=c},oo.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},H(Sg,re),an({type:"effectScatter",init:function(){this._symbolDraw=new Xo(Sg)},render:function(e,t,n){var i=e.getData(),a=this._symbolDraw;a.updateData(i),this.group.add(a.group)},updateTransform:function(e,t,n){var i=e.getData();this.group.dirty();var a=xs().reset(e);a.progress&&a.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=h0(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),et(Ya("effectScatter","circle")),ct(xs("effectScatter"));var qC="undefined"==typeof Uint32Array?Array:Uint32Array,$C="undefined"==typeof Float64Array?Array:Float64Array;function Kb(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=O(t,function(n){var i={coords:[n[0].coord,n[1].coord]};return n[0].name&&(i.fromName=n[0].name),n[1].name&&(i.toName=n[1].name),ln([i,n[0],n[1]])}))}var Qb=ht.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],Kb(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),Qb.superApply(this,"init",arguments)},mergeOption:function(e){if(Kb(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}Qb.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=at(this._flatCoords,t.flatCoords),this._flatCoordsOffset=at(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],a=0;a<i;a++)t[a]=t[a]||[],t[a][0]=this._flatCoords[n+2*a],t[a][1]=this._flatCoords[n+2*a+1];return i}var o=this._getCoordsFromItemModel(e);for(a=0;a<o.length;a++)t[a]=t[a]||[],t[a][0]=o[a][0],t[a][1]=o[a][1];return o.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var n=e.length,i=new qC(n),a=new $C(n),o=0,r=0,s=0,l=0;l<n;){s++;var u=e[l++];i[r++]=o+t,i[r++]=u;for(var h=0;h<u;h++){var c=e[l++],d=e[l++];a[o++]=c,a[o++]=d}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,r),flatCoords:a,count:s}},getInitialData:function(e,t){var n=new Ct(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(i,a,o,r){if(i instanceof Array)return NaN;n.hasItemOption=!0;var s=i.value;return null!=s?s instanceof Array?s[r]:s:void 0}),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var i=t.get("fromName"),a=t.get("toName"),o=[];return null!=i&&o.push(i),null!=a&&o.push(a),ot(o.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function Hs(e,t,n){re.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var xa=Hs.prototype;function wh(e,t,n){re.call(this),this._createPolyline(e,t,n)}xa.createLine=function(e,t,n){return new Bs(e,t,n)},xa._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),i=n.get("symbolSize"),a=n.get("symbol");z(i)||(i=[i,i]);var o=n.get("color")||e.getItemVisual(t,"color"),r=this.childAt(1);this._symbolType!==a&&(this.remove(r),(r=gn(a,-.5,-.5,1,1,o)).z2=100,r.culling=!0,this.add(r)),r&&(r.setStyle("shadowColor",o),r.setStyle(n.getItemStyle(["color"])),r.attr("scale",i),r.setColor(o),r.attr("scale",i),this._symbolType=a,this._symbolScale=i,this._updateEffectAnimation(e,n,t))},xa._updateEffectAnimation=function(e,t,n){var i=this.childAt(1);if(i){var a=this,o=e.getItemLayout(n),r=1e3*t.get("period"),s=t.get("loop"),l=t.get("constantSpeed"),u=Ne(t.get("delay"),function(f){return f/e.count()*r/3}),h="function"==typeof u;if(i.ignore=!0,this.updateAnimationPoints(i,o),0<l&&(r=this.getLineLength(i)/l*1e3),r!==this._period||s!==this._loop){i.stopAnimation();var c=u;h&&(c=u(n)),0<i.__t&&(c=-r*i.__t),i.__t=0;var d=i.animate("",s).when(r,{__t:1}).delay(c).during(function(){a.updateSymbolPosition(i)});s||d.done(function(){a.remove(i)}),d.start()}this._period=r,this._loop=s}},xa.getLineLength=function(e){return gi(e.__p1,e.__cp1)+gi(e.__cp1,e.__p2)},xa.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},xa.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},xa.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,i=e.__cp1,a=e.__t,o=e.position,r=[o[0],o[1]],s=Bt,l=Id;o[0]=s(t[0],i[0],n[0],a),o[1]=s(t[1],i[1],n[1],a);var u=l(t[0],i[0],n[0],a),h=l(t[1],i[1],n[1],a);if(e.rotation=-Math.atan2(h,u)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var c=1.05*gi(r,o);e.attr("scale",[e.scale[0],c]),1===a&&(o[0]=r[0]+(o[0]-r[0])/2,o[1]=r[1]+(o[1]-r[1])/2)}else 1===e.__lastT?(c=2*gi(t,o),e.attr("scale",[e.scale[0],c])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},xa.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},H(Hs,re);var Sh=wh.prototype;function Mg(e,t,n){Hs.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}Sh._createPolyline=function(e,t,n){var i=e.getItemLayout(t),a=new Mn({shape:{points:i}});this.add(a),this._updateCommonStl(e,t,n)},Sh.updateData=function(e,t,n){var i=e.hostModel;Ae(this.childAt(0),{shape:{points:e.getItemLayout(t)}},i,t),this._updateCommonStl(e,t,n)},Sh._updateCommonStl=function(e,t,n){var i=this.childAt(0),a=e.getItemModel(t),o=e.getItemVisual(t,"color"),r=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!e.hasItemOption||(r=a.getModel("lineStyle").getLineStyle(),s=a.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(ie({strokeNoScale:!0,fill:"none",stroke:o},r)),i.hoverStyle=s,tt(this)},Sh.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},H(wh,re);var Mh=Mg.prototype;Mh.createLine=function(e,t,n){return new wh(e,t,n)},Mh.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],i=0,a=1;a<t.length;a++)i+=gi(t[a-1],t[a]),n.push(i);if(0!==i){for(a=0;a<n.length;a++)n[a]/=i;this._offsets=n,this._length=i}},Mh.getLineLength=function(e){return this._length},Mh.updateSymbolPosition=function(e){var t=e.__t,n=this._points,i=this._offsets,a=n.length;if(i){var o=this._lastFrame;if(t<this._lastFramePercent){for(r=Math.min(o+1,a-1);0<=r&&!(i[r]<=t);r--);r=Math.min(r,a-2)}else{for(var r=o;r<a&&!(i[r]>t);r++);r=Math.min(r-1,a-2)}Qm(e.position,n[r],n[r+1],(t-i[r])/(i[r+1]-i[r])),e.rotation=-Math.atan2(n[r+1][1]-n[r][1],n[r+1][0]-n[r][0])-Math.PI/2,this._lastFrame=r,this._lastFramePercent=t,e.ignore=!1}},H(Mg,Hs);var Jb=In({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,i=t.curveness;if(t.polyline)for(var a=0;a<n.length;){var o=n[a++];if(0<o){e.moveTo(n[a++],n[a++]);for(var r=1;r<o;r++)e.lineTo(n[a++],n[a++])}}else for(a=0;a<n.length;){var s=n[a++],l=n[a++],u=n[a++],h=n[a++];e.moveTo(s,l),0<i?e.quadraticCurveTo((s+u)/2-(l-h)*i,(l+h)/2-(u-s)*i,u,h):e.lineTo(u,h)}},findDataIndex:function(e,t){var n=this.shape,i=n.segs,a=n.curveness;if(n.polyline)for(var o=0,r=0;r<i.length;){var s=i[r++];if(0<s)for(var l=i[r++],u=i[r++],h=1;h<s;h++)if(Ki(l,u,c=i[r++],d=i[r++]))return o;o++}else for(o=0,r=0;r<i.length;){l=i[r++],u=i[r++];var c=i[r++],d=i[r++];if(0<a){if(gv(l,u,(l+c)/2-(u-d)*a,(u+d)/2-(c-l)*a,c,d))return o}else if(Ki(l,u,c,d))return o;o++}return-1}});function ew(){this.group=new re}var ro=ew.prototype;ro.isPersistent=function(){return!this._incremental},ro.updateData=function(e){this.group.removeAll();var t=new Jb({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},ro.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new hn({silent:!0})),this.group.add(this._incremental)):this._incremental=null},ro.incrementalUpdate=function(e,t){var n=new Jb;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},ro.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},ro._setCommon=function(e,t,n){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("color");a&&e.setStyle("stroke",a),e.setStyle("fill"),n||(e.seriesIndex=i.seriesIndex,e.on("mousemove",function(o){e.dataIndex=null;var r=e.findDataIndex(o.offsetX,o.offsetY);0<r&&(e.dataIndex=r+e.__startIndex)}))},ro._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var tw={seriesType:"lines",plan:Fo(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(a,o){var r=[];if(i){var s,l=a.end-a.start;if(n){for(var u=0,h=a.start;h<a.end;h++)u+=e.getLineCoordsCount(h);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var c=0,d=[];for(h=a.start;h<a.end;h++){var f=e.getLineCoords(h,r);n&&(s[c++]=f);for(var p=0;p<f;p++)d=t.dataToPoint(r[p],!1,d),s[c++]=d[0],s[c++]=d[1]}o.setLayout("linesPoints",s)}else for(h=a.start;h<a.end;h++){var m=o.getItemModel(h),g=(f=e.getLineCoords(h,r),[]);if(n)for(var v=0;v<f;v++)g.push(t.dataToPoint(r[v]));else{g[0]=t.dataToPoint(r[0]),g[1]=t.dataToPoint(r[1]);var x=m.get("lineStyle.curveness");+x&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*x,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*x])}o.setItemLayout(h,g)}}}}};function Ih(e){return e instanceof Array||(e=[e,e]),e}an({type:"lines",init:function(){},render:function(e,t,n){var i=e.getData(),a=this._updateLineDraw(i,e),o=e.get("zlevel"),r=e.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&r&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})),a.updateData(i);var u=e.get("clip",!0)&&Uu(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},incrementalPrepareRender:function(e,t,n){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var i=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var o=tw.reset(e);o.progress&&o.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,i=this._showEffect(t),a=!!t.get("polyline"),o=t.pipelineContext.large;return n&&i===this._hasEffet&&a===this._isPolyline&&o===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=o?new ew:new dh(a?i?Mg:wh:i?Hs:Bs),this._hasEffet=i,this._isPolyline=a,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var nw="lineStyle.opacity".split("."),KC={seriesType:"lines",reset:function(e,t,n){var i=Ih(e.get("symbol")),a=Ih(e.get("symbolSize")),o=e.getData();return o.setVisual("fromSymbol",i&&i[0]),o.setVisual("toSymbol",i&&i[1]),o.setVisual("fromSymbolSize",a&&a[0]),o.setVisual("toSymbolSize",a&&a[1]),o.setVisual("opacity",e.get(nw)),{dataEach:o.hasItemOption?function(r,s){var l=r.getItemModel(s),u=Ih(l.getShallow("symbol",!0)),h=Ih(l.getShallow("symbolSize",!0)),c=l.get(nw);u[0]&&r.setItemVisual(s,"fromSymbol",u[0]),u[1]&&r.setItemVisual(s,"toSymbol",u[1]),h[0]&&r.setItemVisual(s,"fromSymbolSize",h[0]),h[1]&&r.setItemVisual(s,"toSymbolSize",h[1]),r.setItemVisual(s,"opacity",c)}:null}}};function iw(){var e=Ut();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}ct(tw),et(KC),ht.extend({type:"series.heatmap",getInitialData:function(e,t){return Pi(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=Gt.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),iw.prototype={update:function(e,t,n,i,a,o){var r=this._getBrush(),s=this._getGradient(e,a,"inRange"),l=this._getGradient(e,a,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,c=h.getContext("2d"),d=e.length;h.width=t,h.height=n;for(var f=0;f<d;++f){var p=e[f],m=p[0],g=p[1],v=i(p[2]);c.globalAlpha=v,c.drawImage(r,m-u,g-u)}if(!h.width||!h.height)return h;for(var x=c.getImageData(0,0,h.width,h.height),y=x.data,b=0,_=y.length,w=this.minOpacity,S=this.maxOpacity-w;b<_;){v=y[b+3]/256;var M=4*Math.floor(255*v);if(0<v){var T=o(v)?s:l;0<v&&(v=v*S+w),y[b++]=T[M],y[b++]=T[1+M],y[b++]=T[2+M],y[b++]=T[3+M]*v*256}else b+=4}return c.putImageData(x,0,0),h},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=Ut()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var i=e.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},_getGradient:function(e,t,n){for(var i=this._gradientPixels,a=i[n]||(i[n]=new Uint8ClampedArray(1024)),o=[0,0,0,0],r=0,s=0;s<256;s++)t[n](s/255,!0,o),a[r++]=o[0],a[r++]=o[1],a[r++]=o[2],a[r++]=o[3];return a}},an({type:"heatmap",render:function(e,t,n){var i;t.eachComponent("visualMap",function(o){o.eachTargetSeries(function(r){r===e&&(i=o)})}),this.group.removeAll(),this._incrementalDisplayable=null;var a=e.coordinateSystem;"cartesian2d"===a.type||"calendar"===a.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(o){var r=o.dimensions;return"lng"===r[0]&&"lat"===r[1]}(a)&&this._renderOnGeo(a,e,i,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,i){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,i,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,i,a){var o,r,s=e.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),u=s.getAxis("y");o=l.getBandWidth(),r=u.getBandWidth()}for(var h=this.group,c=e.getData(),d="emphasis.itemStyle",f="emphasis.label",p=e.getModel("itemStyle").getItemStyle(["color"]),m=e.getModel(d).getItemStyle(),g=e.getModel("label"),v=e.getModel(f),x=s.type,y="cartesian2d"===x?[c.mapDimension("x"),c.mapDimension("y"),c.mapDimension("value")]:[c.mapDimension("time"),c.mapDimension("value")],b=n;b<i;b++){var _;if("cartesian2d"===x){if(isNaN(c.get(y[2],b)))continue;var w=s.dataToPoint([c.get(y[0],b),c.get(y[1],b)]);_=new Fe({shape:{x:Math.floor(Math.round(w[0])-o/2),y:Math.floor(Math.round(w[1])-r/2),width:Math.ceil(o),height:Math.ceil(r)},style:{fill:c.getItemVisual(b,"color"),opacity:c.getItemVisual(b,"opacity")}})}else{if(isNaN(c.get(y[1],b)))continue;_=new Fe({z2:1,shape:s.dataToRect([c.get(y[0],b)]).contentShape,style:{fill:c.getItemVisual(b,"color"),opacity:c.getItemVisual(b,"opacity")}})}var S=c.getItemModel(b);c.hasItemOption&&(p=S.getModel("itemStyle").getItemStyle(["color"]),m=S.getModel(d).getItemStyle(),g=S.getModel("label"),v=S.getModel(f));var M=e.getRawValue(b),T="-";M&&null!=M[2]&&(T=M[2]),cn(p,m,g,v,{labelFetcher:e,labelDataIndex:b,defaultText:T,isRectText:!0}),_.setStyle(p),tt(_,c.hasItemOption?m:fe({},m)),(_.incremental=a)&&(_.useHoverLayer=!0),h.add(_),c.setItemGraphicEl(b,_)}},_renderOnGeo:function(e,t,n,i){var a=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,r=t.getData(),s=this._hmLayer||this._hmLayer||new iw;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var _,w,S,h=Math.max(l.x,0),c=Math.max(l.y,0),d=Math.min(l.width+l.x,i.getWidth()),f=Math.min(l.height+l.y,i.getHeight()),p=d-h,m=f-c,g=[r.mapDimension("lng"),r.mapDimension("lat"),r.mapDimension("value")],v=r.mapArray(g,function(_,w,S){var M=e.dataToPoint([_,w]);return M[0]-=h,M[1]-=c,M.push(S),M}),x=n.getExtent(),y="visualMap.continuous"===n.type?(w=[((w=n.option.range)[0]-(_=x)[0])/(S=_[1]-_[0]),(w[1]-_[0])/S],function(M){return M>=w[0]&&M<=w[1]}):function(_,w,S){var M=_[1]-_[0],T=(w=O(w,function(C){return{interval:[(C.interval[0]-_[0])/M,(C.interval[1]-_[0])/M]}})).length,A=0;return function(C){for(var D=A;D<T;D++)if((L=w[D].interval)[0]<=C&&C<=L[1]){A=D;break}if(D===T)for(D=A-1;0<=D;D--){var L;if((L=w[D].interval)[0]<=C&&C<=L[1]){A=D;break}}return 0<=D&&D<T&&S[D]}}(x,n.getPieceList(),n.option.selected);s.update(v,p,m,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:o.color.getColorMapper()},y);var b=new Lt({style:{width:p,height:m,x:h,y:c,image:s.canvas},silent:!0});this.group.add(b)},dispose:function(){}});var QC=Ex.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,QC.superApply(this,"getInitialData",arguments)}}),JC=["itemStyle","borderWidth"],aw=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Ig=new Jn;function ow(e,t,n,i){var p,m,v,y,b,_,w,S,M,T,A,C,a=e.getItemLayout(t),o=n.get("symbolRepeat"),r=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,h=n.isAnimationEnabled(),c={dataIndex:t,layout:a,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:r,symbolRepeat:o,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:h?n:null,hoverAnimation:h&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(p,m,g,v,x){var y,b=v.valueDim,_=p.get("symbolBoundingData"),w=v.coordSys.getOtherAxis(v.coordSys.getBaseAxis()),S=w.toGlobalCoord(w.dataToCoord(0)),M=1-+(g[b.wh]<=0);if(z(_)){var T=[Tg(w,_[0])-S,Tg(w,_[1])-S];T[1]<T[0]&&T.reverse(),y=T[M]}else y=null!=_?Tg(w,_)-S:m?v.coordSysExtent[b.index][M]-S:g[b.wh];x.boundingLength=y,m&&(x.repeatCutLength=g[b.wh]),x.pxSign=0<y?1:y<0?-1:0})(n,o,a,i,c),p=e,m=t,v=o,y=c.boundingLength,b=c.pxSign,_=u,S=c,M=(w=i).valueDim,T=w.categoryDim,A=Math.abs(a[T.wh]),(C=z(C=p.getItemVisual(m,"symbolSize"))?C.slice():(null==C&&(C="100%"),[C,C]))[T.index]=Q(C[T.index],A),C[M.index]=Q(C[M.index],v?A:Math.abs(y)),S.symbolSize=C,(S.symbolScale=[C[0]/_,C[1]/_])[M.index]*=(w.isHorizontal?-1:1)*b,function(p,m,g,v,x){var y=p.get(JC)||0;y&&(Ig.attr({scale:m.slice(),rotation:g}),Ig.updateTransform(),y/=Ig.getLineScale(),y*=m[v.valueDim.index]),x.valueLineWidth=y}(n,c.symbolScale,l,i,c);var d=c.symbolSize,f=n.get("symbolOffset");return z(f)&&(f=[Q(f[0],d[0]),Q(f[1],d[1])]),function(p,m,g,v,x,y,b,_,w,S,M,T){var A=M.categoryDim,C=M.valueDim,D=T.pxSign,L=Math.max(m[C.index]+_,0),P=L;if(v){var N=Math.abs(w),R=Ne(p.get("symbolMargin"),"15%")+"",k=!1;R.lastIndexOf("!")===R.length-1&&(k=!0,R=R.slice(0,R.length-1)),R=Q(R,m[C.index]);var B=Math.max(L+2*R,0),G=k?0:2*R,W=ny(v),F=W?v:mw((N+G)/B);B=L+2*(R=(N-F*L)/2/(k?F:F-1)),G=k?0:2*R,W||"fixed"===v||(F=S?mw((Math.abs(S)+G)/B):0),P=F*B-G,T.repeatTimes=F,T.symbolMargin=R}var Y=D*(P/2),K=T.pathPosition=[];K[A.index]=g[A.wh]/2,K[C.index]="start"===b?Y:"end"===b?w-Y:w/2,y&&(K[0]+=y[0],K[1]+=y[1]);var ce=T.bundlePosition=[];ce[A.index]=g[A.xy],ce[C.index]=g[C.xy];var U=T.barRectShape=fe({},g);U[C.wh]=D*Math.max(Math.abs(g[C.wh]),Math.abs(K[C.index]+Y)),U[A.wh]=g[A.wh];var le=T.clipShape={};le[A.xy]=-g[A.xy],le[A.wh]=M.ecSize[A.wh],le[C.xy]=0,le[C.wh]=g[C.wh]}(n,d,a,o,0,f,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,i,c),c}function Tg(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function rw(e){var t=e.symbolPatternSize,n=gn(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function sw(e,t,n,i){var a=e.__pictorialBundle,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,h=0,c=n.symbolSize[t.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(Zs(e,function(v){v.__pictorialAnimationIndex=h,v.__pictorialRepeatTimes=u,h<u?dr(v,null,p(h),n,i):dr(v,null,{scale:[0,0]},n,i,function(){a.remove(v)}),Ag(v,n),h++});h<u;h++){var d=rw(n);d.__pictorialAnimationIndex=h,d.__pictorialRepeatTimes=u,a.add(d);var f=p(h);dr(d,{position:f.position,scale:[0,0]},{scale:f.scale,rotation:f.rotation},n,i),d.on("mouseover",m).on("mouseout",g),Ag(d,n)}function p(v){var x=s.slice(),y=n.pxSign,b=v;return("start"===n.symbolRepeatDirection?0<y:y<0)&&(b=u-1-v),x[l.index]=c*(b-u/2+.5)+s[l.index],{position:x,scale:n.symbolScale.slice(),rotation:n.rotation}}function m(){Zs(e,function(v){v.trigger("emphasis")})}function g(){Zs(e,function(v){v.trigger("normal")})}}function lw(e,t,n,i){var a=e.__pictorialBundle,o=e.__pictorialMainPath;o?dr(o,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(o=e.__pictorialMainPath=rw(n),a.add(o),dr(o,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),o.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Ag(o,n)}function uw(e,t,n){var i=fe({},t.barRectShape),a=e.__pictorialBarRect;a?dr(a,null,{shape:i},t,n):(a=e.__pictorialBarRect=new Fe({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(a))}function hw(e,t,n,i){if(n.symbolClip){var a=e.__pictorialClipPath,o=fe({},n.clipShape),r=t.valueDim,s=n.animationModel,l=n.dataIndex;if(a)Ae(a,{shape:o},s,l);else{o[r.wh]=0,a=new Fe({shape:o}),e.__pictorialBundle.setClipPath(a),e.__pictorialClipPath=a;var u={};u[r.wh]=n.clipShape[r.wh],Ti[i?"updateProps":"initProps"](a,{shape:u},s,l)}}}function cw(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=eD,n.isAnimationEnabled=tD,n}function eD(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function tD(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ag(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function dw(e,t,n,i){var a=new re,o=new re;return a.add(o),(a.__pictorialBundle=o).attr("position",n.bundlePosition.slice()),n.symbolRepeat?sw(a,t,n):lw(a,0,n),uw(a,n,i),hw(a,t,n,i),a.__pictorialShapeStr=pw(e,n),a.__pictorialSymbolMeta=n,a}function fw(e,t,n,i){var a=i.__pictorialBarRect;a&&(a.style.text=null);var o=[];Zs(i,function(r){o.push(r)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),I(o,function(r){Ae(r,{scale:[0,0]},n,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function pw(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Zs(e,t,n){I(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(n,i)})}function dr(e,t,n,i,a,o){t&&e.attr(t),i.symbolClip&&!a?n&&e.attr(n):n&&Ti[a?"updateProps":"initProps"](e,n,i.animationModel,i.dataIndex,o)}function gw(e,t,n){var i=n.color,a=n.dataIndex,o=n.itemModel,r=o.getModel("itemStyle").getItemStyle(["color"]),s=o.getModel("emphasis.itemStyle").getItemStyle(),l=o.getShallow("cursor");Zs(e,function(c){c.setColor(i),c.setStyle(ie({fill:i,opacity:n.opacity},r)),tt(c,s),l&&(c.cursor=l),c.z2=n.z2});var u={},h=e.__pictorialBarRect;Ox(h.style,u,o,i,t.seriesModel,a),tt(h,u)}function mw(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function Th(e,t,n,i,a){_t.call(this,e,t,n),this.type=i||"value",this.position=a||"bottom",this.orient=null}function Cg(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,n),this.model=e}function Dg(e,t){t=t||{};var i=e.axis,a={},o=i.position,r=i.orient,s=e.coordinateSystem.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};a.position=["vertical"===r?u.vertical[o]:l[0],"horizontal"===r?u.horizontal[o]:l[3]],a.rotation=Math.PI/2*{horizontal:0,vertical:1}[r],a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),Ne(t.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var h=t.rotate;return null==h&&(h=e.get("axisLabel.rotate")),a.labelRotation="top"===o?-h:h,a.z2=1,a}an({type:"pictorialBar",render:function(e,t,n){var i=this.group,a=e.getData(),o=this._data,r=e.coordinateSystem,s=!!r.getBaseAxis().isHorizontal(),l=r.grid.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:r,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:aw[+s],categoryDim:aw[1-s]};return a.diff(o).add(function(h){if(a.hasValue(h)){var c=cw(a,h),d=ow(a,h,c,u),f=dw(a,u,d);a.setItemGraphicEl(h,f),i.add(f),gw(f,u,d)}}).update(function(h,c){var g,v,x,y,b,d=o.getItemGraphicEl(c);if(a.hasValue(h)){var f=cw(a,h),p=ow(a,h,f,u),m=pw(a,p);d&&m!==d.__pictorialShapeStr&&(i.remove(d),a.setItemGraphicEl(h,null),d=null),d?(v=u,y=(x=p).animationModel,b=x.dataIndex,Ae((g=d).__pictorialBundle,{position:x.bundlePosition.slice()},y,b),x.symbolRepeat?sw(g,v,x,!0):lw(g,0,x,!0),uw(g,x,!0),hw(g,v,x,!0)):d=dw(a,u,p,!0),a.setItemGraphicEl(h,d),d.__pictorialSymbolMeta=p,i.add(d),gw(d,u,p)}else i.remove(d)}).remove(function(h){var c=o.getItemGraphicEl(h);c&&fw(o,h,c.__pictorialSymbolMeta.animationModel,c)}).execute(),this._data=a,this.group},dispose:We,remove:function(e,t){var n=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(a){fw(i,a.dataIndex,e,a)}):n.removeAll()}}),ct(V(O1,"pictorialBar")),et(Ya("pictorialBar","roundRect")),Th.prototype={constructor:Th,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},H(Th,_t),Gt.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(i,a){var o=new Cg(i,e,t);o.name="single_"+a,o.resize(i,t),i.coordinateSystem=o,n.push(o)}),e.eachSeries(function(i){if("singleAxis"===i.get("coordinateSystem")){var a=e.queryComponents({mainType:"singleAxis",index:i.get("singleAxisIndex"),id:i.get("singleAxisId")})[0];i.coordinateSystem=a&&a.coordinateSystem}}),n},dimensions:(Cg.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:Cg,_init:function(e,t,n){var a=new Th(this.dimension,jo(e),[0,0],e.get("type"),e.get("position"));a.onBand="category"===a.type&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),(e.axis=a).model=e,(a.coordinateSystem=this)._axis=a},update:function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();I(i.mapDimension(this.dimension,!0),function(a){this._axis.scale.unionExtentFromData(i,a)},this),la(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=vt({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),i=n?[0,e.width]:[0,e.height],a=t.reverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),i=n[0]+n[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return i-o+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),i=[],a="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),i[a]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-a]=0==a?n.y+n.height/2:n.x+n.width/2,i}}).dimensions});var nD=["axisLine","axisTickLabel","axisName"],iD=["splitArea","splitLine"],aD=mn.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,i){var a=this.group;a.removeAll();var o=this._axisGroup;this._axisGroup=new re;var r=Dg(e),s=new rn(e,r);I(nD,s.add,s),a.add(this._axisGroup),a.add(s.getGroup()),I(iD,function(l){e.get(l+".show")&&this["_"+l](e)},this),ru(o,this._axisGroup,e),aD.superCall(this,"render",e,t,n,i)},remove:function(){Nx(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),i=n.getModel("lineStyle"),a=i.get("width"),o=i.get("color");o=o instanceof Array?o:[o];for(var r=e.coordinateSystem.getRect(),s=t.isHorizontal(),l=[],u=0,h=t.getTicksCoords({tickModel:n}),c=[],d=[],f=0;f<h.length;++f){var p=t.toGlobalCoord(h[f].coord);s?(c[0]=p,c[1]=r.y,d[0]=p,d[1]=r.y+r.height):(c[0]=r.x,c[1]=p,d[0]=r.x+r.width,d[1]=p);var m=u++%o.length;l[m]=l[m]||[],l[m].push(new Ot({subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:{lineWidth:a},silent:!0}))}for(f=0;f<l.length;++f)this.group.add(Tn(l[f],{style:{stroke:o[f%o.length],lineDash:i.getLineDash(a),lineWidth:a},silent:!0}))}},_splitArea:function(e){kx(this,this._axisGroup,e,e)}}),vw=Ge.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function yw(e,t){var n,i=[],a=e.seriesIndex;if(null==a||!(n=t.getSeriesByIndex(a)))return{point:[]};var o=n.getData(),r=Ol(o,e);if(null==r||r<0||z(r))return{point:[]};var s=o.getItemGraphicEl(r),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(r)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(o.getValues(O(l.dimensions,function(h){return o.mapDimension(h)}),r,!0))||[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),i=[u.x+u.width/2,u.y+u.height/2]}return{point:i,el:s}}pe(vw.prototype,ja),qo("single",vw,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var ci=I,xw=V,_w=Kt();function bw(e,t,n,i,a){var u,h,c,d,f,p,m,g,o=e.axis;if(!o.scale.isBlank()&&o.containData(t))if(e.involveSeries){var r=(d=(c=(h=e).axis).dim,f=u=t,p=[],m=Number.MAX_VALUE,g=-1,ci(h.seriesModels,function(v,x){var y,b,_=v.getData().mapDimension(d,!0);if(v.getAxisTooltipData){var w=v.getAxisTooltipData(_,u,c);b=w.dataIndices,y=w.nestestValue}else{if(!(b=v.getData().indicesOfNearest(_[0],u,"category"===c.type?.5:null)).length)return;y=v.getData().get(_[0],b[0])}if(null!=y&&isFinite(y)){var S=u-y,M=Math.abs(S);M<=m&&((M<m||0<=S&&g<0)&&(m=M,g=S,f=y,p.length=0),ci(b,function(T){p.push({seriesIndex:v.seriesIndex,dataIndexInside:T,dataIndex:v.getData().getRawIndex(T)})}))}}),{payloadBatch:p,snapToValue:f}),s=r.payloadBatch,l=r.snapToValue;s[0]&&null==a.seriesIndex&&fe(a,s[0]),!i&&e.snap&&o.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s,a),n.showTooltip(e,r,l)}else n.showPointer(e,t)}function oD(e,t,n,i){e[t.key]={value:n,payloadBatch:i}}function rD(e,t,n,i){var a=n.payloadBatch,o=t.axis,r=o.model,s=t.axisPointerModel;if(t.triggerTooltip&&a.length){var l=t.coordSys.model,u=bs(l),h=e.map[u];h||(h=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:o.dim,axisIndex:r.componentIndex,axisType:r.type,axisId:r.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:a.slice()})}}function ww(e){var t=e.axis.model,n={},i=n.axisDim=e.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=t.componentIndex,n.axisName=n[i+"AxisName"]=t.name,n.axisId=n[i+"AxisId"]=t.id,n}function Ah(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}pn({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var Ei=Kt(),sD=I;function Sw(e,t,n){if(!he.node){var i=t.getZr();Ei(i).records||(Ei(i).records={}),function(a,o){function r(s,l){a.on(s,function(u){var c,d,f,h=(c=o,{dispatchAction:f=function(p){var m=d[p.type];m?m.push(p):(p.dispatchAction=f,c.dispatchAction(p))},pendings:d={showTip:[],hideTip:[]}});sD(Ei(a).records,function(c){c&&l(c,u,h.dispatchAction)}),function(c,d){var f,p=c.showTip.length,m=c.hideTip.length;p?f=c.showTip[p-1]:m&&(f=c.hideTip[m-1]),f&&(f.dispatchAction=null,d.dispatchAction(f))}(h.pendings,o)})}Ei(a).initialized||(Ei(a).initialized=!0,r("click",V(Mw,"click")),r("mousemove",V(Mw,"mousemove")),r("globalout",lD))}(i,t),(Ei(i).records[e]||(Ei(i).records[e]={})).handler=n}}function lD(e,t,n){e.handler("leave",null,n)}function Mw(e,t,n,i){t.handler(e,n,i)}function Lg(e,t){if(!he.node){var n=t.getZr();(Ei(n).records||{})[e]&&(Ei(n).records[e]=null)}}var Iw=At({type:"axisPointer",render:function(e,t,n){var i=t.getComponent("tooltip"),a=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";Sw("axisPointer",n,function(o,r,s){"none"!==a&&("leave"===o||0<=a.indexOf(o))&&s({type:"updateAxisPointer",currTrigger:o,x:r&&r.offsetX,y:r&&r.offsetY})})},remove:function(e,t){Lg(t.getZr(),"axisPointer"),Iw.superApply(this._model,"remove",arguments)},dispose:function(e,t){Lg("axisPointer",t),Iw.superApply(this._model,"dispose",arguments)}}),so=Kt(),Tw=ue,Pg=Z;function Us(){}function Aw(e,t,n,i){!function a(o,r){if(X(o)&&X(r)){var s=!0;return I(r,function(l,u){s=s&&a(o[u],l)}),!!s}return o===r}(so(n).lastProp,i)&&(so(n).lastProp=i,t?Ae(n,i,e):(n.stopAnimation(),n.attr(i)))}function Cw(e,t){e[t.get("label.show")?"show":"hide"]()}function kg(e){return{position:e.position.slice(),rotation:e.rotation||0}}function Dw(e,t,n){var i=t.get("z"),a=t.get("zlevel");e&&e.traverse(function(o){"group"!==o.type&&(null!=i&&(o.z=i),null!=a&&(o.zlevel=a),o.silent=n)})}function Ng(e){var t,n=e.get("type"),i=e.getModel(n+"Style");return"line"===n?(t=i.getLineStyle()).fill=null:"shadow"===n&&((t=i.getAreaStyle()).stroke=null),t}function Lw(e,t,n,i,a){var o=Pw(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),r=n.getModel("label"),s=Va(r.get("padding")||0),l=r.getFont(),u=Yn(o,l),h=a.position,c=u.width+s[1]+s[3],d=u.height+s[0]+s[2],f=a.align;"right"===f&&(h[0]-=c),"center"===f&&(h[0]-=c/2);var g,v,x,y,b,_,p=a.verticalAlign;"bottom"===p&&(h[1]-=d),"middle"===p&&(h[1]-=d/2),g=h,v=c,x=d,b=(y=i).getWidth(),_=y.getHeight(),g[0]=Math.min(g[0]+v,b)-v,g[1]=Math.min(g[1]+x,_)-x,g[0]=Math.max(g[0],0),g[1]=Math.max(g[1],0);var m=r.get("backgroundColor");m&&"auto"!==m||(m=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:c,height:d,r:r.get("borderRadius")},position:h.slice(),style:{text:o,textFont:l,textFill:r.getTextColor(),textPosition:"inside",textPadding:s,fill:m,stroke:r.get("borderColor")||"transparent",lineWidth:r.get("borderWidth")||0,shadowBlur:r.get("shadowBlur"),shadowColor:r.get("shadowColor"),shadowOffsetX:r.get("shadowOffsetX"),shadowOffsetY:r.get("shadowOffsetY")},z2:10}}function Pw(e,t,n,i,a){e=t.scale.parse(e);var o=t.scale.getLabel(e,{precision:a.precision}),r=a.formatter;if(r){var s={value:qf(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};I(i,function(l){var u=n.getSeriesByIndex(l.seriesIndex),c=u&&u.getDataParams(l.dataIndexInside);c&&s.seriesData.push(c)}),q(r)?o=r.replace("{value}",o):ee(r)&&(o=r(s))}return o}function Eg(e,t,n){var i=qt();return yi(i,i,n.rotation),En(i,i,n.position),ni([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function kw(e,t,n,i,a,o){var r=rn.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=a.get("label.margin"),Lw(t,i,a,o,{position:Eg(i.axis,e,n),align:r.textAlign,verticalAlign:r.textVerticalAlign})}function Og(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function Nw(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function Ew(e,t,n,i,a,o){return{cx:e,cy:t,r0:n,r:i,startAngle:a,endAngle:o,clockwise:!0}}Or((Us.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,i||this._lastValue!==a||this._lastStatus!==o){this._lastValue=a,this._lastStatus=o;var r=this._group,s=this._handle;if(!o||"hide"===o)return r&&r.hide(),void(s&&s.hide());r&&r.show(),s&&s.show();var l={};this.makeElOption(l,a,e,t,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(e,t);if(r){var c=V(Aw,t,h);this.updatePointerEl(r,l,c,t),this.updateLabelEl(r,l,c,t)}else r=this._group=new re,this.createPointerEl(r,l,e,t),this.createLabelEl(r,l,e,t),n.getZr().add(r);Dw(r,t,!0),this._renderHandle(a)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),i=e.axis,a="category"===i.type,o=t.get("snap");if(!o&&!a)return!1;if("auto"!==n&&null!=n)return!0===n;var r=this.animationThreshold;if(a&&i.getBandWidth()>r)return!0;if(o){var s=up(e).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>r}return!1},makeElOption:function(e,t,n,i,a){},createPointerEl:function(e,t,n,i){var a=t.pointer;if(a){var o=so(e).pointerEl=new Ti[a.type](Tw(t.pointer));e.add(o)}},createLabelEl:function(e,t,n,i){if(t.label){var a=so(e).labelEl=new Fe(Tw(t.label));e.add(a),Cw(a,i)}},updatePointerEl:function(e,t,n){var i=so(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),n(i,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,i){var a=so(e).labelEl;a&&(a.setStyle(t.label.style),n(a,{shape:t.label.shape,position:t.label.position}),Cw(a,i))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,i=this._api.getZr(),a=this._handle,o=n.getModel("handle"),r=n.get("status");if(!o.get("show")||!r||"hide"===r)return a&&i.remove(a),void(this._handle=null);this._handle||(t=!0,a=this._handle=Ro(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(l){Ia(l.event)},onmousedown:Pg(this._onHandleDragMove,this,0,0),drift:Pg(this._onHandleDragMove,this),ondragend:Pg(this._onHandleDragEnd,this)}),i.add(a)),Dw(a,n,!1),a.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");z(s)||(s=[s,s]),a.attr("scale",[s[0]/2,s[1]/2]),is(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){Aw(this._axisPointerModel,!t&&this._moveAnimation,this._handle,kg(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(kg(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(kg(i)),so(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,i=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}}).constructor=Us);var uD=Us.extend({makeElOption:function(e,t,n,i,a){var o=n.axis,r=o.grid,s=i.get("type"),l=Ow(r,o).getOtherAxis(o).getGlobalExtent(),u=o.toGlobalCoord(o.dataToCoord(t,!0));if(s&&"none"!==s){var h=Ng(i),c=hD[s](o,u,l);c.style=h,e.graphicKey=c.type,e.pointer=c}kw(t,e,cp(r.model,n),n,i,a)},getHandleTransform:function(e,t,n){var i=cp(t.axis.grid.model,t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:Eg(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var a=n.axis,o=a.grid,r=a.getGlobalExtent(!0),s=Ow(o,a).getOtherAxis(a).getGlobalExtent(),l="x"===a.dim?0:1,u=e.position;u[l]+=t[l],u[l]=Math.min(r[1],u[l]),u[l]=Math.max(r[0],u[l]);var h=(s[1]+s[0])/2,c=[h,h];return c[l]=u[l],{position:u,rotation:e.rotation,cursorPoint:c,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function Ow(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var hD={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:Og([t,n[0]],[t,n[1]],Rw(e))}},shadow:function(e,t,n){var i=Math.max(1,e.getBandWidth());return{type:"Rect",shape:Nw([t-i/2,n[0]],[i,n[1]-n[0]],Rw(e))}}};function Rw(e){return"x"===e.dim?0:1}mn.registerAxisPointerClass("CartesianAxisPointer",uD),zt(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!z(t)&&(e.axisPointer.link=[t])}}),fn(ai.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function lA(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(i,a,o){var r=a.getComponent("tooltip"),s=a.getComponent("axisPointer"),l=s.get("link",!0)||[],u=[];Qo(o.getCoordinateSystems(),function(h){if(h.axisPointerEnabled){var c=bs(h.model),d=i.coordSysAxesInfo[c]={},f=(i.coordSysMap[c]=h).model.getModel("tooltip",r);if(Qo(h.getAxes(),sp(v,!1,null)),h.getTooltipAxes&&r&&f.get("show")){var p="axis"===f.get("trigger"),m="cross"===f.get("axisPointer.type"),g=h.getTooltipAxes(f.get("axisPointer.axis"));(p||m)&&Qo(g.baseAxes,sp(v,!m||"cross",p)),m&&Qo(g.otherAxes,sp(v,"cross",!1))}}function v(x,y,b){var _=b.model.getModel("axisPointer",s),w=_.get("show");if(w&&("auto"!==w||x||hp(_))){null==y&&(y=_.get("triggerTooltip"));var S=(_=x?function(L,P,N,R,k,B){var G=P.getModel("axisPointer"),W={};Qo(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(ce){W[ce]=ue(G.get(ce))}),W.snap="category"!==L.type&&!!B,"cross"===G.get("type")&&(W.type="line");var F=W.label||(W.label={});if(null==F.show&&(F.show=!1),"cross"===k){var Y=G.get("label.show");if(F.show=null==Y||Y,!B){var K=W.lineStyle=G.get("crossStyle");K&&ie(F,K.textStyle)}}return L.model.getModel("axisPointer",new ze(W,N,R))}(b,f,s,a,x,y):_).get("snap"),M=bs(b.model),T=y||S||"category"===b.type,A=i.axesInfo[M]={key:M,axis:b,coordSys:h,axisPointerModel:_,triggerTooltip:y,involveSeries:T,snap:S,useHandle:hp(_),seriesModels:[]};d[M]=A,i.seriesInvolved|=T;var C=function(L,P){for(var N=P.model,R=P.dim,k=0;k<L.length;k++){var B=L[k]||{};if(lp(B[R+"AxisId"],N.id)||lp(B[R+"AxisIndex"],N.componentIndex)||lp(B[R+"AxisName"],N.name))return k}}(l,b);if(null!=C){var D=u[C]||(u[C]={axesInfo:{}});D.axesInfo[M]=A,D.mapper=l[C].mapper,A.linkGroup=D}}}})}(n,e,t),n.seriesInvolved&&function(i,a){a.eachSeries(function(o){var r=o.coordinateSystem,s=o.get("tooltip.trigger",!0),l=o.get("tooltip.show",!0);r&&"none"!==s&&!1!==s&&"item"!==s&&!1!==l&&!1!==o.get("axisPointer.show",!0)&&Qo(i.coordSysAxesInfo[bs(r.model)],function(u){var h=u.axis;r.getAxis(h.dim)===h&&(u.seriesModels.push(o),null==u.seriesDataCount&&(u.seriesDataCount=0),u.seriesDataCount+=o.getData().count())})},this)}(n,e),n}(e,t)}),Be({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,n){var v,x,b,i=e.currTrigger,a=[e.x,e.y],o=e,r=e.dispatchAction||Z(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){Ah(a)&&(a=yw({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Ah(a),u=o.axesInfo,h=s.axesInfo,c="leave"===i||Ah(a),d={},f={},p={list:[],map:{}},m={showPointer:xw(oD,f),showTooltip:xw(rD,p)};ci(s.coordSysMap,function(v,x){var y=l||v.containPoint(a);ci(s.coordSysAxesInfo[x],function(b,_){var w=b.axis,S=function(T,A){for(var C=0;C<(T||[]).length;C++){var D=T[C];if(A.axis.dim===D.axisDim&&A.axis.model.componentIndex===D.axisIndex)return D}}(u,b);if(!c&&y&&(!u||S)){var M=S&&S.value;null!=M||l||(M=w.pointToData(a)),null!=M&&bw(b,M,m,!1,d)}})});var g={};return ci(h,function(v,x){var y=v.linkGroup;y&&!f[x]&&ci(y.axesInfo,function(b,_){var w=f[_];if(b!==v&&w){var S=w.value;y.mapper&&(S=v.axis.scale.parse(y.mapper(S,ww(b),ww(v)))),g[v.key]=S}})}),ci(g,function(v,x){bw(h[x],v,m,!0,d)}),v=f,x=h,b=d.axesInfo=[],ci(x,function(_,w){var S=_.axisPointerModel.option,M=v[w];M?(_.useHandle||(S.status="show"),S.value=M.value,S.seriesDataIndices=(M.payloadBatch||[]).slice()):_.useHandle||(S.status="hide"),"show"===S.status&&b.push({axisDim:_.axis.dim,axisIndex:_.axis.model.componentIndex,value:S.value})}),function(v,x,y,b){if(Ah(x)||!v.list.length)return b({type:"hideTip"});var _=((v.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};b({type:"showTip",escapeConnect:!0,x:x[0],y:x[1],tooltipOption:y.tooltipOption,position:y.position,dataIndexInside:_.dataIndexInside,dataIndex:_.dataIndex,seriesIndex:_.seriesIndex,dataByCoordSys:v.list})}(p,a,e,r),function(v,x,y){var b=y.getZr(),_="axisPointerLastHighlights",w=_w(b)[_]||{},S=_w(b)[_]={};ci(v,function(A,C){var D=A.axisPointerModel.option;"show"===D.status&&ci(D.seriesDataIndices,function(L){S[L.seriesIndex+" | "+L.dataIndex]=L})});var M=[],T=[];I(w,function(A,C){S[C]||T.push(A)}),I(S,function(A,C){w[C]||M.push(A)}),T.length&&y.dispatchAction({type:"downplay",escapeConnect:!0,batch:T}),M.length&&y.dispatchAction({type:"highlight",escapeConnect:!0,batch:M})}(h,0,n),d}});var zw=["x","y"],cD=["width","height"],dD=Us.extend({makeElOption:function(e,t,n,i,a){var o=n.axis,r=o.coordinateSystem,s=Rg(r,1-Ch(o)),l=r.dataToPoint(t)[0],u=i.get("type");if(u&&"none"!==u){var h=Ng(i),c=fD[u](o,l,s);c.style=h,e.graphicKey=c.type,e.pointer=c}kw(t,e,Dg(n),n,i,a)},getHandleTransform:function(e,t,n){var i=Dg(t,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:Eg(t.axis,e,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,i){var a=n.axis,o=a.coordinateSystem,r=Ch(a),s=Rg(o,r),l=e.position;l[r]+=t[r],l[r]=Math.min(s[1],l[r]),l[r]=Math.max(s[0],l[r]);var u=Rg(o,1-r),h=(u[1]+u[0])/2,c=[h,h];return c[r]=l[r],{position:l,rotation:e.rotation,cursorPoint:c,tooltipOption:{verticalAlign:"middle"}}}}),fD={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:Og([t,n[0]],[t,n[1]],Ch(e))}},shadow:function(e,t,n){var i=e.getBandWidth();return{type:"Rect",shape:Nw([t-i/2,n[0]],[i,n[1]-n[0]],Ch(e))}}};function Ch(e){return e.isHorizontal()?0:1}function Rg(e,t){var n=e.getRect();return[n[zw[t]],n[zw[t]]+n[cD[t]]]}mn.registerAxisPointerClass("SingleAxisPointer",dD),At({type:"single"});var pD=ht.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){pD.superApply(this,"init",arguments),this.legendVisualProvider=new ws(Z(this.getData,this),Z(this.getRawData,this))},fixData:function(e){var t=e.length,n={},i=Md(e,function(h){return n.hasOwnProperty(h[0])||(n[h[0]]=-1),h[2]}),a=[];i.buckets.each(function(h,c){a.push({name:c,dataList:h})});for(var o=a.length,r=0;r<o;++r){for(var s=a[r].name,l=0;l<a[r].dataList.length;++l)n[u=a[r].dataList[l][0]]=r;for(var u in n)n.hasOwnProperty(u)&&n[u]!==r&&(n[u]=r,e[t]=[],e[t][0]=u,e[t][1]=0,e[t][2]=s,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=se(e.data,function(c){return void 0!==c[2]}),a=this.fixData(i||[]),o=[],r=this.nameMap=ne(),s=0,l=0;l<a.length;++l)o.push(a[l][2]),r.get(a[l][2])||(r.set(a[l][2],s),s++);var u=Ho(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Ou(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),h=new Ct(u,this);return h.initData(a),h},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],i=0;i<t;++i)n[i]=i;var a=e.mapDimension("single"),o=Md(n,function(s){return e.get("name",s)}),r=[];return o.buckets.each(function(s,l){s.sort(function(u,h){return e.get(a,u)-e.get(a,h)}),r.push({name:l,indices:s})}),r},getAxisTooltipData:function(e,t,n){z(e)||(e=e?[e]:[]);for(var i,a=this.getData(),o=this.getLayerSeries(),r=[],s=o.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,h=-1,c=o[l].indices.length,d=0;d<c;++d){var f=a.get(e[0],o[l].indices[d]),p=Math.abs(f-t);p<=u&&(i=f,u=p,h=o[l].indices[d])}r.push(h)}return{dataIndices:r,nestestValue:i}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),i=t.get(t.mapDimension("value"),e);return!isNaN(i)&&null!=i||(i="-"),ot(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function Bw(e,t,n){if(e.count())for(var i,a=t.coordinateSystem,o=t.getLayerSeries(),r=e.mapDimension("single"),s=e.mapDimension("value"),l=O(o,function(g){return O(g.indices,function(v){var x=a.dataToPoint(e.get(r,v));return x[1]=e.get(s,v),x})}),u=function(g){for(var v=g.length,x=g[0].length,y=[],b=[],_=0,w={},S=0;S<x;++S){for(var M=0,T=0;M<v;++M)T+=g[M][S][1];_<T&&(_=T),y.push(T)}for(var A=0;A<x;++A)b[A]=(_-y[A])/2;for(var C=_=0;C<x;++C){var D=y[C]+b[C];_<D&&(_=D)}return w.y0=b,w.max=_,w}(l),h=u.y0,c=n/u.max,d=o.length,f=o[0].indices.length,p=0;p<f;++p){e.setItemLayout(o[0].indices[p],{layerIndex:0,x:l[0][p][0],y0:i=h[p]*c,y:l[0][p][1]*c});for(var m=1;m<d;++m)e.setItemLayout(o[m].indices[p],{layerIndex:m,x:l[m][p][0],y0:i+=l[m-1][p][1]*c,y:l[m][p][1]*c})}}function Dh(e,t,n){re.call(this);var i=new Fn({z2:2});i.seriesIndex=t.seriesIndex;var a=new Pe({z2:4,silent:e.getModel("label").get("silent")});function o(){a.ignore=a.hoverIgnore}function r(){a.ignore=a.normalIgnore}this.add(i),this.add(a),this.updateData(!0,e,"normal",t,n),this.on("emphasis",o).on("normal",r).on("mouseover",o).on("mouseout",r)}an({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var i=e.getData(),a=this.group,o=e.getLayerSeries(),r=i.getLayout("layoutInfo");function u(f){return f.name}a.attr("position",[0,r.rect.y+r.boundaryGap[0]]);var h=new Di(this._layersSeries||[],o,u,u),c={};function d(f,p,m){var G,W,Y,g=this._layers;if("remove"!==f){for(var v,x,y,b=[],_=[],w=o[p].indices,S=0;S<w.length;S++){var M=i.getItemLayout(w[S]),T=M.x,A=M.y0,C=M.y;b.push([T,A]),_.push([T,A+C]),v=i.getItemVisual(w[S],"color")}var D=i.getItemLayout(w[0]),L=i.getItemModel(w[S-1]),P=L.getModel("label"),N=P.get("margin");if("add"===f){var R=c[p]=new re;x=new sx({shape:{points:b,stackedOnPoints:_,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),y=new Pe({style:{x:D.x-N,y:D.y0+D.y/2}}),R.add(x),R.add(y),a.add(R),x.setClipPath((G=x.getBoundingRect(),W=e,Vt(Y=new Fe({shape:{x:G.x-10,y:G.y-10,width:0,height:G.height+20}}),{shape:{width:G.width+20,height:G.height+20}},W,function(){x.removeClipPath()}),Y))}else x=(R=g[m]).childAt(0),y=R.childAt(1),a.add(R),c[p]=R,Ae(x,{shape:{points:b,stackedOnPoints:_}},e),Ae(y,{style:{x:D.x-N,y:D.y0+D.y/2}},e);var k=L.getModel("emphasis.itemStyle"),B=L.getModel("itemStyle");ut(y.style,P,{text:P.get("show")?e.getFormattedLabel(w[S-1],"normal")||i.getName(w[S-1]):null,textVerticalAlign:"middle"}),x.setStyle(fe({fill:v},B.getItemStyle(["color"]))),tt(x,k.getItemStyle())}else a.remove(g[p])}h.add(Z(d,this,"add")).update(Z(d,this,"update")).remove(Z(d,this,"remove")).execute(),this._layersSeries=o,this._layers=c},dispose:function(){}}),ct(function(e,t){e.eachSeriesByType("themeRiver",function(n){var i=n.getData(),a=n.coordinateSystem,o={},r=a.getRect();o.rect=r;var s=n.get("boundaryGap"),l=a.getAxis();o.boundaryGap=s,"horizontal"===l.orient?(s[0]=Q(s[0],r.height),s[1]=Q(s[1],r.height),Bw(i,n,r.height-s[0]-s[1])):(s[0]=Q(s[0],r.width),s[1]=Q(s[1],r.width),Bw(i,n,r.width-s[0]-s[1])),i.setLayout("layoutInfo",o)})}),et(function(e){e.eachSeriesByType("themeRiver",function(t){var n=t.getData(),i=t.getRawData(),a=t.get("color"),o=ne();n.each(function(r){o.set(n.getRawIndex(r),r)}),i.each(function(r){var s=i.getName(r),l=a[(t.nameMap.get(s)-1)%a.length];i.setItemVisual(r,"color",l);var u=o.get(r);null!=u&&n.setItemVisual(u,"color",l)})})}),fn(Ss("themeRiver")),ht.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function o(r){var s=0;I(r.children,function(u){o(u);var h=u.value;z(h)&&(h=h[0]),s+=h});var l=r.value;z(l)&&(l=l[0]),null!=l&&!isNaN(l)||(l=s),l<0&&(l=0),z(r.value)?r.value[0]=l:r.value=l}(n);var i=O(e.levels||[],function(o){return new ze(o,this,t)},this),a=Ka.createTree(n,this,function(o){o.wrapMethod("getItemModel",function(r,s){var l=a.getNodeByDataIndex(s),u=i[l.depth];return u&&(r.parentModel=u),r})});return a.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=ht.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Np(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var lo=Dh.prototype;lo.updateData=function(e,t,n,i,a){(this.node=t).piece=this,i=i||this._seriesModel,a=a||this._ecModel;var o=this.childAt(0);o.dataIndex=t.dataIndex;var r=t.getModel(),s=t.getLayout(),l=fe({},s);l.label=null;var p,g,u=function(p,m,g){var v=p.getVisual("color"),x=p.getVisual("visualMeta");x&&0!==x.length||(v=null);var y=p.getModel("itemStyle").get("color");if(y)return y;if(v)return v;if(0===p.depth)return g.option.color[0];var b=g.option.color.length;return g.option.color[function(_){for(var w=_;1<w.depth;)w=w.parentNode;return E(_.getAncestors()[0].children,w)}(p)%b]}(t,0,a);p=t,g=u,i.getData().setItemVisual(p.dataIndex,"color",g);var h,c=r.getModel("itemStyle").getItemStyle();h=ie({lineJoin:"bevel",fill:(h="normal"===n?c:pe(r.getModel(n+".itemStyle").getItemStyle(),c)).fill||u},h),e?(o.setShape(l),o.shape.r=s.r0,Ae(o,{shape:{r:s.r}},i,t.dataIndex),o.useStyle(h)):"object"==typeof h.fill&&h.fill.type||"object"==typeof o.style.fill&&o.style.fill.type?(Ae(o,{shape:l},i),o.useStyle(h)):Ae(o,{shape:l,style:h},i),this._updateLabel(i,u,n);var d=r.getShallow("cursor");if(d&&o.attr("cursor",d),e){var f=i.getShallow("highlightPolicy");this._initEvents(o,t,i,f)}this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel,tt(this)},lo.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):function(i,a,o){return"none"!==o&&("self"===o?i===a:"ancestor"===o?i===a||i.isAncestorOf(a):i===a||i.isDescendantOf(a))}(n,t.node,e)?n.piece.childAt(0).trigger("highlight"):"none"!==e&&n.piece.childAt(0).trigger("downplay"))})},lo.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},lo.onHighlight=function(){this.updateData(!1,this.node,"highlight")},lo.onDownplay=function(){this.updateData(!1,this.node,"downplay")},lo._updateLabel=function(e,t,n){var i=this.node.getModel(),a=i.getModel("label"),o="normal"===n||"emphasis"===n?a:i.getModel(n+".label"),r=i.getModel("emphasis.label"),s=o.get("formatter")?n:"normal",l=Ne(e.getFormattedLabel(this.node.dataIndex,s,null,null,"label"),this.node.name);!1===M("show")&&(l="");var u=this.node.getLayout(),h=o.get("minAngle");null==h&&(h=a.get("minAngle")),null!=(h=h/180*Math.PI)&&Math.abs(u.endAngle-u.startAngle)<h&&(l="");var d=this.childAt(1);cn(d.style,d.hoverStyle||{},a,r,{defaultText:o.getShallow("show")?l:null,autoColor:t,useInsideStyle:!0});var f,p=(u.startAngle+u.endAngle)/2,m=Math.cos(p),g=Math.sin(p),v=M("position"),x=M("distance")||0,y=M("align");"outside"===v?(f=u.r+x,y=p>Math.PI/2?"right":"left"):y&&"center"!==y?"left"===y?(f=u.r0+x,p>Math.PI/2&&(y="right")):"right"===y&&(f=u.r-x,p>Math.PI/2&&(y="left")):(f=(u.r+u.r0)/2,y="center"),d.attr("style",{text:l,textAlign:y,textVerticalAlign:M("verticalAlign")||"middle",opacity:M("opacity")}),d.attr("position",[f*m+u.cx,f*g+u.cy]);var w=M("rotate"),S=0;function M(T){var A=o.get(T);return null==A?a.get(T):A}"radial"===w?(S=-p)<-Math.PI/2&&(S+=Math.PI):"tangential"===w?(S=Math.PI/2-p)>Math.PI/2?S-=Math.PI:S<-Math.PI/2&&(S+=Math.PI):"number"==typeof w&&(S=w*Math.PI/180),d.attr("rotation",S)},lo._initEvents=function(e,t,n,i){function a(){r.onEmphasis(i)}function o(){r.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var r=this;n.isAnimationEnabled()&&e.on("mouseover",a).on("mouseout",o).on("emphasis",a).on("normal",o).on("downplay",function(){r.onDownplay()}).on("highlight",function(){r.onHighlight()})},H(Dh,re),Pt.extend({type:"sunburst",init:function(){},render:function(e,t,n,i){var a=this;this.seriesModel=e,this.api=n,this.ecModel=t;var o=e.getData(),r=o.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),h=[];if(s.eachNode(function(p){h.push(p)}),function(p,m){function g(x){return x.getId()}function v(x,y){!function(b,_){if(u||!b||b.getValue()||(b=null),b!==r&&_!==r)if(_&&_.piece)b?(_.piece.updateData(!1,b,"normal",e,t),o.setItemGraphicEl(b.dataIndex,_.piece)):!(S=_)||S.piece&&(l.remove(S.piece),S.piece=null);else if(b){var w=new Dh(b,e,t);l.add(w),o.setItemGraphicEl(b.dataIndex,w)}var S}(null==x?null:p[x],null==y?null:m[y])}0===p.length&&0===m.length||new Di(m,p,g,g).add(v).update(v).remove(V(v,null)).execute()}(h,this._oldChildren||[]),function(p,m){if(0<m.depth){a.virtualPiece?a.virtualPiece.updateData(!1,p,"normal",e,t):(a.virtualPiece=new Dh(p,e,t),l.add(a.virtualPiece)),m.piece._onclickEvent&&m.piece.off("click",m.piece._onclickEvent);var g=function(v){a._rootToNode(m.parentNode)};m.piece._onclickEvent=g,a.virtualPiece.on("click",g)}else a.virtualPiece&&(l.remove(a.virtualPiece),a.virtualPiece=null)}(r,s),i&&i.highlight&&i.highlight.piece){var d=e.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(d)}else if(i&&i.unhighlight){var f=this.virtualPiece;!f&&r.children.length&&(f=r.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=h},dispose:function(){},_initEvents:function(){function e(n){var i=!1;t.seriesModel.getViewRoot().eachNode(function(a){if(!i&&a.piece&&a.piece.childAt(0)===n.target){var o=a.getModel().get("nodeClick");if("rootToNode"===o)t._rootToNode(a);else if("link"===o){var r=a.getModel(),s=r.get("link");s&&qr(s,r.get("target",!0)||"_blank")}i=!0}})}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var i=e[0]-n.cx,a=e[1]-n.cy,o=Math.sqrt(i*i+a*a);return o<=n.r&&o>=n.r0}}});var Fw="sunburstRootToNode";Be({type:Fw,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){var a=Ls(e,[Fw],n);if(a){var o=n.getViewRoot();o&&(e.direction=kp(o,a.node)?"rollUp":"drillDown"),n.resetViewRoot(a.node)}})});var Gw="sunburstHighlight";Be({type:Gw,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){var a=Ls(e,[Gw],n);a&&(e.highlight=a.node)})}),Be({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,i){e.unhighlight=!0})});var Ww=Math.PI/180;function _D(e,t){return t=t||[0,0],O(["x","y"],function(n,i){var a=this.getAxis(n),o=t[i],r=e[i]/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(o-r)-a.dataToCoord(o+r))},this)}function bD(e,t){return t=t||[0,0],O([0,1],function(n){var i=t[n],a=e[n]/2,o=[],r=[];return o[n]=i-a,r[n]=i+a,o[1-n]=r[1-n]=t[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(r)[n])},this)}function wD(e,t){var n=this.getAxis(),i=t instanceof Array?t[0]:t,a=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-a)-n.dataToCoord(i+a))}function SD(e,t){return O(["Radius","Angle"],function(n,i){var a=this["get"+n+"Axis"](),o=t[i],r=e[i]/2,s="dataTo"+n,l="category"===a.type?a.getBandWidth():Math.abs(a[s](o-r)-a[s](o+r));return"Angle"===n&&(l=l*Math.PI/180),l},this)}et(V(Ku,"sunburst")),ct(V(function(e,t,n,i){t.eachSeriesByType(e,function(a){var o=a.get("center"),r=a.get("radius");z(r)||(r=[0,r]),z(o)||(o=[o,o]);var s=n.getWidth(),l=n.getHeight(),u=Math.min(s,l),h=Q(o[0],s),c=Q(o[1],l),d=Q(r[0],u/2),f=Q(r[1],u/2),p=-a.get("startAngle")*Ww,m=a.get("minAngle")*Ww,g=a.getData().tree.root,v=a.getViewRoot(),x=v.depth,y=a.get("sort");null!=y&&function k(B,G){var W=B.children||[];B.children=function xD(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(i,a){var o=(i.getValue()-a.getValue())*(n?1:-1);return 0==o?(i.dataIndex-a.dataIndex)*(n?-1:1):o})}(W,G),W.length&&I(B.children,function(F){k(F,G)})}(v,y);var b=0;I(v.children,function(k){isNaN(k.getValue())||b++});var _=v.getValue(),w=Math.PI/(_||b)*2,S=0<v.depth,T=(f-d)/(v.height-(S?-1:1)||1),A=a.get("clockwise"),C=a.get("stillShowZeroSum"),D=A?1:-1,L=function(k,B){if(k){var G=B;if(k!==g){var W=k.getValue(),F=0===_&&C?w:W*w;F<m&&(F=m),G=B+D*F;var Y=k.depth-x-(S?-1:1),K=d+T*Y,ce=d+T*(1+Y),U=k.getModel();null!=U.get("r0")&&(K=Q(U.get("r0"),u/2)),null!=U.get("r")&&(ce=Q(U.get("r"),u/2)),k.setLayout({angle:F,startAngle:B,endAngle:G,clockwise:A,cx:h,cy:c,r0:K,r:ce})}if(k.children&&k.children.length){var le=0;I(k.children,function(de){le+=L(de,B+le)})}return G-B}};if(S){var R=2*Math.PI;g.setLayout({angle:R,startAngle:p,endAngle:p+R,clockwise:A,cx:h,cy:c,r0:d,r:d+T})}L(v,p)})},"sunburst")),fn(V(Ss,"sunburst"));var Hw=Pv,MD=["itemStyle"],ID=["emphasis","itemStyle"],TD=["label"],AD=["emphasis","label"],DD={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Z(_D,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:Z(bD,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Z(wD,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:Z(function(a){var o=t.dataToRadius(a[0]),r=n.dataToAngle(a[1]),s=e.coordToPoint([o,r]);return s.push(o,r*Math.PI/180),s}),size:Z(SD,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(i,a){return e.dataToPoint(i,a)}}}}};function Zw(e,t,n,i,a){null==n[e]||a||(t[e]=n[e],n[e]=i[e])}function Uw(e,t,n,i){var a=e.get("renderItem"),o=e.coordinateSystem,r={};o&&(r=o.prepareCustoms?o.prepareCustoms():DD[o.type](o));var s,l,u,h,c,g,v,d=ie({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(g,v){return null==v&&(v=s),t.get(t.getDimension(g||0),v)},style:function(g,v){null==v&&(v=s),m(v);var x=l.getModel(MD).getItemStyle();null!=c&&(x.fill=c);var y=t.getItemVisual(v,"opacity");null!=y&&(x.opacity=y);var b=g?Yw(g,u):u;return ut(x,b,null,{autoColor:c,isRectText:!0}),x.text=b.getShallow("show")?De(e.getFormattedLabel(v,"normal"),Hu(t,v)):null,g&&qw(x,g),x},styleEmphasis:function(g,v){null==v&&(v=s),m(v);var x=l.getModel(ID).getItemStyle(),y=g?Yw(g,h):h;return ut(x,y,null,{isRectText:!0},!0),x.text=y.getShallow("show")?Qe(e.getFormattedLabel(v,"emphasis"),e.getFormattedLabel(v,"normal"),Hu(t,v)):null,g&&qw(x,g),x},visual:function(g,v){return null==v&&(v=s),t.getItemVisual(v,g)},barLayout:function(g){if(o.getBaseAxis)return function(v){var x=[],y=v.axis;if("category"===y.type){for(var b=y.getBandWidth(),_=0;_<v.count;_++)x.push(ie({bandWidth:b,axisKey:"axis0",stackId:Wf+_},v));var w=N1(x),S=[];for(_=0;_<v.count;_++){var M=w.axis0[Wf+_];M.offsetCenter=M.offset+M.width/2,S.push(M)}return S}}(ie({axis:o.getBaseAxis()},g))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(g){return Fd(g,n)}},r.api||{}),f={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:r.coordSys,dataInsideLength:t.count(),encode:(g=e.getData(),v={},I(g.dimensions,function(x,y){var b=g.getDimensionInfo(x);if(!b.isExtraCoord){var _=b.coordDim;(v[_]=v[_]||[])[b.coordDimIndex]=y}}),v)},p=!0;return function(g,v){return s=g,p=!0,a&&a(ie({dataIndexInside:g,dataIndex:t.getRawIndex(g),actionType:v?v.type:null},f),d)};function m(g){null==g&&(g=s),p&&(l=t.getItemModel(g),u=l.getModel(TD),h=l.getModel(AD),c=t.getItemVisual(g,"color"),p=!1)}}function zg(e,t,n,i,a,o){return(e=Bg(e,t,n,i,a,o,!0))&&o.setItemGraphicEl(t,e),e}function Bg(e,t,n,i,a,o,r){var d,s=!n,l=(n=n||{}).type,u=n.shape,h=n.style;if(e&&(s||null!=l&&l!==e.__customGraphicType||"path"===l&&(d=u)&&(d.hasOwnProperty("pathData")||d.hasOwnProperty("d"))&&$w(u)!==e.__customPathData||"image"===l&&Kw(h,"image")&&h.image!==e.__customImagePath||"text"===l&&Kw(u,"text")&&h.text!==e.__customText)&&(a.remove(e),e=null),!s){var c=!e;return function(d,f,p,m,g,v,x){var y={},b=p.style||{};if(p.shape&&(y.shape=ue(p.shape)),p.position&&(y.position=p.position.slice()),p.scale&&(y.scale=p.scale.slice()),p.origin&&(y.origin=p.origin.slice()),p.rotation&&(y.rotation=p.rotation),"image"===d.type&&p.style){var _=y.style={};I(["x","y","width","height"],function(M){Zw(M,_,b,d.style,v)})}if("text"===d.type&&p.style&&(_=y.style={},I(["x","y"],function(M){Zw(M,_,b,d.style,v)}),!b.hasOwnProperty("textFill")&&b.fill&&(b.textFill=b.fill),!b.hasOwnProperty("textStroke")&&b.stroke&&(b.textStroke=b.stroke)),"group"!==d.type&&(d.useStyle(b),v)){d.style.opacity=0;var w=b.opacity;null==w&&(w=1),Vt(d,{style:{opacity:w}},m,f)}v?d.attr(y):Ae(d,y,m,f),p.hasOwnProperty("z2")&&d.attr("z2",p.z2||0),p.hasOwnProperty("silent")&&d.attr("silent",p.silent),p.hasOwnProperty("invisible")&&d.attr("invisible",p.invisible),p.hasOwnProperty("ignore")&&d.attr("ignore",p.ignore),p.hasOwnProperty("info")&&d.attr("info",p.info);var S=p.styleEmphasis;Hr(d,S),x&&Ra(d,!1!==S)}(e=e||function(d){var f,p=d.type;if("path"===p){var m=d.shape,g=null!=m.width&&null!=m.height?{x:m.x||0,y:m.y||0,width:m.width,height:m.height}:null,v=$w(m);(f=tu(v,null,g,m.layout||"center")).__customPathData=v}else if("image"===p)(f=new Lt({})).__customImagePath=d.style.image;else if("text"===p)(f=new Pe({})).__customText=d.style.text;else if("group"===p)f=new re;else{if("compoundPath"===p)throw new Error('"compoundPath" is not supported yet.');f=new(Rd(p))}return f.__customGraphicType=p,f.name=d.name,f}(n),t,n,i,0,c,r),"group"===l&&function(d,f,p,m,g){var S,v=p.children,x=v?v.length:0,y=p.$mergeChildren,b="byName"===y||p.diffChildrenByName,_=!1===y;if(x||b||_){if(b)return void new Di((S={oldChildren:d.children()||[],newChildren:v||[],dataIndex:f,animatableModel:m,group:d,data:g}).oldChildren,S.newChildren,jw,jw,S).add(Xw).update(Xw).remove(LD).execute();_&&d.removeAll();for(var w=0;w<x;w++)v[w]&&Bg(d.childAt(w),f,v[w],m,d,g)}}(e,t,n,i,o),a.add(e),e}}function jw(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function Xw(e,t){var n=this.context;Bg(null!=t?n.oldChildren[t]:null,n.dataIndex,null!=e?n.newChildren[e]:null,n.animatableModel,n.group,n.data)}function Yw(e,t){var n=new ze({},t);return I(Hw,function(i,a){e.hasOwnProperty(i)&&(n.option[a]=e[i])}),n}function qw(e,t){for(var n in t)!t.hasOwnProperty(n)&&Hw.hasOwnProperty(n)||(e[n]=t[n])}function LD(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function $w(e){return e&&(e.pathData||e.d)}function Kw(e,t){return e&&e.hasOwnProperty(t)}function Qw(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function Jw(e,t){return t.dim+e.model.componentIndex}function Lh(e,t){_t.call(this,"radius",e,t),this.type="category"}ht.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return Pi(this.getSource(),this)},getDataParams:function(e,t,n){var i=ht.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),Pt.extend({type:"custom",_data:null,render:function(e,t,n,i){var a=this._data,o=e.getData(),r=this.group,s=Uw(e,o,t,n);o.diff(a).add(function(u){zg(null,u,s(u,i),e,r,o)}).update(function(u,h){zg(a.getItemGraphicEl(h),u,s(u,i),e,r,o)}).remove(function(u){var h=a.getItemGraphicEl(u);h&&r.remove(h)}).execute();var l=e.get("clip",!0)?Uu(e.coordinateSystem,!1,e):null;l?r.setClipPath(l):r.removeClipPath(),this._data=o},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,i,a){var o=t.getData(),r=Uw(t,o,n,i);function s(u){u.isGroup||(u.incremental=!0,u.useHoverLayer=!0)}for(var l=e.start;l<e.end;l++)zg(null,l,r(l,a),t,this.group,o).traverse(s)},dispose:We,filterForExposedEvent:function(e,t,n,i){var a=t.element;if(null==a||n.name===a)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===a)return!0;return!1}}),Lh.prototype={constructor:Lh,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:_t.prototype.dataToCoord,radiusToData:_t.prototype.coordToData},H(Lh,_t);var PD=Kt();function Ph(e,t){_t.call(this,"angle",e,t=t||[0,360]),this.type="category"}function kh(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new Lh,this._angleAxis=new Ph,this._radiusAxis.polar=this._angleAxis.polar=this}Ph.prototype={constructor:Ph,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:_t.prototype.dataToCoord,angleToData:_t.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),i=t.count();if(n[1]-n[0]<1)return 0;var a=n[0],o=this.dataToCoord(a+1)-this.dataToCoord(a),r=Math.abs(o),s=Yn(a,e.getFont(),"center","top"),l=Math.max(s.height,7)/r;isNaN(l)&&(l=1/0);var u=Math.max(0,Math.floor(l)),h=PD(this.model),c=h.lastAutoInterval,d=h.lastTickCount;return null!=c&&null!=d&&Math.abs(c-u)<=1&&Math.abs(d-i)<=1&&u<c?u=c:(h.lastTickCount=i,h.lastAutoInterval=u),u}},H(Ph,_t),kh.prototype={type:"polar",axisPointerEnabled:!0,constructor:kh,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===e&&t.push(n),i.scale.type===e&&t.push(i),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);i.inverse?o=r-360:r=o+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,u=l<o?1:-1;l<o||r<l;)l+=360*u;return[s,l]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:e.inverse,contain:function(a,o){var r=a-this.cx,s=o-this.cy,l=r*r+s*s,u=this.r,h=this.r0;return l<=u*u&&h*h<=l}}}};var Vg=Ge.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function eS(e,t){return t.type||(t.data?"category":"value")}function ND(e,t){var n=this,i=n.getAngleAxis(),a=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===n){var l=s.getData();I(l.mapDimension("radius",!0),function(u){a.scale.unionExtentFromData(l,fs(l,u))}),I(l.mapDimension("angle",!0),function(u){i.scale.unionExtentFromData(l,fs(l,u))})}}),la(i.scale,i.model),la(a.scale,a.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),r=360/i.scale.count();i.inverse?o[1]+=r:o[1]-=r,i.setExtent(o[0],o[1])}}function tS(e,t){if(e.type=t.get("type"),e.scale=jo(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}(t.axis=e).model=t}pe(Vg.prototype,ja),qo("angle",Vg,eS,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),qo("radius",Vg,eS,{splitNumber:5}),pn({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(n){n.getCoordSysModel()===this&&(t=n)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),Gt.register("polar",{dimensions:kh.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",function(i,a){var o=new kh(a);o.update=ND;var r=o.getRadiusAxis(),s=o.getAngleAxis(),l=i.findAxisModel("radiusAxis"),u=i.findAxisModel("angleAxis");tS(r,l),tS(s,u),function(h,c,d){var f=c.get("center"),p=d.getWidth(),m=d.getHeight();h.cx=Q(f[0],p),h.cy=Q(f[1],m);var g=h.getRadiusAxis(),v=Math.min(p,m)/2,x=c.get("radius");null==x?x=[0,"100%"]:z(x)||(x=[0,x]),x=[Q(x[0],v),Q(x[1],v)],g.inverse?g.setExtent(x[1],x[0]):g.setExtent(x[0],x[1])}(o,i,t),n.push(o),(i.coordinateSystem=o).model=i}),e.eachSeries(function(i){if("polar"===i.get("coordinateSystem")){var a=e.queryComponents({mainType:"polar",index:i.get("polarIndex"),id:i.get("polarId")})[0];i.coordinateSystem=a.coordinateSystem}}),n}});var ED=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Nh(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],n]),a=e.coordToPoint([t[1],n]);return{x1:i[0],y1:i[1],x2:a[0],y2:a[1]}}function Eh(e){return e.getRadiusAxis().inverse?0:1}function nS(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}mn.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,a=i.getRadiusAxis().getExtent(),o=n.getTicksCoords(),r=n.getMinorTicksCoords(),s=O(n.getViewLabels(),function(l){return(l=ue(l)).coord=n.dataToCoord(l.tickValue),l});nS(s),nS(o),I(ED,function(l){!e.get(l+".show")||n.scale.isBlank()&&"axisLine"!==l||this["_"+l](e,i,o,r,a,s)},this)}},_axisLine:function(e,t,n,i,a){var o,r=e.getModel("axisLine.lineStyle"),s=Eh(t),l=s?0:1;(o=0===a[l]?new Jn({shape:{cx:t.cx,cy:t.cy,r:a[s]},style:r.getLineStyle(),z2:1,silent:!0}):new ql({shape:{cx:t.cx,cy:t.cy,r:a[s],r0:a[l]},style:r.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(o)},_axisTick:function(e,t,n,i,a){var o=e.getModel("axisTick"),r=(o.get("inside")?-1:1)*o.get("length"),s=a[Eh(t)],l=O(n,function(u){return new Ot({shape:Nh(t,[s,s+r],u.coord)})});this.group.add(Tn(l,{style:ie(o.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,i,a){if(i.length){for(var o=e.getModel("axisTick"),r=e.getModel("minorTick"),s=(o.get("inside")?-1:1)*r.get("length"),l=a[Eh(t)],u=[],h=0;h<i.length;h++)for(var c=0;c<i[h].length;c++)u.push(new Ot({shape:Nh(t,[l,l+s],i[h][c].coord)}));this.group.add(Tn(u,{style:ie(r.getModel("lineStyle").getLineStyle(),ie(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,i,a,o){var r=e.getCategories(!0),s=e.getModel("axisLabel"),l=s.get("margin"),u=e.get("triggerEvent");I(o,function(h,c){var d=s,f=h.tickValue,p=a[Eh(t)],m=t.coordToPoint([p+l,h.coord]),g=t.cx,v=t.cy,x=Math.abs(m[0]-g)/p<.3?"center":m[0]>g?"left":"right",y=Math.abs(m[1]-v)/p<.3?"middle":m[1]>v?"top":"bottom";r&&r[f]&&r[f].textStyle&&(d=new ze(r[f].textStyle,s,s.ecModel));var b=new Pe({silent:rn.isLabelSilent(e)});this.group.add(b),ut(b.style,d,{x:m[0],y:m[1],textFill:d.getTextColor()||e.get("axisLine.lineStyle.color"),text:h.formattedLabel,textAlign:x,textVerticalAlign:y}),u&&(b.eventData=rn.makeAxisEventDataBase(e),b.eventData.targetType="axisLabel",b.eventData.value=h.rawLabel)},this)},_splitLine:function(e,t,n,i,a){var o=e.getModel("splitLine").getModel("lineStyle"),r=o.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],u=0;u<n.length;u++){var h=s++%r.length;l[h]=l[h]||[],l[h].push(new Ot({shape:Nh(t,a,n[u].coord)}))}for(u=0;u<l.length;u++)this.group.add(Tn(l[u],{style:ie({stroke:r[u%r.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,i,a){if(i.length){for(var o=e.getModel("minorSplitLine").getModel("lineStyle"),r=[],s=0;s<i.length;s++)for(var l=0;l<i[s].length;l++)r.push(new Ot({shape:Nh(t,a,i[s][l].coord)}));this.group.add(Tn(r,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,i,a){if(n.length){var o=e.getModel("splitArea").getModel("areaStyle"),r=o.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],u=Math.PI/180,h=-n[0].coord*u,c=Math.min(a[0],a[1]),d=Math.max(a[0],a[1]),f=e.get("clockwise"),p=1;p<n.length;p++){var m=s++%r.length;l[m]=l[m]||[],l[m].push(new Fn({shape:{cx:t.cx,cy:t.cy,r0:c,r:d,startAngle:h,endAngle:-n[p].coord*u,clockwise:f},silent:!0})),h=-n[p].coord*u}for(p=0;p<l.length;p++)this.group.add(Tn(l[p],{style:ie({fill:r[p%r.length]},o.getAreaStyle()),silent:!0}))}}});var OD=["axisLine","axisTickLabel","axisName"],RD=["splitLine","splitArea","minorSplitLine"];mn.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,i=n.polar,a=i.getAngleAxis(),o=n.getTicksCoords(),r=n.getMinorTicksCoords(),s=a.getExtent()[0],l=n.getExtent(),u={position:[(c=i).cx,c.cy],rotation:s/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},h=new rn(e,u);I(OD,h.add,h),this.group.add(h.getGroup()),I(RD,function(c){e.get(c+".show")&&!n.scale.isBlank()&&this["_"+c](e,i,s,l,o,r)},this)}var c},_splitLine:function(e,t,n,i,a){var o=e.getModel("splitLine").getModel("lineStyle"),r=o.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],u=0;u<a.length;u++){var h=s++%r.length;l[h]=l[h]||[],l[h].push(new Jn({shape:{cx:t.cx,cy:t.cy,r:a[u].coord}}))}for(u=0;u<l.length;u++)this.group.add(Tn(l[u],{style:ie({stroke:r[u%r.length],fill:null},o.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,i,a,o){if(o.length){for(var r=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<o.length;l++)for(var u=0;u<o[l].length;u++)s.push(new Jn({shape:{cx:t.cx,cy:t.cy,r:o[l][u].coord}}));this.group.add(Tn(s,{style:ie({fill:null},r.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,i,a){if(a.length){var o=e.getModel("splitArea").getModel("areaStyle"),r=o.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],u=a[0].coord,h=1;h<a.length;h++){var c=s++%r.length;l[c]=l[c]||[],l[c].push(new Fn({shape:{cx:t.cx,cy:t.cy,r0:u,r:a[h].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=a[h].coord}for(h=0;h<l.length;h++)this.group.add(Tn(l[h],{style:ie({fill:r[h%r.length]},o.getAreaStyle()),silent:!0}))}}});var zD=Us.extend({makeElOption:function(e,t,n,i,a){var o=n.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var r,s=o.polar,l=s.getOtherAxis(o).getExtent();r=o["dataTo"+hu(o.dim)](t);var u=i.get("type");if(u&&"none"!==u){var h=Ng(i),c=BD[u](o,s,r,l,h);c.style=h,e.graphicKey=c.type,e.pointer=c}var d=i.get("label.margin");Lw(e,n,i,a,function(f,p,m,g,v){var x=p.axis,y=x.dataToCoord(f),b=g.getAngleAxis().getExtent()[0];b=b/180*Math.PI;var _,w,S,M=g.getRadiusAxis().getExtent();if("radius"===x.dim){var T=qt();yi(T,T,b),En(T,T,[g.cx,g.cy]),_=ni([y,-v],T);var A=p.getModel("axisLabel").get("rotate")||0,C=rn.innerTextLayout(b,A*Math.PI/180,-1);w=C.textAlign,S=C.textVerticalAlign}else{var D=M[1];_=g.coordToPoint([D+v,y]);var L=g.cx,P=g.cy;w=Math.abs(_[0]-L)/D<.3?"center":_[0]>L?"left":"right",S=Math.abs(_[1]-P)/D<.3?"middle":_[1]>P?"top":"bottom"}return{position:_,align:w,verticalAlign:S}}(t,n,0,s,d))}}),BD={line:function(e,t,n,i,a){return"angle"===e.dim?{type:"Line",shape:Og(t.coordToPoint([i[0],n]),t.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,i,a){var o=Math.max(1,e.getBandWidth()),r=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:Ew(t.cx,t.cy,i[0],i[1],(-n-o/2)*r,(o/2-n)*r)}:{type:"Sector",shape:Ew(t.cx,t.cy,n-o/2,n+o/2,0,2*Math.PI)}}};function Fg(e,t){t.update="updateView",Be(t,function(n,i){var a={};return i.eachComponent({mainType:"geo",query:n},function(o){o[e](n.name),I(o.coordinateSystem.regions,function(r){a[r.name]=o.isSelected(r.name)||!1})}),{selected:a,name:n.name}})}function Oi(e,t,n){this._model=e}function iS(e,t,n,i){var a=n.calendarModel,o=n.seriesModel,r=a?a.coordinateSystem:o?o.coordinateSystem:null;return r===this?r[e](i):null}mn.registerAxisPointerClass("PolarAxisPointer",zD),ct(V(function(e,t,n){var i={},a=function(o){var r={};I(o,function(l,u){var h=l.getData(),c=l.coordinateSystem,d=c.getBaseAxis(),f=Jw(c,d),p=d.getExtent(),m="category"===d.type?d.getBandWidth():Math.abs(p[1]-p[0])/h.count(),g=r[f]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},v=g.stacks;r[f]=g;var x=Qw(l);v[x]||g.autoWidthCount++,v[x]=v[x]||{width:0,maxWidth:0};var y=Q(l.get("barWidth"),m),b=Q(l.get("barMaxWidth"),m),_=l.get("barGap"),w=l.get("barCategoryGap");y&&!v[x].width&&(y=Math.min(g.remainedWidth,y),v[x].width=y,g.remainedWidth-=y),b&&(v[x].maxWidth=b),null!=_&&(g.gap=_),null!=w&&(g.categoryGap=w)});var s={};return I(r,function(l,u){s[u]={};var h=l.stacks,d=Q(l.categoryGap,l.bandWidth),f=Q(l.gap,1),p=l.remainedWidth,m=l.autoWidthCount,g=(p-d)/(m+(m-1)*f);g=Math.max(g,0),I(h,function(b,_){var w=b.maxWidth;w&&w<g&&(w=Math.min(w,p),b.width&&(w=Math.min(w,b.width)),p-=w,b.width=w,m--)}),g=(p-d)/(m+(m-1)*f),g=Math.max(g,0);var v,x=0;I(h,function(b,_){b.width||(b.width=g),x+=(v=b).width*(1+f)}),v&&(x-=v.width*f);var y=-x/2;I(h,function(b,_){s[u][_]=s[u][_]||{offset:y,width:b.width},y+=b.width*(1+f)})}),s}(se(t.getSeriesByType(e),function(o){return!t.isSeriesFiltered(o)&&o.coordinateSystem&&"polar"===o.coordinateSystem.type}));t.eachSeriesByType(e,function(o){if("polar"===o.coordinateSystem.type){var r=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),u=Jw(s,l),h=Qw(o),c=a[u][h],d=c.offset,f=c.width,p=s.getOtherAxis(l),m=o.coordinateSystem.cx,g=o.coordinateSystem.cy,v=o.get("barMinHeight")||0,x=o.get("barMinAngle")||0;i[h]=i[h]||[];for(var y=r.mapDimension(p.dim),b=r.mapDimension(l.dim),_=Li(r,y),w="radius"!==l.dim||!o.get("roundCap",!0),S="radius"===p.dim?p.dataToRadius(0):p.dataToAngle(0),M=0,T=r.count();M<T;M++){var A,C,D,L,P=r.get(y,M),N=r.get(b,M),R=0<=P?"p":"n",k=S;if(_&&(i[h][N]||(i[h][N]={p:S,n:S}),k=i[h][N][R]),"radius"===p.dim){var B=p.dataToRadius(P)-S,G=l.dataToAngle(N);Math.abs(B)<v&&(B=(B<0?-1:1)*v),C=(A=k)+B,L=(D=G-d)-f,_&&(i[h][N][R]=C)}else{var W=p.dataToAngle(P,w)-S,F=l.dataToRadius(N);Math.abs(W)<x&&(W=(W<0?-1:1)*x),C=(A=F+d)+f,L=(D=k)+W,_&&(i[h][N][R]=L)}r.setItemLayout(M,{cx:m,cy:g,r0:A,r:C,startAngle:-D*Math.PI/180,endAngle:-L*Math.PI/180})}}},this)},"bar")),At({type:"polar"}),j(Ge.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){Ge.prototype.init.apply(this,arguments),La(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=__.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=oe(e.regions||[],function(n,i){return i.name&&n.set(i.name,new ze(i,t)),n},ne()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new ze(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var n=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),i={name:e};return"function"==typeof n?(i.status=t,n(i)):"string"==typeof n?n.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),mp),At({type:"geo",init:function(e,t){var n=new nh(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var a=this._mapDraw;e.get("show")?a.draw(e,t,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),Fg("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),Fg("select",{type:"geoSelect",event:"geoselected"}),Fg("unSelect",{type:"geoUnSelect",event:"geounselected"}),Oi.prototype={constructor:Oi,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=Yr(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();i=i<10?"0"+i:i;var a=e.getDay();return{y:t,m:n,d:i,day:a=Math.abs((a+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+i,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.get("cellSize").slice(),o=this._model.getBoxLayoutParams(),r="horizontal"===this._orient?[n,7]:[7,n];I([0,1],function(h){u(a,h)&&(o[i[h]]=a[h]*r[h])});var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=vt(o,s);function u(h,c){return null!=h[c]&&"auto"!==h[c]}I([0,1],function(h){u(a,h)||(a[h]=l[i[h]]/r[h])}),this._sw=a[0],this._sh=a[1]},dataToPoint:function(e,t){z(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),i=this._rangeInfo;if(t&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var o=n.day,r=this._getRangeInfo([i.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,i):this._getDateByWeeksAndDay(t,n-1,i)},convertToPixel:V(iS,"dataToPoint"),convertFromPixel:V(iS,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(z(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),i=n.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);e=[n.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var o=this._getRangeInfo(e);return o.start.time>o.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,i=new Date(e[0].time),a=i.getDate(),o=e[1].date.getDate();i.setDate(a+n-1);var r=i.getDate();if(r!==o)for(var s=0<i.getTime()-e[1].time?1:-1;(r=i.getDate())!==o&&0<(i.getTime()-e[1].time)*s;)n-=s,i.setDate(r-s);var l=Math.floor((n+e[0].day+6)/7),u=t?1-l:l-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:l,nthWeek:u,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var i=this._getRangeInfo(n);if(e>i.weeks||0===e&&t<i.fweek||e===i.weeks&&t>i.lweek)return!1;var a=7*(e-1)-i.fweek+t,o=new Date(i.start.time);return o.setDate(i.start.d+a),this.getDateInfo(o)}},Oi.dimensions=Oi.prototype.dimensions,Oi.getDimensionsInfo=Oi.prototype.getDimensionsInfo,Oi.create=function(e,t){var n=[];return e.eachComponent("calendar",function(i){var a=new Oi(i,e,t);n.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){"calendar"===i.get("coordinateSystem")&&(i.coordinateSystem=n[i.get("calendarIndex")||0])}),n},Gt.register("calendar",Oi);var aS=Ge.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,i){var a=Bo(e);aS.superApply(this,"init",arguments),oS(e,a)},mergeOption:function(e,t){aS.superApply(this,"mergeOption",arguments),oS(this.option,e)}});function oS(e,t){var n=e.cellSize;z(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var i=O([0,1],function(a){return function(o,r){return null!=o[Fa[r][0]]||null!=o[Fa[r][1]]&&null!=o[Fa[r][2]]}(t,a)&&(n[a]="auto"),null!=n[a]&&"auto"!==n[a]});na(e,t,{type:"box",ignoreSize:i})}var VD={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},FD={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};At({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var i=this.group;i.removeAll();var a=e.coordinateSystem,o=a.getRangeInfo(),r=a.getOrient();this._renderDayRect(e,o,i),this._renderLines(e,o,r,i),this._renderYearText(e,o,r,i),this._renderMonthText(e,r,i),this._renderWeekText(e,o,r,i)},_renderDayRect:function(e,t,n){for(var i=e.coordinateSystem,a=e.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),r=i.getCellHeight(),s=t.start.time;s<=t.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new Fe({shape:{x:l[0],y:l[1],width:o,height:r},cursor:"default",style:a});n.add(u)}},_renderLines:function(e,t,n,i){var a=this,o=e.coordinateSystem,r=e.getModel("splitLine.lineStyle").getLineStyle(),s=e.get("splitLine.show"),l=r.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=t.start,h=0;u.time<=t.end.time;h++){d(u.formatedDate),0===h&&(u=o.getDateInfo(t.start.y+"-"+t.start.m));var c=u.date;c.setMonth(c.getMonth()+1),u=o.getDateInfo(c)}function d(f){a._firstDayOfMonth.push(o.getDateInfo(f)),a._firstDayPoints.push(o.dataToRect([f],!1).tl);var p=a._getLinePointsOfOneWeek(e,f,n);a._tlpoints.push(p[0]),a._blpoints.push(p[p.length-1]),s&&a._drawSplitline(p,r,i)}d(o.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,l,n),r,i),s&&this._drawSplitline(a._getEdgesPoints(a._blpoints,l,n),r,i)},_getEdgesPoints:function(e,t,n){var i=[e[0].slice(),e[e.length-1].slice()],a="horizontal"===n?0:1;return i[0][a]=i[0][a]-t/2,i[1][a]=i[1][a]+t/2,i},_drawSplitline:function(e,t,n){var i=new Mn({z2:20,shape:{points:e},style:t});n.add(i)},_getLinePointsOfOneWeek:function(e,t,n){var i=e.coordinateSystem;t=i.getDateInfo(t);for(var a=[],o=0;o<7;o++){var r=i.getNextNDay(t.time,o),s=i.dataToRect([r.time],!1);a[2*r.day]=s.tl,a[2*r.day+1]=s["horizontal"===n?"bl":"tr"]}return a},_formatterLabel:function(e,t){return"string"==typeof e&&e?oy(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,i,a){t=t.slice();var o=["center","bottom"];"bottom"===i?(t[1]+=a,o=["center","top"]):"left"===i?t[0]-=a:"right"===i?(t[0]+=a,o=["center","top"]):t[1]-=a;var r=0;return"left"!==i&&"right"!==i||(r=Math.PI/2),{rotation:r,position:t,style:{textAlign:o[0],textVerticalAlign:o[1]}}},_renderYearText:function(e,t,n,i){var a=e.getModel("yearLabel");if(a.get("show")){var o=a.get("margin"),r=a.get("position");r=r||("horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,h="horizontal"===n?0:1,c={top:[l,s[h][1]],bottom:[l,s[1-h][1]],left:[s[1-h][0],u],right:[s[h][0],u]},d=t.start.y;+t.end.y>+t.start.y&&(d=d+"-"+t.end.y);var f=a.get("formatter"),m=this._formatterLabel(f,{start:t.start.y,end:t.end.y,nameMap:d}),g=new Pe({z2:30});ut(g.style,a,{text:m}),g.attr(this._yearTextPositionControl(g,c[r],n,r,o)),i.add(g)}},_monthTextPositionControl:function(e,t,n,i,a){var o="left",r="top",s=e[0],l=e[1];return"horizontal"===n?(l+=a,t&&(o="center"),"start"===i&&(r="bottom")):(s+=a,t&&(r="middle"),"start"===i&&(o="right")),{x:s,y:l,textAlign:o,textVerticalAlign:r}},_renderMonthText:function(e,t,n){var i=e.getModel("monthLabel");if(i.get("show")){var a=i.get("nameMap"),o=i.get("margin"),r=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];q(a)&&(a=VD[a.toUpperCase()]||[]);var u="start"===r?0:1,h="horizontal"===t?0:1;o="start"===r?-o:o;for(var c="center"===s,d=0;d<l[u].length-1;d++){var f=l[u][d].slice(),p=this._firstDayOfMonth[d];c&&(f[h]=(this._firstDayPoints[d][h]+l[0][d+1][h])/2);var g=i.get("formatter"),v=a[+p.m-1],x={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:v},y=this._formatterLabel(g,x),b=new Pe({z2:30});fe(ut(b.style,i,{text:y}),this._monthTextPositionControl(f,c,t,r,o)),n.add(b)}}},_weekTextPositionControl:function(e,t,n,i,a){var o="center",r="middle",s=e[0],l=e[1],u="start"===n;return"horizontal"===t?(s=s+i+(u?1:-1)*a[0]/2,o=u?"right":"left"):(l=l+i+(u?1:-1)*a[1]/2,r=u?"bottom":"top"),{x:s,y:l,textAlign:o,textVerticalAlign:r}},_renderWeekText:function(e,t,n,i){var a=e.getModel("dayLabel");if(a.get("show")){var o=e.coordinateSystem,r=a.get("position"),s=a.get("nameMap"),l=a.get("margin"),u=o.getFirstDayOfWeek();q(s)&&(s=FD[s.toUpperCase()]||[]);var h=o.getNextNDay(t.end.time,7-t.lweek).time,c=[o.getCellWidth(),o.getCellHeight()];l=Q(l,c["horizontal"===n?0:1]),"start"===r&&(h=o.getNextNDay(t.start.time,-(7+t.fweek)).time,l=-l);for(var d=0;d<7;d++){var f,p=o.getNextNDay(h,d),m=o.dataToRect([p.time],!1).center;f=Math.abs((d+u)%7);var g=new Pe({z2:30});fe(ut(g.style,a,{text:s[f]}),this._weekTextPositionControl(m,n,r,l,c)),i.add(g)}}}});var rS={path:null,compoundPath:null,group:re,image:Lt,text:Pe};zt(function(e){var t=e.graphic;z(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var GD=pn({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,GD.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,i=(t?n:e).elements,a=n.elements=t?[]:n.elements,o=[];this._flatten(i,o);var r=bd(a,o);ev(r);var s=this._elOptionsToUpdate=[];I(r,function(u,h){var d,f,p,m,g,v,c=u.option;c&&(s.push(c),function(d,f){var p=d.exist;if(f.id=d.keyInfo.id,!f.type&&p&&(f.type=p.type),null==f.parentId){var m=f.parentOption;m?f.parentId=m.id:p&&(f.parentId=p.parentId)}f.parentOption=null}(u,c),d=a,f=h,m=fe({},p=c),g=d[f],"merge"===(v=p.$action||"merge")?g?(pe(g,m,!0),na(g,m,{ignoreSize:!0}),ly(p,g)):d[f]=m:"replace"===v?d[f]=m:"remove"===v&&g&&(d[f]=null),function(d,f){!d||(d.hv=f.hv=[lS(f,["left","right"]),lS(f,["top","bottom"])],"group"===d.type&&(null==d.width&&(d.width=f.width=0),null==d.height&&(d.height=f.height=0)))}(a[h],c))},this);for(var l=a.length-1;0<=l;l--)null==a[l]?a.splice(l,1):delete a[l].$action},_flatten:function(e,t,n){I(e,function(i){if(i){n&&(i.parentOption=n),t.push(i);var a=i.children;"group"===i.type&&a&&this._flatten(a,t,i),delete i.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function sS(e,t,n,i){var a=n.type,o=new(rS.hasOwnProperty(a)?rS[a]:Rd(a))(n);t.add(o),i.set(e,o),o.__ecGraphicId=e}function Oh(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse(function(i){Oh(i,t)}),t.removeKey(e.__ecGraphicId),n.remove(e))}function lS(e,t){var n;return I(t,function(i){null!=e[i]&&"auto"!==e[i]&&(n=!0)}),n}At({type:"graphic",init:function(e,t){this._elMap=ne()},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,i=this.group;I(t,function(a){var o=a.$action,r=a.id,s=n.get(r),l=a.parentId,u=null!=l?n.get(l):i,h=a.style;"text"===a.type&&h&&(a.hv&&a.hv[1]&&(h.textVerticalAlign=h.textBaseline=null),!h.hasOwnProperty("textFill")&&h.fill&&(h.textFill=h.fill),!h.hasOwnProperty("textStroke")&&h.stroke&&(h.textStroke=h.stroke));var f,c=(f=fe({},f=a),I(["id","parentId","$action","hv","bounding"].concat(sy),function(p){delete f[p]}),f);o&&"merge"!==o?"replace"===o?(Oh(s,n),sS(r,u,c,n)):"remove"===o&&Oh(s,n):s?s.attr(c):sS(r,u,c,n);var d=n.get(r);d&&(d.__ecGraphicWidthOption=a.width,d.__ecGraphicHeightOption=a.height,function(f,p){var m=f.eventData;f.silent||f.ignore||m||(m=f.eventData={componentType:"graphic",componentIndex:p.componentIndex,name:f.name}),m&&(m.info=f.info)}(d,e))})}},_relocate:function(e,t){for(var n=e.option.elements,i=this.group,a=this._elMap,o=t.getWidth(),r=t.getHeight(),s=0;s<n.length;s++){var l=n[s];if((h=a.get(l.id))&&h.isGroup){var u=(c=h.parent)===i;h.__ecGraphicWidth=Q(h.__ecGraphicWidthOption,u?o:c.__ecGraphicWidth)||0,h.__ecGraphicHeight=Q(h.__ecGraphicHeightOption,u?r:c.__ecGraphicHeight)||0}}for(s=n.length-1;0<=s;s--){var h,c;(h=a.get((l=n[s]).id))&&du(h,l,(c=h.parent)===i?{width:o,height:r}:{width:c.__ecGraphicWidth,height:c.__ecGraphicHeight},null,{hv:l.hv,boundingMode:l.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){Oh(t,e)}),this._elMap=ne()},dispose:function(){this._clear()}});var uS={};function fr(e,t){uS[e]=t}function hS(e){return uS[e]}var WD=pn({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){WD.superApply(this,"optionUpdated",arguments),I(this.option.feature,function(e,t){var n=hS(t);n&&pe(e,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function cS(e,t){var n=Va(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),new Fe({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1})}At({type:"toolbox",render:function(e,t,n,i){var h,c,d,f,p,m,g,a=this.group;if(a.removeAll(),e.get("show")){var o=+e.get("itemSize"),r=e.get("feature")||{},s=this._features||(this._features={}),l=[];I(r,function(h,c){l.push(c)}),new Di(this._featureNames||[],l).add(u).update(u).remove(V(u,null)).execute(),this._featureNames=l,h=a,d=n,f=(c=e).getBoxLayoutParams(),p=c.get("padding"),g=vt(f,m={width:d.getWidth(),height:d.getHeight()},p),Ga(c.get("orient"),h,c.get("itemGap"),g.width,g.height),du(h,f,m,p),a.add(cS(a.getBoundingRect(),e)),a.eachChild(function(h){var c=h.__title,d=h.hoverStyle;if(d&&c){var f=Yn(c,E0(d)),p=h.position[0]+a.position[0],m=!1;h.position[1]+a.position[1]+o+f.height>n.getHeight()&&(d.textPosition="top",m=!0);var g=m?-5-f.height:o+8;p+f.width/2>n.getWidth()?(d.textPosition=["100%",g],d.textAlign="right"):p-f.width/2<0&&(d.textPosition=[0,g],d.textAlign="left")}})}function u(h,c){var d,f=l[h],p=l[c],m=r[f],g=new ze(m,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===f&&(m.title=i.newTitle),f&&!p){if(0===f.indexOf("my"))d={model:g,onclick:g.option.onclick,featureName:f};else{var v=hS(f);if(!v)return;d=new v(g,t,n)}s[f]=d}else{if(!(d=s[p]))return;d.model=g,d.ecModel=t,d.api=n}f||!p?g.get("show")&&!d.unusable?(function(x,y,b){var _=x.getModel("iconStyle"),w=x.getModel("emphasis.iconStyle"),S=y.getIcons?y.getIcons():x.get("icon"),M=x.get("title")||{};if("string"==typeof S){var T=S,A=M;M={},(S={})[b]=T,M[b]=A}var C=x.iconPaths={};I(S,function(D,L){var P=Ro(D,{},{x:-o/2,y:-o/2,width:o,height:o});P.setStyle(_.getItemStyle()),P.hoverStyle=w.getItemStyle(),P.setStyle({text:M[L],textAlign:w.get("textAlign"),textBorderRadius:w.get("textBorderRadius"),textPadding:w.get("textPadding"),textFill:null});var N=e.getModel("tooltip");N&&N.get("show")&&P.attr("tooltip",fe({content:M[L],formatter:N.get("formatter",!0)||function(){return M[L]},formatterParams:{componentType:"toolbox",name:L,title:M[L],$vars:["name","title"]},position:N.get("position",!0)||"bottom"},N.option)),tt(P),e.get("showTitle")&&(P.__title=M[L],P.on("mouseover",function(){var R=w.getItemStyle(),k="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";P.setStyle({textFill:w.get("textFill")||R.fill||R.stroke||"#000",textBackgroundColor:w.get("textBackgroundColor"),textPosition:w.get("textPosition")||k})}).on("mouseout",function(){P.setStyle({textFill:null,textBackgroundColor:null})})),P.trigger(x.get("iconStatus."+L)||"normal"),a.add(P),P.on("click",Z(y.onclick,y,t,n,L)),C[L]=P})}(g,d,f),g.setIconStatus=function(x,y){var b=this.option,_=this.iconPaths;b.iconStatus=b.iconStatus||{},b.iconStatus[x]=y,_[x]&&_[x].trigger(y)},d.render&&d.render(g,t,n,i)):d.remove&&d.remove(t,n):d.dispose&&d.dispose(t,n)}},updateView:function(e,t,n,i){I(this._features,function(a){a.updateView&&a.updateView(a.model,t,n,i)})},remove:function(e,t){I(this._features,function(n){n.remove&&n.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){I(this._features,function(n){n.dispose&&n.dispose(e,t)})}});var dS=Ci.toolbox.saveAsImage;function Rh(e){this.model=e}Rh.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:dS.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:dS.lang.slice()},Rh.prototype.unusable=!he.canvasSupported,Rh.prototype.onclick=function(e,t){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",a="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",o=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||he.browser.ie||he.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var r=atob(o.split(",")[1]),s=r.length,l=new Uint8Array(s);s--;)l[s]=r.charCodeAt(s);var u=new Blob([l]);window.navigator.msSaveOrOpenBlob(u,i+"."+a)}else{var h=n.get("lang"),c='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(h&&h[0]||"")+'" /></body>';window.open().document.write(c)}else{var d=document.createElement("a");d.download=i+"."+a,d.target="_blank",d.href=o;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(f)}},fr("saveAsImage",Rh);var zh=Ci.toolbox.magicType,Gg="__ec_magicType_stack__";function Wg(e){this.model=e}Wg.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:ue(zh.title),option:{},seriesIndex:{}};var fS=Wg.prototype;fS.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return I(e.get("type"),function(i){t[i]&&(n[i]=t[i])}),n};var pS={line:function(e,t,n,i){if("bar"===e)return pe({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(e,t,n,i){if("line"===e)return pe({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(e,t,n,i){var a=n.get("stack")===Gg;if("line"===e||"bar"===e)return i.setIconStatus("stack",a?"normal":"emphasis"),pe({id:t,stack:a?"":Gg},i.get("option.stack")||{},!0)}},HD=[["line","bar"],["stack"]];fS.onclick=function(e,t,n){var i=this.model,a=i.get("seriesIndex."+n);if(pS[n]){var o,r={series:[]};I(HD,function(s){0<=E(s,n)&&I(s,function(l){i.setIconStatus(l,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==a?null:{seriesIndex:a}},function(s){var h=pS[n](s.subType,s.id,s,i);h&&(ie(h,s.option),r.series.push(h));var c=s.coordinateSystem;if(c&&"cartesian2d"===c.type&&("line"===n||"bar"===n)){var d=c.getAxesByScale("ordinal")[0];if(d){var f=d.dim+"Axis",p=e.queryComponents({mainType:f,index:s.get(name+"Index"),id:s.get(name+"Id")})[0].componentIndex;r[f]=r[f]||[];for(var m=0;m<=p;m++)r[f][p]=r[f][p]||{};r[f][p].boundaryGap="bar"===n}}}),"stack"===n&&(o=r.series&&r.series[0]&&r.series[0].stack===Gg?pe({stack:zh.title.tiled},zh.title):ue(zh.title)),t.dispatchAction({type:"changeMagicType",currentType:n,newOption:r,newTitle:o,featureName:"magicType"})}},Be({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),fr("magicType",Wg);var gS=Ci.toolbox.dataView,Bh=new Array(60).join("-");function Vh(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Hg=new RegExp("[\t]+","g");function js(e){this._dom=null,this.model=e}js.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:ue(gS.title),lang:ue(gS.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},js.prototype.onclick=function(e,t){var n=t.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",a.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),r=i.get("lang")||[];o.innerHTML=r[0]||i.get("title"),o.style.cssText="margin: 10px 20px;",o.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent"),h=i.get("contentToOption"),c=function ZD(e){var t=function(n){var i={},a=[],o=[];return n.eachRawSeries(function(r){var s=r.coordinateSystem;if(!s||"cartesian2d"!==s.type&&"polar"!==s.type)a.push(r);else{var l=s.getBaseAxis();if("category"===l.type){var u=l.dim+"_"+l.index;i[u]||(i[u]={categoryAxis:l,valueAxis:s.getOtherAxis(l),series:[]},o.push({axisDim:l.dim,axisIndex:l.index})),i[u].series.push(r)}else a.push(r)}}),{seriesGroupByCategoryAxis:i,other:a,meta:o}}(e);return{value:se([function(n){var i=[];return I(n,function(a,o){var r=a.categoryAxis,s=a.valueAxis.dim,l=[" "].concat(O(a.series,function(p){return p.name})),u=[r.model.getCategories()];I(a.series,function(p){var m=p.getRawData();u.push(p.getRawData().mapArray(m.mapDimension(s),function(g){return g}))});for(var h=[l.join("\t")],c=0;c<u[0].length;c++){for(var d=[],f=0;f<u.length;f++)d.push(u[f][c]);h.push(d.join("\t"))}i.push(h.join("\n"))}),i.join("\n\n"+Bh+"\n\n")}(t.seriesGroupByCategoryAxis),function(n){return O(n,function(i){var a=i.getRawData(),o=[i.name],r=[];return a.each(a.dimensions,function(){for(var s=arguments.length,u=a.getName(arguments[s-1]),h=0;h<s-1;h++)r[h]=arguments[h];o.push((u?u+"\t":"")+r.join("\t"))}),o.join("\n")}).join("\n\n"+Bh+"\n\n")}(t.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+Bh+"\n\n"),meta:t.meta}}(e);if("function"==typeof u){var d=u(t.getOption());"string"==typeof d?s.innerHTML=d:Te(d)&&s.appendChild(d)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=c.value;var f=c.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",g=document.createElement("div"),v=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var x=this;function y(){n.removeChild(a),x._dom=null}gc(g,"click",y),gc(v,"click",function(){var b;try{b="function"==typeof h?h(s,t.getOption()):function UD(e,t){var n=e.split(new RegExp("\n*"+Bh+"\n*","g")),i={series:[]};return I(n,function(a,o){if(function(u){if(0<=u.slice(0,u.indexOf("\n")).indexOf("\t"))return!0}(a)){var r=function(u){for(var h=u.split(/\n+/g),c=[],d=O(Vh(h.shift()).split(Hg),function(g){return{name:g,data:[]}}),f=0;f<h.length;f++){var p=Vh(h[f]).split(Hg);c.push(p.shift());for(var m=0;m<p.length;m++)d[m]&&(d[m].data[f]=p[m])}return{series:d,categories:c}}(a),s=t[o],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else r=function(u){for(var h=u.split(/\n+/g),c=Vh(h.shift()),d=[],f=0;f<h.length;f++){var p=Vh(h[f]);if(p){var m,g=p.split(Hg),v="",x=!1;m=isNaN(g[0])?(x=!0,v=g[0],g=g.slice(1),d[f]={name:v,value:[]},d[f].value):d[f]=[];for(var y=0;y<g.length;y++)m.push(+g[y]);1===m.length&&(x?d[f].value=m[0]:d[f]=m[0])}}return{name:c,data:d}}(a),i.series.push(r)}),i}(l.value,f)}catch(_){throw y(),new Error("Data view format error "+_)}b&&t.dispatchAction({type:"changeDataView",newOption:b}),y()}),g.innerHTML=r[1],v.innerHTML=r[2],v.style.cssText=m,g.style.cssText=m,i.get("readOnly")||p.appendChild(v),p.appendChild(g),a.appendChild(o),a.appendChild(s),a.appendChild(p),s.style.height=n.clientHeight-80+"px",n.appendChild(a),this._dom=a},js.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},js.prototype.dispose=function(e,t){this.remove(e,t)},fr("dataView",js),Be({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];I(e.newOption.series,function(i){var r,s,a=t.getSeriesByName(i.name)[0];if(a){var o=a.get("data");n.push({name:i.name,data:(r=i.data,s=o,O(r,function(l,u){var h=s&&s[u];if(!X(h)||z(h))return l;X(l)&&!z(l)||(l={value:l});var c=null!=h.name&&null==l.name;return l=ie(l,h),c&&delete l.name,l}))})}else n.push(fe({type:"scatter"},i))}),t.mergeOption(ie({series:n},e.newOption))});var _a=I,Fh=E,Gh=V,Zg=["dataToPoint","pointToData"],jD=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function Wh(e,t,n){var i=this._targetInfoList=[],a={},o=mS(t,e);_a(XD,function(r,s){n&&n.include&&!(0<=Fh(n.include,s))||r(o,i,a)})}var gr=Wh.prototype;function Ug(e){return e[0]>e[1]&&e.reverse(),e}function mS(e,t){return Rl(e,t,{includeMainTypes:jD})}gr.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(n,i,a){if((n.coordRanges||(n.coordRanges=[])).push(i),!n.coordRange){n.coordRange=i;var o=jg[n.brushType](0,a,i);n.__rangeOffset={offset:_S[n.brushType](o.values,n.range,[1,1]),xyMinMax:o.xyMinMax}}})},gr.matchOutputRanges=function(e,t,n){_a(e,function(i){var a=this.findTargetInfo(i,t);a&&!0!==a&&I(a.coordSyses,function(o){var r=jg[i.brushType](1,o,i.range);n(i,r.values,o,t)})},this)},gr.setInputRanges=function(e,t){_a(e,function(n){var s,l,u,h,i=this.findTargetInfo(n,t);if(n.range=n.range||[],i&&!0!==i){n.panelId=i.panelId;var a=jg[n.brushType](0,i.coordSys,n.coordRange),o=n.__rangeOffset;n.range=o?_S[n.brushType](a.values,o.offset,(s=o.xyMinMax,l=wS(a.xyMinMax),u=wS(s),h=[l[0]/u[0],l[1]/u[1]],isNaN(h[0])&&(h[0]=1),isNaN(h[1])&&(h[1]=1),h)):a.values}},this)},gr.makePanelOpts=function(e,t){return O(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:Cb(i),isTargetByCursor:Lb(i,e,n.coordSysModel),getLinearBrushOtherExtent:Db(i)}})},gr.controlSeries=function(e,t,n){var i=this.findTargetInfo(e,n);return!0===i||i&&0<=Fh(i.coordSyses,t.coordinateSystem)},gr.findTargetInfo=function(e,t){for(var n=this._targetInfoList,i=mS(t,e),a=0;a<n.length;a++){var o=n[a],r=e.panelId;if(r){if(o.panelId===r)return o}else for(a=0;a<vS.length;a++)if(vS[a](i,o))return o}return!0};var XD={grid:function(e,t){var n=e.xAxisModels,i=e.yAxisModels,a=e.gridModels,o=ne(),r={},s={};(n||i||a)&&(_a(n,function(l){var u=l.axis.grid.model;o.set(u.id,u),r[u.id]=!0}),_a(i,function(l){var u=l.axis.grid.model;o.set(u.id,u),s[u.id]=!0}),_a(a,function(l){o.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),o.each(function(l){var h=[];_a(l.coordinateSystem.getCartesians(),function(c,d){(0<=Fh(n,c.getAxis("x").model)||0<=Fh(i,c.getAxis("y").model))&&h.push(c)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:h[0],coordSyses:h,getPanelRect:yS.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){_a(e.geoModels,function(n){var i=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:i,coordSyses:[i],getPanelRect:yS.geo})})}},vS=[function(e,t){var n=e.xAxisModel,i=e.yAxisModel,a=e.gridModel;return!a&&n&&(a=n.axis.grid.model),!a&&i&&(a=i.axis.grid.model),a&&a===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],yS={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(za(e)),t}},jg={lineX:Gh(xS,0),lineY:Gh(xS,1),rect:function(e,t,n){var i=t[Zg[e]]([n[0][0],n[1][0]]),a=t[Zg[e]]([n[0][1],n[1][1]]),o=[Ug([i[0],a[0]]),Ug([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:O(n,function(a){var o=t[Zg[e]](a);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o}),xyMinMax:i}}};function xS(e,t,n,i){var a=n.getAxis(["x","y"][e]),o=Ug(O([0,1],function(s){return t?a.coordToData(a.toLocalCoord(i[s])):a.toGlobalCoord(a.dataToCoord(i[s]))})),r=[];return r[e]=o,r[1-e]=[NaN,NaN],{values:o,xyMinMax:r}}var _S={lineX:Gh(bS,0),lineY:Gh(bS,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return O(e,function(i,a){return[i[0]-n[0]*t[a][0],i[1]-n[1]*t[a][1]]})}};function bS(e,t,n,i){return[t[0]-i[e]*n[0],t[1]-i[e]*n[1]]}function wS(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var SS=I,Xg="\0_ec_hist_store";function Yg(e){return e[Xg]||(e[Xg]=[{}])}Ge.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var qg,Xs,MS,IS,YD=["cartesian2d","polar","singleAxis"],TS=(Xs=["axisIndex","axis","index","id"],MS=O(qg=(qg=["x","y","z","radius","angle","single"]).slice(),hu),IS=O(Xs=(Xs||[]).slice(),hu),function(e,t){I(qg,function(n,i){for(var a={name:n,capital:MS[i]},o=0;o<Xs.length;o++)a[Xs[o]]=n+IS[o];e.call(t,a)})});function $g(e,t,n,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=n}var uo=I,AS=Ba;function CS(e,t){var n=e.getAxisModel(),i=e._percentWindow,a=e._valueWindow;if(i){var o=Zd(a,[0,500]);o=Math.min(o,20);var r=t||0===i[0]&&100===i[1];n.setRange(r?null:+a[0].toFixed(o),r?null:+a[1].toFixed(o))}}$g.prototype={constructor:$g,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(n){if(function(o){return 0<=E(YD,o)}(n.get("coordinateSystem"))){var i=this._dimName,a=t.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(a&&a.componentIndex)&&e.push(n)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,i=this._dimName,a=this.ecModel,o=this.getAxisModel();return e="x"===i||"y"===i?(t="gridIndex","x"===i?"y":"x"):(t="polarIndex","angle"===i?"radius":"angle"),a.eachComponent(e+"Axis",function(r){(r.get(t)||0)===(o.get(t)||0)&&(n=r)}),n},getMinMaxSpan:function(){return ue(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,i=this.getAxisModel().axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],r=[],s=[];uo(["start","end"],function(h,c){var d=e[h],f=e[h+"Value"];"percent"===a[c]?(null==d&&(d=o[c]),f=i.parse(nt(d,o,n))):(t=!0,d=nt(f=null==f?n[c]:i.parse(f),n,o)),s[c]=f,r[c]=d}),AS(s),AS(r);var l=this._minMaxSpan;function u(h,c,d,f,p){var m=p?"Span":"ValueSpan";no(0,h,d,"all",l["min"+m],l["max"+m]);for(var g=0;g<2;g++)c[g]=nt(h[g],d,f,!0),p&&(c[g]=i.parse(c[g]))}return t?u(s,r,n,o,!1):u(r,s,o,n,!0),{valueWindow:s,percentWindow:r}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(i,a,o){var r=[1/0,-1/0];return uo(o,function(s){var l=s.getData();l&&uo(l.mapDimension(a,!0),function(u){var h=l.getApproximateExtent(u);h[0]<r[0]&&(r[0]=h[0]),h[1]>r[1]&&(r[1]=h[1])})}),r[1]<r[0]&&(r=[NaN,NaN]),function(s,l){var u=s.getAxisModel(),h=u.getMin(!0),c="category"===u.get("type"),d=c&&u.getCategories().length;null!=h&&"dataMin"!==h&&"function"!=typeof h?l[0]=h:c&&(l[0]=0<d?0:NaN);var f=u.getMax(!0);null!=f&&"dataMax"!==f&&"function"!=typeof f?l[1]=f:c&&(l[1]=0<d?d-1:NaN),u.get("scale",!0)||(0<l[0]&&(l[0]=0),l[1]<0&&(l[1]=0))}(i,r),r}(this,this._dimName,t),function(i){var a=i._minMaxSpan={},o=i._dataZoomModel,r=i._dataExtent;uo(["min","max"],function(s){var l=o.get(s+"Span"),u=o.get(s+"ValueSpan");null!=u&&(u=i.getAxisModel().axis.scale.parse(u)),null!=u?l=nt(r[0]+u,r,[0,100],!0):null!=l&&(u=nt(l,[0,100],r,!0)-r[0]),a[s+"Span"]=l,a[s+"ValueSpan"]=u})}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,CS(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,CS(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;"none"!==a&&uo(i,function(r){var s=r.getData(),l=s.mapDimension(n,!0);l.length&&("weakFilter"===a?s.filterSelf(function(u){for(var h,c,d,f=0;f<l.length;f++){var p=s.get(l[f],u),m=!isNaN(p),g=p<o[0],v=p>o[1];if(m&&!g&&!v)return!0;m&&(d=!0),g&&(h=!0),v&&(c=!0)}return d&&h&&c}):uo(l,function(u){if("empty"===a)r.setData(s=s.map(u,function(c){return(d=c)>=o[0]&&d<=o[1]?c:NaN;var d}));else{var h={};h[u]=o,s.selectRange(h)}}),uo(l,function(u){s.setApproximateExtent(o,u)}))})}}};var ho=I,co=TS,Kg=pn({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=DS(e);this.settledOption=i,this.mergeDefaultAndTheme(e,n),this.doInit(i)},mergeOption:function(e){var t=DS(e);pe(this.option,e,!0),pe(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;he.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),LS(this,e);var n=this.settledOption;ho([["start","startValue"],["end","endValue"]],function(i,a){"value"===this._rangePropMode[a]&&(t[i[0]]=n[i[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,n,i,a){var o=this.dependentModels[t.axis][n],r=o.__dzAxisProxy||(o.__dzAxisProxy=new $g(t.name,n,this,a));e[t.name+"_"+n]=r},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();co(function(n){var i=n.axisIndex;e[i]=Et(e[i])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;co(function(i){null!=e[i.axisIndex]&&(t=!0)},this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,i=this.dependentModels;if(e){var a="vertical"===t?"y":"x";i[a+"Axis"].length?(n[a+"AxisIndex"]=[0],e=!1):ho(i.singleAxis,function(o){e&&o.get("orient",!0)===t&&(n.singleAxisIndex=[o.componentIndex],e=!1)})}e&&co(function(o){if(e){var r=[],s=this.dependentModels[o.axis];if(s.length&&!r.length)for(var l=0,u=s.length;l<u;l++)"category"===s[l].get("type")&&r.push(l);(n[o.axisIndex]=r).length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(o){this._isSeriesHasAllAxesTypeOf(o,"value")&&co(function(r){var s=n[r.axisIndex],l=o.get(r.axisIndex),u=o.get(r.axisId);E(s,l=o.ecModel.queryComponents({mainType:r.axis,index:l,id:u})[0].componentIndex)<0&&s.push(l)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){e=e||t.name},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return co(function(i){var a=e.get(i.axisIndex),o=this.dependentModels[i.axis][a];o&&o.get("type")===t||(n=!1)},this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return co(function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}},this),e},eachTargetAxis:function(e,t){var n=this.ecModel;co(function(i){ho(this.get(i.axisIndex),function(a){e.call(t,i,a,this,n)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;ho([["start","startValue"],["end","endValue"]],function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=n[i[0]]=e[i[0]],t[i[1]]=n[i[1]]=e[i[1]])},this),LS(this,e)},setCalculatedRange:function(e){var t=this.option;ho(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function DS(e){var t={};return ho(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function LS(e,t){var n=e._rangePropMode,i=e.get("rangeMode");ho([["start","startValue"],["end","endValue"]],function(a,o){var r=null!=t[a[0]],s=null!=t[a[1]];r&&!s?n[o]="percent":!r&&s?n[o]="value":i?n[o]=i[o]:r&&(n[o]="percent")})}var Qg=ii.extend({type:"dataZoom",render:function(e,t,n,i){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,n={};return this.dataZoomModel.eachTargetAxis(function(i,a){var o=t.getComponent(i.axis,a);if(o){var r=o.getCoordSysModel();r&&function(s,l,u,h){for(var c,d=0;d<u.length;d++)if(u[d].model===s){c=u[d];break}c||u.push(c={model:s,axisModels:[],coordIndex:h}),c.axisModels.push(l)}(r,o,n[r.mainType]||(n[r.mainType]=[]),r.componentIndex)}},this),n}});Kg.extend({type:"dataZoom.select"}),Qg.extend({type:"dataZoom.select"}),fn({getTargetSeries:function(e){var t=ne();return e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,a,o){I(o.getAxisProxy(i.name,a).getTargetSeriesModels(),function(r){t.set(r.uid,r)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(i,a,o){o.getAxisProxy(i.name,a).reset(o,t)}),n.eachTargetAxis(function(i,a,o){o.getAxisProxy(i.name,a).filterData(o,t)})}),e.eachComponent("dataZoom",function(n){var i=n.findRepresentativeAxisProxy(),a=i.getDataPercentWindow(),o=i.getDataValueWindow();n.setCalculatedRange({start:a[0],end:a[1],startValue:o[0],endValue:o[1]})})}}),Be("dataZoom",function(e,t){var n=function qD(e,t,n){return function(a){var o,r={nodes:[],records:{}};if(t(function(l){r.records[l.name]={}}),!a)return r;for(i(a,r);o=!1,e(s),o;);function s(l){var u,h,c;!(0<=E(r.nodes,l))&&(u=l,h=r,c=!1,t(function(d){I(n(u,d)||[],function(f){h.records[d.name][f]&&(c=!0)})}),c)&&(i(l,r),o=!0)}return r};function i(a,o){o.nodes.push(a),t(function(r){I(n(a,r)||[],function(s){o.records[r.name][s]=!0})})}}(Z(t.eachComponent,t,"dataZoom"),TS,function(a,o){return a.get(o.axisIndex)}),i=[];t.eachComponent({mainType:"dataZoom",query:e},function(a,o){i.push.apply(i,n(a).nodes)}),I(i,function(a,o){a.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var PS=I;function Jg(e,t,n){(this._brushController=new cr(n.getZr())).on("brush",Z(this._onBrush,this)).mount()}Jg.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:ue(Ci.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var mr=Jg.prototype;mr.render=function(e,t,n,i){this.model=e,this.ecModel=t,this.api=n,function(a,o,r,s,l){var u=r._isZoomActive;s&&"takeGlobalCursor"===s.type&&(u="dataZoomSelect"===s.key&&s.dataZoomSelectActive),r._isZoomActive=u,a.setIconStatus("zoom",u?"emphasis":"normal");var h=new Wh(kS(a.option),o,{include:["grid"]});r._brushController.setPanels(h.makePanelOpts(l,function(c){return c.xAxisDeclared&&!c.yAxisDeclared?"lineX":!c.xAxisDeclared&&c.yAxisDeclared?"lineY":"rect"})).enableBrush(!!u&&{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()})}(e,t,this,i,n),function(a,o){a.setIconStatus("back",1<Yg(o).length?"emphasis":"normal")}(e,t)},mr.onclick=function(e,t,n){KD[n].call(this)},mr.remove=function(e,t){this._brushController.unmount()},mr.dispose=function(e,t){this._brushController.dispose()};var KD={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=Yg(e),n=t[t.length-1];1<t.length&&t.pop();var i={};return SS(n,function(a,o){for(var r=t.length-1;0<=r;r--)if(a=t[r][o]){i[o]=a;break}}),i}(this.ecModel))}};function kS(e){var t={};return I(["xAxisIndex","yAxisIndex"],function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),!1!==t[n]&&"none"!==t[n]||(t[n]=[])}),t}function em(e){this.model=e}mr._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new Wh(kS(this.model.option),i,{include:["grid"]}).matchOutputRanges(e,i,function(o,r,s){if("cartesian2d"===s.type){var l=o.brushType;"rect"===l?(a("x",s,r[0]),a("y",s,r[1])):a({lineX:"x",lineY:"y"}[l],s,r)}}),function(o,r){var s=Yg(o);SS(r,function(l,u){for(var h=s.length-1;0<=h&&!s[h][u];h--);if(h<0){var c=o.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(c){var d=c.getPercentRange();s[0][u]={dataZoomId:u,start:d[0],end:d[1]}}}}),s.push(r)}(i,n),this._dispatchZoomAction(n)}function a(o,r,s){var d,f,m,l=r.getAxis(o),u=l.model,h=(d=o,f=u,i.eachComponent({mainType:"dataZoom",subType:"select"},function(g){g.getAxisModel(d,f.componentIndex)&&(m=g)}),m),c=h.findRepresentativeAxisProxy(u).getMinMaxSpan();null==c.minValueSpan&&null==c.maxValueSpan||(s=no(0,s.slice(),l.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),h&&(n[h.id]={dataZoomId:h.id,startValue:s[0],endValue:s[1]})}},mr._dispatchZoomAction=function(e){var t=[];PS(e,function(n,i){t.push(ue(n))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},fr("dataZoom",Jg),zt(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);z(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(z(n)&&(n=n[0]),n&&n.feature)){var i=n.feature.dataZoom;a("xAxis",i),a("yAxis",i)}}function a(o,r){if(r){var s=o+"Index",l=r[s];null==l||"all"===l||z(l)||(l=!1===l||"none"===l?[]:[l]),z(c=e[o])||(c=c?[c]:[]),PS(c,function(u,h){if(null==l||"all"===l||-1!==E(l,h)){var c={type:"select",$fromToolbox:!0,filterMode:r.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+o+h};c[s]=h,t.push(c)}})}var c}}),em.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:Ci.toolbox.restore.title},em.prototype.onclick=function(e,t,n){(function(i){i[Xg]=null})(e),t.dispatchAction({type:"restore",from:this.uid})},fr("restore",em),Be({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),pn({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var NS=I,JD=iy,eL=["","-webkit-","-moz-","-o-"];function ES(e,t,n,i,a){var l,h,o=t&&t.painter;if(n){var r=o&&o.getViewportRoot();r&&(l=e,h=document.body,hc(uc,r,i,a,!0)&&hc(l,h,uc[0],uc[1]))}else{e[0]=i,e[1]=a;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function tm(e,t,n){if(he.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=t.getZr(),o=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],ES(this._styleCoord,a,o,t.getWidth()/2,t.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e,this._show=!1;var r=this;i.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},i.onmousemove=function(s){if(s=s||window.event,!r._enterable){var l=a.handler;Xn(a.painter.getViewportRoot(),s,!0),l.dispatch("mousemove",s)}},i.onmouseleave=function(){r._enterable&&r._show&&r.hideLater(r._hideDelay),r._inContent=!1}}function OS(e,t,n,i){e[0]=n,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function nm(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],OS(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1}tm.prototype={constructor:tm,_enterable:!0,update:function(e){var t=this._container,n=t.currentStyle||document.defaultView.getComputedStyle(t),i=t.style;"absolute"!==i.position&&"absolute"!==n.position&&(i.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=t*this._zr.getHeight();this.moveTo(n,i)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function tL(e){var r,l,t=[],n=e.get("transitionDuration"),i=e.get("backgroundColor"),a=e.getModel("textStyle"),o=e.get("padding");return n&&t.push((l="left "+(r=n)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+r+"s cubic-bezier(0.23, 1, 0.32, 1)",O(eL,function(u){return u+"transition:"+l}).join(";"))),i&&(he.canvasSupported?t.push("background-Color:"+i):(t.push("background-Color:#"+Ac(i)),t.push("filter:alpha(opacity=70)"))),NS(["width","color","radius"],function(r){var s="border-"+r,l=JD(s),u=e.get(l);null!=u&&t.push(s+":"+u+("color"===r?"":"px"))}),t.push(function(r){var s=[],l=r.get("fontSize"),u=r.getTextColor();u&&s.push("color:"+u),s.push("font:"+r.getFont());var h=r.get("lineHeight");null==h&&(h=Math.round(3*l/2)),l&&s.push("line-height:"+h+"px");var c=r.get("textShadowColor"),d=r.get("textShadowBlur")||0,f=r.get("textShadowOffsetX")||0,p=r.get("textShadowOffsetY")||0;return d&&s.push("text-shadow:"+f+"px "+p+"px "+d+"px "+c),NS(["decoration","align"],function(m){var g=r.get(m);g&&s.push("text-"+m+":"+g)}),s.join(";")}(a)),null!=o&&t.push("padding:"+Va(o).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;ES(n,this._zr,this._appendToBody,e,t);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},nm.prototype={constructor:nm,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),i=t*this._zr.getHeight();this.moveTo(n,i)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var i={},a=e,o="{marker",r=a.indexOf(o);0<=r;){var s=a.indexOf("|}"),l=a.substr(r+o.length,s-r-o.length);i["marker"+l]=-1<l.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[l],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[l]},r=(a=a.substr(s+1)).indexOf("{marker")}var u=n.getModel("textStyle"),h=u.get("fontSize"),c=n.get("textLineHeight");null==c&&(c=Math.round(3*h/2)),this.el=new Pe({style:ut({},u,{rich:i,text:e,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:c}),z:n.get("z")}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var n=this._styleCoord;OS(n,this._zr,e,t),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var RS=Z,Ys=I,zS=Q,nL=new Fe({shape:{x:-1,y:-1,width:2,height:2}});function im(e){for(var t=e.pop();e.length;){var n=e.pop();n&&(ze.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new ze(n,t,t.ecModel))}return t}function BS(e,t){return e.dispatchAction||Z(t.dispatchAction,t)}function VS(e){return"center"===e||"middle"===e}At({type:"tooltip",init:function(e,t){if(!he.node){var n,i=e.getComponent("tooltip"),a=i.get("renderMode");this._renderMode=nv(a),"html"===this._renderMode?(n=new tm(t.getDom(),t,{appendToBody:i.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new nm(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!he.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");Sw("itemTooltip",this._api,RS(function(t,n,i){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(n,i):"leave"===t&&this._hide(i))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||i.manuallyShowTip(e,t,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(e,t,n,i){if(i.from!==this.uid&&!he.node){var a=BS(i,n);this._ticket="";var o=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var r=nL;r.position=[i.x,i.y],r.update(),r.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:r},a)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},a);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,i))return;var s=yw(i,t),l=s.point[0],u=s.point[1];null!=l&&null!=u&&this._tryShow({offsetX:l,offsetY:u,position:i.position,target:s.el},a)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},a))}},manuallyHideTip:function(e,t,n,i){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(BS(i,n))},_manuallyAxisShowTip:function(e,t,n,i){var a=i.seriesIndex,o=i.dataIndex,r=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=a&&null!=o&&null!=r){var s=t.getSeriesByIndex(a);if(s&&"axis"===(e=im([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:i.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=Z(t,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,a=[t.offsetX,t.offsetY],o=[],r=[],s=im([t.tooltipOption,this._tooltipModel]),l=this._renderMode,u=this._newLine,h={};Ys(e,function(d){Ys(d.dataByAxis,function(f){var p=n.getComponent(f.axisDim+"Axis",f.axisIndex),m=f.value,g=[];if(p&&null!=m){var v=Pw(m,p.axis,n,f.seriesDataIndices,f.valueLabelOpt);I(f.seriesDataIndices,function(y){var b=n.getSeriesByIndex(y.seriesIndex),_=y.dataIndexInside,w=b&&b.getDataParams(_);if(w.axisDim=f.axisDim,w.axisIndex=f.axisIndex,w.axisType=f.axisType,w.axisId=f.axisId,w.axisValue=qf(p.axis,m),w.axisValueLabel=v,w){r.push(w);var S,M=b.formatTooltip(_,!0,null,l);X(M)?(S=M.html,pe(h,M.markers)):S=M,g.push(S)}});var x=v;o.push("html"!==l?g.join(u):(x?ot(x)+u:"")+g.join(u))}})},this),o.reverse(),o=o.join(this._newLine+this._newLine);var c=t.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(s,c,a[0],a[1],this._tooltipContent,r):this._showTooltipContent(s,o,r,Math.random(),a[0],a[1],c,void 0,h)})},_showSeriesItemTooltip:function(e,t,n){var a=t.seriesIndex,o=this._ecModel.getSeriesByIndex(a),r=t.dataModel||o,s=t.dataIndex,l=t.dataType,u=r.getData(l),h=im([u.getItemModel(s),r,o&&(o.coordinateSystem||{}).model,this._tooltipModel]),c=h.get("trigger");if(null==c||"item"===c){var d,f,p=r.getDataParams(s,l),m=r.formatTooltip(s,!1,l,this._renderMode);f=X(m)?(d=m.html,m.markers):(d=m,null);var g="item_"+r.name+"_"+s;this._showOrMove(h,function(){this._showTooltipContent(h,d,p,g,e.offsetX,e.offsetY,e.position,e.target,f)}),n({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:a,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var i=t.tooltip;"string"==typeof i&&(i={content:i,formatter:i});var a=new ze(i,this._tooltipModel,this._ecModel),o=a.get("content"),r=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,o,a.get("formatterParams")||{},r,e.offsetX,e.offsetY,e.position,t)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,i,a,o,r,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent,h=e.get("formatter");r=r||e.get("position");var c=t;if(h&&"string"==typeof h)c=Kd(h,n,!0);else if("function"==typeof h){var d=RS(function(f,p){f===this._ticket&&(u.setContent(p,l,e),this._updatePosition(e,r,a,o,u,n,s))},this);this._ticket=i,c=h(n,i,d)}u.setContent(c,l,e),u.show(e),this._updatePosition(e,r,a,o,u,n,s)}},_updatePosition:function(e,t,n,i,a,o,r){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var m,g,v,x,y,b,_,w,S,M,u=a.getSize(),h=e.get("align"),c=e.get("verticalAlign"),d=r&&r.getBoundingRect().clone();if(r&&d.applyTransform(r.transform),"function"==typeof t&&(t=t([n,i],o,a.el,d,{viewSize:[s,l],contentSize:u.slice()})),z(t))n=zS(t[0],s),i=zS(t[1],l);else if(X(t)){t.width=u[0],t.height=u[1];var f=vt(t,{width:s,height:l});n=f.x,i=f.y,c=h=null}else if("string"==typeof t&&r)n=(p=function(m,g,v){var x=v[0],y=v[1],b=0,_=0,w=g.width,S=g.height;switch(m){case"inside":b=g.x+w/2-x/2,_=g.y+S/2-y/2;break;case"top":b=g.x+w/2-x/2,_=g.y-y-5;break;case"bottom":b=g.x+w/2-x/2,_=g.y+S+5;break;case"left":b=g.x-x-5,_=g.y+S/2-y/2;break;case"right":b=g.x+w+5,_=g.y+S/2-y/2}return[b,_]}(t,d,u))[0],i=p[1];else{var p;n=(m=n,g=i,v=a,x=s,y=l,b=h?null:20,_=c?null:20,w=v.getOuterSize(),S=w.width,M=w.height,null!=b&&(x<m+S+b?m-=S+b:m+=b),null!=_&&(y<g+M+_?g-=M+_:g+=_),p=[m,g])[0],i=p[1]}h&&(n-=VS(h)?u[0]/2:"right"===h?u[0]:0),c&&(i-=VS(c)?u[1]/2:"bottom"===c?u[1]:0),e.get("confine")&&(n=(p=function(m,g,v,x,y){var b=v.getOuterSize(),_=b.width,w=b.height;return m=Math.min(m+_,x)-_,g=Math.min(g+w,y)-w,[m=Math.max(m,0),g=Math.max(g,0)]}(n,i,a,s,l))[0],i=p[1]),a.moveTo(n,i)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&Ys(t,function(i,a){var o=i.dataByAxis||{},r=(e[a]||{}).dataByAxis||[];(n&=o.length===r.length)&&Ys(o,function(s,l){var u=r[l]||{},h=s.seriesDataIndices||[],c=u.seriesDataIndices||[];(n&=s.value===u.value&&s.axisType===u.axisType&&s.axisId===u.axisId&&h.length===c.length)&&Ys(h,function(d,f){var p=c[f];n&=d.seriesIndex===p.seriesIndex&&d.dataIndex===p.dataIndex})})}),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){he.node||(this._tooltipContent.dispose(),Lg("itemTooltip",t))}}),Be({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),Be({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var iL=["rect","polygon","keep","clear"],FS=I;function GS(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function am(e,t,n){var i={};return FS(t,function(a){var o=i[a]=function(){function r(){}return r.prototype.__hidden=r.prototype,new r}();FS(e[a],function(r,s){if($e.isValidType(s)){var l={type:s,visual:r};n&&n(l,a),o[s]=new $e(l),"opacity"===s&&((l=ue(l)).type="colorAlpha",o.__hidden.__alphaForOpacity=new $e(l))}})}),i}function WS(e,t,n){var i;I(n,function(a){t.hasOwnProperty(a)&&GS(t[a])&&(i=!0)}),i&&I(n,function(a){t.hasOwnProperty(a)&&GS(t[a])?e[a]=ue(t[a]):delete e[a]})}var om={lineX:HS(0),lineY:HS(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&Xa(n.range,e[0],e[1])},rect:function(e,t,n){var i=n.range;if(!e||i.length<=1)return!1;var a=e.x,o=e.y,r=e.width,s=e.height,l=i[0];return!!(Xa(i,a,o)||Xa(i,a+r,o)||Xa(i,a,o+s)||Xa(i,a+r,o+s)||Le.create(e).contain(l[0],l[1])||Ur(a,o,a+r,o,i)||Ur(a,o,a,o+s,i)||Ur(a+r,o,a+r,o+s,i)||Ur(a,o+s,a+r,o+s,i))||void 0}}};function HS(e){var t=["x","y"],n=["width","height"];return{point:function(i,a,o){if(i)return qs(i[e],o.range)},rect:function(i,a,o){if(i){var r=o.range,s=[i[t[e]],i[t[e]]+i[n[e]]];return s[1]<s[0]&&s.reverse(),qs(s[0],r)||qs(s[1],r)||qs(r[0],s)||qs(r[1],s)}}}}function qs(e,t){return t[0]<=e&&e<=t[1]}var ZS=["inBrush","outOfBrush"],rm="__ecBrushSelect",sm="__ecInBrushSelectEvent",US=ai.VISUAL.BRUSH;function jS(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new Wh(t.option,e)).setInputRanges(t.areas,e)})}function aL(e,t){if(!e.isDisposed()){var n=e.getZr();n[sm]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[sm]=!1}}function XS(e,t,n,i){for(var a=0,o=t.length;a<o;a++){var r=t[a];if(e[r.brushType](i,n,r.selectors,r))return!0}}function YS(e){var t=e.brushSelector;if(q(t)){var n=[];return I(om,function(a,o){n[o]=function(r,s,l,u){var h=s.getItemLayout(r);return a[t](h,l,u)}}),n}if(ee(t)){var i={};return I(om,function(a,o){i[o]=t}),i}return t}ct(US,function(e,t,n){e.eachComponent({mainType:"brush"},function(i){n&&"takeGlobalCursor"===n.type&&i.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),jS(e)}),et(US,function(e,t,n){var i,a,o=[];e.eachComponent({mainType:"brush"},function(r,s){var l={brushId:r.id,brushIndex:s,brushName:r.name,areas:ue(r.areas),selected:[]};o.push(l);var u=r.option,h=u.brushLink,c=[],d=[],f=[],p=0;s||(i=u.throttleType,a=u.throttleDelay);var m=O(r.areas,function(y){return b=ie({boundingRect:oL[y.brushType](y)},y),_=b.selectors={},I(om[b.brushType],function(w,S){_[S]=function(M){return w(M,_,b)}}),b;var b,_}),g=am(r.option,ZS,function(y){y.mappingMethod="fixed"});function v(y){return"all"===h||c[y]}function x(y){return!!y.length}z(h)&&I(h,function(y){c[y]=1}),e.eachSeries(function(y,b){var w,S,M,_=f[b]=[];"parallel"===y.subType?(S=b,p|=(M=(w=y).coordinateSystem).hasAxisBrushed(),v(S)&&M.eachActiveState(w.getData(),function(T,A){"active"===T&&(d[A]=1)})):function(w,S,M){var D,L,T=YS(w);if(T&&(D=S,null==(L=r.option.seriesIndex)||"all"===L||!(z(L)?E(L,D)<0:D!==L))&&(I(m,function(C){T[C.brushType]&&r.brushTargetManager.controlSeries(C,w,e)&&M.push(C),p|=x(M)}),v(S)&&x(M))){var A=w.getData();A.each(function(C){XS(T,M,A,C)&&(d[C]=1)})}}(y,b,_)}),e.eachSeries(function(y,b){var _={seriesId:y.id,seriesIndex:b,seriesName:y.name,dataIndex:[]};l.selected.push(_);var w=YS(y),S=f[b],M=y.getData(),T=v(b)?function(A){return d[A]?(_.dataIndex.push(M.getRawIndex(A)),"inBrush"):"outOfBrush"}:function(A){return XS(w,S,M,A)?(_.dataIndex.push(M.getRawIndex(A)),"inBrush"):"outOfBrush"};(v(b)?p:x(S))&&function(A,C,D,L,P,N){var R,k={};function B(F){return D.getItemVisual(R,F)}function G(F,Y){D.setItemVisual(R,F,Y)}I(A,function(F){var Y=$e.prepareVisualTypes(C[F]);k[F]=Y}),D.each(function W(F,Y){var K=D.getRawDataItem(R=F);if(!K||!1!==K.visualMap)for(var ce=L.call(void 0,F),U=C[ce],le=k[ce],de=0,xe=le.length;de<xe;de++){var He=le[de];U[He]&&U[He].applyVisual(F,B,G)}})}(ZS,g,M,T)})}),function(r,s,l,u,h){if(h){var c=r.getZr();c[sm]||(c[rm]||(c[rm]=aL),is(c,rm,l,s)(r,u))}}(t,i,a,o,n)});var oL={lineX:We,lineY:We,rect:function(e){return qS(e.range)},polygon:function(e){for(var t,n=e.range,i=0,a=n.length;i<a;i++){var o=n[i];o[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&qS(t)}};function qS(e){return new Le(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var rL=["#ddd"];function $S(e,t){return pe({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new ze(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function lm(e,t,n,i){i&&i.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function um(e,t,n){this.model=e,this.ecModel=t,this.api=n}pn({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;t||WS(n,e,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:rL},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(e){e&&(this.areas=O(e,function(t){return $S(this.option,t)},this))},setBrushOption:function(e){this.brushOption=$S(this.option,e),this.brushType=this.brushOption.brushType}}),At({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new cr(t.getZr())).on("brush",Z(this._onBrush,this)).mount()},render:function(e){return this.model=e,lm.apply(this,arguments)},updateTransform:function(e,t){return jS(t),lm.apply(this,arguments)},updateView:lm,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:ue(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:ue(e),$from:n})}}),Be({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),Be({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),Be({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),um.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:ue(Ci.toolbox.brush.title)};var Hh=um.prototype;function KS(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},a=i.normal||(i.normal={}),o={normal:1,emphasis:1};I(i,function(r,s){o[s]||fo(a,s)||(a[s]=r)}),n.label&&!fo(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function fo(e,t){return e.hasOwnProperty(t)}Hh.render=Hh.updateView=function(e,t,n){var i,a,o;t.eachComponent({mainType:"brush"},function(r){i=r.brushType,a=r.brushOption.brushMode||"single",o|=r.areas.length}),this._brushType=i,this._brushMode=a,I(e.get("type",!0),function(r){e.setIconStatus(r,("keep"===r?"multiple"===a:"clear"===r?o:r===i)?"emphasis":"normal")})},Hh.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return I(e.get("type",!0),function(i){t[i]&&(n[i]=t[i])}),n},Hh.onclick=function(e,t,n){var i=this._brushType,a=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===a?"single":"multiple":a}})},fr("brush",um),zt(function(e,t){var l,u,n=e&&e.brush;if(z(n)||(n=n?[n]:[]),n.length){var i=[];I(n,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(i=i.concat(u))});var a=e&&e.toolbox;z(a)&&(a=a[0]),a||(e.toolbox=[a={feature:{}}]);var o=a.feature||(a.feature={}),r=o.brush||(o.brush={}),s=r.type||(r.type=[]);s.push.apply(s,i),u={},I(l=s,function(h){u[h]=1}),l.length=0,I(u,function(h,c){l.push(c)}),t&&!s.length&&s.push.apply(s,iL)}}),pn({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),At({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var i=this.group,a=e.getModel("textStyle"),o=e.getModel("subtextStyle"),r=e.get("textAlign"),s=De(e.get("textBaseline"),e.get("textVerticalAlign")),l=new Pe({style:ut({},a,{text:e.get("text"),textFill:a.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),h=e.get("subtext"),c=new Pe({style:ut({},o,{text:h,textFill:o.getTextColor(),y:u.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),d=e.get("link"),f=e.get("sublink"),p=e.get("triggerEvent",!0);l.silent=!d&&!p,c.silent=!f&&!p,d&&l.on("click",function(){qr(d,"_"+e.get("target"))}),f&&c.on("click",function(){qr(f,"_"+e.get("subtarget"))}),l.eventData=c.eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(l),h&&i.add(c);var m=i.getBoundingRect(),g=e.getBoxLayoutParams();g.width=m.width,g.height=m.height;var v=vt(g,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));r||("middle"===(r=e.get("left")||e.get("right"))&&(r="center"),"right"===r?v.x+=v.width:"center"===r&&(v.x+=v.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.attr("position",[v.x,v.y]);var x={textAlign:r,textVerticalAlign:s};l.setStyle(x),c.setStyle(x),m=i.getBoundingRect();var y=v.margin,b=e.getItemStyle(["color","opacity"]);b.fill=e.get("backgroundColor");var _=new Fe({shape:{x:m.x-y[3],y:m.y-y[0],width:m.width+y[1]+y[3],height:m.height+y[0]+y[2],r:e.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});i.add(_)}}}),Ge.registerSubTypeDefaulter("timeline",function(){return"slider"}),Be({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),ie({currentIndex:n.option.currentIndex},e)}),Be({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)});var QS=Ge.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){QS.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,i=this._names=[];if("category"===n){var a=[];I(t,function(r,s){var l,u=Er(r);X(r)?(l=ue(r)).value=s:l=s,a.push(l),q(u)||null!=u&&!isNaN(u)||(u=""),i.push(u+"")}),t=a}(this._data=new Ct([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(t,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function Zh(e,t,n,i){_t.call(this,e,t,n),this.type=i||"value",this.model=null}j(QS.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),vf);var lL=ii.extend({type:"timeline"});Zh.prototype={constructor:Zh,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},H(Zh,_t);var ba=Z,hm=I,cm=Math.PI;function JS(e,t,n,i,a,o){var r=t.get("color");a?(a.setColor(r),n.add(a),o&&o.onUpdate(a)):((a=gn(e.get("symbol"),-1,-1,2,2,r)).setStyle("strokeNoScale",!0),n.add(a),o&&o.onCreate(a));var s=t.getItemStyle(["color","symbol","symbolSize"]);a.setStyle(s),i=pe({rectHover:!0,z2:100},i,!0);var l=e.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var u=e.get("symbolOffset");if(u){var h=i.position=i.position||[0,0];h[0]+=Q(u[0],l[0]),h[1]+=Q(u[1],l[1])}var c=e.get("symbolRotate");return i.rotation=(c||0)*Math.PI/180||0,a.attr(i),a.updateTransform(),a}function eM(e,t,n,i,a){if(!e.dragging){var o=i.getModel("checkpointStyle"),r=n.dataToCoord(i.getData().get(["value"],t));a||!o.get("animation",!0)?e.attr({position:[r,0]}):(e.stopAnimation(!0),e.animateTo({position:[r,0]},o.get("animationDuration",!0),o.get("animationEasing",!0)))}}lL.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,n,i){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var a=this._layout(e,n),o=this._createGroup("mainGroup"),r=this._createGroup("labelGroup"),s=this._axis=this._createAxis(a,e);e.formatTooltip=function(l){return ot(s.scale.getLabel(l))},hm(["AxisLine","AxisTick","Control","CurrentPointer"],function(l){this["_render"+l](a,o,s,e)},this),this._renderAxisLabel(a,r,s,e),this._position(a,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var T,A,n=e.get("label.position"),i=e.get("orient"),a=(A=t,vt((T=e).getBoxLayoutParams(),{width:A.getWidth(),height:A.getHeight()},T.get("padding")));null==n||"auto"===n?n="horizontal"===i?a.y+a.height/2<t.getHeight()/2?"-":"+":a.x+a.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var o,r,s,l,u={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},h={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:cm/2},d="vertical"===i?a.height:a.width,f=e.getModel("controlStyle"),p=f.get("show",!0),m=p?f.get("itemSize"):0,g=p?f.get("itemGap"):0,v=m+g,x=e.get("label.rotate")||0;x=x*cm/180;var y=f.get("position",!0),b=p&&f.get("showPlayBtn",!0),_=p&&f.get("showPrevBtn",!0),S=0,M=d;return"left"===y||"bottom"===y?(b&&(o=[0,0],S+=v),_&&(r=[S,0],S+=v)):(b&&(o=[M-m,0],M-=v),_&&(r=[0,0],S+=v)),p&&f.get("showNextBtn",!0)&&(s=[M-m,0],M-=v),l=[S,M],e.get("inverse")&&l.reverse(),{viewRect:a,mainLength:d,orient:i,rotation:c[i],labelRotation:x,labelPosOpt:n,labelAlign:e.get("label.align")||u[i],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||h[i],playPosition:o,prevBtnPosition:r,nextBtnPosition:s,axisExtent:l,controlSize:m,controlGap:g}},_position:function(e,t){var n=this._mainGroup,i=this._labelGroup,a=e.viewRect;if("vertical"===e.orient){var o=qt(),r=a.x,s=a.y+a.height;En(o,o,[-r,-s]),yi(o,o,-cm/2),En(o,o,[r,s]),(a=a.clone()).applyTransform(o)}var l=g(a),u=g(n.getBoundingRect()),h=g(i.getBoundingRect()),c=n.position,d=i.position;d[0]=c[0]=l[0][0];var f,p=e.labelPosOpt;function m(x){var y=x.position;x.origin=[l[0][0]-y[0],l[1][0]-y[1]]}function g(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function v(x,y,b,_,w){x[_]+=b[_][w]-y[_][w]}isNaN(p)?(v(c,u,l,1,f="+"===p?0:1),v(d,h,l,1,1-f)):(v(c,u,l,1,f=0<=p?0:1),d[1]=c[1]+p),n.attr("position",c),i.attr("position",d),n.rotation=i.rotation=e.rotation,m(n),m(i)},_createAxis:function(e,t){var n=t.getData(),i=t.get("axisType"),a=jo(t,i);a.getTicks=function(){return n.mapArray(["value"],function(s){return s})};var o=n.getDataExtent("value");a.setExtent(o[0],o[1]),a.niceTicks();var r=new Zh("value",a,e.axisExtent,i);return r.model=t,r},_createGroup:function(e){var t=this["_"+e]=new re;return this.group.add(t),t},_renderAxisLine:function(e,t,n,i){var a=n.getExtent();i.get("lineStyle.show")&&t.add(new Ot({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:fe({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,i){var a=i.getData(),o=n.scale.getTicks();hm(o,function(r){var s=n.dataToCoord(r),l=a.getItemModel(r),u=l.getModel("itemStyle"),h=l.getModel("emphasis.itemStyle"),c={position:[s,0],onclick:ba(this._changeTimeline,this,r)},d=JS(l,u,t,c);tt(d,h.getItemStyle()),l.get("tooltip")?(d.dataIndex=r,d.dataModel=i):d.dataIndex=d.dataModel=null},this)},_renderAxisLabel:function(e,t,n,i){if(n.getLabelModel().get("show")){var a=i.getData(),o=n.getViewLabels();hm(o,function(r){var s=r.tickValue,l=a.getItemModel(s),u=l.getModel("label"),h=l.getModel("emphasis.label"),c=n.dataToCoord(r.tickValue),d=new Pe({position:[c,0],rotation:e.labelRotation-e.rotation,onclick:ba(this._changeTimeline,this,s),silent:!1});ut(d.style,u,{text:r.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(d),tt(d,ut({},h))},this)}},_renderControl:function(e,t,n,i){var a=e.controlSize,o=e.rotation,r=i.getModel("controlStyle").getItemStyle(),s=i.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-a/2,a,a],u=i.getPlayState(),h=i.get("inverse",!0);function c(d,f,p,m){if(d){var g=(y=l,_=(b={position:d,origin:[a/2,0],rotation:m?-o:0,rectHover:!0,style:r,onclick:p}).style,w=Ro(i.get(f),b||{},new Le(y[0],y[1],y[2],y[3])),_&&w.setStyle(_),w);t.add(g),tt(g,s)}var y,b,_,w}c(e.nextBtnPosition,"controlStyle.nextIcon",ba(this._changeTimeline,this,h?"-":"+")),c(e.prevBtnPosition,"controlStyle.prevIcon",ba(this._changeTimeline,this,h?"+":"-")),c(e.playPosition,"controlStyle."+(u?"stopIcon":"playIcon"),ba(this._handlePlayClick,this,!u),!0)},_renderCurrentPointer:function(e,t,n,i){var a=i.getData(),o=i.getCurrentIndex(),r=a.getItemModel(o).getModel("checkpointStyle"),s=this;this._currentPointer=JS(r,r,this._mainGroup,{},this._currentPointer,{onCreate:function(u){u.draggable=!0,u.drift=ba(s._handlePointerDrag,s),u.ondragend=ba(s._handlePointerDragend,s),eM(u,o,n,i,!0)},onUpdate:function(u){eM(u,o,n,i)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],i=Ba(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var a=this._findNearestTick(n),o=this.model;(t||a!==o.getCurrentIndex()&&o.get("realtime"))&&this._changeTimeline(a)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(ba(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return ni(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),i=1/0,a=this._axis;return n.each(["value"],function(o,r){var s=a.dataToCoord(o),l=Math.abs(s-e);l<i&&(i=l,t=r)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),zt(function(e){var t=e&&e.timeline;z(t)||(t=t?[t]:[]),I(t,function(n){n&&function(i){var a=i.type,o={number:"value",time:"time"};if(o[a]&&(i.axisType=o[a],delete i.type),KS(i),fo(i,"controlPosition")){var r=i.controlStyle||(i.controlStyle={});fo(r,"position")||(r.position=i.controlPosition),"none"!==r.position||fo(r,"show")||(r.show=!1,delete r.position),delete i.controlPosition}I(i.data||[],function(s){X(s)&&!z(s)&&(!fo(s,"value")&&fo(s,"name")&&(s.value=s.name),KS(s))})}(n)})});var tM=ta,dm=ot;function Uh(e){La(e,"label",["show"])}var jh=pn({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(he.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,i){var a=this.constructor,o=this.mainType+"Model";n||t.eachSeries(function(r){var s=r.get(this.mainType,!0),l=r[o];s&&s.data?(l?l._mergeOption(s,t,!0):(i&&Uh(s),I(s.data,function(u){u instanceof Array?(Uh(u[0]),Uh(u[1])):Uh(u)}),fe(l=new a(s,this,t),{mainType:this.mainType,seriesIndex:r.seriesIndex,name:r.name,createdBySelf:!0}),l.__hostSeries=r),r[o]=l):r[o]=null},this)},formatTooltip:function(e,t,n,i){var a=this.getData(),o=this.getRawValue(e),r=z(o)?O(o,tM).join(", "):tM(o),s=a.getName(e),l=dm(this.name);return null==o&&!s||(l+="html"===i?"<br/>":"\n"),s&&(l+=dm(s),null!=o&&(l+=" : ")),null!=o&&(l+=dm(r)),l},getData:function(){return this._data},setData:function(e){this._data=e}});j(jh,vf),jh.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var nM=E;function fm(e,t,n,i,a,o){var r=[],s=Li(t,i)?t.getCalculationInfo("stackResultDimension"):i,l=mm(t,s,e),u=t.indicesOfNearest(s,l)[0];r[a]=t.get(n,u),r[o]=t.get(s,u);var h=t.get(i,u),c=Jv(t.get(i,u));return 0<=(c=Math.min(c,20))&&(r[o]=+r[o].toFixed(c)),[r,h]}var pm=V,gm={min:pm(fm,"min"),max:pm(fm,"max"),average:pm(fm,"average")};function $s(e,t){var c,n=e.getData(),i=e.coordinateSystem;if(t&&(c=t,isNaN(parseFloat(c.x))||isNaN(parseFloat(c.y)))&&!z(t.coord)&&i){var a=i.dimensions,o=iM(t,n,i,e);if((t=ue(t)).type&&gm[t.type]&&o.baseAxis&&o.valueAxis){var r=nM(a,o.baseAxis.dim),s=nM(a,o.valueAxis.dim),l=gm[t.type](n,o.baseDataDim,o.valueDataDim,r,s);t.coord=l[0],t.value=l[1]}else{for(var u=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],h=0;h<2;h++)gm[u[h]]&&(u[h]=mm(n,n.mapDimension(a[h]),u[h]));t.coord=u}}return t}function iM(e,t,n,i){var a={};return null!=e.valueIndex||null!=e.valueDim?(a.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,a.valueAxis=n.getAxis(function(o,r){var s=o.getData(),l=s.dimensions;r=s.getDimension(r);for(var u=0;u<l.length;u++){var h=s.getDimensionInfo(l[u]);if(h.name===r)return h.coordDim}}(i,a.valueDataDim)),a.baseAxis=n.getOtherAxis(a.valueAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim)):(a.baseAxis=i.getBaseAxis(),a.valueAxis=n.getOtherAxis(a.baseAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim),a.valueDataDim=t.mapDimension(a.valueAxis.dim)),a}function Ks(e,t){return!(e&&e.containData&&t.coord&&!function(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}(t))||e.containData(t.coord)}function aM(e,t,n,i){return i<2?e.coord&&e.coord[i]:e.value}function mm(e,t,n){if("average"!==n)return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0];var i=0,a=0;return e.each(t,function(o,r){isNaN(o)||(i+=o,a++)}),i/a}var vm=At({type:"marker",init:function(){this.markerGroupMap=ne()},render:function(e,t,n){var i=this.markerGroupMap;i.each(function(o){o.__keep=!1});var a=this.type+"Model";t.eachSeries(function(o){var r=o[a];r&&this.renderSeries(o,r,t,n)},this),i.each(function(o){o.__keep||this.group.remove(o.group)},this)},renderSeries:function(){}});function oM(e,t,n){var i=t.coordinateSystem;e.each(function(a){var o,r=e.getItemModel(a),s=Q(r.get("x"),n.getWidth()),l=Q(r.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,a));else if(i){var u=e.get(i.dimensions[0],a),h=e.get(i.dimensions[1],a);o=i.dataToPoint([u,h])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(a,o)})}function uL(e,t,n,i){var a=e.getData(),o=i.type;if(!z(i)&&("min"===o||"max"===o||"average"===o||"median"===o||null!=i.xAxis||null!=i.yAxis)){var r,s;if(null!=i.yAxis||null!=i.xAxis)r=t.getAxis(null!=i.yAxis?"y":"x"),s=Ne(i.yAxis,i.xAxis);else{var l=iM(i,a,t,e);r=l.valueAxis,s=mm(a,fs(a,l.valueDataDim),o)}var u="x"===r.dim?0:1,h=1-u,c=ue(i),d={};c.type=null,c.coord=[],d.coord=[],c.coord[h]=-1/0,d.coord[h]=1/0;var f=n.get("precision");0<=f&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),c.coord[u]=d.coord[u]=s,i=[c,d,{type:o,valueIndex:i.valueIndex,value:s}]}return(i=[$s(e,i[0]),$s(e,i[1]),fe({},i[2])])[2].type=i[2].type||"",pe(i[2],i[0]),pe(i[2],i[1]),i}function Xh(e){return!isNaN(e)&&!isFinite(e)}function rM(e,t,n,i){var a=1-e,o=i.dimensions[e];return Xh(t[a])&&Xh(n[a])&&t[e]===n[e]&&i.getAxis(o).containData(t[e])}function hL(e,t){if("cartesian2d"===e.type){var n=t[0].coord,i=t[1].coord;if(n&&i&&(rM(1,n,i,e)||rM(0,n,i,e)))return!0}return Ks(e,t[0])&&Ks(e,t[1])}function ym(e,t,n,i,a){var o,r=i.coordinateSystem,s=e.getItemModel(t),l=Q(s.get("x"),a.getWidth()),u=Q(s.get("y"),a.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var h=r.dimensions,c=e.get(h[0],t),d=e.get(h[1],t);o=r.dataToPoint([c,d])}if("cartesian2d"===r.type){var f=r.getAxis("x"),p=r.getAxis("y");Xh(e.get((h=r.dimensions)[0],t))?o[0]=f.toGlobalCoord(f.getExtent()[n?0:1]):Xh(e.get(h[1],t))&&(o[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];e.setItemLayout(t,o)}function cL(e,t,n,i){var a=$s(e,i[0]),o=$s(e,i[1]),r=Ne,s=a.coord,l=o.coord;s[0]=r(s[0],-1/0),s[1]=r(s[1],-1/0),l[0]=r(l[0],1/0),l[1]=r(l[1],1/0);var u=ln([{},a,o]);return u.coord=[a.coord,o.coord],u.x0=a.x,u.y0=a.y,u.x1=o.x,u.y1=o.y,u}function vr(e){return!isNaN(e)&&!isFinite(e)}function sM(e,t,n){var i=1-e;return vr(t[i])&&vr(n[i])}function dL(e,t){var n=t.coord[0],i=t.coord[1];return!("cartesian2d"!==e.type||!n||!i||!sM(1,n,i)&&!sM(0,n,i))||Ks(e,{coord:n,x:t.x0,y:t.y0})||Ks(e,{coord:i,x:t.x1,y:t.y1})}function lM(e,t,n,i,a){var o,r=i.coordinateSystem,s=e.getItemModel(t),l=Q(s.get(n[0]),a.getWidth()),u=Q(s.get(n[1]),a.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(e.getValues(n,t));else{var h=[f=e.get(n[0],t),p=e.get(n[1],t)];r.clampData&&r.clampData(h,h),o=r.dataToPoint(h,!0)}if("cartesian2d"===r.type){var c=r.getAxis("x"),d=r.getAxis("y"),f=e.get(n[0],t),p=e.get(n[1],t);vr(f)?o[0]=c.toGlobalCoord(c.getExtent()["x0"===n[0]?0:1]):vr(p)&&(o[1]=d.toGlobalCoord(d.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];return o}vm.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries(function(i){var a=i.markPointModel;a&&(oM(a.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout(a))},this)},renderSeries:function(e,t,n,i){var a=e.coordinateSystem,o=e.id,r=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new Xo),u=function(h,c,d){var f;f=h?O(h&&h.dimensions,function(g){return ie({name:g},c.getData().getDimensionInfo(c.getData().mapDimension(g))||{})}):[{name:"value",type:"float"}];var p=new Ct(f,d),m=O(d.get("data"),V($s,c));return h&&(m=se(m,V(Ks,h))),p.initData(m,null,h?aM:function(g){return g.value}),p}(a,e,t);t.setData(u),oM(t.getData(),e,i),u.each(function(h){var c=u.getItemModel(h),d=c.getShallow("symbol"),f=c.getShallow("symbolSize"),p=c.getShallow("symbolRotate"),m=ee(d),g=ee(f),v=ee(p);if(m||g||v){var x=t.getRawValue(h),y=t.getDataParams(h);m&&(d=d(x,y)),g&&(f=f(x,y)),v&&(p=p(x,y))}u.setItemVisual(h,{symbol:d,symbolSize:f,symbolRotate:p,color:c.get("itemStyle.color")||r.getVisual("color")})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(h){h.traverse(function(c){c.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),zt(function(e){e.markPoint=e.markPoint||{}}),jh.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),vm.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries(function(i){var a=i.markLineModel;if(a){var o=a.getData(),r=a.__from,s=a.__to;r.each(function(l){ym(r,l,!0,i,n),ym(s,l,!1,i,n)}),o.each(function(l){o.setItemLayout(l,[r.getItemLayout(l),s.getItemLayout(l)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},renderSeries:function(e,t,n,i){var a=e.coordinateSystem,o=e.id,r=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new dh);this.group.add(l.group);var u=function(g,v,x){var y;y=g?O(g&&g.dimensions,function(T){return ie({name:T},v.getData().getDimensionInfo(v.getData().mapDimension(T))||{})}):[{name:"value",type:"float"}];var b=new Ct(y,x),_=new Ct(y,x),w=new Ct([],x),S=O(x.get("data"),V(uL,v,g,x));g&&(S=se(S,V(hL,g)));var M=g?aM:function(T){return T.value};return b.initData(O(S,function(T){return T[0]}),null,M),_.initData(O(S,function(T){return T[1]}),null,M),w.initData(O(S,function(T){return T[2]})),w.hasItemOption=!0,{from:b,to:_,line:w}}(a,e,t),h=u.from,c=u.to,d=u.line;t.__from=h,t.__to=c,t.setData(d);var f=t.get("symbol"),p=t.get("symbolSize");function m(g,v,x){var y=g.getItemModel(v);ym(g,v,x,e,i),g.setItemVisual(v,{symbolRotate:y.get("symbolRotate"),symbolSize:y.get("symbolSize")||p[x?0:1],symbol:y.get("symbol",!0)||f[x?0:1],color:y.get("itemStyle.color")||r.getVisual("color")})}z(f)||(f=[f,f]),"number"==typeof p&&(p=[p,p]),u.from.each(function(g){m(h,g,!0),m(c,g,!1)}),d.each(function(g){var v=d.getItemModel(g).get("lineStyle.color");d.setItemVisual(g,{color:v||h.getItemVisual(g,"color")}),d.setItemLayout(g,[h.getItemLayout(g),c.getItemLayout(g)]),d.setItemVisual(g,{fromSymbolRotate:h.getItemVisual(g,"symbolRotate"),fromSymbolSize:h.getItemVisual(g,"symbolSize"),fromSymbol:h.getItemVisual(g,"symbol"),toSymbolRotate:c.getItemVisual(g,"symbolRotate"),toSymbolSize:c.getItemVisual(g,"symbolSize"),toSymbol:c.getItemVisual(g,"symbol")})}),l.updateData(d),u.line.eachItemGraphicEl(function(g,v){g.traverse(function(x){x.dataModel=t})}),l.__keep=!0,l.group.silent=t.get("silent")||e.get("silent")}}),zt(function(e){e.markLine=e.markLine||{}}),jh.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var xm=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];vm.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries(function(i){var a=i.markAreaModel;if(a){var o=a.getData();o.each(function(r){var s=O(xm,function(l){return lM(o,r,l,i,n)});o.setItemLayout(r,s),o.getItemGraphicEl(r).setShape("points",s)})}},this)},renderSeries:function(e,t,n,i){var a=e.coordinateSystem,o=e.id,r=e.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new re});this.group.add(l.group),l.__keep=!0;var u=function(h,c,d){var f,p;p=h?(f=O(h&&h.dimensions,function(v){var x=c.getData();return ie({name:v},x.getDimensionInfo(x.mapDimension(v))||{})}),new Ct(O(["x0","y0","x1","y1"],function(v,x){return{name:v,type:f[x%2].type}}),d)):new Ct(f=[{name:"value",type:"float"}],d);var m=O(d.get("data"),V(cL,c,h,d));return h&&(m=se(m,V(dL,h))),p.initData(m,null,h?function(v,x,y,b){return v.coord[Math.floor(b/2)][b%2]}:function(v){return v.value}),p.hasItemOption=!0,p}(a,e,t);t.setData(u),u.each(function(h){var c=O(xm,function(f){return lM(u,h,f,e,i)}),d=!0;I(xm,function(f){if(d){var p=u.get(f[0],h),m=u.get(f[1],h);(vr(p)||a.getAxis("x").containData(p))&&(vr(m)||a.getAxis("y").containData(m))&&(d=!1)}}),u.setItemLayout(h,{points:c,allClipped:d}),u.setItemVisual(h,{color:r.getVisual("color")})}),u.diff(l.__data).add(function(h){var c=u.getItemLayout(h);if(!c.allClipped){var d=new tn({shape:{points:c.points}});u.setItemGraphicEl(h,d),l.group.add(d)}}).update(function(h,c){var d=l.__data.getItemGraphicEl(c),f=u.getItemLayout(h);f.allClipped?d&&l.group.remove(d):(d?Ae(d,{shape:{points:f.points}},t,h):d=new tn({shape:{points:f.points}}),u.setItemGraphicEl(h,d),l.group.add(d))}).remove(function(h){var c=l.__data.getItemGraphicEl(h);l.group.remove(c)}).execute(),u.eachItemGraphicEl(function(h,c){var d=u.getItemModel(c),f=d.getModel("label"),p=d.getModel("emphasis.label"),m=u.getItemVisual(c,"color");h.useStyle(ie(d.getModel("itemStyle").getItemStyle(),{fill:yl(m,.4),stroke:m})),h.hoverStyle=d.getModel("emphasis.itemStyle").getItemStyle(),cn(h.style,h.hoverStyle,f,p,{labelFetcher:t,labelDataIndex:c,defaultText:u.getName(c)||"",isRectText:!0,autoColor:m}),tt(h,{}),h.dataModel=t}),l.__data=u,l.group.silent=t.get("silent")||e.get("silent")}}),zt(function(e){e.markArea=e.markArea||{}});var uM=Ci.legend.selector,fL={all:{type:"all",title:ue(uM.all)},inverse:{type:"inverse",title:ue(uM.inverse)}},hM=pn({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){hM.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),z(t)&&I(t,function(n,i){q(n)&&(n={type:n}),t[i]=pe(n,fL[n.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var i=e[n].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries(function(a){var o;if(n.push(a.name),a.legendVisualProvider){var s=a.legendVisualProvider.getAllNames();e.isSeriesFiltered(a)||(n=n.concat(s)),s.length?t=t.concat(s):o=!0}else o=!0;o&&wd(a)&&t.push(a.name)}),this._availableNames=n;var i=O(this.get("data")||t,function(a){return"string"!=typeof a&&"number"!=typeof a||(a={name:a}),new ze(a,this,this.ecModel)},this);this._data=i},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&I(this._data,function(n){t[n.get("name")]=!1}),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var t=this.option.selected;I(this._data,function(n){t[n.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;I(this._data,function(n){var i=n.get("name",!0);t.hasOwnProperty(i)||(t[i]=!0),t[i]=!t[i]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=E(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function Qs(e,t,n){var i,a={},o="toggleSelected"===e;return n.eachComponent("legend",function(r){o&&null!=i?r[i?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?r[e]():(r[e](t.name),i=r.isSelected(t.name)),I(r.getData(),function(s){var l=s.get("name");if("\n"!==l&&""!==l){var u=r.isSelected(l);a[l]=a.hasOwnProperty(l)?a[l]&&u:u}})}),"allSelect"===e||"inverseSelect"===e?{selected:a}:{name:t.name,selected:a}}Be("legendToggleSelect","legendselectchanged",V(Qs,"toggleSelected")),Be("legendAllSelect","legendselectall",V(Qs,"allSelect")),Be("legendInverseSelect","legendinverseselect",V(Qs,"inverseSelect")),Be("legendSelect","legendselected",V(Qs,"select")),Be("legendUnSelect","legendunselected",V(Qs,"unSelect"));var yr=V,cM=I,Yh=re,pL=At({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new Yh),this.group.add(this._selectorGroup=new Yh),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var a=e.get("align"),o=e.get("orient");a&&"auto"!==a||(a="right"===e.get("left")&&"vertical"===o?"right":"left");var r=e.get("selector",!0),s=e.get("selectorPosition",!0);!r||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(a,e,t,n,r,o,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},h=e.get("padding"),c=vt(l,u,h),d=this.layoutInner(e,a,c,i,r,s),f=vt(ie({width:d.width,height:d.height},l),u,h);this.group.attr("position",[f.x-d.x,f.y-d.y]),this.group.add(this._backgroundEl=cS(d,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,i,a,o,r){var s=this.getContentGroup(),l=ne(),u=t.get("selectedMode"),h=[];n.eachRawSeries(function(c){c.get("legendHoverLink")||h.push(c.id)}),cM(t.getData(),function(c,d){var f=c.get("name");if(this.newlineDisabled||""!==f&&"\n"!==f){var p=n.getSeriesByName(f)[0];if(!l.get(f))if(p){var m=p.getData(),g=m.getVisual("color"),v=m.getVisual("borderColor");"function"==typeof g&&(g=g(p.getDataParams(0))),"function"==typeof v&&(v=v(p.getDataParams(0)));var x=m.getVisual("legendSymbol")||"roundRect",y=m.getVisual("symbol");this._createItem(f,d,c,t,x,y,e,g,v,u).on("click",yr(fM,f,null,i,h)).on("mouseover",yr(_m,p.name,null,i,h)).on("mouseout",yr(bm,p.name,null,i,h)),l.set(f,!0)}else n.eachRawSeries(function(b){if(!l.get(f)&&b.legendVisualProvider){var _=b.legendVisualProvider;if(!_.containName(f))return;var w=_.indexOfName(f),S=_.getItemVisual(w,"color"),M=_.getItemVisual(w,"borderColor");this._createItem(f,d,c,t,"roundRect",null,e,S,M,u).on("click",yr(fM,null,f,i,h)).on("mouseover",yr(_m,null,f,i,h)).on("mouseout",yr(bm,null,f,i,h)),l.set(f,!0)}},this)}else s.add(new Yh({newline:!0}))},this),a&&this._createSelector(a,t,i,o,r)},_createSelector:function(e,t,n,i,a){var o=this.getSelectorGroup();cM(e,function(r){!function(s){var l=s.type,u=new Pe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===l?"legendAllSelect":"legendInverseSelect"})}});o.add(u);var h=t.getModel("selectorLabel"),c=t.getModel("emphasis.selectorLabel");cn(u.style,u.hoverStyle={},h,c,{defaultText:s.title,isRectText:!1}),tt(u)}(r)})},_createItem:function(e,t,n,i,a,o,r,s,l,u){var h=i.get("itemWidth"),c=i.get("itemHeight"),d=i.get("inactiveColor"),f=i.get("inactiveBorderColor"),p=i.get("symbolKeepAspect"),m=i.getModel("itemStyle"),g=i.isSelected(e),v=new Yh,x=n.getModel("textStyle"),y=n.get("icon"),b=n.getModel("tooltip"),_=b.parentModel,w=gn(a=y||a,0,0,h,c,g?s:d,null==p||p);if(v.add(dM(w,a,m,l,f,g)),!y&&o&&(o!==a||"none"===o)){var S=.8*c;"none"===o&&(o="circle");var M=gn(o,(h-S)/2,(c-S)/2,S,S,g?s:d,null==p||p);v.add(dM(M,o,m,l,f,g))}var T="left"===r?h+5:-5,A=r,C=i.get("formatter"),D=e;"string"==typeof C&&C?D=C.replace("{name}",null!=e?e:""):"function"==typeof C&&(D=C(e)),v.add(new Pe({style:ut({},x,{text:D,x:T,y:c/2,textFill:g?x.getTextColor():d,textAlign:A,textVerticalAlign:"middle"})}));var L=new Fe({shape:v.getBoundingRect(),invisible:!0,tooltip:b.get("show")?fe({content:e,formatter:_.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},b.option):null});return v.add(L),v.eachChild(function(P){P.silent=!0}),L.silent=!u,this.getContentGroup().add(v),tt(v),v.__legendDataIndex=t,v},layoutInner:function(e,t,n,i,a,o){var r=this.getContentGroup(),s=this.getSelectorGroup();Ga(e.get("orient"),r,e.get("itemGap"),n.width,n.height);var l=r.getBoundingRect(),u=[-l.x,-l.y];if(a){Ga("horizontal",s,e.get("selectorItemGap",!0));var h=s.getBoundingRect(),c=[-h.x,-h.y],d=e.get("selectorButtonGap",!0),f=e.getOrient().index,p=0===f?"width":"height",m=0===f?"height":"width",g=0===f?"y":"x";"end"===o?c[f]+=l[p]+d:u[f]+=h[p]+d,c[1-f]+=l[m]/2-h[m]/2,s.attr("position",c),r.attr("position",u);var v={x:0,y:0};return v[p]=l[p]+d+h[p],v[m]=Math.max(l[m],h[m]),v[g]=Math.min(0,h[g]+c[1-f]),v}return r.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function dM(e,t,n,i,a,o){var r;return"line"!==t&&t.indexOf("empty")<0?(r=n.getItemStyle(),e.style.stroke=i,o||(r.stroke=a)):r=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(r)}function fM(e,t,n,i){bm(e,t,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),_m(e,t,n,i)}function _m(e,t,n,i){var a=n.getZr().storage.getDisplayList()[0];a&&a.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function bm(e,t,n,i){var a=n.getZr().storage.getDisplayList()[0];a&&a.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}fn(ai.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var i=0;i<t.length;i++)if(!t[i].isSelected(n.name))return!1;return!0})}),Ge.registerSubTypeDefaulter("legend",function(){return"plain"});var pM=hM.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,i){var a=Bo(e);pM.superCall(this,"init",e,t,n,i),gM(this,e,a)},mergeOption:function(e,t){pM.superCall(this,"mergeOption",e,t),gM(this,this.option,e)}});function gM(e,t,n){var i=[1,1];i[e.getOrient().index]=0,na(t,n,{type:"box",ignoreSize:i})}var mM=re,wm=["width","height"],Sm=["x","y"],Mm=pL.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){Mm.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new mM),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new mM)},resetInner:function(){Mm.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,i,a,o,r){var s=this;Mm.superCall(this,"renderInner",e,t,n,i,a,o,r);var l=this._controllerGroup,u=t.get("pageIconSize",!0);z(u)||(u=[u,u]),c("pagePrev",0);var h=t.getModel("pageTextStyle");function c(d,f){var p=d+"DataIndex",m=Ro(t.get("pageIcons",!0)[t.getOrient().name][f],{onclick:Z(s._pageGo,s,p,t,i)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});m.name=d,l.add(m)}l.add(new Pe({name:"pageText",style:{textFill:h.getTextColor(),font:h.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),c("pageNext",1)},layoutInner:function(e,t,n,i,a,o){var r=this.getSelectorGroup(),s=e.getOrient().index,l=wm[s],u=Sm[s],h=wm[1-s],c=Sm[1-s];a&&Ga("horizontal",r,e.get("selectorItemGap",!0));var d=e.get("selectorButtonGap",!0),f=r.getBoundingRect(),p=[-f.x,-f.y],m=ue(n);a&&(m[l]=n[l]-f[l]-d);var g=this._layoutContentAndController(e,i,m,s,l,h,c);if(a){if("end"===o)p[s]+=g[l]+d;else{var v=f[l]+d;p[s]-=v,g[u]-=v}g[l]+=f[l]+d,p[1-s]+=g[c]+g[h]/2-f[h]/2,g[h]=Math.max(g[h],f[h]),g[c]=Math.min(g[c],f[c]+p[1-s]),r.attr("position",p)}return g},_layoutContentAndController:function(e,t,n,i,a,o,r){var s=this.getContentGroup(),l=this._containerGroup,u=this._controllerGroup;Ga(e.get("orient"),s,e.get("itemGap"),i?n.width:null,i?null:n.height),Ga("horizontal",u,e.get("pageButtonItemGap",!0));var h=s.getBoundingRect(),c=u.getBoundingRect(),d=this._showController=h[a]>n[a],f=[-h.x,-h.y];t||(f[i]=s.position[i]);var p=[0,0],m=[-c.x,-c.y],g=De(e.get("pageButtonGap",!0),e.get("itemGap",!0));d&&("end"===e.get("pageButtonPosition",!0)?m[i]+=n[a]-c[a]:p[i]+=c[a]+g),m[1-i]+=h[o]/2-c[o]/2,s.attr("position",f),l.attr("position",p),u.attr("position",m);var v={x:0,y:0};if(v[a]=d?n[a]:h[a],v[o]=Math.max(h[o],c[o]),v[r]=Math.min(0,c[r]+m[1-i]),l.__rectSize=n[a],d){var x={x:0,y:0};x[a]=Math.max(n[a]-c[a]-g,0),x[o]=v[o],l.setClipPath(new Fe({shape:x})),l.__rectSize=x[a]}else u.eachChild(function(b){b.attr({invisible:!0,silent:!0})});var y=this._getPageInfo(e);return null!=y.pageIndex&&Ae(s,{position:y.contentPosition},d&&e),this._updatePageInfoView(e,y),v},_pageGo:function(e,t,n){var i=this._getPageInfo(t)[e];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;I(["pagePrev","pageNext"],function(l){var u=null!=t[l+"DataIndex"],h=n.childOfName(l);h&&(h.setStyle("fill",e.get(u?"pageIconColor":"pageIconInactiveColor",!0)),h.cursor=u?"pointer":"default")});var i=n.childOfName("pageText"),a=e.get("pageFormatter"),o=t.pageIndex,r=null!=o?o+1:0,s=t.pageCount;i&&a&&i.setStyle("text",q(a)?a.replace("{current}",r).replace("{total}",s):a({current:r,total:s}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,a=e.getOrient().index,o=wm[a],r=Sm[a],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],h=l.length,c=h?1:0,d={contentPosition:n.position.slice(),pageCount:c,pageIndex:c-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return d;var f=x(u);d.contentPosition[a]=-f.s;for(var p=s+1,m=f,g=f,v=null;p<=h;++p)(!(v=x(l[p]))&&g.e>m.s+i||v&&!y(v,m.s))&&(m=g.i>m.i?g:v)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=m.i),++d.pageCount),g=v;for(p=s-1,m=f,g=f,v=null;-1<=p;--p)(v=x(l[p]))&&y(g,v.s)||!(m.i<g.i)||(g=m,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=m.i),++d.pageCount,++d.pageIndex),m=v;return d;function x(b){if(b){var _=b.getBoundingRect(),w=_[r]+b.position[a];return{s:w,e:w+_[o],i:b.__legendDataIndex}}}function y(b,_){return b.e>=_&&b.s<=_+i}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(i,a){var o=i.__legendDataIndex;null==n&&null!=o&&(n=a),o===e&&(t=a)}),null!=t?t:n):0;var t,n}});Be("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(n)})}),Kg.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var qh=Fe,po=nt,Im=Ba,Ri=Z,Tm=I,Js="horizontal",vM="vertical",gL=["line","bar","candlestick","scatter"],Am=Qg.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,n,i){Am.superApply(this,"render",arguments),is(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){Am.superApply(this,"remove",arguments),Wy(this,"_dispatchZoomAction")},dispose:function(){Am.superApply(this,"dispose",arguments),Wy(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new re;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),i={width:t.getWidth(),height:t.getHeight()},a=this._orient===Js?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},o=Bo(e.option);I(["right","top","width","height"],function(s){"ph"===o[s]&&(o[s]=a[s])});var r=vt(o,i,e.padding);this._location={x:r.x,y:r.y},this._size=[r.width,r.height],this._orient===vM&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),a=i&&i.get("inverse"),o=this._displayables.barGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==Js||a?n===Js&&a?{scale:r?[-1,1]:[-1,-1]}:n!==vM||a?{scale:r?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:r?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:r?[1,1]:[1,-1]});var s=e.getBoundingRect([o]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,n=this._displayables.barGroup;n.add(new qh({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),n.add(new qh({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:Z(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,i=n.getRawData(),a=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=a){var o=i.getDataExtent(a),r=.3*(o[1]-o[0]);o=[o[0]-r,o[1]+r];var s,l=[0,t[1]],h=[[t[0],0],[0,0]],c=[],d=t[0]/(i.count()-1),f=0,p=Math.round(i.count()/t[0]);i.each([a],function(g,v){if(0<p&&v%p)f+=d;else{var x=null==g||isNaN(g)||""===g,y=x?0:po(g,o,l,!0);x&&!s&&v?(h.push([h[h.length-1][0],0]),c.push([c[c.length-1][0],0])):!x&&s&&(h.push([f,0]),c.push([f,0])),h.push([f,y]),c.push([f,y]),f+=d,s=x}});var m=this.dataZoomModel;this._displayables.barGroup.add(new tn({shape:{points:h},style:ie({fill:m.get("dataBackgroundColor")},m.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Mn({shape:{points:c},style:m.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,i=this.ecModel;return e.eachTargetAxis(function(a,o){I(e.getAxisProxy(a.name,o).getTargetSeriesModels(),function(r){if(!(n||!0!==t&&E(gL,r.get("type"))<0)){var s,l=i.getComponent(a.axis,o).axis,u={x:"y",y:"x",radius:"angle",angle:"radius"}[a.name],h=r.coordinateSystem;null!=u&&h.getOtherAxis&&(s=h.getOtherAxis(l).inverse),u=r.getData().mapDimension(u),n={thisAxis:l,series:r,thisDim:a.name,otherDim:u,otherAxisInverse:s}}},this)},this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],i=this._displayables.barGroup,a=this._size,o=this.dataZoomModel;i.add(e.filler=new qh({draggable:!0,cursor:yM(this._orient),drift:Ri(this._onDragMove,this,"all"),ondragstart:Ri(this._showDataInfo,this,!0),ondragend:Ri(this._onDragEnd,this),onmouseover:Ri(this._showDataInfo,this,!0),onmouseout:Ri(this._showDataInfo,this,!1),style:{fill:o.get("fillerColor"),textPosition:"inside"}})),i.add(new qh({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{stroke:o.get("dataBackgroundColor")||o.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Tm([0,1],function(r){var s=Ro(o.get("handleIcon"),{cursor:yM(this._orient),draggable:!0,drift:Ri(this._onDragMove,this,r),ondragend:Ri(this._onDragEnd,this),onmouseover:Ri(this._showDataInfo,this,!0),onmouseout:Ri(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),l=s.getBoundingRect();this._handleHeight=Q(o.get("handleSize"),this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(o.getModel("handleStyle").getItemStyle());var u=o.get("handleColor");null!=u&&(s.style.fill=u),i.add(t[r]=s);var h=o.textStyleModel;this.group.add(n[r]=new Pe({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:h.getTextColor(),textFont:h.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[po(e[0],[0,100],t,!0),po(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,i=this._handleEnds,a=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];no(t,i,a,n.get("zoomLock")?"all":e,null!=o.minSpan?po(o.minSpan,r,a,!0):null,null!=o.maxSpan?po(o.maxSpan,r,a,!0):null);var s=this._range,l=this._range=Im([po(i[0],a,r,!0),po(i[1],a,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,i=Im(n.slice()),a=this._size;Tm([0,1],function(o){var s=this._handleHeight;t.handles[o].attr({scale:[s/2,s/2],position:[n[o],a[1]/2-s/2]})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:a[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,i=n.handleLabels,a=this._orient,o=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=e?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();o=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var h=Im(this._handleEnds.slice());function c(d){var f=za(n.handles[d].parent,this.group),p=Gd(0===d?"right":"left",f),m=this._handleWidth/2+5,g=ni([h[d]+(0===d?-m:m),this._size[1]/2],f);i[d].setStyle({x:g[0],y:g[1],textVerticalAlign:a===Js?"middle":p,textAlign:a===Js?p:"center",text:o[d]})}c.call(this,0),c.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,i=n.get("labelFormatter"),a=n.get("labelPrecision");null!=a&&"auto"!==a||(a=t.getPixelPrecision());var o=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(a,20));return ee(i)?i(e,o):q(i)?i.replace("{value}",o):o},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,i){this._dragging=!0,Ia(i.event);var a=ni([t,n],this._displayables.barGroup.getLocalTransform(),!0),o=this._updateInterval(e,a[0]),r=this.dataZoomModel.get("realtime");this._updateView(!r),o&&r&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var i=this._handleEnds,o=this._updateInterval("all",n[0]-(i[0]+i[1])/2);this._updateView(),o&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(Tm(this.getTargetCoordInfo(),function(i){if(!e&&i.length){var a=i[0].model.coordinateSystem;e=a.getRect&&a.getRect()}}),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function yM(e){return"vertical"===e?"ns-resize":"ew-resize"}Kg.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var xM="\0_ec_dataZoom_roams";function mL(e,t){var n=bM(e),i=t.dataZoomId,a=t.coordId;I(n,function(s,l){var u=s.dataZoomInfos;u[i]&&E(t.allCoordIds,a)<0&&(delete u[i],s.count--)}),wM(n);var l,u,o=n[a];o||((o=n[a]={coordId:a,dataZoomInfos:{},count:0}).controller=(l=o,u=new nr(e.getZr()),I(["pan","zoom","scrollMove"],function(h){u.on(h,function(c){var d=[];I(l.dataZoomInfos,function(f){if(c.isAvailableBehavior(f.dataZoomModel.option)){var p=(f.getRange||{})[h],m=p&&p(l.controller,c);!f.dataZoomModel.get("disabled",!0)&&m&&d.push({dataZoomId:f.dataZoomId,start:m[0],end:m[1]})}}),d.length&&l.dispatchAction(d)})}),u),o.dispatchAction=V(vL,e)),o.dataZoomInfos[i]||o.count++,o.dataZoomInfos[i]=t;var r=function(s){var l,u={type_true:2,type_move:1,type_false:0,type_undefined:-1},h=!0;return I(s,function(c){var d=c.dataZoomModel,f=!d.get("disabled",!0)&&(!d.get("zoomLock",!0)||"move");u["type_"+l]<u["type_"+f]&&(l=f),h&=d.get("preventDefaultMouseMove",!0)}),{controlType:l,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!h}}}(o.dataZoomInfos);o.controller.enable(r.controlType,r.opt),o.controller.setPointerChecker(t.containsPoint),is(o,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function _M(e){return e.type+"\0_"+e.id}function bM(e){var t=e.getZr();return t[xM]||(t[xM]={})}function wM(e){I(e,function(t,n){t.count||(t.controller.dispose(),delete e[n])})}function vL(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var yL=Z,SM=Qg.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,n,i){SM.superApply(this,"render",arguments),this._range=e.getPercentRange(),I(this.getTargetCoordInfo(),function(a,o){var r=O(a,function(s){return _M(s.model)});I(a,function(s){var l=s.model,u={};I(["pan","zoom","scrollMove"],function(h){u[h]=yL(xL[h],this,s,o)},this),mL(n,{coordId:_M(l),allCoordIds:r,containsPoint:function(h,c,d){return l.coordinateSystem.containPoint([c,d])},dataZoomId:e.id,dataZoomModel:e,getRange:u})},this)},this)},dispose:function(){(function(e,t){var n=bM(e);I(n,function(i){i.controller.dispose();var a=i.dataZoomInfos;a[t]&&(delete a[t],i.count--)}),wM(n)})(this.api,this.dataZoomModel.id),SM.superApply(this,"dispose",arguments),this._range=null}}),xL={zoom:function(e,t,n,i){var a=this._range,o=a.slice(),r=e.axisModels[0];if(r){var s=Cm[t](null,[i.originX,i.originY],r,n,e),l=(0<s.signal?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/i.scale,0);o[0]=(o[0]-l)*u+l,o[1]=(o[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return no(0,o,[0,100],0,h.minSpan,h.maxSpan),this._range=o,a[0]!==o[0]||a[1]!==o[1]?o:void 0}},pan:MM(function(e,t,n,i,a,o){var r=Cm[i]([o.oldX,o.oldY],[o.newX,o.newY],t,a,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength}),scrollMove:MM(function(e,t,n,i,a,o){return Cm[i]([0,0],[o.scrollDelta,o.scrollDelta],t,a,n).signal*(e[1]-e[0])*o.scrollDelta})};function MM(e){return function(t,n,i,a){var o=this._range,r=o.slice(),s=t.axisModels[0];if(s)return no(e(r,s,t,n,i,a),r,[0,100],"all"),this._range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}}function IM(e){var t=e&&e.visualMap;z(t)||(t=t?[t]:[]),TM(t,function(n){if(n){xr(n,"splitList")&&!xr(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var i=n.pieces;i&&z(i)&&TM(i,function(a){X(a)&&(xr(a,"start")&&!xr(a,"min")&&(a.min=a.start),xr(a,"end")&&!xr(a,"max")&&(a.max=a.end))})}})}var Cm={grid:function(e,t,n,i,a){var o=n.axis,r={},s=a.model.coordinateSystem.getRect();return e=e||[0,0],"x"===o.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=o.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=o.inverse?-1:1),r},polar:function(e,t,n,i,a){var o=n.axis,r={},s=a.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=o.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=o.inverse?-1:1),r},singleAxis:function(e,t,n,i,a){var o=n.axis,r=a.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===o.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=o.inverse?-1:1),s}},TM=I;function xr(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}Ge.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var AM=ai.VISUAL.COMPONENT;function _L(e,t,n,i){for(var a=t.targetVisuals[i],o=$e.prepareVisualTypes(a),r={color:e.getData().getVisual("color")},s=0,l=o.length;s<l;s++){var u=o[s],h=a["opacity"===u?"__alphaForOpacity":u];h&&h.applyVisual(n,c,d)}return r.color;function c(f){return r[f]}function d(f,p){r[f]=p}}et(AM,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(i){var a=e.pipelineContext;!i.isTargetSeries(e)||a&&a.large||n.push(function(o,r,s,l){var u={};return I(o,function(h){var c=$e.prepareVisualTypes(r[h]);u[h]=c}),{progress:function(h,c){function d(S){return c.getItemVisual(p,S)}function f(S,M){c.setItemVisual(p,S,M)}var p;for(null!=l&&(l=c.getDimension(l));null!=(p=h.next());){var m=c.getRawDataItem(p);if(!m||!1!==m.visualMap)for(var g=null!=l?c.get(l,p,!0):p,v=s(g),x=r[v],y=u[v],b=0,_=y.length;b<_;b++){var w=y[b];x[w]&&x[w].applyVisual(g,d,f)}}}}}(i.stateList,i.targetVisuals,Z(i.getValueState,i),i.getDataDimension(e.getData())))}),n}}),et(AM,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),i=[];t.eachComponent("visualMap",function(a){if(a.isTargetSeries(e)){var o=a.getVisualMeta(Z(_L,null,e,a))||{stops:[],outerColors:[]},r=a.getDataDimension(n),s=n.getDimensionInfo(r);null!=s&&(o.dimension=s.index,i.push(o))}}),e.getData().setVisual("visualMeta",i)}});var Dm=function(e,t,n){var i=ue((bL[e]||{})[t]);return n&&z(i)?i[i.length-1]:i},bL={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},CM=$e.mapVisual,wL=$e.eachVisual,SL=z,Lm=I,ML=Ba,IL=nt,$h=pn({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;he.canvasSupported||(n.realtime=!1),t||WS(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=Z(e,this),this.controllerVisuals=am(this.option.controller,t,e),this.targetVisuals=am(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(n,i){t.push(i)}):t=Et(e),t},eachTargetSeries:function(e,t){I(this.getTargetSeriesIndices(),function(n){e.call(t,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},formatValueText:function(e,t,n){var i,a,o=this.option,r=o.precision,s=this.dataBound,l=o.formatter;return n=n||["<",">"],z(e)&&(e=e.slice(),i=!0),a=t?e:i?[u(e[0]),u(e[1])]:u(e),q(l)?l.replace("{value}",i?a[0]:a).replace("{value2}",i?a[1]:a):ee(l)?i?l(e[0],e[1]):l(e):i?e[0]===s[0]?n[0]+" "+a[1]:e[1]===s[1]?n[1]+" "+a[0]:a[0]+" - "+a[1]:a;function u(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(r,20))}},resetExtent:function(){var e=this.option,t=ML([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var i=e.dimensions,a=i.length-1;0<=a;a--){var o=i[a];if(!e.getDimensionInfo(o).isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},i=t.target||(t.target={}),a=t.controller||(t.controller={});pe(i,n),pe(a,n);var o=this.isCategory();function r(s){SL(t.color)&&!s.inRange&&(s.inRange={color:t.color.slice().reverse()}),s.inRange=s.inRange||{color:e.get("gradientColor")},Lm(this.stateList,function(l){var u=s[l];if(q(u)){var h=Dm(u,"active",o);h?(s[l]={},s[l][u]=h):delete s[l]}},this)}r.call(this,i),r.call(this,a),function(s,l,u){var h=s[l],c=s[u];h&&!c&&(c=s[u]={},Lm(h,function(d,f){if($e.isValidType(f)){var p=Dm(f,"inactive",o);null!=p&&(c[f]=p,"color"!==f||c.hasOwnProperty("opacity")||c.hasOwnProperty("colorAlpha")||(c.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(s){var l=(s.inRange||{}).symbol||(s.outOfRange||{}).symbol,u=(s.inRange||{}).symbolSize||(s.outOfRange||{}).symbolSize,h=this.get("inactiveColor");Lm(this.stateList,function(c){var d=this.itemSize,f=s[c];null==(f=f||(s[c]={color:o?h:[h]})).symbol&&(f.symbol=l&&ue(l)||(o?"roundRect":["roundRect"])),null==f.symbolSize&&(f.symbolSize=u&&ue(u)||(o?d[0]:[d[0],d[0]])),f.symbol=CM(f.symbol,function(g){return"none"===g||"square"===g?"roundRect":g});var p=f.symbolSize;if(null!=p){var m=-1/0;wL(p,function(g){m<g&&(m=g)}),f.symbolSize=CM(p,function(g){return IL(g,[0,m],[0,d[0]],!0)})}},this)}.call(this,a)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:We,getValueState:We,getVisualMeta:We}),DM=[20,140],LM=$h.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){LM.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){LM.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=DM[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=DM[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):z(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){$h.prototype.completeVisualOption.apply(this,arguments),I(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=Ba((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var i=[],a=n.getData();a.each(this.getDataDimension(a),function(o,r){e[0]<=o&&o<=e[1]&&i.push(r)},this),t.push({seriesId:n.id,dataIndex:i})},this),t},getVisualMeta:function(e){var t=PM(0,0,this.getExtent()),n=PM(0,0,this.option.range.slice()),i=[];function a(c,d){i.push({value:c,color:e(c,d)})}for(var o=0,r=0,s=n.length,l=t.length;r<l&&(!n.length||t[r]<=n[0]);r++)t[r]<n[o]&&a(t[r],"outOfRange");for(var u=1;o<s;o++,u=0)u&&i.length&&a(n[o],"outOfRange"),a(n[o],"inRange");for(u=1;r<l;r++)(!n.length||n[n.length-1]<t[r])&&(u&&(i.length&&a(i[i.length-1].value,"outOfRange"),u=0),a(t[r],"outOfRange"));var h=i.length;return{stops:i,outerColors:[h?i[0].color:"transparent",h?i[h-1].color:"transparent"]}}});function PM(e,t,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,a=n[0],o=[],r=0;r<=200&&a<n[1];r++)o.push(a),a+=i;return o.push(n[1]),o}var kM=At({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,n,i){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=Va(t.get("padding")||0),i=e.getBoundingRect();e.add(new Fe({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var i=(n=n||{}).forceState,a=this.visualMapModel,o={};if("symbol"===t&&(o.symbol=a.get("itemSymbol")),"color"===t){var r=a.get("contentColor");o.color=r}function s(h){return o[h]}function l(h,c){o[h]=c}var u=a.controllerVisuals[i||a.getValueState(e)];return I($e.prepareVisualTypes(u),function(h){var c=u[h];n.convertOpacityToAlpha&&"opacity"===h&&(h="colorAlpha",c=u.__alphaForOpacity),$e.dependsOn(h,t)&&c&&c.applyVisual(e,s,l)}),o[t]},positionGroup:function(e){var n=this.api;du(e,this.visualMapModel.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:We});function NM(e,t,n){var i=e.option,a=i.align;if(null!=a&&"auto"!==a)return a;for(var o={width:t.getWidth(),height:t.getHeight()},r="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[r],u=[0,null,10],h={},c=0;c<3;c++)h[s[1-r][c]]=u[c],h[l[c]]=2===c?n[0]:i[l[c]];var d=[["x","width",3],["y","height",0]][r],f=vt(h,o,i.padding);return l[(f.margin[d[2]]||0)+f[d[0]]+.5*f[d[1]]<.5*o[d[1]]?0:1]}function Kh(e,t){return I(e||[],function(n){null!=n.dataIndex&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var zi=nt,TL=I,Qh=Math.min,el=Math.max,AL=kM.extend({type:"visualMap.continuous",init:function(){AL.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var i=t[1-n];i=null!=i?i+"":"";var a=this.visualMapModel,o=a.get("textGap"),r=a.itemSize,s=this._shapes.barGroup,l=this._applyTransform([r[0]/2,0===n?-o:r[1]+o],s),u=this._applyTransform(0===n?"bottom":"top",s),h=this._orient,c=this.visualMapModel.textStyleModel;this.group.add(new Pe({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===h?"middle":u,textAlign:"horizontal"===h?u:"center",text:i,textFont:c.getFont(),textFill:c.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,i=t.itemSize,a=this._orient,o=this._useHandle,r=NM(t,this.api,i),s=n.barGroup=this._createBarGroup(r);s.add(n.outOfRange=Jh()),s.add(n.inRange=Jh(null,o?OM(this._orient):null,Z(this._dragHandle,this,"all",!1),Z(this._dragHandle,this,"all",!0)));var l=t.textStyleModel.getTextRect("\u56fd"),u=el(l.width,l.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,u,a,r),this._createHandle(s,1,i,u,a,r)),this._createIndicator(s,i,u,a),e.add(s)},_createHandle:function(e,t,n,i,a){var f,o=Z(this._dragHandle,this,t,!1),r=Z(this._dragHandle,this,t,!0),s=Jh((f=i,0===t?[[0,0],[f,0],[f,-f]]:[[0,0],[f,0],[f,f]]),OM(this._orient),o,r);s.position[0]=n[0],e.add(s);var l=this.visualMapModel.textStyleModel,u=new Pe({draggable:!0,drift:o,onmousemove:function(d){Ia(d.event)},ondragend:r,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var h=["horizontal"===a?i/2:1.5*i,"horizontal"===a?0===t?-1.5*i:1.5*i:0===t?-i/2:i/2],c=this._shapes;c.handleThumbs[t]=s,c.handleLabelPoints[t]=h,c.handleLabels[t]=u},_createIndicator:function(e,t,n,i){var a=Jh([[0,0]],"move");a.position[0]=t[0],a.attr({invisible:!0,silent:!0}),e.add(a);var o=this.visualMapModel.textStyleModel,r=new Pe({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:o.getFont(),textFill:o.getTextColor()}});this.group.add(r);var s=["horizontal"===i?n/2:9,0],l=this._shapes;l.indicator=a,l.indicatorLabel=r,l.indicatorLabelPoint=s},_dragHandle:function(e,t,n,i){if(this._useHandle){if(this._dragging=!t,!t){var a=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(e,a[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():EM(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[zi(t[0],n,i,!0),zi(t[1],n,i,!0)]},_updateInterval:function(e,t){var n=this.visualMapModel,i=this._handleEnds,a=[0,n.itemSize[1]];no(t=t||0,i,a,e,0);var o=n.getExtent();this._dataInterval=[zi(i[0],a,o,!0),zi(i[1],a,o,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),i=this._shapes,a=[0,t.itemSize[1]],o=e?a:this._handleEnds,r=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,a,"outOfRange");i.inRange.setStyle({fill:r.barColor,opacity:r.opacity}).setShape("points",r.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(o,r)},_createBarVisual:function(e,t,n,i){var a={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(e,a),r=[this.getControllerVisual(e[0],"symbolSize",a),this.getControllerVisual(e[1],"symbolSize",a)],s=this._createBarPoints(n,r);return{barColor:new Oa(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},_makeColorGradient:function(e,t){var n=[],i=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var a=1;a<100;a++){var o=e[0]+i*a;if(o>e[1])break;n.push({color:this.getControllerVisual(o,"color",t),offset:a/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new re("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,a=n.handleThumbs,o=n.handleLabels;TL([0,1],function(r){var s=a[r];s.setStyle("fill",t.handlesColor[r]),s.position[1]=e[r];var l=ni(n.handleLabelPoints[r],za(s,this.group));o[r].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[r]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===r?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(e,t,n,i){var v,x,y,a=this.visualMapModel,o=a.getExtent(),r=a.itemSize,l=zi(e,o,[0,r[1]],!0),u=this._shapes,h=u.indicator;if(h){h.position[1]=l,h.attr("invisible",!1),h.setShape("points",(v=i,x=l,y=r[1],n?[[0,-Qh(v,el(x,0))],[6,0],[0,Qh(v,el(y-x,0))]]:[[0,0],[5,-5],[5,5]]));var c=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});h.setStyle("fill",c);var d=ni(u.indicatorLabelPoint,za(h,this.group)),f=u.indicatorLabel;f.attr("invisible",!1);var p=this._applyTransform("left",u.barGroup),m=this._orient;f.setStyle({text:(n||"")+a.formatValueText(t),textVerticalAlign:"horizontal"===m?p:"middle",textAlign:"horizontal"===m?"center":p,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,i=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);i[1]=Qh(el(0,i[1]),n[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var p,m,g,v,n=this.visualMapModel;if(n.option.hoverLink){var a=[0,n.itemSize[1]],o=n.getExtent();e=Qh(el(a[0],e),a[1]);var r=(p=o,m=a,g=6,(v=n.get("hoverLinkDataSize"))&&(g=zi(v,p,m,!0)/2),g),s=[e-r,e+r],l=zi(e,a,o,!0),u=[zi(s[0],a,o,!0),zi(s[1],a,o,!0)];s[0]<a[0]&&(u[0]=-1/0),a[1]<s[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",r):u[1]===1/0?this._showIndicator(l,u[0],"> ",r):this._showIndicator(l,l,"\u2248 ",r));var h=this._hoverLinkDataIndices,c=[];(t||EM(n))&&(c=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var d=function(f,p){var m={},g={};return v(f||[],m),v(p||[],g,m),[x(m),x(g)];function v(y,b,_){for(var w=0,S=y.length;w<S;w++)for(var M=y[w].seriesId,T=Et(y[w].dataIndex),A=_&&_[M],C=0,D=T.length;C<D;C++){var L=T[C];A&&A[L]?A[L]=null:(b[M]||(b[M]={}))[L]=1}}function x(y,b){var _=[];for(var w in y)if(y.hasOwnProperty(w)&&null!=y[w])if(b)_.push(+w);else{var S=x(y[w],!0);S.length&&_.push({seriesId:w,dataIndex:S})}return _}}(h,c);this._dispatchHighDown("downplay",Kh(d[0],n)),this._dispatchHighDown("highlight",Kh(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var i=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(i)){var a=i.getData(t.dataType),o=a.get(n.getDataDimension(a),t.dataIndex,!0);isNaN(o)||this._showIndicator(o,o)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Kh(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,i){var a=za(t,i?null:this.group);return Ti[z(e)?"applyTransform":"transformDirection"](e,a,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function Jh(e,t,n,i){return new tn({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(a){Ia(a.event)},ondragend:i})}function EM(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function OM(e){return"vertical"===e?"ns-resize":"ew-resize"}Be({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})}),zt(IM);var CL=$h.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){CL.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();DL[this._mode].call(this),this._resetSelected(e,t);var i=this.option.categories;this.resetVisual(function(a,o){"categories"===n?(a.mappingMethod="category",a.categories=ue(i)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=O(this._pieceList,function(r){return r=ue(r),"inRange"!==o&&(r.visual=null),r}))})},completeVisualOption:function(){var e=this.option,t={},n=$e.listVisualTypes(),i=this.isCategory();function a(o,r,s){return o&&o[r]&&(X(o[r])?o[r].hasOwnProperty(s):o[r]===s)}I(e.pieces,function(o){I(n,function(r){o.hasOwnProperty(r)&&(t[r]=1)})}),I(t,function(o,r){var s=0;I(this.stateList,function(l){s|=a(e,l,r)||a(e.target,l,r)},this),s||I(this.stateList,function(l){(e[l]||(e[l]={}))[r]=Dm(r,"inRange"===l?"active":"inactive",i)})},this),$h.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,i=this._pieceList,a=(t?n:e).selected||{};if(n.selected=a,I(i,function(r,s){var l=this.getSelectedMapKey(r);a.hasOwnProperty(l)||(a[l]=!0)},this),"single"===n.selectedMode){var o=!1;I(i,function(r,s){var l=this.getSelectedMapKey(r);a[l]&&(o?a[l]=!1:o=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=ue(e)},getValueState:function(e){var t=$e.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var i=[],a=n.getData();a.each(this.getDataDimension(a),function(o,r){$e.findPieceIndex(o,this._pieceList)===e&&i.push(r)},this),t.push({seriesId:n.id,dataIndex:i})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],i=this,a=this._pieceList.slice();if(a.length){var o=a[0].interval[0];o!==-1/0&&a.unshift({interval:[-1/0,o]}),(o=a[a.length-1].interval[1])!==1/0&&a.push({interval:[o,1/0]})}else a.push({interval:[-1/0,1/0]});var r=-1/0;return I(a,function(l){var u=l.interval;u&&(u[0]>r&&s([r,u[0]],"outOfRange"),s(u.slice()),r=u[1])},this),{stops:t,outerColors:n}}function s(l,u){var h=i.getRepresentValue({interval:l});u=u||i.getValueState(h);var c=e(h,u);l[0]===-1/0?n[0]=c:l[1]===1/0?n[1]=c:t.push({value:l[0],color:c},{value:l[1],color:c})}}}),DL={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),i=this.getExtent(),a=e.splitNumber;a=Math.max(parseInt(a,10),1),e.splitNumber=a;for(var o=(i[1]-i[0])/a;+o.toFixed(n)!==o&&n<5;)n++;e.precision=n,o=+o.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var r=0,s=i[0];r<a;s+=o,r++)t.push({interval:[s,r===a-1?i[1]:s+o],close:[1,1]});e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),qd(t),I(t,function(u,h){u.index=h,u.text=this.formatValueText(u.interval)},this)},categories:function(){var e=this.option;I(e.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),RM(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;I(e.pieces,function(n,i){X(n)||(n={value:n});var a={text:"",index:i};if(null!=n.label&&(a.text=n.label),n.hasOwnProperty("value")){var o=a.value=n.value;a.interval=[o,o],a.close=[1,1]}else{for(var r=a.interval=[],s=a.close=[0,0],l=[1,0,1],u=[-1/0,1/0],h=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],f=0;f<3&&null==r[c];f++)r[c]=n[d[f]],s[c]=l[f],h[c]=2===f;null==r[c]&&(r[c]=u[c])}h[0]&&r[1]===1/0&&(s[0]=0),h[1]&&r[0]===-1/0&&(s[1]=0),r[0]===r[1]&&s[0]&&s[1]&&(a.value=r[0])}a.visual=$e.retrieveVisuals(n),t.push(a)},this),RM(e,t),qd(t),I(t,function(n){var i=n.close;n.text=n.text||this.formatValueText(null!=n.value?n.value:n.interval,!1,[["<","\u2264"][i[1]],[">","\u2265"][i[0]]])},this)}};function RM(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}kM.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),i=t.textStyleModel,a=i.getFont(),o=i.getTextColor(),r=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),u=l.endsText,h=Ne(t.get("showLabel",!0),!u);u&&this._renderEndsText(e,u[0],s,h,r),I(l.viewPieceList,function(c){var d=c.piece,f=new re;f.onclick=Z(this._onItemClick,this,d),this._enableHoverLink(f,c.indexInModelPieceList);var p=t.getRepresentValue(d);if(this._createItemSymbol(f,p,[0,0,s[0],s[1]]),h){var m=this.visualMapModel.getValueState(p);f.add(new Pe({style:{x:"right"===r?-n:s[0]+n,y:s[1]/2,text:d.text,textVerticalAlign:"middle",textAlign:r,textFont:a,textFill:o,opacity:"outOfRange"===m?.5:1}}))}e.add(f)},this),u&&this._renderEndsText(e,u[1],s,h,r),Ga(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(i){var a=this.visualMapModel;a.option.hoverLink&&this.api.dispatchAction({type:i,batch:Kh(a.findTargetDataIndices(t),a)})}e.on("mouseover",Z(n,this,"highlight")).on("mouseout",Z(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return NM(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,i,a){if(t){var o=new re,r=this.visualMapModel.textStyleModel;o.add(new Pe({style:{x:i?"right"===a?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?a:"center",text:t,textFont:r.getFont(),textFill:r.getTextColor()}})),e.add(o)}},_getViewData:function(){var e=this.visualMapModel,t=O(e.getPieceList(),function(o,r){return{piece:o,indexInModelPieceList:r}}),n=e.get("text"),i=e.get("orient"),a=e.get("inverse");return("horizontal"===i?a:!a)?t.reverse():n=n&&n.slice().reverse(),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(gn(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,i=ue(n.selected),a=t.getSelectedMapKey(e);"single"===n.selectedMode?(i[a]=!0,I(i,function(o,r){i[r]=r===a})):i[a]=!i[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),zt(IM);var Pm,zM="urn:schemas-microsoft-com:vml",BM="undefined"==typeof window?null:window,VM=!1,yn=BM&&BM.document;function km(e){return Pm(e)}if(yn&&!he.canvasSupported)try{yn.namespaces.zrvml||yn.namespaces.add("zrvml",zM),Pm=function(e){return yn.createElement("<zrvml:"+e+' class="zrvml">')}}catch(e){Pm=function(t){return yn.createElement("<"+t+' xmlns="'+zM+'" class="zrvml">')}}var FM,go=en.CMD,Xe=Math.round,tl=Math.sqrt,LL=Math.abs,GM=Math.cos,WM=Math.sin,Nm=Math.max;if(!he.canvasSupported){var bt=",",Em="progid:DXImageTransform.Microsoft",Dt=21600,sn=Dt/2,Om=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=Dt+","+Dt,e.coordorigin="0,0"},HM=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},di=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},nl=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},Rm=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},ZM=id,UM=function(e,t,n){var i=un(t);n=+n,isNaN(n)&&(n=1),i&&(e.color=HM(i[0],i[1],i[2]),e.opacity=n*i[3])},ec=function(e,t,n,i){var r,s,a="fill"===t,o=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(a||!a&&n.lineWidth)?(e[a?"filled":"stroked"]="true",n[t]instanceof ei&&nl(e,o),o=o||km(t),a?function(r,s,l){var h,c=s.fill;if(null!=c)if(c instanceof ei){var d,f=0,p=[0,0],m=0,g=1,v=l.getBoundingRect(),x=v.width,y=v.height;if("linear"===c.type){d="gradient";var b=l.transform,_=[c.x*x,c.y*y],w=[c.x2*x,c.y2*y];b&&(Je(_,_,b),Je(w,w,b)),(f=180*Math.atan2(w[0]-_[0],w[1]-_[1])/Math.PI)<0&&(f+=360),f<1e-6&&(f=0)}else{d="gradientradial";var T=l.scale,A=x,C=y;p=[((_=[c.x*x,c.y*y])[0]-v.x)/A,(_[1]-v.y)/C],(b=l.transform)&&Je(_,_,b);var D=Nm(A/=T[0]*Dt,C/=T[1]*Dt);g=2*c.r/D-(m=0/D)}var L=c.colorStops.slice();L.sort(function(ce,U){return ce.offset-U.offset});for(var P=L.length,N=[],R=[],k=0;k<P;k++){var B=L[k],G=(h=un(B.color),[HM(h[0],h[1],h[2]),h[3]]);R.push(B.offset*g+m+" "+G[0]),0!==k&&k!==P-1||N.push(G)}if(2<=P){var W=N[0][0],F=N[1][0],Y=N[0][1]*s.opacity,K=N[1][1]*s.opacity;r.type=d,r.method="none",r.focus="100%",r.angle=f,r.color=W,r.color2=F,r.colors=R.join(","),r.opacity=K,r.opacity2=Y}"radial"===d&&(r.focusposition=p.join(","))}else UM(r,c,s.opacity)}(o,n,i):(r=o,(s=n).lineDash&&(r.dashstyle=s.lineDash.join(" ")),null==s.stroke||s.stroke instanceof ei||UM(r,s.stroke,s.opacity)),di(e,o)):(e[a?"filled":"stroked"]="false",nl(e,o))},xn=[[],[],[]];Re.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=km("shape"),Om(n),this._vmlEl=n),ec(n,"fill",t,this),ec(n,"stroke",t,this);var i=this.transform,a=null!=i,o=n.getElementsByTagName("stroke")[0];if(o){var r=t.lineWidth;a&&!t.strokeNoScale&&(r*=tl(LL(i[0]*i[3]-i[1]*i[2]))),o.weight=r+"px"}var l=this.path||(this.path=new en);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),n.path=function(u,h){var c,d,f,p,m,g,v=go.M,x=go.C,y=go.L,b=go.A,_=go.Q,w=[],S=u.data,M=u.len();for(p=0;p<M;){switch(d="",c=0,f=S[p++]){case v:d=" m ",c=1,m=S[p++],g=S[p++],xn[0][0]=m,xn[0][1]=g;break;case y:d=" l ",c=1,m=S[p++],g=S[p++],xn[0][0]=m,xn[0][1]=g;break;case _:case x:d=" c ",c=3;var T,A,C=S[p++],D=S[p++],L=S[p++],P=S[p++];f===_?(L=((T=L)+2*C)/3,P=((A=P)+2*D)/3,C=(m+2*C)/3,D=(g+2*D)/3):(T=S[p++],A=S[p++]),xn[0][0]=C,xn[0][1]=D,xn[1][0]=L,xn[1][1]=P,m=xn[2][0]=T,g=xn[2][1]=A;break;case b:var N=0,R=0,k=1,B=1,G=0;h&&(N=h[4],R=h[5],k=tl(h[0]*h[0]+h[1]*h[1]),B=tl(h[2]*h[2]+h[3]*h[3]),G=Math.atan2(-h[1]/B,h[0]/k));var W=S[p++],F=S[p++],Y=S[p++],K=S[p++],ce=S[p++]+G,U=S[p++]+ce+G;p++;var le=S[p++],de=W+GM(ce)*Y,xe=F+WM(ce)*K,He=(C=W+GM(U)*Y,D=F+WM(U)*K,le?" wa ":" at ");Math.abs(de-C)<1e-4&&(.01<Math.abs(U-ce)?le&&(de+=.0125):Math.abs(xe-F)<1e-4?le&&de<W||!le&&W<de?D-=.0125:D+=.0125:le&&xe<F||!le&&F<xe?C+=.0125:C-=.0125),w.push(He,Xe(((W-Y)*k+N)*Dt-sn),bt,Xe(((F-K)*B+R)*Dt-sn),bt,Xe(((W+Y)*k+N)*Dt-sn),bt,Xe(((F+K)*B+R)*Dt-sn),bt,Xe((de*k+N)*Dt-sn),bt,Xe((xe*B+R)*Dt-sn),bt,Xe((C*k+N)*Dt-sn),bt,Xe((D*B+R)*Dt-sn)),m=C,g=D;break;case go.R:var Ve=xn[0],Ye=xn[1];Ve[0]=S[p++],Ve[1]=S[p++],Ye[0]=Ve[0]+S[p++],Ye[1]=Ve[1]+S[p++],h&&(Je(Ve,Ve,h),Je(Ye,Ye,h)),Ve[0]=Xe(Ve[0]*Dt-sn),Ye[0]=Xe(Ye[0]*Dt-sn),Ve[1]=Xe(Ve[1]*Dt-sn),Ye[1]=Xe(Ye[1]*Dt-sn),w.push(" m ",Ve[0],bt,Ve[1]," l ",Ye[0],bt,Ve[1]," l ",Ye[0],bt,Ye[1]," l ",Ve[0],bt,Ye[1]);break;case go.Z:w.push(" x ")}if(0<c){w.push(d);for(var Yt=0;Yt<c;Yt++){var Zt=xn[Yt];h&&Je(Zt,Zt,h),w.push(Xe(Zt[0]*Dt-sn),bt,Xe(Zt[1]*Dt-sn),Yt<c-1?bt:"")}}}return w.join("")}(l,this.transform),n.style.zIndex=Rm(this.zlevel,this.z,this.z2),di(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},Re.prototype.onRemove=function(e){nl(e,this._vmlEl),this.removeRectText(e)},Re.prototype.onAdd=function(e){di(e,this._vmlEl),this.appendRectText(e)},Lt.prototype.brushVML=function(e){var t,n,K,i=this.style,a=i.image;if("object"==typeof(K=a)&&K.tagName&&"IMG"===K.tagName.toUpperCase()){var o=a.src;if(o===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var r=a.runtimeStyle,s=r.width,l=r.height;r.width="auto",r.height="auto",t=a.width,n=a.height,r.width=s,r.height=l,this._imageSrc=o,this._imageWidth=t,this._imageHeight=n}a=o}else a===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(a){var u=i.x||0,h=i.y||0,c=i.width,d=i.height,f=i.sWidth,p=i.sHeight,m=i.sx||0,g=i.sy||0,v=f&&p,x=this._vmlEl;x||(x=yn.createElement("div"),Om(x),this._vmlEl=x);var y,b=x.style,_=!1,w=1,S=1;if(this.transform&&(w=tl((y=this.transform)[0]*y[0]+y[1]*y[1]),S=tl(y[2]*y[2]+y[3]*y[3]),_=y[1]||y[2]),_){var M=[u,h],T=[u+c,h],A=[u,h+d],C=[u+c,h+d];Je(M,M,y),Je(T,T,y),Je(A,A,y),Je(C,C,y);var D=Nm(M[0],T[0],A[0],C[0]),L=Nm(M[1],T[1],A[1],C[1]),P=[];P.push("M11=",y[0]/w,bt,"M12=",y[2]/S,bt,"M21=",y[1]/w,bt,"M22=",y[3]/S,bt,"Dx=",Xe(u*w+y[4]),bt,"Dy=",Xe(h*S+y[5])),b.padding="0 "+Xe(D)+"px "+Xe(L)+"px 0",b.filter=Em+".Matrix("+P.join("")+", SizingMethod=clip)"}else y&&(u=u*w+y[4],h=h*S+y[5]),b.filter="",b.left=Xe(u)+"px",b.top=Xe(h)+"px";var N=this._imageEl,R=this._cropEl;N||(N=yn.createElement("div"),this._imageEl=N);var k=N.style;if(v){if(t&&n)k.width=Xe(w*t*c/f)+"px",k.height=Xe(S*n*d/p)+"px";else{var B=new Image,G=this;B.onload=function(){B.onload=null,n=B.height,k.width=Xe(w*(t=B.width)*c/f)+"px",k.height=Xe(S*n*d/p)+"px",G._imageWidth=t,G._imageHeight=n,G._imageSrc=a},B.src=a}R||((R=yn.createElement("div")).style.overflow="hidden",this._cropEl=R);var W=R.style;W.width=Xe((c+m*c/f)*w),W.height=Xe((d+g*d/p)*S),W.filter=Em+".Matrix(Dx="+-m*c/f*w+",Dy="+-g*d/p*S+")",R.parentNode||x.appendChild(R),N.parentNode!==R&&R.appendChild(N)}else k.width=Xe(w*c)+"px",k.height=Xe(S*d)+"px",x.appendChild(N),R&&R.parentNode&&(x.removeChild(R),this._cropEl=null);var F="",Y=i.opacity;Y<1&&(F+=".Alpha(opacity="+Xe(100*Y)+") "),k.filter=F+=Em+".AlphaImageLoader(src="+a+", SizingMethod=scale)",x.style.zIndex=Rm(this.zlevel,this.z,this.z2),di(e,x),null!=i.text&&this.drawRectText(e,this.getBoundingRect())}},Lt.prototype.onRemove=function(e){nl(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},Lt.prototype.onAdd=function(e){di(e,this._vmlEl),this.appendRectText(e)};var mo,zm="normal",Bm={},Vm=0,PL=document.createElement("div");FM=function(e,t){var n=yn;mo||((mo=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",yn.body.appendChild(mo));try{mo.style.font=t}catch(i){}return mo.innerHTML="",mo.appendChild(n.createTextNode(e)),{width:mo.offsetWidth}},Uc.measureText=FM;for(var Fm=new Le,kL=function(e,t,n,i){var a=this.style;this.__dirty&&Nr(a);var o=a.text;if(null!=o&&(o+=""),o){if(a.rich){var r=qc(o,a);o=[];for(var s=0;s<r.lines.length;s++){for(var l=r.lines[s].tokens,u=[],h=0;h<l.length;h++)u.push(l[h].text);o.push(u.join(""))}o=o.join("\n")}var c,d,f=a.textAlign,p=a.textVerticalAlign,m=function(C){var D=Bm[C];if(!D){100<Vm&&(Vm=0,Bm={});var L,P=PL.style;try{P.font=C,L=P.fontFamily.split(",")[0]}catch(N){}D={style:P.fontStyle||zm,variant:P.fontVariant||zm,weight:P.fontWeight||zm,size:0|parseFloat(P.fontSize||12),family:L||"Microsoft YaHei"},Bm[C]=D,Vm++}return D}(a.font),g=m.style+" "+m.variant+" "+m.weight+" "+m.size+'px "'+m.family+'"';n=n||Yn(o,g,f,p,a.textPadding,a.textLineHeight);var v=this.transform;if(v&&!i&&(Fm.copy(t),Fm.applyTransform(v),t=Fm),i)c=t.x,d=t.y;else{var x=a.textPosition;if(x instanceof Array)c=t.x+ZM(x[0],t.width),d=t.y+ZM(x[1],t.height),f=f||"left";else{var y=this.calculateTextPosition?this.calculateTextPosition({},a,t):jc({},a,t);c=y.x,d=y.y,f=f||y.textAlign,p=p||y.textVerticalAlign}}c=kr(c,n.width,f),d=Ao(d,n.height,p),d+=n.height/2;var b,_,w,S=km,M=this._textVmlEl;M?_=(b=(w=M.firstChild).nextSibling).nextSibling:(M=S("line"),b=S("path"),_=S("textpath"),w=S("skew"),_.style["v-text-align"]="left",Om(M),b.textpathok=!0,_.on=!0,M.from="0 0",M.to="1000 0.05",di(M,w),di(M,b),di(M,_),this._textVmlEl=M);var T=[c,d],A=M.style;v&&i?(Je(T,T,v),w.on=!0,w.matrix=v[0].toFixed(3)+bt+v[2].toFixed(3)+bt+v[1].toFixed(3)+bt+v[3].toFixed(3)+",0,0",w.offset=(Xe(T[0])||0)+","+(Xe(T[1])||0),w.origin="0 0",A.left="0px",A.top="0px"):(w.on=!1,A.left=Xe(c)+"px",A.top=Xe(d)+"px"),_.string=String(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{_.style.font=g}catch(C){}ec(M,"fill",{fill:a.textFill,opacity:a.opacity},this),ec(M,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash||null},this),M.style.zIndex=Rm(this.zlevel,this.z,this.z2),di(e,M)}},NL=function(e){nl(e,this._textVmlEl),this._textVmlEl=null},EL=function(e){di(e,this._textVmlEl)},jM=[Dl,$t,Lt,Re,Pe],Gm=0;Gm<jM.length;Gm++){var Wm=jM[Gm].prototype;Wm.drawRectText=kL,Wm.removeRectText=NL,Wm.appendRectText=EL}Pe.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},Pe.prototype.onRemove=function(e){this.removeRectText(e)},Pe.prototype.onAdd=function(e){this.appendRectText(e)}}function _r(e){return parseInt(e,10)}function tc(e,t){(function(){if(!VM&&yn){VM=!0;var r=yn.styleSheets;r.length<31?yn.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):r[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=e,this.storage=t;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var a=t.delFromStorage,o=t.addToStorage;t.delFromStorage=function(r){a.call(t,r),r&&r.onRemove&&r.onRemove(i)},t.addToStorage=function(r){r.onAdd&&r.onAdd(i),o.call(t,r)},this._firstPaint=!0}function fi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}tc.prototype={constructor:tc,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var i=e[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(t),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(t),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,t),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=null==e?this._getWidth():e,t=null==t?this._getHeight():t,this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||_r(t.width))-_r(t.paddingLeft)-_r(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||_r(t.height))-_r(t.paddingTop)-_r(t.paddingBottom)|0}},I(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){tc.prototype[e]=function(){}}),xd("vml",tc);var vo=en.CMD,OL=Array.prototype.join,br="none",Hm=Math.round,XM=Math.sin,YM=Math.cos,qM=Math.PI,wa=2*Math.PI,RL=180/qM;function jn(e){return Hm(1e4*e)/1e4}function KM(e){return e<1e-4&&-1e-4<e}function Zm(e,t){t&&dt(e,"transform","matrix("+OL.call(t,",")+")")}function dt(e,t,n){n&&("linear"===n.type||"radial"===n.type)||e.setAttribute(t,n)}function QM(e,t,n,i){if(r=t,null!=(l=n?r.textFill:r.fill)&&l!==br){var a=n?t.textFill:t.fill;dt(e,"fill",a="transparent"===a?br:a),dt(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else dt(e,"fill",br);var r,l;if(function(r,s){var l=s?r.textStroke:r.stroke;return null!=l&&l!==br}(t,n)){var o=n?t.textStroke:t.stroke;dt(e,"stroke",o="transparent"===o?br:o),dt(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?i.getLineScale():1)),dt(e,"paint-order",n?"stroke":"fill"),dt(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(dt(e,"stroke-dasharray",t.lineDash.join(",")),dt(e,"stroke-dashoffset",Hm(t.lineDashOffset||0))):dt(e,"stroke-dasharray",""),t.lineCap&&dt(e,"stroke-linecap",t.lineCap),t.lineJoin&&dt(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&dt(e,"stroke-miterlimit",t.miterLimit)}else dt(e,"stroke",br)}var il={brush:function(e){var t=e.style,n=e.__svgEl;n||(n=fi("path"),e.__svgEl=n),e.path||e.createPathProxy();var i=e.path;if(e.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,e.buildPath(i,e.shape),e.__dirtyPath=!1;var a=function(o){for(var r=[],s=o.data,l=o.len(),u=0;u<l;){var h="",c=0;switch(s[u++]){case vo.M:h="M",c=2;break;case vo.L:h="L",c=2;break;case vo.Q:h="Q",c=4;break;case vo.C:h="C",c=6;break;case vo.A:var d=s[u++],f=s[u++],p=s[u++],m=s[u++],g=s[u++],v=s[u++],x=s[u++],y=s[u++],b=Math.abs(v),_=KM(b-wa)||(y?wa<=v:wa<=-v),w=0<v?v%wa:v%wa+wa,S=!1;S=!!_||!KM(b)&&qM<=w==!!y;var M=jn(d+p*YM(g)),T=jn(f+m*XM(g));_&&(v=y?wa-1e-4:1e-4-wa,S=!0,9===u&&r.push("M",M,T));var A=jn(d+p*YM(g+v)),C=jn(f+m*XM(g+v));r.push("A",jn(p),jn(m),Hm(x*RL),+S,+y,A,C);break;case vo.Z:h="Z";break;case vo.R:A=jn(s[u++]),C=jn(s[u++]);var D=jn(s[u++]),L=jn(s[u++]);r.push("M",A,C,"L",A+D,C,"L",A+D,C+L,"L",A,C+L,"L",A,C)}h&&r.push(h);for(var P=0;P<c;P++)r.push(jn(s[u++]))}return r.join(" ")}(i);a.indexOf("NaN")<0&&dt(n,"d",a)}QM(n,t,!1,e),Zm(n,e.transform),null!=t.text?ic(e,e.getBoundingRect()):jm(e)}},JM={brush:function(e){var t=e.style,n=t.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=t.x||0,a=t.y||0,o=t.width,r=t.height,s=e.__svgEl;s||(s=fi("image"),e.__svgEl=s),n!==e.__imageSrc&&(s.setAttributeNS("http://www.w3.org/1999/xlink","href",n),e.__imageSrc=n),dt(s,"width",o),dt(s,"height",r),dt(s,"x",i),dt(s,"y",a),Zm(s,e.transform),null!=t.text?ic(e,e.getBoundingRect()):jm(e)}}},nc={},Um=new Le,al={},Bi=[],zL={left:"start",right:"end",center:"middle",middle:"middle"},ic=function(e,t){var n=e.style,i=e.transform,a=e instanceof Pe||n.transformText;e.__dirty&&Nr(n);var L,P,N,o=n.text;if(null!=o&&(o+=""),ad(o,n)){null==o&&(o=""),!a&&i&&(Um.copy(t),Um.applyTransform(i),t=Um);var r=e.__textSvgEl;r||(r=fi("text"),e.__textSvgEl=r);var s=r.style,l=n.font||Cl,u=r.__computedFont;l!==r.__styleFont&&(s.font=r.__styleFont=l,u=r.__computedFont=s.font);var h=n.textPadding,d=e.__textCotentBlock;d&&!e.__dirtyText||(d=e.__textCotentBlock=Yc(o,u,h,n.textLineHeight,n.truncate));var f=d.outerHeight,p=d.lineHeight;td(al,e,n,t);var m=al.baseX,g=al.baseY,v=al.textAlign||"left",x=al.textVerticalAlign;!function(L,P,N,R,k,B,G){wo(Bi),P&&N&&Ir(Bi,N);var W=R.textRotation;if(k&&W){var F=R.textOrigin;"center"===F?(B=k.width/2+k.x,G=k.height/2+k.y):F&&(B=F[0]+k.x,G=F[1]+k.y),Bi[4]-=B,Bi[5]-=G,yi(Bi,Bi,W),Bi[4]+=B,Bi[5]+=G}Zm(L,Bi)}(r,a,i,n,t,m,g);var y=m,b=Ao(g,f,x);h&&(L=m,N=h,y="right"===(P=v)?L-N[1]:"center"===P?L+N[3]/2-N[1]/2:L+N[3],b+=h[0]),b+=p/2,QM(r,n,!0,e);var _=d.canCacheByTextString,w=e.__tspanList||(e.__tspanList=[]),S=w.length;if(_&&e.__canCacheByTextString&&e.__text===o){if(e.__dirtyText&&S)for(var M=0;M<S;++M)eI(w[M],v,y,b+M*p)}else{e.__text=o,e.__canCacheByTextString=_;var T=d.lines,A=T.length;for(M=0;M<A;M++){var C=w[M],D=T[M];C?C.__zrText!==D&&(C.innerHTML="",C.appendChild(document.createTextNode(D))):(C=w[M]=fi("tspan"),r.appendChild(C),C.appendChild(document.createTextNode(D))),eI(C,v,y,b+M*p)}if(A<S){for(;M<S;M++)r.removeChild(w[M]);w.length=A}}}};function eI(e,t,n,i){dt(e,"dominant-baseline","middle"),dt(e,"text-anchor",zL[t]),dt(e,"x",n),dt(e,"y",i)}function jm(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function tI(){}function BL(e,t){for(var n=0,i=t.length,a=0,o=0;n<i;n++){var r=t[n];if(r.removed){for(s=[],l=o;l<o+r.count;l++)s.push(l);r.indices=s,o+=r.count}else{for(var s=[],l=a;l<a+r.count;l++)s.push(l);r.indices=s,a+=r.count,r.added||(o+=r.count)}}return t}nc.drawRectText=ic,nc.brush=function(e){null!=e.style.text?ic(e,!1):jm(e)},tI.prototype={diff:function(e,t,n){this.equals=n=n||function(p,m){return p===m};var i=this;e=e.slice();var a=(t=t.slice()).length,o=e.length,r=1,s=a+o,l=[{newPos:-1,components:[]}],u=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=a&&o<=u+1){for(var h=[],c=0;c<t.length;c++)h.push(c);return[{indices:h,count:t.length}]}function d(){for(var p=-1*r;p<=r;p+=2){var m,g=l[p-1],v=l[p+1],x=(v?v.newPos:0)-p;g&&(l[p-1]=void 0);var y=g&&g.newPos+1<a,b=v&&0<=x&&x<o;if(y||b){if(!y||b&&g.newPos<v.newPos?(m={newPos:(_=v).newPos,components:_.components.slice(0)},i.pushComponent(m.components,void 0,!0)):((m=g).newPos++,i.pushComponent(m.components,!0,void 0)),x=i.extractCommon(m,t,e,p),m.newPos+1>=a&&o<=x+1)return BL(0,m.components);l[p]=m}else l[p]=void 0}var _;r++}for(;r<=s;){var f=d();if(f)return f}},pushComponent:function(e,t,n){var i=e[e.length-1];i&&i.added===t&&i.removed===n?e[e.length-1]={count:i.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,i){for(var a=t.length,o=n.length,r=e.newPos,s=r-i,l=0;r+1<a&&s+1<o&&this.equals(t[r+1],n[s+1]);)r++,s++,l++;return l&&e.components.push({count:l}),e.newPos=r,s},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var VL=new tI;function rt(e,t,n,i,a){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=a||"_dom",this.nextId=0}function yo(e,t){rt.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function ol(e,t){rt.call(this,e,t,"clipPath","__clippath_in_use__")}function Sa(e,t){rt.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function nI(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function ac(e){return parseInt(e,10)}function iI(e,t){return t&&e&&t.parentNode!==e}function rl(e,t,n){if(iI(e,t)&&n){var i=n.nextSibling;i?e.insertBefore(t,i):e.appendChild(t)}}function aI(e,t){if(iI(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function oI(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function sl(e){return e.__textSvgEl}function ll(e){return e.__svgEl}function oc(e,t,n,i){this.root=e,this.storage=t,this._opts=n=fe({},n||{});var a=fi("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("version","1.1"),a.setAttribute("baseProfile","full"),a.style.cssText="user-select:none;position:absolute;left:0;top:0;";var o=fi("g");a.appendChild(o);var r=fi("g");a.appendChild(r),this.gradientManager=new yo(i,r),this.clipPathManager=new ol(i,r),this.shadowManager=new Sa(i,r);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=a,this._svgRoot=r,this._backgroundRoot=o,this._viewport=s,e.appendChild(s),s.appendChild(a),this.resize(n.width,n.height),this._visibleList=[]}rt.prototype.createElement=fi,rt.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(i){var a=n.children;if(!a)return!1;for(var o=a.length-1;0<=o;--o)if(a[o]===i)return!0;return!1}),n):null:n[0]},rt.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var i=this.add(e);i&&(e[this._domName]=i)}}},rt.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},rt.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},rt.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return I(this._tagNames,function(n){var i=e.getElementsByTagName(n);t=t.concat([].slice.call(i))}),t},rt.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;I(e,function(n){n[t._markLabel]="0"})},rt.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},rt.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),n=this;I(t,function(i){"1"!==i[n._markLabel]&&e.removeChild(i)})}},rt.prototype.getSvgProxy=function(e){return e instanceof Re?il:e instanceof Lt?JM:e instanceof Pe?nc:il},rt.prototype.getTextSvgElement=function(e){return e.__textSvgEl},rt.prototype.getSvgElement=function(e){return e.__svgEl},H(yo,rt),yo.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;I(["fill","stroke"],function(i){if(t.style[i]&&("linear"===t.style[i].type||"radial"===t.style[i].type)){var a,o=t.style[i],r=n.getDefs(!0);o._dom?(a=o._dom,r.contains(o._dom)||n.addDom(a)):a=n.add(o),n.markUsed(t);var s=a.getAttribute("id");e.setAttribute(i,"url(#"+s+")")}})}},yo.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},yo.prototype.update=function(e){var t=this;rt.prototype.update.call(this,e,function(){var n=e.type,i=e._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},yo.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,i=0,a=n.length;i<a;++i){var o=this.createElement("stop");o.setAttribute("offset",100*n[i].offset+"%");var r=n[i].color;if(-1<r.indexOf("rgba")){var s=un(r)[3],l=Ac(r);o.setAttribute("stop-color","#"+l),o.setAttribute("stop-opacity",s)}else o.setAttribute("stop-color",n[i].color);t.appendChild(o)}e._dom=t},yo.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&rt.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&rt.prototype.markUsed.call(this,t._dom)}},H(ol,rt),ol.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},ol.prototype.updateDom=function(e,t,n){if(t&&0<t.length){var i,a,o=this.getDefs(!0),r=t[0],s=n?"_textDom":"_dom";r[s]?(a=r[s].getAttribute("id"),o.contains(i=r[s])||o.appendChild(i)):(a="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",a),o.appendChild(i),r[s]=i);var l=this.getSvgProxy(r);if(r.transform&&r.parent.invTransform&&!n){var u=Array.prototype.slice.call(r.transform);Wi(r.transform,r.parent.invTransform,r.transform),l.brush(r),r.transform=u}else l.brush(r);var h=this.getSvgElement(r);i.innerHTML="",i.appendChild(h.cloneNode()),e.setAttribute("clip-path","url(#"+a+")"),1<t.length&&this.updateDom(i,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},ol.prototype.markUsed=function(e){var t=this;e.__clipPaths&&I(e.__clipPaths,function(n){n._dom&&rt.prototype.markUsed.call(t,n._dom),n._textDom&&rt.prototype.markUsed.call(t,n._textDom)})},H(Sa,rt),Sa.prototype.addWithoutUpdate=function(e,t){if(t&&nI(t.style)){var n;t._shadowDom?(n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n)):n=this.add(t),this.markUsed(t);var i=n.getAttribute("id");e.style.filter="url(#"+i+")"}},Sa.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},Sa.prototype.update=function(e,t){if(nI(t.style)){var n=this;rt.prototype.update.call(this,t,function(){n.updateDom(t,t._shadowDom)})}else this.remove(e,t)},Sa.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},Sa.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,a,o,r,s=e.style,l=e.scale&&e.scale[0]||1,u=e.scale&&e.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,a=s.shadowOffsetY||0,o=s.shadowBlur,r=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(t,s);i=s.textShadowOffsetX||0,a=s.textShadowOffsetY||0,o=s.textShadowBlur,r=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",a/u),n.setAttribute("flood-color",r),n.setAttribute("stdDeviation",o/2/l+" "+o/2/u),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(o/2*200)+"%"),t.setAttribute("height",Math.ceil(o/2*200)+"%"),t.appendChild(n),e._shadowDom=t},Sa.prototype.markUsed=function(e){e._shadowDom&&rt.prototype.markUsed.call(this,e._shadowDom)},oc.prototype={constructor:oc,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=fi("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,i=this._svgRoot,a=this._visibleList,o=e.length,r=[];for(t=0;t<o;t++){var s=e[t],l=(n=s)instanceof Re?il:n instanceof Lt?JM:n instanceof Pe?nc:il,u=ll(s)||sl(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(u,s)),s.__dirty=!1),r.push(s))}var h,c=VL.diff(a,r,void 0);for(t=0;t<c.length;t++)if((p=c[t]).removed)for(var d=0;d<p.count;d++){u=ll(s=a[p.indices[d]]);var f=sl(s);oI(i,u),oI(i,f)}for(t=0;t<c.length;t++){var p;if((p=c[t]).added)for(d=0;d<p.count;d++)u=ll(s=r[p.indices[d]]),f=sl(s),h?rl(i,u,h):aI(i,u),u?rl(i,f,u):h?rl(i,f,h):aI(i,f),rl(i,f,u),h=f||u||h,this.gradientManager.addWithoutUpdate(u||f,s),this.shadowManager.addWithoutUpdate(u||f,s),this.clipPathManager.markUsed(s);else if(!p.removed)for(d=0;d<p.count;d++)u=ll(s=r[p.indices[d]]),f=sl(s),u=ll(s),f=sl(s),this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(u||f,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(u||f,s),this.clipPathManager.markUsed(s),f&&rl(i,f,u),h=u||f||h}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=r},_getDefs:function(e){var t,n=this._svgDom;return 0!==(t=n.getElementsByTagName("defs")).length?t[0]:e?((t=n.insertBefore(fi("defs"),n.firstChild)).contains||(t.contains=function(i){var a=t.children;if(!a)return!1;for(var o=a.length-1;0<=o;--o)if(a[o]===i)return!0;return!1}),t):null},resize:function(e,t){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var a=n.style;a.width=e+"px",a.height=t+"px";var o=this._svgDom;o.setAttribute("width",e),o.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[i]||ac(s[n])||ac(r.style[n]))-(ac(s[a])||0)-(ac(s[o])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},I(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){oc.prototype[e]=function(){}}),xd("svg",oc),ae.version="4.9.0",ae.dependencies={zrender:"4.3.2"},ae.PRIORITY=ai,ae.init=function(e,t,n){var i=Nf(e);if(i)return i;var a=new ss(e,t,n);return a.id="ec_"+gT++,Ua[a.id]=a,tv(e,kf,a.id),function(o){var r="__connectUpdateStatus";function s(l,u){for(var h=0;h<l.length;h++)l[h][r]=u}Tt(Pu,function(l,u){o._messageCenter.on(u,function(h){if(Nu[o.group]&&0!==o[r]){if(h&&h.escapeConnect)return;var c=o.makeActionFromEvent(h),d=[];Tt(Ua,function(f){f!==o&&f.group===o.group&&d.push(f)}),s(d,0),Tt(d,function(f){1!==f[r]&&f.dispatchAction(c)}),s(d,2)}})})}(a),a},ae.connect=function(e){if(z(e)){var t=e;e=null,Tt(t,function(n){null!=n.group&&(e=n.group)}),e=e||"g_"+mT++,Tt(t,function(n){n.group=e})}return Nu[e]=!0,e},ae.disConnect=f1,ae.disconnect=vT,ae.dispose=function(e){"string"==typeof e?e=Ua[e]:e instanceof ss||(e=Nf(e)),e instanceof ss&&!e.isDisposed()&&e.dispose()},ae.getInstanceByDom=Nf,ae.getInstanceById=function(e){return Ua[e]},ae.registerTheme=Ef,ae.registerPreprocessor=zt,ae.registerProcessor=fn,ae.registerPostUpdate=function(e){c1.push(e)},ae.registerAction=Be,ae.registerCoordinateSystem=Of,ae.getCoordinateSystemDimensions=function(e){var t=Gt.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},ae.registerLayout=ct,ae.registerVisual=et,ae.registerLoading=p1,ae.extendComponentModel=pn,ae.extendComponentView=At,ae.extendSeriesModel=Eu,ae.extendChartView=an,ae.setCanvasCreator=function(e){Mt("createCanvas",e)},ae.registerMap=function(e,t,n){!function(e,t,n){var i;I(i=z(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:n}]),function(a){var o=a.type;"geoJson"===o&&(o=a.type="geoJSON"),(0,cT[o])(a)}),t1.set(e,i)}(e,t,n)},ae.getMap=function(e){var t=Au_retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},ae.dataTool={},ae.zrender=GI,ae.number=S2,ae.format=T2,ae.throttle=_u,ae.helper=HT,ae.matrix=mI,ae.vector=uI,ae.color=xI,ae.parseGeoJSON=Qf,ae.parseGeoJson=XT,ae.util=ex,ae.graphic=tx,ae.List=Ct,ae.Model=ze,ae.Axis=_t,ae.env=he}),function(ae,Me){"function"==typeof define&&define.amd?define([],Me):"object"==typeof module&&module.exports?module.exports=Me():Me()}(0,function(){"use strict";"undefined"!=typeof global?global:this||window,document,document;var ee="parentNode",mt=new function(){this.pageScrollElement="html, body",this.$body=document.getElementsByTagName("body"),this.setUserOS=function(){var $="";-1!=navigator.appVersion.indexOf("Win")&&($="windows"),-1!=navigator.appVersion.indexOf("Mac")&&($="mac"),-1!=navigator.appVersion.indexOf("X11")&&($="unix"),-1!=navigator.appVersion.indexOf("Linux")&&($="linux"),addClass(this.$body,$)},this.setUserAgent=function(){navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i)?addClass(this.$body,"mobile"):(this.addClass(this.$body,"desktop"),navigator.userAgent.match(/MSIE 9.0/)&&addClass(this.$body,"ie9"))},this.isVisibleXs=function(){var $=document.getElementById("pg-visible-xs");if(!$){var te=document.createElement("div");te.className="visible-xs",te.setAttribute("id","pg-visible-xs"),this.$body[0].appendChild(te),$=document.getElementById("pg-visible-xs")}return!(0===$.offsetWidth&&0===$.offsetHeight)},this.isVisibleSm=function(){var $=document.getElementById("pg-visible-sm");if(!$){var te=document.createElement("div");te.className="visible-sm",te.setAttribute("id","pg-visible-sm"),this.$body[0].appendChild(te),$=document.getElementById("pg-visible-sm")}return!(0===$.offsetWidth&&0===$.offsetHeight)},this.isVisibleMd=function(){var $=document.getElementById("pg-visible-md");if(!$){var te=document.createElement("div");te.className="visible-md",te.setAttribute("id","pg-visible-sm"),this.$body[0].appendChild(te),$=document.getElementById("pg-visible-md")}return!(0===$.offsetWidth&&0===$.offsetHeight)},this.isVisibleLg=function(){var $=document.getElementById("pg-visible-lg"),te=document.createElement("div");return te.className="visible-lg",te.setAttribute("id","pg-visible-lg"),$||(this.$body[0].appendChild(te),$=document.getElementById("pg-visible-lg")),!(0===$.offsetWidth&&0===$.offsetHeight)},this.getUserAgent=function(){return this.hasClass(document.getElementsByTagName("body"),"mobile")?"mobile":"desktop"},this.setFullScreen=function($){var te=$.requestFullScreen||$.webkitRequestFullScreen||$.mozRequestFullScreen||$.msRequestFullscreen;if(te)te.call($);else if(void 0!==window.ActiveXObject){var me=new ActiveXObject("WScript.Shell");null!==me&&me.SendKeys("{F11}")}},this.getColor=function(lt,te){te=parseFloat(te)||1;var me="",it="";document.querySelectorAll(".pg-colors").length?me=document.querySelector(".pg-colors"):((me=document.createElement("div")).className="pg-colors",document.getElementsByTagName("body")[0].appendChild(me)),me.querySelectorAll('[data-color="'+lt+'"]').length?it=document.querySelector('[data-color="'+lt+'"]'):((it=document.createElement("div")).className="bg-"+lt,it.dataset.color=lt,me.appendChild(it));var ye=(lt=(window.getComputedStyle?window.getComputedStyle(it):it.currentStyle).backgroundColor).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(null!=ye)return"rgba("+ye[1]+", "+ye[2]+", "+ye[3]+", "+te+")"},this.initializeDataAPI=function($,te,me){for(var it=0;it<me.length;it++)new te(me[it])},this.hasClass=function($,te){return $.classList?$.classList.contains(te):new RegExp("\\b"+te+"\\b").test($.className)},this.addClass=function($,te){$.classList?$.classList.add(te):this.hasClass($,te)||($.className+=" "+te)},this.removeClass=function($,te){$.classList?$.classList.remove(te):$.className=$.className.replace(new RegExp("\\b"+te+"\\b","g"),"")},this.toggleClass=function($,te){this.hasClass($,te)?this.removeClass($,te):this.addClass($,te)},this.wrap=function($,te){$.parentNode.insertBefore(te,$),te.appendChild($)},this.wrapAll=function($,te){for(var me=$[0].parentNode,it=$[0].previousSibling,pt=0;$.length-pt;te.firstChild===$[0]&&pt++)te.appendChild($[pt]);return me.insertBefore(te,it?it.nextSibling:me.firstChild),te},this.addEvent=function($,te,me){$.attachEvent?$.attachEvent("on"+te,me):$.addEventListener(te,me)},this.removeEvent=function($,te,me){$.detachEvent?$.detachEvent("on"+te,me):$.removeEventListener(te,me)},this.getElementsByClassName=function($,te){return[].slice.call($.getElementsByClassName(te))},this.queryElement=function($,te){var me=te||document;return"object"==typeof $?$:me.querySelector($)},this.getClosest=function($,te){for(var me=te.charAt(0);$&&$!==document;$=$[ee])if("."===me){if(null!==queryElement(te,$[ee])&&hasClass($,te.replace(".","")))return $}else if("#"===me&&$.id===te.substr(1))return $;return!1},this.extend=function($,te){for(var me in te)te.hasOwnProperty(me)&&($[me]=te[me]);return $},this.isTouchDevice=function(){return"ontouchstart"in document.documentElement},this.on=function($,te,me){$.addEventListener(te,me,!1)},this.off=function($,te,me){$.removeEventListener(te,me,!1)},this.one=function($,te,me){on($,te,function it(pt){me(pt),off($,te,it)})},this.live=function($,te,me,it){this.addEvent(it||document,te,function(pt){for(var lt,ye=pt.target||pt.srcElement;ye&&ye.matches&&ye!==it&&!(lt=ye.matches($));)ye=ye.parentElement;lt&&me.call(ye,pt)})},this.isVisible=function($){return $.offsetWidth>0||$.offsetHeight>0}};window.pg=mt}),window.Modernizr=function(ae,Me,Ze){function we(V,z){return typeof V===z}function Ue(V,z){return!!~(""+V).indexOf(z)}function _e(V,z){for(var ee in V){var q=V[ee];if(!Ue(q,"-")&&pe[q]!==Ze)return"pfx"!=z||q}return!1}function qe(V,z,ee){var q=V.charAt(0).toUpperCase()+V.slice(1),X=(V+" "+_n.join(q+" ")+q).split(" ");return we(z,"string")||we(z,"undefined")?_e(X,z):function Ie(V,z,ee){for(var q in V){var X=z[V[q]];if(X!==Ze)return!1===ee?V[q]:we(X,"function")?X.bind(ee||z):X}return!1}(X=(V+" "+ft.join(q+" ")+q).split(" "),z,ee)}var O,ve,Se={},Ke=Me.documentElement,Mt="modernizr",ue=Me.createElement(Mt),pe=ue.style,ie=" -webkit- -moz- -o- -ms- ".split(" "),Ut="Webkit Moz O ms",_n=Ut.split(" "),ft=Ut.toLowerCase().split(" "),E={},J=[],I=J.slice,oe=function(V,z,ee,q){var X,Oe,ge,Te,ke=Me.createElement("div"),Ne=Me.body,De=Ne||Me.createElement("body");if(parseInt(ee,10))for(;ee--;)(ge=Me.createElement("div")).id=q?q[ee]:Mt+(ee+1),ke.appendChild(ge);return X=["&#173;",'<style id="s',Mt,'">',V,"</style>"].join(""),ke.id=Mt,(Ne?ke:De).innerHTML+=X,De.appendChild(ke),Ne||(De.style.background="",De.style.overflow="hidden",Te=Ke.style.overflow,Ke.style.overflow="hidden",Ke.appendChild(De)),Oe=z(ke,V),Ne?ke.parentNode.removeChild(ke):(De.parentNode.removeChild(De),Ke.style.overflow=Te),!!Oe},se={}.hasOwnProperty;for(var Z in ve=we(se,"undefined")||we(se.call,"undefined")?function(V,z){return z in V&&we(V.constructor.prototype[z],"undefined")}:function(V,z){return se.call(V,z)},Function.prototype.bind||(Function.prototype.bind=function(V){var z=this;if("function"!=typeof z)throw new TypeError;var ee=I.call(arguments,1),q=function(){if(this instanceof q){var X=function(){};X.prototype=z.prototype;var Oe=new X,ge=z.apply(Oe,ee.concat(I.call(arguments)));return Object(ge)===ge?ge:Oe}return z.apply(V,ee.concat(I.call(arguments)))};return q}),E.touch=function(){var V;return"ontouchstart"in ae||ae.DocumentTouch&&Me instanceof DocumentTouch?V=!0:oe(["@media (",ie.join("touch-enabled),("),Mt,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(z){V=9===z.offsetTop}),V},E.csstransforms3d=function(){var V=!!qe("perspective");return V&&"webkitPerspective"in Ke.style&&oe("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(z,ee){V=9===z.offsetLeft&&3===z.offsetHeight}),V},E.csstransitions=function(){return qe("transition")},E)ve(E,Z)&&(O=Z.toLowerCase(),Se[O]=E[Z](),J.push((Se[O]?"":"no-")+O));return Se.addTest=function(V,z){if("object"==typeof V)for(var ee in V)ve(V,ee)&&Se.addTest(ee,V[ee]);else{if(V=V.toLowerCase(),Se[V]!==Ze)return Se;z="function"==typeof z?z():z,Ke.className+=" "+(z?"":"no-")+V,Se[V]=z}return Se},function he(V){pe.cssText=V}(""),ue=null,function(V,z){function q(){var ye=lt.elements;return"string"==typeof ye?ye.split(" "):ye}function X(ye){var ne=it[ye[te]];return ne||(ne={},me++,ye[te]=me,it[me]=ne),ne}function Oe(ye,ne,at){return ne||(ne=z),pt?ne.createElement(ye):(at||(at=X(ne)),!(We=at.cache[ye]?at.cache[ye].cloneNode():mt.test(ye)?(at.cache[ye]=at.createElem(ye)).cloneNode():at.createElem(ye)).canHaveChildren||Qe.test(ye)||We.tagUrn?We:at.frag.appendChild(We));var We}function ke(ye){ye||(ye=z);var ne=X(ye);return lt.shivCSS&&!$&&!ne.hasCSS&&(ne.hasCSS=!!function ee(ye,ne){var at=ye.createElement("p"),We=ye.getElementsByTagName("head")[0]||ye.documentElement;return at.innerHTML="x<style>"+ne+"</style>",We.insertBefore(at.lastChild,We.firstChild)}(ye,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),pt||function Te(ye,ne){ne.cache||(ne.cache={},ne.createElem=ye.createElement,ne.createFrag=ye.createDocumentFragment,ne.frag=ne.createFrag()),ye.createElement=function(at){return lt.shivMethods?Oe(at,ye,ne):ne.createElem(at)},ye.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+q().join().replace(/[\w\-]+/g,function(at){return ne.createElem(at),ne.frag.createElement(at),'c("'+at+'")'})+");return n}")(lt,ne.frag)}(ye,ne),ye}var $,pt,De=V.html5||{},Qe=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,mt=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,te="_html5shiv",me=0,it={};!function(){try{var ye=z.createElement("a");ye.innerHTML="<xyz></xyz>",$="hidden"in ye,pt=1==ye.childNodes.length||function(){z.createElement("a");var ne=z.createDocumentFragment();return void 0===ne.cloneNode||void 0===ne.createDocumentFragment||void 0===ne.createElement}()}catch(ne){$=!0,pt=!0}}();var lt={elements:De.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==De.shivCSS,supportsUnknownElements:pt,shivMethods:!1!==De.shivMethods,type:"default",shivDocument:ke,createElement:Oe,createDocumentFragment:function ge(ye,ne){if(ye||(ye=z),pt)return ye.createDocumentFragment();for(var at=(ne=ne||X(ye)).frag.cloneNode(),We=0,cl=q(),dl=cl.length;We<dl;We++)at.createElement(cl[We]);return at}};V.html5=lt,ke(z)}(this,Me),Se._version="2.8.3",Se._prefixes=ie,Se._domPrefixes=ft,Se._cssomPrefixes=_n,Se.testProp=function(V){return _e([V])},Se.testAllProps=qe,Se.testStyles=oe,Se.prefixed=function(V,z,ee){return z?qe(V,z,ee):qe(V,"pfx")},Ke.className=Ke.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+J.join(" "),Se}(this,this.document),function(ae,Me,Ze){function he(O){return"[object Function]"==Ke.call(O)}function Ee(O){return"string"==typeof O}function we(){}function Ue(O){return!O||"loaded"==O||"complete"==O||"uninitialized"==O}function _e(){var O=Mt.shift();ue=1,O?O.t?Se(function(){("c"==O.t?I.injectCss:I.injectJs)(O.s,0,O.a,O.x,O.e,1)},0):(O(),_e()):ue=0}function qe(O,oe,se,ve,Z){return ue=0,oe=oe||"j",Ee(O)?function Ie(O,oe,se,ve,Z,V,q){function ee(ke){if(!Oe&&Ue(X.readyState)&&(Te.r=Oe=1,!ue&&_e(),X.onload=X.onreadystatechange=null,ke))for(var Ne in"img"!=O&&Se(function(){fe.removeChild(X)},50),H[oe])H[oe].hasOwnProperty(Ne)&&H[oe][Ne].onload()}q=q||I.errorTimeout;var X=Me.createElement(O),Oe=0,ge=0,Te={t:se,s:oe,e:Z,a:V,x:q};1===H[oe]&&(ge=1,H[oe]=[]),"object"==O?X.data=oe:(X.src=oe,X.type=O),X.width=X.height="0",X.onerror=X.onload=X.onreadystatechange=function(){ee.call(this,ge)},Mt.splice(ve,0,Te),"img"!=O&&(ge||2===H[oe]?(fe.insertBefore(X,ln?null:Ce),Se(ee,q)):H[oe].push(X))}("c"==oe?_n:Ut,O,oe,this.i++,se,ve,Z):(Mt.splice(this.i++,0,O),1==Mt.length&&_e()),this}function st(){var O=I;return O.loader={load:qe,i:0},O}var J,I,ie=Me.documentElement,Se=ae.setTimeout,Ce=Me.getElementsByTagName("script")[0],Ke={}.toString,Mt=[],ue=0,pe="MozAppearance"in ie.style,ln=pe&&!!Me.createRange().compareNode,fe=ln?ie:Ce.parentNode,Ut=(ie=ae.opera&&"[object Opera]"==Ke.call(ae.opera),ie=!!Me.attachEvent&&!ie,pe?"object":ie?"script":"img"),_n=ie?"script":Ut,ft=Array.isArray||function(O){return"[object Array]"==Ke.call(O)},E=[],H={},j={timeout:function(O,oe){return oe.length&&(O.timeout=oe[0]),O}};I=function(O){function se(ee,q,X,Oe,ge){var Te=function oe(q){q=q.split("!");var Te,ke,Ne,X=E.length,ge=q.pop(),Oe=q.length;for(ge={url:ge,origUrl:ge,prefixes:q},ke=0;ke<Oe;ke++)Ne=q[ke].split("="),(Te=j[Ne.shift()])&&(ge=Te(ge,Ne));for(ke=0;ke<X;ke++)ge=E[ke](ge);return ge}(ee),ke=Te.autoCallback;Te.url.split(".").pop().split("?").shift(),Te.bypass||(q&&(q=he(q)?q:q[ee]||q[Oe]||q[ee.split("/").pop().split("?")[0]]),Te.instead?Te.instead(ee,q,X,Oe,ge):(H[Te.url]?Te.noexec=!0:H[Te.url]=1,X.load(Te.url,Te.forceCSS||!Te.forceJS&&"css"==Te.url.split(".").pop().split("?").shift()?"c":void 0,Te.noexec,Te.attrs,Te.timeout),(he(q)||he(ke))&&X.load(function(){st(),q&&q(Te.origUrl,ge,Oe),ke&&ke(Te.origUrl,ge,Oe),H[Te.url]=2})))}function ve(ee,q){function X(mt,$){if(mt){if(Ee(mt))$||(Te=function(){var te=[].slice.call(arguments);ke.apply(this,te),Ne()}),se(mt,Te,q,0,Oe);else if(Object(mt)===mt)for(Qe in De=function(){var me,te=0;for(me in mt)mt.hasOwnProperty(me)&&te++;return te}(),mt)mt.hasOwnProperty(Qe)&&(!$&&!--De&&(he(Te)?Te=function(){var te=[].slice.call(arguments);ke.apply(this,te),Ne()}:Te[Qe]=function(te){return function(){var me=[].slice.call(arguments);te&&te.apply(this,me),Ne()}}(ke[Qe])),se(mt[Qe],Te,q,Qe,Oe))}else!$&&Ne()}var De,Qe,Oe=!!ee.test,ge=ee.load||ee.both,Te=ee.callback||we,ke=Te,Ne=ee.complete||we;X(Oe?ee.yep:ee.nope,!!ge),ge&&X(ge)}var Z,V,z=this.yepnope.loader;if(Ee(O))se(O,0,z,0);else if(ft(O))for(Z=0;Z<O.length;Z++)Ee(V=O[Z])?se(V,0,z,0):ft(V)?I(V):Object(V)===V&&ve(V,z);else Object(O)===O&&ve(O,z)},I.addPrefix=function(O,oe){j[O]=oe},I.addFilter=function(O){E.push(O)},I.errorTimeout=1e4,null==Me.readyState&&Me.addEventListener&&(Me.readyState="loading",Me.addEventListener("DOMContentLoaded",J=function(){Me.removeEventListener("DOMContentLoaded",J,0),Me.readyState="complete"},0)),ae.yepnope=st(),ae.yepnope.executeStack=_e,ae.yepnope.injectJs=function(O,oe,se,X,Z,V){var ee,q,z=Me.createElement("script");for(q in X=X||I.errorTimeout,z.src=O,se)z.setAttribute(q,se[q]);oe=V?_e:oe||we,z.onreadystatechange=z.onload=function(){!ee&&Ue(z.readyState)&&(ee=1,oe(),z.onload=z.onreadystatechange=null)},Se(function(){ee||(ee=1,oe(1))},X),Z?z.onload():Ce.parentNode.insertBefore(z,Ce)},ae.yepnope.injectCss=function(O,q,se,z,Z,V){var ee;for(ee in q=V?_e:q||we,(z=Me.createElement("link")).href=O,z.rel="stylesheet",z.type="text/css",se)z.setAttribute(ee,se[ee]);Z||(Ce.parentNode.insertBefore(z,Ce),Se(q,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(ae){"use strict";function Me(_e){return new RegExp("(^|\\s+)"+_e+"(\\s+|$)")}var Ze,he,Ee;function we(_e,Ie){(Ze(_e,Ie)?Ee:he)(_e,Ie)}"classList"in document.documentElement?(Ze=function(_e,Ie){return _e.classList.contains(Ie)},he=function(_e,Ie){_e.classList.add(Ie)},Ee=function(_e,Ie){_e.classList.remove(Ie)}):(Ze=function(_e,Ie){return Me(Ie).test(_e.className)},he=function(_e,Ie){Ze(_e,Ie)||(_e.className=_e.className+" "+Ie)},Ee=function(_e,Ie){_e.className=_e.className.replace(Me(Ie)," ")});var Ue={hasClass:Ze,addClass:he,removeClass:Ee,toggleClass:we,has:Ze,add:he,remove:Ee,toggle:we};"function"==typeof define&&define.amd?define(Ue):ae.classie=Ue}(window),function(ae){"use strict";var Ze={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],he_transitions=Modernizr.csstransitions;function Ee(Ue,_e){for(var Ie in _e)_e.hasOwnProperty(Ie)&&(Ue[Ie]=_e[Ie]);return Ue}function we(Ue,_e){this.el=Ue,this.options=Ee({},this.options),Ee(this.options,_e),this._init()}we.prototype.options={onSubmit:function(){return!1}},we.prototype._init=function(){this.current=0,this.questions=[].slice.call(this.el.querySelectorAll("ol.questions > li")),this.questionsCount=this.questions.length,classie.addClass(this.questions[0],"current"),this.ctrlNext=this.el.querySelector("button.next"),this.progress=this.el.querySelector("div.progress"),this.questionStatus=this.el.querySelector("span.number"),this.currentNum=this.questionStatus.querySelector("span.number-current"),this.currentNum.innerHTML=Number(this.current+1),this.totalQuestionNum=this.questionStatus.querySelector("span.number-total"),this.totalQuestionNum.innerHTML=this.questionsCount,this.error=this.el.querySelector("span.error-message"),this._initEvents()},we.prototype._initEvents=function(){var Ue=this,_e=this.questions[this.current].querySelector("input"),Ie=function(){_e.removeEventListener("focus",Ie),classie.addClass(Ue.ctrlNext,"show")};_e.addEventListener("focus",Ie),this.ctrlNext.addEventListener("click",function(qe){qe.preventDefault(),Ue._nextQuestion()}),this.el.addEventListener("keydown",function(qe){13===(qe.keyCode||qe.which)&&(qe.preventDefault(),Ue._nextQuestion())}),this.el.addEventListener("keydown",function(qe){9===(qe.keyCode||qe.which)&&qe.preventDefault()})},we.prototype._nextQuestion=function(){if(!this._validade())return!1;this.current===this.questionsCount-1&&(this.isFilled=!0),this._clearError();var Ue=this.questions[this.current];if(++this.current,this._progress(),!this.isFilled){this._updateQuestionNumber(),classie.addClass(this.el,"show-next");var _e=this.questions[this.current];classie.removeClass(Ue,"current"),classie.addClass(_e,"current")}var Ie=this,qe=function(st){he_transitions&&this.removeEventListener(Ze,qe),Ie.isFilled?Ie._submit():(classie.removeClass(Ie.el,"show-next"),Ie.currentNum.innerHTML=Ie.nextQuestionNum.innerHTML,Ie.questionStatus.removeChild(Ie.nextQuestionNum),_e.querySelector("input").focus())};he_transitions?this.progress.addEventListener(Ze,qe):qe()},we.prototype._progress=function(){this.progress.style.width=this.current*(100/this.questionsCount)+"%"},we.prototype._updateQuestionNumber=function(){this.nextQuestionNum=document.createElement("span"),this.nextQuestionNum.className="number-next",this.nextQuestionNum.innerHTML=Number(this.current+1),this.questionStatus.appendChild(this.nextQuestionNum)},we.prototype._submit=function(){this.options.onSubmit(this.el)},we.prototype._validade=function(){return""!==this.questions[this.current].querySelector("input").value||(this._showError("EMPTYSTR"),!1)},we.prototype._showError=function(Ue){var _e="";switch(Ue){case"EMPTYSTR":_e="Please fill the field before continuing";break;case"INVALIDEMAIL":_e="Please fill a valid email address"}this.error.innerHTML=_e,classie.addClass(this.error,"show")},we.prototype._clearError=function(){classie.removeClass(this.error,"show")},ae.stepsForm=we}(window),function(ae){"use strict";var Me,Ze,E,H;H=ae.cancelAnimationFrame||ae.webkitCancelAnimationFrame||ae.mozCancelAnimationFrame||ae.oCancelAnimationFrame||ae.msCancelAnimationFrame,(E=ae.requestAnimationFrame||ae.webkitRequestAnimationFrame||ae.mozRequestAnimationFrame||ae.oRequestAnimationFrame||ae.msRequestAnimationFrame)&&H?(Me=function(j){var J={value:null};return function I(){J.value=E(I),j()}(),J},Ze=function(j){H(j.value)}):(Me=setInterval,Ze=clearInterval);var Ee=.08,we=2*Math.PI,Ue=2/Math.sqrt(2);function Ie(E,H,j,J,I){E.beginPath(),E.moveTo(H,j),E.lineTo(J,I),E.stroke()}function qe(E,H,j,J,I,O,oe,se){var ve=Math.cos(H*we);!function _e(E,H,j,J){E.beginPath(),E.arc(H,j,J,0,we,!1),E.fill()}(E,j-Math.sin(H*we)*I,J+ve*O+.5*(se-=oe),oe+(1-.5*ve)*se)}function st(E,H,j,J,I,O,oe,se){var ve;for(ve=5;ve--;)qe(E,H+ve/5,j,J,I,O,oe,se)}function Se(E,H,j,J,I,O,oe){H/=3e4;var se=.21*I,ve=.12*I,Z=.24*I,V=.28*I;E.fillStyle=oe,st(E,H,j,J,se,ve,Z,V),E.globalCompositeOperation="destination-out",st(E,H,j,J,se,ve,Z-O,V-O),E.globalCompositeOperation="source-over"}function Ce(E,H,j,J,I,O,oe){H/=12e4;var V,z,ee,q,se=.25*I-.5*O,ve=.32*I+.5*O,Z=.5*I-.5*O;for(E.strokeStyle=oe,E.lineWidth=O,E.lineCap="round",E.lineJoin="round",E.beginPath(),E.arc(j,J,se,0,we,!1),E.stroke(),V=8;V--;)z=(H+V/8)*we,Ie(E,j+(ee=Math.cos(z))*ve,J+(q=Math.sin(z))*ve,j+ee*Z,J+q*Z)}function Ke(E,H,j,J,I,O,oe){var se=.29*I-.5*O,ve=.05*I,Z=Math.cos((H/=15e3)*we),V=Z*we/-16;E.strokeStyle=oe,E.lineWidth=O,E.lineCap="round",E.lineJoin="round",j+=Z*ve,E.beginPath(),E.arc(j,J,se,V+we/8,V+7*we/8,!1),E.arc(j+Math.cos(V)*se*Ue,J+Math.sin(V)*se*Ue,se,V+5*we/8,V+3*we/8,!0),E.closePath(),E.stroke()}var fe=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],ie=[{start:.36,end:.11},{start:.56,end:.16}];function _n(E,H,j,J,I,O,oe,se,ve){var q,X,Oe,ge,Z=fe[oe],V=((H/=2500)+oe-ie[oe].start)%se,z=(H+oe-ie[oe].end)%se,ee=(H+oe)%se;if(E.strokeStyle=ve,E.lineWidth=O,E.lineCap="round",E.lineJoin="round",V<1){if(E.beginPath(),V*=Z.length/2-1,V-=q=Math.floor(V),q*=2,E.moveTo(j+(Z[(q+=2)-2]*(1-V)+Z[q]*V)*I,J+(Z[q-1]*(1-V)+Z[q+1]*V)*I),z<1){for(z*=Z.length/2-1,z-=X=Math.floor(z),X*=2,X+=2,ge=q;ge!==X;ge+=2)E.lineTo(j+Z[ge]*I,J+Z[ge+1]*I);E.lineTo(j+(Z[X-2]*(1-z)+Z[X]*z)*I,J+(Z[X-1]*(1-z)+Z[X+1]*z)*I)}else for(ge=q;ge!==Z.length;ge+=2)E.lineTo(j+Z[ge]*I,J+Z[ge+1]*I);E.stroke()}else if(z<1){for(E.beginPath(),z*=Z.length/2-1,z-=X=Math.floor(z),X*=2,X+=2,E.moveTo(j+Z[0]*I,J+Z[1]*I),ge=2;ge!==X;ge+=2)E.lineTo(j+Z[ge]*I,J+Z[ge+1]*I);E.lineTo(j+(Z[X-2]*(1-z)+Z[X]*z)*I,J+(Z[X-1]*(1-z)+Z[X+1]*z)*I),E.stroke()}ee<1&&(ee*=Z.length/2-1,ee-=Oe=Math.floor(ee),Oe*=2,function Ut(E,H,j,J,I,O,oe){var se=I/8,ve=se/3,Z=2*ve,V=H%1*we,z=Math.cos(V),ee=Math.sin(V);E.fillStyle=oe,E.strokeStyle=oe,E.lineWidth=O,E.lineCap="round",E.lineJoin="round",E.beginPath(),E.arc(j,J,se,V,V+Math.PI,!1),E.arc(j-ve*z,J-ve*ee,Z,V+Math.PI,V,!1),E.arc(j+Z*z,J+Z*ee,ve,V+Math.PI,V,!0),E.globalCompositeOperation="destination-out",E.fill(),E.globalCompositeOperation="source-over",E.stroke()}(E,H,j+(Z[(Oe+=2)-2]*(1-ee)+Z[Oe]*ee)*I,J+(Z[Oe-1]*(1-ee)+Z[Oe+1]*ee)*I,I,O,ve))}var ft=function(E){this.list=[],this.interval=null,this.color=E&&E.color?E.color:"black",this.resizeClear=!(!E||!E.resizeClear)};ft.CLEAR_DAY=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);Ce(E,H,.5*J,.5*I,O,O*Ee,j)},ft.CLEAR_NIGHT=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);Ke(E,H,.5*J,.5*I,O,O*Ee,j)},ft.PARTLY_CLOUDY_DAY=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);Ce(E,H,.625*J,.375*I,.75*O,O*Ee,j),Se(E,H,.375*J,.625*I,.75*O,O*Ee,j)},ft.PARTLY_CLOUDY_NIGHT=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);Ke(E,H,.667*J,.375*I,.75*O,O*Ee,j),Se(E,H,.375*J,.625*I,.75*O,O*Ee,j)},ft.CLOUDY=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);Se(E,H,.5*J,.5*I,O,O*Ee,j)},ft.RAIN=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);(function Mt(E,H,j,J,I,O,oe){H/=1350;var V,z,ee,q,se=.16*I,ve=11*we/12,Z=7*we/12;for(E.fillStyle=oe,V=4;V--;)ee=j+(V-1.5)/1.5*(1===V||2===V?-1:1)*se,q=J+(z=(H+V/4)%1)*z*I,E.beginPath(),E.moveTo(ee,q-1.5*O),E.arc(ee,q,.75*O,ve,Z,!1),E.fill()})(E,H,.5*J,.37*I,.9*O,O*Ee,j),Se(E,H,.5*J,.37*I,.9*O,O*Ee,j)},ft.SLEET=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);(function ue(E,H,j,J,I,O,oe){H/=750;var ve,Z,V,z,se=.1875*I;for(E.strokeStyle=oe,E.lineWidth=.5*O,E.lineCap="round",E.lineJoin="round",ve=4;ve--;)Z=(H+ve/4)%1,Ie(E,V=Math.floor(j+(ve-1.5)/1.5*(1===ve||2===ve?-1:1)*se)+.5,(z=J+Z*I)-1.5*O,V,z+1.5*O)})(E,H,.5*J,.37*I,.9*O,O*Ee,j),Se(E,H,.5*J,.37*I,.9*O,O*Ee,j)},ft.SNOW=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);(function pe(E,H,j,J,I,O,oe){var ke,Ne,De,Qe,se=.16*I,ve=.75*O,Z=(H/=3e3)*we*.7,V=Math.cos(Z)*ve,z=Math.sin(Z)*ve,ee=Z+we/3,q=Math.cos(ee)*ve,X=Math.sin(ee)*ve,Oe=Z+2*we/3,ge=Math.cos(Oe)*ve,Te=Math.sin(Oe)*ve;for(E.strokeStyle=oe,E.lineWidth=.5*O,E.lineCap="round",E.lineJoin="round",ke=4;ke--;)Ne=(H+ke/4)%1,Ie(E,(De=j+Math.sin((Ne+ke/4)*we)*se)-V,(Qe=J+Ne*I)-z,De+V,Qe+z),Ie(E,De-q,Qe-X,De+q,Qe+X),Ie(E,De-ge,Qe-Te,De+ge,Qe+Te)})(E,H,.5*J,.37*I,.9*O,O*Ee,j),Se(E,H,.5*J,.37*I,.9*O,O*Ee,j)},ft.WIND=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I);_n(E,H,.5*J,.5*I,O,O*Ee,0,2,j),_n(E,H,.5*J,.5*I,O,O*Ee,1,2,j)},ft.FOG=function(E,H,j){var J=E.canvas.width,I=E.canvas.height,O=Math.min(J,I),oe=O*Ee;(function ln(E,H,j,J,I,O,oe){H/=3e4;var se=.21*I,ve=.06*I,Z=.21*I,V=.28*I;E.fillStyle=oe,st(E,H,j,J,se,ve,Z,V),E.globalCompositeOperation="destination-out",st(E,H,j,J,se,ve,Z-O,V-O),E.globalCompositeOperation="source-over"})(E,H,.5*J,.32*I,.75*O,oe,j),H/=5e3;var se=Math.cos(H*we)*O*.02,ve=Math.cos((H+.25)*we)*O*.02,Z=Math.cos((H+.5)*we)*O*.02,V=Math.cos((H+.75)*we)*O*.02,z=.936*I,ee=Math.floor(z-.5*oe)+.5,q=Math.floor(z-2.5*oe)+.5;E.strokeStyle=j,E.lineWidth=oe,E.lineCap="round",E.lineJoin="round",Ie(E,se+.2*J+.5*oe,ee,ve+.8*J-.5*oe,ee),Ie(E,Z+.2*J+.5*oe,q,V+.8*J-.5*oe,q)},ft.prototype={_determineDrawingFunction:function(E){return"string"==typeof E&&(E=ft[E.toUpperCase().replace(/-/g,"_")]||null),E},add:function(E,H){var j;"string"==typeof E&&(E=document.getElementById(E)),null!==E&&"function"==typeof(H=this._determineDrawingFunction(H))&&(j={element:E,context:E.getContext("2d"),drawing:H},this.list.push(j),this.draw(j,500))},set:function(E,H){var j;for("string"==typeof E&&(E=document.getElementById(E)),j=this.list.length;j--;)if(this.list[j].element===E)return this.list[j].drawing=this._determineDrawingFunction(H),void this.draw(this.list[j],500);this.add(E,H)},remove:function(E){var H;for("string"==typeof E&&(E=document.getElementById(E)),H=this.list.length;H--;)if(this.list[H].element===E)return void this.list.splice(H,1)},draw:function(E,H){var j=E.context.canvas;this.resizeClear?j.width=j.width:E.context.clearRect(0,0,j.width,j.height),E.drawing(E.context,H,this.color)},play:function(){var E=this;this.pause(),this.interval=Me(function(){var j,H=Date.now();for(j=E.list.length;j--;)E.draw(E.list[j],H)},1e3/60)},pause:function(){this.interval&&(Ze(this.interval),this.interval=null)}},ae.Skycons=ft}(this);